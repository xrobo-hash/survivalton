{"version":3,"sources":["../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/AAModelLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/AnimationCtrl.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/AnimationTrack.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/audioManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/AwardInfoLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/BackHomeLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/BackLifeLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/BackMaplLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/BaseLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/BaseUILayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/beHaviorComponent.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/BlessLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/BlessResultLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/blockArrow.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/engine/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/engine/BoxColliderUtil.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/BoxMonsterLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/BtnLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1011.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/bullet10170.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/bullet10180.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/bullet10190.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/bullet10200.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1021.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1031.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1041.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1042.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1051.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1052.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1061.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1071.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1081.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1091.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1101.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1102.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet1103.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet12.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet13.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet14.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/bullet16.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet17.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet18.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet19.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet20.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet21.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet22.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet4.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet5.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet6.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet8.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/bullet/Bullet9.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/BulletSystem.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/BuyLifeLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/ChapterLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/utils/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/utils/cocosUtil.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/comeShine.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/conf.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/data/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/data/constants.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/utils/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/utils/CountTimeUtil.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/CronCtr.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/DaySignLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/DayTaskLayer.ts","../file:/C:/ProgramData/cocos/editors/Creator/3.8.2/resources/resources/3d/engine/editor/assets/tools/file:/C:/ProgramData/cocos/editors/Creator/3.8.2/resources/resources/3d/engine/editor/assets/tools/debug-view-runtime-control.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/designManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/model/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/model/devModel.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/DialogEffect.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/EnergyLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/eventManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/feiBiao.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/utils/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/utils/FileUtils.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/GameCtrl.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/GameLaunch.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/GameMemoryStorage.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/gameStorage.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/GParam.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/GuessGameLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/GuessResultLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/H5AdSdk4399.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/HandLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/HeroLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/Hint.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/HintSystem.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/HomeLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/http.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/ItemLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/extensions/i18n/assets/file:/C:/Users/fadlishrd/Desktop/MRTGD/extensions/i18n/assets/LanguageData.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/layerManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/LetterLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/LevelLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/LoadingLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/extensions/i18n/assets/file:/C:/Users/fadlishrd/Desktop/MRTGD/extensions/i18n/assets/LocalizedLabel.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/extensions/i18n/assets/file:/C:/Users/fadlishrd/Desktop/MRTGD/extensions/i18n/assets/LocalizedSprite.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/localStorageManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/data/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/data/localText.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/LuckyDrawLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/MainLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/MapLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/model/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/model/mapModel.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/MapSystem.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/MapWrap.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/md5.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster12.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster13.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster21.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster22.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster23.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster3.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster4.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster5.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster6.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/monsters/Monster9.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/MonsterSystem.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/MoreGameLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/engine/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/engine/MotionStreakAssemblerUtil.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/engine/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/engine/MotionStreakUtil.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/data/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/data/msgac.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/MsgBoxLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/common/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/common/myLog.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/NodePoolUtil.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/NoticeLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/NumSystem.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/PatrolFastLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/PatrolLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/PauseLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/other/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/other/physicsGroup.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/engine/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/engine/PhysicsWorld.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/Player.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/model/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/model/playerModel.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/ProgressCtrl.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/Prop.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/Prop1001.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/Prop1002.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/Prop101.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/Prop201.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/prop/Prop701.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/PropInfoLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/PropInfoLayer2.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/PropItemPrefab.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/PropSystem.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/PyramidDrawLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/RedPointLogicMgr.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/common/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/common/redPointManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/RenderChildBatch.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/manager/resManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/RewardItemLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/RewardLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/RewardRedBoxLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/RewardSkinLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/base/ScrollViewUtil.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/sdk/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/sdk/sdkManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/ServerCtr.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/other/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/other/serverMsg.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/SettingLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/SettlementLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/ShareLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/shader/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/shader/ShineColor.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/ShopLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/common/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/common/SingleInstance.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill1.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill10.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill2.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill3.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill4.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill5.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill6.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill7.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill8.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/skill/Skill9.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/SkillSelectLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/SkillSystem.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/SkinChangeLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/TargetPos.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/targetPos2.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/hint/targetPos3.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/TimeCtr.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/TopUILayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/TowerFloorLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/TowerLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/TowerRoleLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/TransLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/tyqAdManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/layer/TyqBaseLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/tyqConstants.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/manager/tyqLayerManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/layer/TyqMoreGameLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/manager/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/cocos/manager/tyqResManager.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/tyqSDK.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/tyqSDKConfig.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/model/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/model/UserData.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/utils/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/utils/utilTools.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/layer/VipLayer.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/platform/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/platform/Vivo.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon1.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon2.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon3.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon4.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon5.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon6.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon7.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/item/weapon/Weapon8.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/game/compoment/sys/WeaponSystem.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/platform/wechat/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/platform/wechat/wechat.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/utils/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/utils/weHttp.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/utils/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/utils/weNetworkMgr.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/network/wmsocket.ts","../file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/platform/wechat/file:/C:/Users/fadlishrd/Desktop/MRTGD/assets/scripts/tyqSDK/platform/wechat/WXCustomAd.ts"],"names":["ccclass","_decorator","property","_dec","_class","_BaseLayer","ModelLayer","apply","arguments","_inheritsLoose","_proto","prototype","onLoad","call","onEnable","onDisable","onDestroy","initUI","processEvent","ac","data","onButtonClick","node","name","BaseLayer","_RF","pop","_Component","AnimationCtrl","_this","_len","length","args","Array","_key","concat","spineSkeleton","animationComponent","lastAni","lastLoop","animationEndCallback","this","getComponent","sp","Skeleton","getComponentInChildren","Animation","on","EventType","FINISHED","animationFinished","setSpineSkeletonNode","setAnimationNode","pauseAnimation","paused","resumeAnimation","eventName","animationState","playAnimation","isLoop","completeCb","loop","setAnimation","setCompleteListener","play","playAnimationOnce","_playAnimationOnce","_asyncToGenerator","_regeneratorRuntime","mark","_callee","endCb","_this2","wrap","_context","prev","next","abrupt","Promise","resolve","reject","undefined","animation","stop","_x","_x2","Component","AnimationTrack","duration","time","g","v","vx","vy","endY","aniFlag","targetPos","endCallback","startShowThrow","cb","Tween","stopAllByTarget","radian","utilTools","getFloatValue","angleToRadian","Math","random","PI","cos","sin","position","y","startBeiSaiEr","cocosUtil","convertToWorldSpace","mapModel","mapLayer","coinIconNode","moveTargetUpdate","dt","convertToNodeSpace","playerPos","player","x","nodePos","getPosition","Vec2","distance","direction","subtract","normalize","dis","multiplyScalar","add","showThrowUpdate","pos","setPosition","dx","tween","by","v3","easing","delay","start","update","AudioManager","musicAudioSource","effectAudioSource","audioClips","musicVolume","effectVolume","musicName","setMusicAudioSource","audioSource","setEffectAudioSource","initData","getSaveData","now","loadAllAudio","onProgress","onComplete","resManager","loadAssetByBundleDir","constants","bundles","audio","AudioClip","percent","item","assetArr","i","asset","loadAudios","pathArr","loadAssetByPathArr","loadAudio","path","_this3","loadAsset","err","getMusiceVolume","setMusicVolume","val","round","volume","pause","playMusic","_playMusic","clip","getAudioClip","sent","playing","gameOnShow","force","myLog","state","getEffectVolume","setEffectVolume","playEffect","_playEffect","_callee2","effectName","_context2","playOneShot","_this4","_createClass","key","get","_instance","instance","AwardInfoLayer","setItemLayer","getNodeByPath","layerData","awardArr","refreshAwardItem","bind","itemUI","award","setPropItem","find","onClickBtnSure","closeLayer","onClickBg","BackHomeLayer","uiNode","isShowBannerAd","tweenScaleIn2","onClickBtnGoOn","onClickBtnExit","serverMsg","send","msgac","mapLeave","BackLifeLayer","timeNode","diamondNumNode","UserData","getInstance","mapData","designManager","config","backLifeCount","mapSystem","backlifeCount","doSettlement","to","scale","tyqAdManager","getChannel","Channel","H5_4399","onClickBtnClose","setString","union","repeat","backLifeDiamond","baoshi","setRenderableColor","Color","RED","WHITE","roleBackLife","backLife","onClickBtnAd","sdkManager","openAd","st","onClickBtnDiamond","createNotice","localText","lackDiamond","useBaoShi","BackMapLayer","mapId","layerCb","layerName","layerId","pathNodeObj","Map","resLoader","ResLoader","autoReleaseAsset","preLoadAssetConfigArr","eventArr","openUpdateSecond","updateSecondInterval","openAllBtnInteractive","openBtnLongPress","btnLongTrigTime","btnLognTrigTimeCount","btnLongTrigCount","btnLongNode","addPathNode","DesignResolutionHeight","view","setDesignResolutionSize","ResolutionPolicy","FIXED_HEIGHT","chooseDesignResolution","screen1","getVisibleSize","width","height","FIXED_WIDTH","addButtonListener","refreshRedPoint","clearInterval","setInterval","updateSecond","playerModel","isRecordAd","tyqSDK","showBannerAd","eventManager","removeEventArr","off","hideBannerAd","layers","HomeLayer","releaseAllAsset","set","chs","children","len","pNode","screenAdapterBG","isValid","widget","Widget","enabled","getScreenBgAdapterScale","scaleX","getScale","scaleY","setScale","screenAdapterUI","getScreenAdapterScale","Button","preOnButtonClick","Node","TOUCH_START","preOnButtonTouchStart","TOUCH_MOVE","preOnButtonTouchMove","TOUCH_END","preOnButtonTouchEnd","TOUCH_CANCEL","preOnButtonTouchCancel","ScrollView","indexOf","ScrollViewUtil","addComponent","max","ch","btn","top","substring","remain","toLocaleUpperCase","hasPlayAudio","preOnButtonLongClick","btnNode","event","target","touch","openPropInfoLayer2","id","num","getPropNumById","obj","openLayer","PropInfoLayer2","isShowingLayer","layerManager","showHintLayer","msg","hintLayer","active","hideHintLayer","openMsgBoxLayer","hint","MsgBoxLayer","openAwardGetLayer","RewardLayer","propArr","notMoveAni","openAwardInfoLayer","setRoleSkin","roleNode","skin","getHeroSkin","setSkin","playAudioEffect","delayTime","scheduleOnce","audioManager","showCb","openSingleLayer","baseLayer","prefab","addAsset","forEach","assetConfig","destroy","addEventArr","arr","preProcessEvent","ac2KeyObj","showLackItem","itemId","itemRow","getRowById","tableName","prop","lackItemHint","format","showGetItem","content","scrollViewSetData","scrollViewNode","refreshItemFunc","resetPos","itemTween","scrollViewUtil","setData","index","scrollViewAddData","pushData","scrollViewRefreshList","refreshList","scrollViewRefreshItemUI","refreshIndex","scrollViewRefreshItemUIByIndex","scrollViewRemoveItemUI","removeByIndex","scrollViewRemoveItemUIByIndex","scrollViewScrollToEnd","scrollToEnd","scrollViewScrollToItemUI","scrollViewScrollToIndex","scrollToIndex","setProgressBar","progressBar","ProgressBar","progress","setNumString","formatNum","addComponentOnce","ItemLayer","setNumItemLayer","push","itemLayer","iconNode","bgNode","numNode","row","e","icon","type","weapon","weaponid","setSpriteFrame2","quality","shakeScreen","tweenShakeNode","getPopLayerParentNode","removeRenderBatch","parent","renderChildBatch","removeRootItemNode","addRenderBatch","addRootItemNode","info","label","Label","string","rich","RichText","setSpriteFrame","bundleName1","sprite","Sprite","bundleName","split","loadSpriteFrame","spriteFrame","_this5","setSpineData","_this6","skeleton","spine","spinePath","loadSpineData","skeletonData","setSpineData2","_this7","isGoOn","_descriptor","_applyDecoratedDescriptor","_class2","BaseUILayer","_initializerDefineProperty","_assertThisInitialized","isShowBanner","getScreenScale","resolute","getDesignResolutionSize","toast","addTopUILayer","layer","Prefab","message","instantiate","onClickClose","stringToArr","str","endIndex","fitScrollView","curview","minHeigth","maxHeigth","windowSize","UITransform","min","fitNodeWidget","posy","z","console","log","notResetPos","setImageCustomSize","size","newWidth","newHeight","addButtonHander","btnComponent","com","hander","customEventData","transition","Transition","SCALE","eventHander","EventHandler","component","handler","clickEvents","showGetReward","rewardArr","element","propData","Id","playCoinFlyAnim","Num","count","iconpath","startPos","endPos","r","iconSize","getCirclePoints","map","coin","self","addChild","repeatForever","midPos","calcDistance","idx","randomScope","points","radians","unshift","pos1","pos2","xdiff","ydiff","pow","configurable","enumerable","writable","initializer","_dec2","_dec3","tooltip","_dec4","beHaviorComponent","_descriptor2","_descriptor3","isClick","tyqSDKConfig","isOpenBeHavior","WECHAT","strategy","Wechat","isShareBehavior","SpriteFrame","reportShareBehavior","currentShow","assetType","Texture2D","bundle","assetManager","getBundle","loadAssetFunc","load","finish","total","loadBundle","retBundle","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_BaseUILayer","BlessLayer","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_curBlessId","_curBlessNum","NeedBlessNum","_curAutoIndex","_curIndex","propView","btnlayer","wearDrop","initList","btnBless","selectListNode","initSelectData","blessPropNode","tishiText","getPropSort","dataArr","iswear","curprop","wearIndex","scrollView","initItem","PropItemPrefab","setView","Type_HideNum","Type_UnTouch","Type_Grey","getChildByName","selectProp","itemData","propid","convertToWorldSpaceAR","addSelectProp","startp","propBlessLayer","propItem","unSelectProp","p","convertToNodeSpaceAR","curProp","needCoinLabel","needIcon","blessId","showResultProp","selectBtnNode","BlessResultLayer","removeAllChildren","_len2","_key2","showLight","showPropInfo","propData2","atk","attrIcon","wwqVec","attrNumLab","formatNumString","color","colors","blue","parseColor","attrlabel","hp","green","propNameLab","isShow","resultLight","UIOpacity","opacity","blessAction","coinNum","checkAndUseBaoshi","cheackAndUseCoin","blessProp","clearBlessLayer","eventSendCustomEvent","getPropId","addDayTaskNum","RewardItemLayer","propId","adCoin","adDiamond","allBlessProp","result","autoBlessAction","closeBless","onSelectBtnClick","onSelectItemClick","parseInt","selectcurbg","startAnimal","attrNumLab1","attrNodebg","hide","show","title","blockArrow","monster","outVec1","init","extraObj","tf","bodyNode","recycleSelf","angle","vec2XAngle","executeInEditMode","Enum","physicsGroup","BoxColliderUtil","worldPoints","worldAabb","Rect","contactColliderObj","contactBeginCb","contactEndCb","collider","contactEnd","getContactKey","uuid","updateCollider","aabb","offset","wp0","wp1","wp2","wp3","transformMat4ToPoints","worldMatrix","minX","maxX","minY","maxY","setContactBegin","setContactEnd","contactBegin","key1","key2","collider1","collider2","_offset","_size","Object","getOwnPropertyDescriptor","Size","DEFAULT","BoxMonsterLayer","getIndexs","canRefresh","refreshCount","itemUIArr","getItemArr","refreshSelectItem","refreshBtnsLayer","btnRefresh","carTime","yin","limitNode","refreshSelectLayer","skillItem","propIds","diamond","propGet","getFirstIdByType","starLayer","lv","starNode","icon2Node","design","maxLv","getSelectItemArr","carGoldNum","carGold","carDiamond","addHpPercent","onClickBtnRefresh","onClickBtnGetAd","weaponSystem","addWeapon","skill","skillSystem","addSkill","skill2","addSkill2","propSystem","getProp","onClickBtnGet","BtnLayer","bolInit","intCheckTime","runTime","runTimeLast","setStart","nodeLight","xscale","yscale","setStop","toHEX","toLowerCase","Bullet","isDestroyInNoShow","speed","bulletUtil","timeCount","contactItemArr","isFollow","rotateSpeed","vec3Obj","outVec3","BoxCollider2D","Contact2DType","BEGIN_CONTACT","END_CONTACT","group","startWorldPos","getFacePlayerDirection","clone","bullet","radianToAngle","atan2","unscheduleAllCallbacks","bulletUtilStr","setDirection","selfCollider","otherCollider","contactItem","MONSTER","tag","Monster","PLAYER","contactEnmeyCanHide","contactBulletTime","dam","atkPercentAdd","ceil","hitWithDam","getShineColor","MONSTER_BULLET","splice","shineColor","contactNotHide","outScreenCanRecyle","outScreenNotRecycle","bulletSystem","recycleBulletNode","recycleSelfEnd","getFollowTargetPos","vec3CopyVal","canMove","moveStop","radian1","radian2","dr","maxDr","abs","Vec3","rotateZ","ZERO","lastDirection","arriveTargetPos","afterDirection","forArr","timeGap","isInScreenVisible","bullet1011","floatRadian","subNum","bullet10170","hintSystem","addHint","HintNames","hit2","bullet10180","animationCtrl","bullet10190","bulletId","addBullet","bullet10200","tweenFadeOut","bullet1021","getSkill2RangeAddScale","isAtOnce","tweenScaleOut","bullet1031","moveSpeed","yinTimeCount","moveDis","feiBiao","bullet1041","PLAYER_BULLET","bullet1042","bullet1051","hasScheduled","getSkill2BulletSpeedAddPercent","bullet1052","getSkill2AtkAddPercent","floor","bullet1061","isOutScreenReflex","tweenScaleIn","negative","mirrorReflex","isX","outScreenX","visibleHalfSize","outScreenY","outWallX","wallLayer","wallRightVal","wallLeftVal","outWallY","wallTopVal","wallBottomVal","invokeClass","bullet1071","frameColor","initScale","uiOpacity","frameLayer","frameNode","onUpdate","ratio","bullet1081","bullet1091","bullet1101","hasTweenPlay","targetDis","radianSpeed","shotTimeCount","setUpDownTween","isOpen","startShot","schedule","shot","macro","REPEAT_FOREVER","unschedule","maxSpeed","getMoveSpeed","bullet1102","targetPos2","convertToWorldSpaceWithPos","activeInHierarchy","bullet1103","bullet12","bullet13","bullet14","aniCtrl","startColliderAni","bullet16","bullet17","bullet18","bullet19","bullet20","bodyNodeTf","setBodyWidth","bullet21","bullet22","bullet4","bullet5","direction1","direction2","turnSpeed","tweenBlink","createSmallBullet","bullet6","bullet8","heightWidthRatio","maxFollowDis","updateAngleAndDis","bullet9","getCircleDirectionArr","boom1","BulletSystem","idBulletLayerObj","bulletLayer","bulletLayer2","waitAddArr","getBulletLayerNameById","getBulletLayerById","NodePoolUtil","bulletPrefabObj","loadBulletPrefab","_addBullet","nodePoolUtil","tmpFunc","itemNode","bulletNode","getNode","_x3","_x4","_x5","forVisibleMonsterBullet","recycleAllBulletNodeById","recycleNode","updateLogic","shift","BuyLifeLayer","skillLifeNum","mapRefreshSkill","PageView","ChapterLayer","_curPageId","_curOpenLevel","_curRewardList","getTable","curMap","getCurMap","mapName","mapItem","pageContent","leveldata","getLevelData","Time","ReceiveState","mapPage","scrollToPage","setPage","tishiLabel","tishiLabel2","updateBtnState","rewardLayer","rewardItem","btn1","interactable","btn2","RedPointLogicMgr","ins","setRPointView","white","scrowPage","_curPageIdx","onGetReward","curRewardArr","tobePropItem","getRewardProp","setLevelData","onGetRewardDouble","backHome","String","defineProperty","getAroundPos","minRadius","maxRadius","isWorld","radius","getRectPos","minWidth","minHeight","maxWidth","maxHeight","r1","weight","r2","r3","r4","getRowByWeight","rad","srcVec3","interval","repeatNum","getSectorDirectionArr","da","topArr","downArr","dir1","dir2","p2","startRadian","orignPos","getVisibleOrigin","anchorX","anchorY","tweenHitScale","tweenScaleShake","quat1","Quat","fromEuler","quat2","quat3","rotation","tweenBubbling","waitTimeAsync","setTimeout","getScreenMidWorldPos","nodeChangeParent","tweenUIShow","tweenBounceAction","tweenFallDown","setNodePositionY","tweenTopFadeOut","tweenScaleEffect","tweenFlyToPos","quat","getQuatByAngleZ","t1","t2","setRotation","parallel","tweenTopRightPao","callbck","dx1","ds","tweenRotate","tweenUpDown","dy","tweenFadeIn","_callee3","_context3","tweenBreath","tweenShake","isRepeat","tweenRet","isAndroid","sys","platform","Platform","ANDROID","isDesktopBrowser","DESKTOP_BROWSER","isIos","IOS","isWechatGame","WECHAT_GAME","addKeyDownListener","sender","input","Input","KEY_DOWN","designSize","frameSize","getFrameSize","safeAreaRect","getSafeAreaRect","safeAreaMarginTop","intiScreenAdapterWidthScale","initScreenBgAdapterWidthScale","fh","fw","adapterWidth","retScale","screenAdapterScale","screenBgAdapterScale","isCenter","transform","isRecursion","renderable","UIRenderer","temp","_step","_iterator","_createForOfIteratorHelperLoose","done","value","getRenderableColor","getColorByHEX","hex","setButtonEnabled","toFixed","setNodePositionX","drawCurvePath","end","curveness","_tween","cp","tweenArr","curx","cury","t","quadraticBezier","sequence","p0","p1","k","comeShine","monsterId","monsterSystem","createMonster","mrtgd_WsUrl","mrtgd_HttpUrl","mrtgd_jjws_WsUrl","mrtgd_jjws_HttpUrl","StickPack","Heartbeat","UserLogin","UserRegister","AntiAddiction","SensitiveWordsCheck","SaveUserRecord","GetRegionData","GetRegionList","SaveUserRecordAll","UploadAvatar","GetUserDataByKey","ReqWxSession","ReqSendAuthCode","ReqPhoneLogin","SetFriendCode","GetFriendVal","GetRankInfo","GetInviteCode","GetInviteCodeReward","GetInviteLevelReward","PushInviteProcess","IsRankOpen","GetSomeonePlayerInfo","GetMidAutumnRank","SetMidAutumnRank","GetWorldBossRank","SetWorldBossRank","PushWorldBossSettle","SetWorldBossPlayerStatus","GetWorldBossPlayerStatus","GetEmpireSpotData","ActionEmpireSpot","SaveHead","ServerIsNew","ServerIsOld","ResSuccess","ResFail","DataTypeInt","DataTypeString","DataTypeBoolean","DataTypeObject","ServerEventHead","Http_isAlive","GLoginState","gameName","animations","standBy","attack","hit","die","appear","walk","audioNames","home","win","dayAct","energy","exp","magnet","bomb","box1","box2","boxMonsterCoin","equip","propTypes","mapTypes","main","tower","materials","shineColorSpine","monsterTypes","common","elite","boss","monsterIds","boxMonster","skillTypes","hammer","disk","times","minute","houre","day","level","expLv","expType","heroLevel","suit","draw","weaponOpt","towerFloor","dayTask","daySign","energyAward","CNTM","vip","share","monsterTimeAdd","ui","LoadingLayer","NoticeLayer","MapLayer","MapFightLayer","SkillSelectLayer","PauseLayer","LuckyDrawLayer","LevelLayer","SettlementLayer","HandLayer","TransLayer","TowerLayer","TowerFloorLayer","TowerRoleLayer","DayTaskLayer","EnergyLayer","DaySignLayer","LetterLayer","SkinChangeLayer","VipLayer","ShareLayer","PropInfoLayer","MoreGameLayer","ShopLayer","SettingLayer","PatrolLayer","PatrolFastLayer","GuessGameLayer","GuessResultLayer","PyramidDrawLayer","RewardSkinLayer","RewardRedBoxLayer","saveTimeGap","purple","weaponNum","skillNum","backLifeMax","CountTimeUtil","_time","_callFun","getTimeStr","setTime","callFun","updateTime","CronCtr","msgArr","msgArrIdx","isPutEnable","testTimeDelta","director","GNetCmd","toString","onHeartbeat","respSaveUserRecord","reqHeartBeat","startHeartbeat","WmSocket","Http","httpPost","getUrl","httpUrl","GNetConst","res","TimeCtr","GetInstance","UpdateServerTime","serverTime","connect","ServerCtr","loginState","loginFail","status","loginWithAccount","noYet","ReInit","UpdateServerTimeByHeartbeat","lastHeartbeatTime","ServerTime","isConnected","emit","wxLoginBegin","heartbeatCheck","error","cheatLevel","hasOwnProperty","sendMultiMsg","cmd","lang","token","jsonData","isEnd","isStart","saveDataToCloud","Date","getTime","version","dataVersion","dml","uploadAllRecord","allData","JSON","stringify","warn","awardDay","itemLayer2","OPPO_MINI_GAME","daySignObj","notBox","startTime","dayIndex","patchNode","targetNode","hasGet","awardDayArr","ci","refreshFinalAwardLayer","refreshBoxLayer","lockNode","finalAward","signWithDay","double","addPropArrByDesign","onClickBtnGetAward","daySignHasGet","daySignOutdate","onClickBtnPatch","targetDay","daySignNoLeave","onClickBtnBox","onClickExtraAward","daySignFinalAwardHint","addPropByDesign","daySignFinalAward","flagArr","taskListNode","overDay","refreshTopLayer","tb","task","sortArr","task1","task2","row1","row2","info1","getTaskInfoById","info2","v1","needNum","v2","getAward","refreshTaskItem","actNum","shineNode","openNode","flag","getAwardFlag","dayTaskObj","awardFlagArr","awardItem","propNum","btnText","btnGet","btnGo","doneNode","taskDoge","$freeDraw","overDayRet","onClickBoxItem","addPropNum","onClickBtnGo","taskGo","jumpLayer","onClickAwardItem","DebugViewRuntimeControl","_single","strSingle","strComposite","strMisc","compositeModeToggleList","singleModeToggleList","miscModeToggleList","textComponentList","labelComponentList","textContentList","hideButtonLabel","_currentColorIndex","strColor","BLACK","GREEN","BLUE","Canvas","uiTransform","halfScreenWidth","halfScreenHeight","miscNode","buttonNode","titleNode","newLabel","EnableAllCompositeModeButton","labelComponent","overflow","currentRow","newNode","singleModeToggle","textComponent","Toggle","TOGGLE","toggleSingleMode","CLICK","enableAllCompositeMode","changeColorButton","changeTextColor","HideButton","hideUI","compositeModeToggle","isChecked","toggleLightingWithAlbedo","toggleCSMColoration","toggleCompositeMode","isTextMatched","textUI","textDescription","tempText","findIndex","search","substr","toggle","debugView","root","singleMode","enableCompositeMode","lightingWithAlbedo","csmLayerColoration","button","toggleComponent","activeValue","deltaTime","DesignManager","tb2Arr","tb2Obj","tbType2Arr","loadAllDesignTable","JsonAsset","tbName","json","tbData","initTable","releaseAsset","val2","getRowsByType","getLastRow","window","DialogEffect","barNode","contentNode","handNode","rowArr","energyItem","energyObjRefresh","refreshShowList","listNode","targetItemUI","getEnergyAwardInfoById","award1","my","scrollToOffset","energyObjRefreshRet","stopAutoScroll","scrollToTop","refreshTimeNode","refreshItemUIArr","refrshProgress","energyObj","endTime","hour","energyTimeHint","lastRow","lastNum","point","shineNode1","lockNode1","hasGetNode1","shineNode2","lockNode2","hasGetNode2","award2","onClickAwardItem1","onClickAwardItem2","onClickBar","EventManager","acList","tmpArr","offWithSender","isLog","notMyLog","joystick","READ_FILE_TYPE","FileUtils","openLocalFile","accept","callback","inputEl","document","getElementById","createElement","setAttribute","style","body","appendChild","onchange","files","file","click","readLocalFile","readType","reader","FileReader","onload","readyState","DONE","DATA_URL","readAsDataURL","TEXT","readAsText","BINARY","readAsBinaryString","ARRAYBUFFER","readAsArrayBuffer","saveForBrowser","textToWrite","fileNameToSaveAs","cc","isBrowser","textFileAsBlob","Blob","downloadLink","download","innerHTML","webkitURL","href","createObjectURL","URL","display","saveDataForNative","fullPath","model","isNative","myjsb","MyFileUtils","writeDataToFile","GameCtrl","joystickNode","blockNode","orignPosition","touchStart","touchMove","touchEnd","touchCancel","location","getUILocation","sendTouchEvent","GameLaunch","isInDevelopmentEnvironment","layer1","layerHint","AudioSource","loadingName","noticeName","getEnterUrlQuery","onMessageEvent","showNotice","globalTouchStart","isLogin","ctr","shareObj","friendNum","friendCnt","friendData","parse","friendAdNum","videoCalCnt","friendPassNum","friendPassCnt","regionDataList","nickName","reqRegionData","wxRes","openid","localStorageManager","openId","uid","serverDataVersion","dataVersionFlag","serverData","regionId","openLayerRet","showNoticeRet","onClickBtnTest","assets","onClickBtnHintClose","GameMemoryStorage","getItem","localStorage","setItem","encrypt","removeItem","keys","memory","decrypt","publicKey","isEncrypt","GameStorage","Key","GameKey","GetRawKey","replace","getStorage","getInt","def","n","Number","setInt","setIntMemory","getBoolean","setBoolean","is","setBooleanMemory","getString","getStringDisk","getIntDisk","setStringDisk","setStringMemory","getObject","setObject","sendObject","setObjectMemory","clear","list","clearByKey","gameKey","getStringArrayByKey","list2","values","getObjectArrayByKey","getAll","isFirst","oldKey","spliceDatas","datas","xtbl","star","debris","partner","score","skill_skr","skill_skr_attr","skill_star","skill_star_attr","setAll","_setAll","GParam","MapWrap","_onlyArgument","toList","_curSelectGuess","_curSelectBet","_index","_dtTime","_isStartRun","initGuess","stone1","items","selectBetNode","armNodeGuess","selectGuess","selectGuessNode","removeFromParent","guessLayer","tipLabel","onSelectBet","selectItem","onSelectBtn","curBet","checkUseProp","openResult","guessSprite","stoneDraw","multiplier","myGuess","otherGuess","selectBet","_RewardLayer","_propItem","curGuess","guessItem1","selfNodeGuess","guessNameSprite","resultNode","rewardNode","result1","showYanhua","propdata","doubleGet","H5AdSdk4399","showRewardedAd","successCb","h5api","playAd","code","checkDownUrl","transformPipeline","append","output","url","dw","downloader","_downloaders","dbbin","register","options","includes","checkbin","globalTouchStartRet","HeroLayer","_propNodeList","_isSort","propNodeLeft","propNodeRight","updateProp","updateDropData","initWearDrop","attackLabel","lifeLabel","life","checkPropCanBless","mask","RPointMask","RPM_BlessProp","subPath","sortbtn","heroSk","wearProp","Type_UnWear","getPropList","sort","a","b","equipDataA","equipDataB","Type_ToWear","checkThisPropBestToWear","RedpointPos","right","updateRedPoint","propLayer","propSort","openBless","onClickBtnSkin","targetPos3","hit1","hit3","hit4","hit5","hit6","hit7","Hint","hintUtil","worldPos","recycleHintNode","HintSystem","nameLayerObj","namePrefabObj","hintLayer2","getHintLayerNameById","getHintLayerByName","nameLayer","hintNode","toggles","togglesLock","_PageLayer","jumpLayerData","tabMainRedPointNode","tabEnergyRedPointNode","getSwitchValue","RPM_PropWear","channel","ChannelFlag","WECHAT_JJWS","reqGetFriendVal","urlParmas","reqSetFriendCode","homeHideMenu","mapEnter","mapHand","hasEnergyAward","enterMapWithMapId","isWin","addTowerMapFloor","floorRow","getPatrolState","hasLetterAward","hasDaySignAward","hasDayTaskAward","hasVipAward","grayscale","clickEvent","selectPage","commonResRefresh","layerNode","MainLayer","onClickBtnPartol","openTowerFloorLayer","onClickBtnDaySign","jumpLayerRet","TopUILayer","showRewardItem","mapEnterRet","loadMapRes","homeHideMenuRet","onClickBtnHit","ShineColor","startShine","xhr","params","failCb","XMLHttpRequest","onreadystatechange","respone","responseText","rsp","open","timeout","onerror","itemUIFreeArr","idItemUIObj","layerJS","isFrameLoad","hideAllItems","addRenderChildBatch","RenderChildBatch","frameAddItem","addItem","setFrameLoad","frameLoad","getItemUIById","getItemUIByIndex","forShowItemUI","loadAndRefreshItemUIByItem","refreshItemUIByItem","refreshItemUIByItemUI","refreshItemUIById","removeItemUIByIndex","tmpItemUI","removeItemUIByItemUI","removeItemUIById","_step2","_iterator2","refreshUI","_step3","_iterator3","languages","searcher","_language","language","updateSceneRenderers","rootNodes","getScene","allLocalizedLabels","labels","getComponentsInChildren","updateLabel","allLocalizedSprites","sprites","updateSprite","_languageData","LayerManager","openingLayerMap","openedLayerMap","layerNameIdArrMap","loadCommonLayers","prefabArr","addRef","noticeLayer","addLayerNameId","removeLayerNameId","openSuccessCb","idArr","layerParams","layerPath","loadAssetConfigArr","refreshPropItem","isLetterAward","openLevel","iconIndex","mapInfo","selectBtn","chooseMap","setCurMap","percentNode","flagNode","progressLength","startGap","designResProgress","designResPercent","bundleArrProgress","bundleArrPercent","bundleLoadingTime","bundleLoadingMaxTime","layerProgress","layerPercent","spriteFrameArr","isLogined","collectAllSpriteFrame","initGame","initSDK","loginWithoutAccount","onClickLoginBtn","loadDesignRes","bundleArr","loadBundleArr","loadCommonLayerRes","releaseAllSpriteFrame","decRef","openHomeLayer","visible","displayName","LocalizedLabel","i18n","fetchRender","LocalizedSpriteItem","_class4","_class5","LocalizedSprite","spriteList","LocalStorageManager","uidKey","openIdKey","getKey","getGameData","setGameData","clickGameStart","adAwardHint","noRewardAd","noAd","defaultError","itemGet","timeCd","cd","notHas","equipSuccess","full","wei","ge","notGet","weaponEquipAdd","coinGetHint","circleNodeNum","choseNum","choseArr","starShineArr","starShineIndex","showChoseIndex","showChoseItemUI","startCircle","circleEnd","btnStart","coinLayer","coinNumNode","resultUILayer","resultBgNode","resultItemLayer","resultItemNode","resultBtnSure","pdNode","fireNode","lastItemNode","initItemArr","showArr","forceChoseArr","weaponArr","copyObj","skillArr","skill2Arr","getRandomItemByArr","randomArr","getRowByItem","uiIndex","startAnimation","waterfall","circleShineAnimation","totalShineAnimation","choseNumAnimation","startShineStarCircle","posArr","skinName","initStarShineItemUI","addNextStarShine","startShowChoseItem","playerAddItem","showChoseResult","outItemUI","getWeaponInfoByType","getSkillInfoByType","getSkill2InfoByType","_showChoseResult","itemTransform","itemHeight","_loop","refreshResultItemUI","delegateYield","yinNode","_loop2","_this8","opacityTime","_loop3","sideNode","sideShineNode","sideOpacity","mapLeaveRet","onClickBtnStart","emailRedPointNode","daySignRedPointNode","dayTaskRedPointNode","vipRedPointNode","duihuanBg","btnShare","videoPlayer","shurukuang","btnPyramid","roleLv","qingdianLock","btnDayTask","taksLock","btnGuess","caiquanLock","onClickBtnDuihuan","onClickBtnCloseTuihuan","onClickBtnTuihuan","tishi","strArr","EditBox","curPath","VideoPlayer","remoteURL","WECHAT_MRTGD","btnset","btnEmail","_isShowOpenLevel","initMapLevel","role","isHaveProp","btnRedBox","checkChapterCanReward","isaction","getTimeStrChinese","power","usePower","showUseAnimal","onClickBtnMap","onClickBtnChapter","chapter","onClickBtnSet","onClickBtnDayTask","onClickBtnGuess","onClickBtnPyramid","onClickOpenLayer","onClickBtnLetter","onClickBtnEquipCompose","onClickBtnSkinChange","onClickBtnVip","onClickBtnShare","fightCapNode","gameCtrl","expProgress","expLvNode","expBarColorArr","expBarColorIndex","expBarShineColor","expLvUpCount","killMonsterNumNode","bossHpLayer","bossDamProgressBar","bossHpProgress","skillBombIcon","skillBombAd","skillBombNum","skillBombCd","btnSkillHeal","skillHealIcon","skillHealAd","skillHealNum","skillHealCd","skillMagnetAd","skillMagnetNum","skillLifeAd","monsterNumNode","showNumNode","playerPosNode","expNumNode","mapFightLayer","MapSystem","Player","MonsterSystem","numSystem","NumSystem","SkillSystem","WeaponSystem","PropSystem","setCompoments","loadSaveMapData","popBuyLifeLayer","getPopBuyLifeTime","saveDataBefore","popLayer","eventLevelStart","refreshExpLayer","refreshBossHpLayer","refreshResLayer","refreshSkillLayer","mapRefreshSkillRet","hpMax","healAdCount","useSkillHeal","isBreath","bossMonster","bossSubHp","pStart","pEnd","killMonsterNum","current","expNum","check","skillAllNum","onSkillSelect","lvCount","gameFightPause","gameFightResume","timeStr","fightPause","fightResume","commonResRefreshRet","loadSaveData","weaponData","skillData","monsterData","saveDataBeforeRet","onClickBtnSkillBomb","useSkillBomb","onClickBtnSkillHeal","onClickBtnSkillMagnet","useSkillMagnet","onClickBtnSkillLife","onClickBtnPause","onClickBtnSkillSelectLayer","onClickBtnResume","onClickBtnBoss","onClickBtnLuckyDraw","onClickBtnAccountClear","clearAccountData","onClickBtnMonsterAdd","monsterAddFlag","MapModel","mapFightCamera","cameraOrthoHeight","expPool","expTypeRow","equipIdArr","mapLevelArr","monsterPrefabObj","dataRadius","destroyRadius","visibleSize","Camera","orthoHeight","curDrop","weaponId","getTowerRoleProInfo","propRow","$towerWeaponId","loadMapFightLayer","mapRow","createMapLevelArr","mapLevel","createCount","progressCb","loadMonsterAndBulletRes","then","onePercent","monsterPercent","bulletPercent","otherPercent","tmpFunc2","loadMonsterPrefabArr","loadBulletRes","loadOtherRes","bg","wall","parseDesignPropArr","reward","mapFightBgLayer","staticNode","bombAnimationCtrl","warnAnimationCtrl","skillBombAniCtrl","bossPosHintAnimationCtrl","boxHintNode","boxArrowNode","pauseVal","wallShineNode","wallTopNode","wallBottomNode","wallLeftNode","wallRightNode","wallCenterPos","stopTimeCount","expTimeCount","killMonsterCount","nineForArr","refreshCamera","createExp","refreshMapFightWindow","initMapFightBg","initWallLayer","refreshMapBgLayer","posX","posY","centerPos","showWallLayer","bossDead","hideWallLayer","isBoss","reward4","reward5","prop1","prop2","levelData","isBest","bestTime","eventLevelEnd","showInterstitialAd","getMinDisTargetNode","minDis","minDisNode","forVisibleMonster","distancePlayer","forVisiblePropCollider","propNode","propPos","tmpDis","startWarning","aniName","cameraMove","_useSkillBomb","hitArr","waitHit","hitInfo","batchHitMonster","monsterDead","isProb","expProb","expMin","expMax","addProp","propProbArr","prob","propIdArr","propNumArr","addExp","addCoin","adjustInWall","hWidth","hHeight","vWidth","vHeight","bottom","left","refreshWallSideVal","shineOpacity","camera","texture","RenderTexture","reset","targetTexture","frameMove","stopMove","expSpeed","updatePhysicsWorld","physicsWorld","step","updateBoxHintLayer","minProp","forAllPropById","halfWidth","halfHeight","hasFull","getRowsByWeightAndNum","array","_objects","js","createMap","has","toArray","isNumberKey","rets","callBack","rforEach","objects","to_zerofilled_hex","fF","c","d","fG","fH","fI","bytes_to_int32","str_to_bytes","retval","charCodeAt","tmp","encodeURIComponent","charAt","j","databytes","constructor","chars_to_bytes","org_len","tail","int64_to_bytes","h0","h1","h2","h3","_add","n1","n2","updateRun","nf","sin32","dw32","b32","places","ptr","ra","ta","int128le_to_hex","isPauseMove","canFace","hpProgress","isSpine","touchPlayerTimeCount","targetDirection","nodeScale","hpScale","bodyNodeScale","vec3Temp","raycastDis","sideRadian","monsterUtil","hpProgressNode","setBodySkin","sk","removeShineColorMaterial","atkP","hpP","addRow","refreshHpLayer","monsterStr","recycleMonsterNode","contactBeginPlayer","touchPlayer","touchTime","contactEndPlayer","playerForceMove","movePos","monsterForceMove","monsterPos","materialPath","selfDead","damColor2","damColor1","addNum","getBulletDirection","getInfoPosition","infoNode","infoPos","getDirection","dir","mp","colliderArr","PhysicsSystem2D","testPoint","move","minDisPlayer","Monster12","useSkill","startSkillLogic","Monster13","Monster21","otherCollider1","otherCollider2","otherCollider3","resetColliders","skill1Tag","getSkill1Tag","ret","useSkill1","useSkill2","useSkill3","Monster22","bulletId2","bulletId3","Monster23","getComponents","resetCollider","Monster3","Monster4","bulletId1","direction3","Monster5","otherColliderOffset","otherColliderSize","resetOtherCollider","attackWithSkill1","attackWithSkill2","Monster6","numCount","useSkill4","Monster9","idMonsterLayerObj","monsterCreateArr","bossCreateInfo","monsterNum","showMonsterNum","refreshMonsterShow","createMonsterLogic","forAliveMonster","createMonsterWithInfo","destroyCount","showCount","hideCount","showNum","monsterNode","isData","updateMapLevel","removeIdArr","maxNum","hasWarn","createTime","getMonsterLayerNameById","getMonsterLayerById","monsterLayer","_createMonsterWithInfo","getMonsterNumByType","killMonsterFunc","refreshAudioLayer","hideCustomRectCenterAd","showCustomRectCenterAd","audioIconOpen","audioIconClose","onClickBtnHome","onClickBtnAudio","QUAD_INDICES","_normal","_vec2","normal","out","MotionStreakAssemblerUtil","createData","comp","renderData","requestRenderData","dataLength","resize","tmpVec3","cur","stroke","tx","ty","difx","dify","minSeg","MotionStreakUtil","Point","setPoint","fadeTime","indexCount","vertexCount","updateRenderDataCache","cr","cg","ca","setDir","findLast","tmpX","tmpY","u","_val","updateWorldVertexAllData","stride","floatStride","dataList","vData","chunk","vb","createQuadIndices","indexOffset","meshBuffer","Uint16Array","l","passDirty","updatePass","nodeDirty","updateNode","textureDirty","updateTexture","material","getRenderMaterial","hashDirty","updateHash","updateRenderData","updateColor","fillBuffers","renderer","vertexOffset","vert","bufferId","vid","ib","iData","setDirty","MotionStreakAssemblerManager","getAssembler","Assembler","_UIRenderer","_points","_proto2","_flushAssembler","assembler","_assembler","_renderData","_updateColor","lateUpdate","_render","render","commitComp","_class3","globalTouchMove","globalTouchEnd","saveDataAfter","playerMsgStart","playerMsgEnd","mapMsgStart","mapMsgEnd","redPointEvent","MyLog","toLocaleTimeString","w","_len3","_key3","freeNodeArr","itemNodeArr","use","recycleAllNode","forEachUseNode","contentLayer","textPool","textItem","maxContentWidth","minContentWidth","contentBGAdd","orignHeight","spaceY","fadeIn","fadeOut","speedY","speedOpacity","moveDy","fadeOutNode","NodePool","put","noticeShow","Overflow","NONE","SHRINK","moveY","backArr","lastNode","_rewardArr","getPatrolRewardByTime","towerPressTime","propIten","addPropLayer","Type_UnKnow","onGetRewardTili","quickEarn","onGetRewardVideo","initBtnPatrol","addCoinlabel","towerCoin","addExplabel","towerExp","maxPatrolTimelabel","towerTop","curPatrolTimelabel","getPatrolTime","getPatrolReward","curTime","btnPatrol","onGetRewardNormal","getCurPatrolData","weaponItemLayer","skill1ItemLayer","skill2ItemLayer","paramsKeys","tyq_more_game_level","showDelayFullVideo","refreshWeaponLayer","refreshSkill1Layer","refreshSkill2Layer","refreshItem","icon2","PhysicsWorld","cellSize","posToColliderArr","getPosKey","forColliderRectKeyArr","rect","addIntoPosToColliderArr","collectCollider","doIntersection","collisionMatrix","Intersection2D","polygonPolygon","hpMaxOrign","effectAnimationCtrl","lightShine","monsterArr","wallCollider","Collider2D","roleSpeed","addHpMaxPercent","lastHpMax","nowHpMax","addHp","getSkill2DamSubPercent","addMonster","removeMonster","WALL","touchWall","joystickRet","getSkill2PlayerSpeedAddPercent","nowPos","PlayerModel","secondInterval","saveTime","skillFreeRefreshCount","isOpenDev","vipObj","playerData","timeStrToDate","fight","openSecondInterval","onSaveData","taskObj","awardObj","setHours","setMinutes","setSeconds","setMilliseconds","adNum","dayAward","onceObj","dayNum","idAwardObj","clearGameData","sendToUINotice","addVipAdNum","ProgressCtrl","startLoadProgress","Prop","aniNode","propUtil","isFollowPlayer","followSpeed","minNum","contactPlayer","notContact","autoGet","contactStart","doDisPlayerGet","getSkill2PropGetAddDis","playerGetProp","recyclePropNode","Prop1001","animationTrack","Prop1002","Prop101","Prop201","Prop701","_propId","_propFlag","_weaponLv","weaponLv","weaponOptLvEffect","propInfoLab","Type_ShowType","btnWear","unWearProp","suitId","suit_id","suitNode","suitData","suitNameLab","suitNum","getSuitNum","getColor","color1","color2","atkStr3","effectAtk_3","effectHP_3","suitAttr3","atkStr5","effectAtk_5","effectHP_5","suitAttr5","initBtnInfo","setWearProp","onClose","fun","openInfo","numLabel","greybg","typeIcon","Type_OnlyIcon","Type_BigIcon","bgWidth","bgHeight","changeBg","resPath","Type_Bless","idPropLayerObj","idPrefabObj","getPropLayerNameById","getPropLayerById","getSkill2AddExp","getSkill2AddCoin","forVisiblePropContact","forAllPropContact","parseFloat","_endIndex","_drawItemArr","_isDoubleDraw","initItems","initItemState","drawItem","$pyramidState","coinLabel","$pyramidDrawTime","itemsIndex","getDrawIndex","setPyramidState","isHero","startDraw","doubleDraw","reg","RED_POINT_NAME","INVALID_VALUE","_redPointMask","_waitSends","_waitChecks","_updateHandler","_unlockMasks","_targets","_targetWraps","_masks","updateCheck","updateVisit","checkState","initEvent","stopUpdate","_i","_keys","test","onCMSGRPValueSetting","updateState","_i2","_keys2","nodes","_targetIt","targetIt","cMask","maskIt","effectType","posType","_step4","_iterator4","loginOut","sendValueSettingMsg","forceStop","sendValuesSettingMsgs","timingCheck","_","param","rp","checkIndex","startUpdate","RPM_Client","checkBestPropToWear","mask_value","maskIter","_step5","_iterator5","_step6","_iterator6","_step7","_iterator7","red","Main","getMaskRedpointState","masks","_SingleInstance","RedPointManager","getRedPointByLayer","needSave","layerObj","setRedPointByLayer","hasRedPointValue","isArray","addRedPointValue","removeRedPointValue","rpIndex","clearRedPointLayer","SingleInstance","path2RenderArr","rootNodeArr","pauseRender","rootPath","renderArr","_realRender","child","removeRender","updateAssembler","batch","postUpdateAssembler","_renderFlag","ResManager","lastPercent","assetPercents","loadDir","nameArr","assetConfigArr","isAddRef","loadedAssetArr","loadedAsset","SkeletonData","showReward","listLayer","yanhua","itemProp","proplayer","onClickVideoGet","vertical","gapX","gapY","paddingLeft","paddingRight","paddingTop","paddingBottom","contentTransform","viewNode","viewWidth","viewHeight","viewTransform","itemUITransform","itemUIWidth","itemUIHeight","startPosX","startPosY","viewNum","changeNum","maxLines","frameUpdateArr","frameTime","game","getFrameRate","itemArr","setDataFlag","startIndex","stopIndex","contentLayout","Layout","spacingX","spacingY","contentWidth","contentHeight","onScrolling","renderItemArr","hideIndex","recycleItem","needUpdate","startFrameUpdate","createNode","showTween","tn","clearAllItems","refreshItemIndex","refreshItemArr","layoutItemArr","line","line2","resizeContentNode","lastItem","maxOffset","getMaxScrollOffset","getScrollOffset","insertData","pIndex","isScrollEnd","scrollToBottom","scrollToRight","SdkManager","$videoCalCnt","getShareUid","query","ServerState","Normal","New","Hot","Maintain","serverId","account","password","authCode","avatar","regionList","serverList","InitServerCtr","addDataVersion","CheckIsHaveAccount","CheckHaveDataById","UpdateRegions","regions","UpdateServers","servers","GetServerData","GetStateIcon","GetLastNewServer","did","reqConnect","reqRegister","reqLogin","reqLoginByAccount","reqRegionList","ServerId","shareUserId","InviteCode","rules","reqCloudSaveManual","wx","login","success","loginResult","jscode","fail","errMsg","wxLogin","getWxLoginResult","userInfo","avatarUrl","UnloadAvatarUrl","ServerMsg","onMusicCheck","musicToggle","onSoundCheck","winAniCtrl","winMapNameNode","failAniCtrl","failMapNameNode","winTitleNode","bestTimeNode","lineNode","itemLayerBg","itemLayerNode","btnDouble","btnDoublePos","btnSure","btnSurePos","$friendPassCnt","onClickBtnDouble","tabLayer","tabArr","choseTabIndex","tabItem","refreshTabLayer","refreshListLayer","remainNum","shareDayNum","shareDayDiamond","refreshShareItem","infoLayer1","infoLayer2","infoLayer3","nowNum","normalNode","choseNode","textNode","onClickTabItem","_median","uiRenderer","orignMaterial","vColor","customMaterial","setMaterialProperty","cache","_materialCache","setProperty","getMaterialInstance","uRate","passes","getHandle","setUniform","v4","uColor","setMaterialInstance","rate","Material","_mangheType","_curState","_isDrawIng","gaojiProp","mangItem","num1","extra2","$drawNormalNum","num2","extra1","$drawGradeNum","btnManghe","pageView","mangheSpine","timeScale","animalFinish","arr1","layer2","onClickChangeManghe","initVideoBtn","btnVideo","tenCard","btnSingle","onceCard","tenCard2","onceCard2","onOnceCard","showChouAnimale","cancelButtonTouch","getDrawItem","onTenCard","getReward","isEnougth","getCurrentPageIndex","updatebtnState","checkShowGaoji","drawFinish","onBtnClickSure","Skill","skillUtil","_init","getDuration","getSkill2DurationAddPercent","getAtkCd","getSkill2AtkCdSubPercent","Skill1","PLAYER_BULLET2","Skill10","isShoting","robotBullet","forceDestroy","startShoting","Skill2","isShowing","bulletArr","showDisks","hideDisks","Skill3","Skill4","throwFire","Skill5","Skill6","extrObj","Skill7","initBulletScale","Skill8","Skill9","selectItemLayer","hasSelect","btnGetAll","textHint","allHint","showDelayInterstitialAd","refreshInfoLayer","refreshSkill1Item","refreshSkill2Item","btnDoubleSelect","selectEffect","bg2Node","starItemUI","starLv","starIcon","starIcon2","yinIcon","combLayer","skillId","sInfo","skillRow","onClickBtnGetAll","tempFunc","doSelectItem","goNext","isYin","isDouble","starNode2","selectEffect2","onClickSelectItem","onClickBtnDoubleSelect","hasOpenScheculeAddHp","getSkillNodeNameByType","getSkillCompomentByType","playerHpAdd","getSkill2Val","listResetPos","btnEquip","btnGoGet","choseId","heroSkin","refreshSkinItem","rank","getPropById","onClickSkinItem","onClickBtnGoGet","onClickBtnEquip","body2Opacity","urls","diffServerTime","isRunServerTime","loginTime","curSystemDate","InitTimeCtr","getScheduler","updateTimer","RequestTime","_RequestTime","_ret","isOk","request","t0","statusText","ontimeout","setRequestHeader","initLayout","updateData","clearBtn","showNode","powerLabel","energyMax","baoshiLabel","lvLabel","expBar","roleExp","getNextLevelExp","tiliLabel","getCountTime","checkPowerTime","saveData","clearData","remove","adenergy","floorLayer","getTowerMapInfo","f","maxFloor","refreshFloorItem","nowFloor","onClickBtnRole","onClickFloorItem","qianShouNode","dianJvNode","xieZiNode","nianChouNode","paoDangRenNode","btnsLayer","needHand","startQianShouUpdate","startDianJvUpdate","startXieziUpdate","startNianChouUpdate","startPaoDangRenUpdate","resume","onClickBtnTower","propItemUIArr","atkNode","hpNode","weaponList","costPropIcon","costPropNum","emptyNode","setPropItemIcon","setWeaponbLv","$towerWeaponIdArr","refreshWeaponItem","getWeaponLv","lvNode","onClickPropItem","onClickWeaponItem","onClickBtnOpt","towerWeaponAddLv","blackNode","TyqAdManager","customAdSizeObj","horizontal","grid","adShowType","bannerAdShowing","showBannerCount","shareTime","shareListenerSuccess","shareListenerFail","openID","videoCallBack","videoCallBackFail","shareopenID","_delayTime","bannerSize","getEnterOptionsSync","shareGameSync","showAppMessage","shareAppMessage","getOpenID","initAdIds","showShareMenu","withShareTicket","menus","onHide","wxOnHide","onShow","wxOnShow","bannerIds","tyq_ad_banners","_bannerAdUnitId","interstitialIds","tyq_ad_interstitial","_interstitialAdUnitId","customRectIds","tyq_ad_custom_rect","WXCustomAd","_customc_rect_adunit","customVIds","tyq_ad_custom_v","_customc_v_adunit","customHIds","tyq_ad_custom_h","_customc_h_adunit","rewardedIds","tyq_ad_rewarded","_rewardedVideoAdUnitId","preLoadBanner","createRewardedVideoAd","ANDROID_233","ANDROID_4399","rewardedVideoAdCallBack","rewardedVideoAdFailCallBack","mode","action","targetAction","pagePath","targetPagePath","adClickUpload","adShowTypes","bannerAndCustomAd","showBannerTurns","native","reflection","callStaticMethod","VIVO_MINI_GAME","isForce","isBannerAdShowing","interstitialAd","showFullRewarded","failcb","createCustomAd","EType","centerX","centerY","hideCustomAd","showCustomVerticalLeftRightAd","hideCustomVerticalLeftRightAd","showCustomHorizontalTopAd","hideCustomHorizontalTopAd","showCustomAd","adSize","adId","hideCustomAllAd","hideAllAd","operation","inviteUser","forceVideo","isCloseAd","showRewardVideoAd","rewardedAd","isSuccess","VivoManager","TyqBaseLayer","tyqLayerManager","paths","tyqSDKBundle","TyqMoreGameLayer","TyqLayerManager","tyqConstants","tyqResManager","priority","_TyqBaseLayer","lastBannerShow","tyq_banner_touch","TyqResManager","TyqSDKAppVersion","TyqSDK","switch_info","master_switch","_playTime","_gameLevel","item_openId","item_watermark","_watermark","_onlineTime","weixin_ads_data","wxGameIconData","levelCount","timeDiff","shareCallback","setLogOpen","setAppVersion","WECHAT_Box4399","GNetConf","wsUrl","appId","apiKey","server","initOpenId","current_time_stamp","getTimeStamp","jumpIconData","appid","imgUrl","Game","EVENT_HIDE","collectPlayeTime","EVENT_SHOW","urlQuery","ads_id","source_openid","pull_in_ads_id","watermark","appVersion","df","getConfigProbability","elapsed","duration_time","nonce_str","randomStr","time_stamp","app_version","NetworkMgr","xhrPost","wxIconData","wxJumpData","collectClickEventGame","weixin_ads_id","event_id","strLen","$chars","maxPos","pwd","isSecond","randOpenId","s","hexDigits","join","collectLevelInfo","eventType","adType","stata","play_time","game_level","isLogOpen","optionalParams","_console","_console2","_console3","forceShow","tyq_banner_turns","tyq_custom_v_switch","tyq_custom_h_switch","gird","setCustomRectAdSize","setCustomHorizontalAdSize","setCustomVerticalAdSize","setCustomGridAdSize","eventNames","rewardedAdStart","rewardedAdSuccess","onShowLoadingLayer","enterLoadingLayer","onShowHomeLayer","enterHomeLayer","tyq_show_main_layer","addLevelCount","startLevel","tyq_reward_level","tyq_level_count","onShowSettlementLayer","showMoreGameLayer","closeCb","gameVersion","AppSecret","tyq_ad_custom_rect_switch","$localKey","$time","$roleLv","$roleExp","$power","_maxPower","_powerRevoverTime","$powerTime","$baoShi","$optStone","$dayAct","$coin","$mapHand","_attack","_life","$curMap","$openLevel","$levelData","$mapData","$propData","$wearProp","$playerData","$patrolStartTime","$patrolRewardProp","$patrolRewardPropArr","$heroSkin","$towerWeaponLvObj","$towerMapIdObj","_drawAllWeight","_drawAllSureWeight","onInit","loadServerData","setBaseConfig","afterLoadData","getLocalData","energyRecoverTime","updateRoleAtkHp","setConfig","basicGem","basicGold","havenum","nextFloor","useOptStone","useDayAct","useEnergy","useCoin","roleData","suitInfo","getSuitPercentAdd","getSuitId","atkAdd","hpAdd","suitAttr","optRow","isEnter","nextdata","mapid","setPropWearById","autoWearProp","checkWearProp","setPropById","isWear","Level","nextId","ld","propData1","showGetAnimal","node1","positon","resetAccount","userData","mixin","drawType","isBichou","drawData","NaN","extra","rand","passTime","getCoin","towerItem","drawCount","skinID","getRandomSign","taskArr","taskIndex","loadNextTask","valToPercent","fixNum","isM","hours","mins","seconds","isSce","isHour","keyArr","toLocaleLowerCase","compareFunc","item1","item2","isOrign","isInt","dv","date","getDate","canRepeat","totalWeight","tmpRow","isRemove","choseVip","infoLayer","nextRow","choseRow","btnGetBox1","hasGet1","btnGetBox2","hasGet2","onClickBtnGetBox1","onClickBtnGetBox2","onClickBtnLeft","onClickBtnRight","onClickBtnBox1","onClickBtnBox2","vivo","videoAd","bannerAd","nativeAd","videoPosId","bannerPosId","interstitialPosId","nativePosId","setKeepScreenOn","bol","qg","keepSrceenOn","complete","authorize_code","authorize","authorize_token","getProfile","_token","exitApplication","vibrateLong","vibrateShort","systemInfo","platformVersionCode","adObj","isInVideo","posId","onError","errCode","adshow","adLoad","createBannerAd","onSize","offLoad","offError","offClose","addestroy","offSize","createInterstitialAd","adShow","createNativeAd","resS","adList","reportAdShow","clickNativeAd","reportAdClick","desNativeAd","getSetting","cbOK","cbFail","getSystemInfoSync","Weapon","lightNode","forward","outV3","parentPos","weaponUtil","isFixedPos","vipRow","atkByDart","atkTime","atkByShot","back","atkByFist","atkDis","getDisTargetNode","moveMaxFar","atkByStick","targetForceMoveBack","getCalPosition","isFixedDirection","Weapon1","Weapon2","Weapon3","Weapon4","Weapon5","Weapon6","eobj","Weapon7","isHitPass","atkEnd","Weapon8","directionArr","loadWeaponPrefab","_addWeapon","_row2","weaponLayer","weaponNode","global","wechat","isWxAuthorize","userInfoButton","rewardedVideoAd","RiconAD","LiconAD","gridAd","gridAdCunt","GameRecorder","startListener","resumeListener","pauseListener","stopListener","errorListener","abortListener","timeUpdateListener","gameClub","feedbackButton","showListener","hideListener","_bannerAdObjList","_bannerShowIndex","_bannerTimer","_bannerAdRefreshTimeOutId","_curRewardVideoAdUnitId","_shareValue","_rewardValue","_latticeAdUnitId","_RIconAdunit","_LIconAdunit","mainBannerAD","_userInfoButtonData","_feedbackButtonData","_bannerSize","_gameClubSize","_closeRewardVideoListener","preLoadAd","createBanner","bannerObj","adUnitId","adIntervals","windowWidth","windowHeight","onResize","wetchatLogin","wccode","wcencrypted","wciv","encryptedData","iv","cbDone","isSupportedAPI","authSetting","createUserInfoButton","destroyAuthorizeBtn","onTapUserInfoButton","onTap","cbOk","getUserInfo","withCredentials","userResult","Error","wxGetSetting","sysInfo","screenWidth","screenHeight","text","lineHeight","backgroundColor","textAlign","fontSize","borderRadius","_title","_imageUrl","_query","imageUrl","refreshTime","showBannerNext","ad","clearTimeout","destroyBannerAd","successShowCb","closeListener","isEnded","closeRewardVideo","rewardedVideoAdOnLoadListener","rewardedVideoAdOnErrorListener","shareValue","rewardValue","isRewardBehavior","adunit","sceneID","_this9","onErrorListener","onCloseListener","interstitialAdOnLoadListener","createGameClubButton","pixelRatio","showGameClub","hideGameClub","postMessage","getOpenDataContext","createFeedbackButton","image","onTapFeedbackButton","showFeedbackButton","hideFeedbackButton","getGameRecorder","registerRecordScreenEvent","_this10","currentTime","startRecordScreen","pauseRecordScreen","resumeRecordScreen","stopRecordScreen","abortRecordScreen","abort","createGameRecorderShareButton","callbak","onShowListener","offShow","onHideListener","offHide","navigateToMiniProgram","_appId","_path","envVersion","api","showModal","exitMiniProgram","showToast","getSystemInfo","aldSendEvent","objOrStr","createIconAd","_this11","styleItemArray","appNameHidden","borderWidth","borderColor","createGameIcon","starTop","showIconAd","_this12","createGridAd","_this13","adTheme","gridCount","showGridAd","hideGridAd","bool","http","_timeOut","_httpUrl","_apiKey","post","route","mid","dataStr","createSign","onHttpError","checkRespone","post2","MsgToString","_arr","strToDES3","signstr","MD5","decodeURIComponent","md5encode","core_md5","olda","oldb","oldc","oldd","md5_ff","md5_gg","md5_hh","md5_ii","safe_add","md5_cmn","q","bit_rol","lsw","cnt","binarray","hex_tab","binl2hex","bin","str2binl","instring","hexcase","rstr2hex","fromCharCode","binl2rstr","binl_md5","rstr2binl","rstr_md5","str2rstr_utf8","extraUrl","GHttpClient","requestURL","networkMgr","messageList","limitMessageNum","timer","isLock","_dealHeadListener","_encryptRule","_encryptCode","_intervalTime","_errorServerCode","_successCode","_errorRestartGameCode","_errorNetCode","_overTime","_uid","lastMessage","_route","head","netPackage","NetworkPackage","failCallBack","startTimer","sendMessage","_respone","jsdecrypt","succeedResponeBody","succeedResponeHead","clearTimer","deleteMessageListItem","checkNextMessage","checkErrorCode","restartGame","resultStr","getErrorCodeMeaning","sendNum","_data","isCheck","errorNum","errStr","checkPackage","tip","pack","codes","lock","eventHandlers","isWsConnect","ws","wxws","msgBuff","addListener","onReconnect","respStickPack","sendStickPack","getGuid","getTotalLen","stick_id","stick_len","stick_val","sendSP","close","ws_connect","NATIVE","WebSocket","onopen","onmessage","onMessage","onclose","resp","respJson","netdata","ontTimeLimit","slice","setadunit","rectid","hid","oneid","_customc_one_adunit","extraId","SDKVersion","_ads","_waits","compareVersion","getPos","fixed","filter","destroyCustomAd","h","sc_w","winSize","sc_h"],"mappings":"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","file":"all.js","sourcesContent":["import { _decorator } from 'cc';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ModelLayer')\r\nexport class ModelLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Animation, AnimationState, Component, Node, sp, _decorator } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AnimationCtrl')\r\nexport class AnimationCtrl extends Component {\r\n\r\n    spineSkeleton: sp.Skeleton;\r\n    animationComponent: Animation;\r\n\r\n    lastAni: string;\r\n    lastLoop: boolean;\r\n\r\n    animationEndCallback: Function;\r\n\r\n    onLoad() {\r\n        if (!this.spineSkeleton) {\r\n            this.spineSkeleton = this.getComponent(sp.Skeleton);\r\n        }\r\n        if (!this.spineSkeleton) {\r\n            this.spineSkeleton = this.getComponentInChildren(sp.Skeleton);\r\n        }\r\n\r\n        if (!this.spineSkeleton) {\r\n            this.animationComponent = this.getComponent(Animation);\r\n        }\r\n        if (!this.animationComponent) {\r\n            this.animationComponent = this.getComponentInChildren(Animation);\r\n        }\r\n        if (this.animationComponent) {\r\n            this.animationComponent.on(Animation.EventType.FINISHED, this.animationFinished, this);\r\n        }\r\n    }\r\n\r\n    setSpineSkeletonNode(node: Node) {\r\n        this.spineSkeleton = node.getComponent(sp.Skeleton);\r\n    }\r\n    setAnimationNode(node: Node) {\r\n        this.animationComponent = node.getComponent(Animation);\r\n    }\r\n\r\n    pauseAnimation() {\r\n        if (!this.spineSkeleton) {\r\n            return;\r\n        }\r\n        this.spineSkeleton.paused = true;\r\n    }\r\n    resumeAnimation() {\r\n        if (!this.spineSkeleton) {\r\n            return;\r\n        }\r\n        this.spineSkeleton.paused = false;\r\n    }\r\n\r\n    animationFinished(eventName: string, animationState: AnimationState) {\r\n        if (eventName == Animation.EventType.FINISHED) {\r\n            if (this.animationEndCallback) {\r\n                this.animationEndCallback(animationState.name);\r\n            }\r\n        }\r\n    }\r\n\r\n    playAnimation(name: string, isLoop: boolean = true, completeCb?: Function) {\r\n        if (!name) {\r\n            return;\r\n        }\r\n\r\n        if (this.spineSkeleton) {\r\n            this.spineSkeleton.loop = isLoop;\r\n            this.spineSkeleton.setAnimation(0, name, isLoop);\r\n            if (completeCb) {\r\n                this.spineSkeleton.setCompleteListener(() => {\r\n                    // 每次循环结束都会回调\r\n                    completeCb(name);\r\n                });\r\n            } else {\r\n                // 置空回调\r\n                this.spineSkeleton.setCompleteListener(null);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.animationComponent) {\r\n            this.animationEndCallback = completeCb;\r\n            this.animationComponent.play(name);\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n    async playAnimationOnce(name: string, endCb?: Function) {\r\n        return new Promise((resolve, reject) => {\r\n            if (!name) {\r\n                resolve();\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n                return;\r\n            }\r\n            if (this.spineSkeleton) {\r\n                if (this.lastAni == undefined) {\r\n                    this.lastAni = this.spineSkeleton.animation;\r\n                }\r\n                if (this.lastLoop == undefined) {\r\n                    this.lastLoop = this.spineSkeleton.loop;\r\n                }\r\n            }\r\n\r\n            this.playAnimation(name, false, () => {\r\n                if (this.spineSkeleton) {\r\n                    this.playAnimation(this.lastAni, this.lastLoop);\r\n                    this.lastAni = undefined;\r\n                    this.lastLoop = undefined;\r\n                }\r\n                resolve();\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, v3, Vec2, Vec3, _decorator, Tween } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { mapModel } from '../../model/mapModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AnimationTrack')\r\nexport class AnimationTrack extends Component {\r\n\r\n    duration: number = 0.6;\r\n    time: number = 0;\r\n\r\n    // 重力加速度\r\n    g: number = -2000;\r\n    // 初速度\r\n    v: number = 800;\r\n    vx: number = 0;\r\n    vy: number = 0;\r\n    endY: number = 0;\r\n\r\n    aniFlag: number = 0;\r\n\r\n    targetPos: Vec3;\r\n\r\n    endCallback: Function;\r\n\r\n    startShowThrow(cb?: Function) {\r\n        this.endCallback = cb;\r\n        this.aniFlag = 1;\r\n        Tween.stopAllByTarget(this.node);\r\n\r\n        // 抛出角度\r\n        let radian = utilTools.getFloatValue(utilTools.angleToRadian(75), utilTools.angleToRadian(85));\r\n        if (Math.random() > 0.5) {\r\n            radian = Math.PI - radian;\r\n        }\r\n\r\n        this.v = 800 + 200 * Math.random();\r\n        this.vx = this.v * Math.cos(radian);\r\n        this.vy = this.v * Math.sin(radian);\r\n\r\n        this.endY = this.node.position.y - 20 - 50 * Math.random();\r\n    }\r\n\r\n    startBeiSaiEr() {\r\n        this.aniFlag = 2;\r\n\r\n        this.targetPos = cocosUtil.convertToWorldSpace(mapModel.mapLayer.coinIconNode);\r\n    }\r\n\r\n    moveTargetUpdate(dt: number) {\r\n        let targetPos = cocosUtil.convertToNodeSpace(this.node, this.targetPos);\r\n        let playerPos = mapModel.player.node.position;\r\n        targetPos.x += playerPos.x;\r\n        targetPos.y += playerPos.y;\r\n        let nodePos = this.node.getPosition();\r\n        if (Vec2.distance(nodePos, targetPos) <= 20) {\r\n            if (this.endCallback) {\r\n                this.endCallback();\r\n            }\r\n            return;\r\n        }\r\n        let direction = targetPos.subtract(nodePos).normalize();\r\n        let dis = dt * 1500;\r\n        direction.multiplyScalar(dis);\r\n        nodePos.add(direction);\r\n        this.node.position = nodePos;\r\n    }\r\n\r\n    showThrowUpdate(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        pos.x += this.vx * dt;\r\n        pos.y += this.vy * dt;\r\n        this.vy += this.g * dt;\r\n        this.node.setPosition(pos);\r\n        if (pos.y <= this.endY) {\r\n            this.aniFlag = 0;\r\n            let time = 0.1;\r\n            let dy = 40;\r\n            let dx = 15;\r\n            if (this.vx < 0) {\r\n                dx = -dx;\r\n            }\r\n            tween(this.node).by(time, { position: v3(dx, dy) }, { easing: \"quadOut\" })\r\n                .by(time, { position: v3(dx, -dy) }, { easing: \"quadIn\" })\r\n                .delay(0.5 + 0.3 * Math.random()).call(() => {\r\n                    this.startBeiSaiEr();\r\n                }).start();\r\n        }\r\n    }\r\n\r\n    update(dt: number) {\r\n        switch (this.aniFlag) {\r\n            case 1:\r\n                this.showThrowUpdate(dt);\r\n                break;\r\n            case 2:\r\n                this.moveTargetUpdate(dt);\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { AudioClip, AudioSource } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { constants } from \"../data/constants\";\r\nimport { resManager } from \"./resManager\";\r\n\r\nclass AudioManager {\r\n\r\n    private static _instance: AudioManager;\r\n    private constructor() { };\r\n    public static get instance(): AudioManager {\r\n        if (!this._instance) {\r\n            this._instance = new AudioManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    musicAudioSource: AudioSource;\r\n    effectAudioSource: AudioSource;\r\n\r\n    audioClips: any = {};\r\n\r\n    musicVolume: number = 1;\r\n    effectVolume: number = 1;\r\n    musicName: string = \"\";\r\n\r\n    setMusicAudioSource(audioSource: AudioSource) {\r\n        this.musicAudioSource = audioSource;\r\n    }\r\n\r\n    setEffectAudioSource(audioSource: AudioSource) {\r\n        this.effectAudioSource = audioSource;\r\n    }\r\n\r\n    initData(data: any) {\r\n        if (!data) {\r\n            data = {};\r\n        }\r\n\r\n        if (data.musicVolume != undefined) {\r\n            this.musicVolume = data.musicVolume;\r\n        }\r\n\r\n        if (data.effectVolume != undefined) {\r\n            this.effectVolume = data.effectVolume;\r\n        }\r\n\r\n    }\r\n\r\n    getSaveData(now: Date) {\r\n        let data: any = {};\r\n        data.musicVolume = this.musicVolume;\r\n        data.effectVolume = this.effectVolume;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadAllAudio(onProgress?: Function, onComplete?: Function) {\r\n        resManager.loadAssetByBundleDir(constants.bundles.audio,\r\n            \"\", AudioClip, (percent: number, item: any) => {\r\n                if (percent > 0.96) {\r\n                    // 解决提前回调百分百导致的音频资源还未缓存到audioClips\r\n                    percent = 0.96;\r\n                }\r\n                if (onProgress) {\r\n                    onProgress(percent);\r\n                }\r\n            }, (assetArr: any) => {\r\n                for (let i in assetArr) {\r\n                    let asset = assetArr[i];\r\n                    let name = asset.name;\r\n                    if (!name) {\r\n                        continue;\r\n                    }\r\n                    this.audioClips[name] = asset;\r\n                }\r\n                if (onComplete) {\r\n                    onComplete();\r\n                }\r\n            });\r\n    }\r\n\r\n    loadAudios(pathArr: any, onProgress?: Function, onComplete?: Function) {\r\n        resManager.loadAssetByPathArr(constants.bundles.audio, pathArr, AudioClip, (percent: number) => {\r\n            if (percent > 0.96) {\r\n                // 解决提前回调百分百导致的音频资源还未缓存到audioClips\r\n                percent = 0.96;\r\n            }\r\n            if (onProgress) {\r\n                onProgress(percent);\r\n            }\r\n        }, (assetArr: any) => {\r\n            for (let i in assetArr) {\r\n                let asset = assetArr[i];\r\n                let name = asset.name;\r\n                if (!name) {\r\n                    continue;\r\n                }\r\n                this.audioClips[name] = asset;\r\n            }\r\n            if (onComplete) {\r\n                onComplete();\r\n            }\r\n        });\r\n    }\r\n\r\n    loadAudio(path: string, onComplete?: Function) {\r\n        resManager.loadAsset(constants.bundles.audio, path, AudioClip, null, (err: any, asset: AudioClip) => {\r\n            if (err) {\r\n                if (onComplete) {\r\n                    onComplete();\r\n                }\r\n                return;\r\n            }\r\n            this.audioClips[asset.name] = asset;\r\n            if (onComplete) {\r\n                onComplete(asset);\r\n            }\r\n        });\r\n    }\r\n\r\n    getMusiceVolume(): number {\r\n        return this.musicVolume;\r\n    }\r\n    setMusicVolume(val: number) {\r\n        val = Math.round(val * 1000) / 1000;\r\n        this.musicVolume = val;\r\n        this.musicAudioSource.volume = val;\r\n\r\n        if (val <= 0) {\r\n            this.musicAudioSource.pause();\r\n            return;\r\n        }\r\n        this.playMusic(this.musicName);\r\n    }\r\n    async playMusic(musicName: string) {\r\n        if (!musicName) {\r\n            return;\r\n        }\r\n        this.musicName = musicName;\r\n        if (this.musicVolume <= 0) {\r\n            return;\r\n        }\r\n        let clip: any = await this.getAudioClip(musicName);\r\n        if (!clip) {\r\n            return;\r\n        }\r\n        if (this.musicAudioSource.playing) {\r\n            if (this.musicAudioSource.clip == clip) {\r\n                return;\r\n            }\r\n            this.musicAudioSource.stop();\r\n        }\r\n        this.musicAudioSource.clip = clip;\r\n        this.musicAudioSource.loop = true;\r\n        this.musicAudioSource.play();\r\n    }\r\n\r\n    gameOnShow(force: boolean = false) {\r\n        if (!this.musicAudioSource || this.musicVolume <= 0) {\r\n            return;\r\n        }\r\n        myLog.i(\"===========gameOnShow:\", this.musicAudioSource.playing, this.musicAudioSource.state);\r\n        if (!this.musicAudioSource.playing || force) {\r\n            myLog.i(\"=======call playing\");\r\n            this.musicAudioSource.play();\r\n        }\r\n    }\r\n\r\n    getEffectVolume(): number {\r\n        return this.effectVolume;\r\n    }\r\n    setEffectVolume(val: number) {\r\n        val = Math.round(val * 1000) / 1000;\r\n        this.effectVolume = val;\r\n        this.effectAudioSource.volume = val;\r\n    }\r\n    async playEffect(effectName: string) {\r\n        if (!effectName || this.effectVolume <= 0) {\r\n            return;\r\n        }\r\n        let clip: any = await this.getAudioClip(effectName);\r\n        if (!clip) {\r\n            return;\r\n        }\r\n        this.effectAudioSource.playOneShot(clip);\r\n    }\r\n\r\n    getAudioClip(name: string) {\r\n        return new Promise((resolve) => {\r\n            let clip = this.audioClips[name];\r\n            if (clip) {\r\n                resolve(clip);\r\n                return;\r\n            }\r\n            this.loadAudio(name, (clip: AudioClip) => {\r\n                resolve(clip);\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport const audioManager = AudioManager.instance;\r\n","import { find, _decorator } from 'cc';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AwardInfoLayer')\r\nexport class AwardInfoLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.setItemLayer(this.getNodeByPath(\"ui/itemLayer\"), this.layerData.awardArr, this.refreshAwardItem.bind(this));\r\n    }\r\n\r\n    refreshAwardItem(itemUI: any, award: any) {\r\n        this.setPropItem(award[0], find(\"icon\", itemUI), award[1], find(\"bg\", itemUI), find(\"num\", itemUI));\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnSure() {\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBg() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { msgac } from '../../data/msgac';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BackHomeLayer')\r\nexport class BackHomeLayer extends BaseLayer {\r\n\r\n    uiNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.uiNode = this.getNodeByPath(\"ui\");\r\n        this.isShowBannerAd = true;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        cocosUtil.tweenScaleIn2(this.uiNode);\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGoOn() {\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnExit() {\r\n        this.closeLayer();\r\n        serverMsg.send(msgac.mapLeave);\r\n    }\r\n\r\n}\r\n\r\n","import { Color, Node, tween, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { localText } from '../../data/localText';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BackLifeLayer')\r\nexport class BackLifeLayer extends BaseLayer {\r\n\r\n    timeNode: Node;\r\n    time: number = 9;\r\n\r\n    diamondNumNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.timeNode = this.getNodeByPath(\"ui/time/time\");\r\n        this.diamondNumNode = this.getNodeByPath(\"ui/btns/btnDiamond/info/num\");\r\n        this.isShowBannerAd = true;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        UserData.getInstance().mapData = null;\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        if (designManager.config.backLifeCount > 0 && mapModel.mapSystem.backlifeCount >= designManager.config.backLifeCount) {\r\n            // 复活次数已达上限\r\n            mapModel.mapSystem.doSettlement(false);\r\n            this.closeLayer();\r\n            return;\r\n        }\r\n        tween(this.timeNode).delay(0.2).to(0.6, { scale: v3(1.3, 1.3, 1) }).call(() => {\r\n            this.time--;\r\n            if (this.time < 0) {\r\n                this.time = 0;\r\n                if (tyqAdManager.getChannel() == Channel.H5_4399) {\r\n                    this.onClickBtnClose()\r\n                }\r\n            }\r\n            this.setString(this.timeNode, this.time);\r\n        }).to(0.6, { scale: v3(1, 1, 1) }).union().repeat(10).start();\r\n\r\n        this.setString(this.diamondNumNode, \"x\" + designManager.config.backLifeDiamond);\r\n        if (UserData.getInstance().baoshi < designManager.config.backLifeDiamond) {\r\n            cocosUtil.setRenderableColor(this.diamondNumNode, Color.RED);\r\n        } else {\r\n            cocosUtil.setRenderableColor(this.diamondNumNode, Color.WHITE);\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    roleBackLife() {\r\n        mapModel.mapSystem.backlifeCount++;\r\n        mapModel.player.backLife();\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnClose() {\r\n        mapModel.mapSystem.doSettlement(false);\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnAd() {\r\n        sdkManager.openAd(\"复活\", (st: number) => {\r\n            if (st == 1) {\r\n                this.roleBackLife();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnDiamond() {\r\n        if (UserData.getInstance().baoshi < designManager.config.backLifeDiamond) {\r\n            this.createNotice(localText.lackDiamond);\r\n            return;\r\n        }\r\n        UserData.getInstance().useBaoShi(-designManager.config.backLifeDiamond, true);\r\n        this.roleBackLife();\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator } from 'cc';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BackMapLayer')\r\nexport class BackMapLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.isShowBannerAd = true;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnClose() {\r\n        UserData.getInstance().mapData = null;\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnSure() {\r\n        let mapId = UserData.getInstance().mapData.mapModel.mapId;\r\n        this.layerCb(mapId);\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","\r\nimport { Button, Component, EventTouch, find, Label, Node, Prefab, ProgressBar, ResolutionPolicy, RichText, ScrollView, sp, Sprite, SpriteFrame, v3, view, Widget } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { layerManager } from '../../manager/layerManager';\r\nimport { AssetConfig, ResLoader, resManager } from '../../manager/resManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { ItemLayer } from './ItemLayer';\r\nimport { ScrollViewUtil } from './ScrollViewUtil';\r\n\r\nexport class BaseLayer extends Component {\r\n\r\n    public layerName: string = \"DefaultLayer\";\r\n\r\n    // 展示界面携带的数据和回调\r\n    public layerData: any = {};\r\n    public layerCb: Function = null;\r\n    public layerId: number = -1;\r\n\r\n    // {路径:节点对象}\r\n    public pathNodeObj: Map<string, Node> = new Map();\r\n\r\n    // 资源管理类\r\n    private resLoader: ResLoader = new ResLoader();\r\n    // 是否开启内存管理\r\n    public autoReleaseAsset: boolean = false;\r\n\r\n    // 特定预加载的资源\r\n    public preLoadAssetConfigArr: AssetConfig[];\r\n\r\n    // 监听事件\r\n    private eventArr: any;\r\n\r\n    // 控制是否打开秒级的update\r\n    public openUpdateSecond: boolean = false;\r\n    private updateSecondInterval: any;\r\n\r\n    // 按钮是否响应点击\r\n    public openAllBtnInteractive: boolean = true;\r\n\r\n    // 按钮长按功能开关\r\n    public openBtnLongPress: boolean = false;\r\n    // 多长时间后开始触发\r\n    private btnLongTrigTime: number = 0.5;\r\n    private btnLognTrigTimeCount: number = 0;\r\n    // 触发次数统计\r\n    private btnLongTrigCount: number = 0;\r\n    // 长按按钮节点对象\r\n    private btnLongNode: Node = null;\r\n\r\n    // 控制是否显示banner广告\r\n    isShowBannerAd: boolean = false;\r\n\r\n    onLoad() {\r\n        // // 背景适配\r\n        // let bgNode = find(\"bg\", this.node);\r\n        // this.screenAdapterBG(bgNode);\r\n        // let bgNode2 = find(\"bg2\", this.node);\r\n        // this.screenAdapterBG(bgNode2);\r\n\r\n        // // ui适配\r\n        // let uiNode = find(\"ui\", this.node);\r\n        // this.screenAdapterUI(uiNode);\r\n        // let uiNode2 = find(\"ui2\", this.node);\r\n        // this.screenAdapterUI(uiNode2);\r\n\r\n        this.addPathNode(this.node, \"\");\r\n\r\n        // this.DesignResolutionHeight()\r\n    }\r\n\r\n    DesignResolutionHeight() {\r\n        view.setDesignResolutionSize(720, 1660, ResolutionPolicy.FIXED_HEIGHT)\r\n        myLog.i(\"-----ResolutionPolicy.FIXED_HEIGHT\")\r\n    }\r\n\r\n    chooseDesignResolution() {\r\n        //    let resolute = view.getDesignResolutionSize()\r\n        let screen1 = view.getVisibleSize()\r\n        if (screen1.width / screen1.height > 720 / 1280) {\r\n            view.setDesignResolutionSize(720, 1280, ResolutionPolicy.FIXED_HEIGHT)\r\n            myLog.i(\"choose  ResolutionPolicy.FIXED_HEIGHT\")\r\n        } else {\r\n            myLog.i(\"choose  ResolutionPolicy.FIXED_WIDTH\")\r\n            view.setDesignResolutionSize(720, 1280, ResolutionPolicy.FIXED_WIDTH)\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        this.addButtonListener(this.node);\r\n        this.initUI();\r\n        this.refreshRedPoint();\r\n\r\n        if (this.openUpdateSecond) {\r\n            if (this.updateSecondInterval) {\r\n                clearInterval(this.updateSecondInterval);\r\n            }\r\n            this.updateSecondInterval = setInterval(() => {\r\n                this.updateSecond();\r\n            }, 1000);\r\n            this.updateSecond();\r\n        }\r\n\r\n        if (this.isShowBannerAd && !playerModel.isRecordAd) {\r\n            tyqSDK.showBannerAd()\r\n        }\r\n\r\n        eventManager.on(msgac.refreshRedPoint, this.refreshRedPoint, this);\r\n\r\n    }\r\n\r\n\r\n\r\n    updateSecond() {\r\n\r\n    }\r\n\r\n    refreshRedPoint() {\r\n\r\n    }\r\n\r\n    initUI() {\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        this.removeEventArr(this.eventArr);\r\n\r\n        eventManager.off(msgac.refreshRedPoint, this.refreshRedPoint, this);\r\n\r\n        if (this.updateSecondInterval) {\r\n            clearInterval(this.updateSecondInterval);\r\n            this.updateSecondInterval = undefined;\r\n        }\r\n        if (this.isShowBannerAd) {\r\n            tyqSDK.hideBannerAd()\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n        switch (this.layerName) {\r\n            case constants.layers.HomeLayer:\r\n                // 这些UI不释放资源\r\n                return;\r\n            default:\r\n                break;\r\n        }\r\n        if (this.autoReleaseAsset) {\r\n            this.resLoader.releaseAllAsset();\r\n        }\r\n    }\r\n\r\n    addPathNode(node: Node, path: string) {\r\n        if (node != this.node) {\r\n            this.pathNodeObj.set(path, node);\r\n        }\r\n        if (path) {\r\n            path += \"/\";\r\n        }\r\n        let chs = node.children;\r\n        for (let i = 0, len = chs.length; i < len; i++) {\r\n            let pNode = chs[i];\r\n            this.addPathNode(pNode, path + pNode.name);\r\n        }\r\n    }\r\n\r\n    getNodeByPath(path: string): Node {\r\n        let node = this.pathNodeObj.get(path);\r\n        if (node) {\r\n            return node;\r\n        }\r\n\r\n        node = find(path, this.node);\r\n        if (node) {\r\n            this.pathNodeObj.set(path, node);\r\n            return node;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 缩放背景图，达到满屏显示，背景图部分内容超出屏幕也没事\r\n     * @param node 背景图节点\r\n     */\r\n    screenAdapterBG(node: Node) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let widget = node.getComponent(Widget);\r\n        if (widget) {\r\n            widget.enabled = false;\r\n        }\r\n        let scale = cocosUtil.getScreenBgAdapterScale();\r\n        let scaleX = node.getScale().x;\r\n        let scaleY = node.getScale().y;\r\n        node.setScale(v3(scaleX * scale, scaleY * scale, 1));\r\n    }\r\n\r\n    /**\r\n     * 缩放UI，达到屏幕适配，ui上的全部内容在屏幕内显示，如果是全屏UI，ui节点如果有widget，缩放后依然有效\r\n     * @param node ui根节点\r\n     */\r\n    screenAdapterUI(node: Node) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let scale = cocosUtil.getScreenAdapterScale();\r\n        let scaleX = node.getScale().x;\r\n        let scaleY = node.getScale().y;\r\n        node.setScale(v3(scaleX * scale, scaleY * scale, 1));\r\n    }\r\n\r\n    addButtonListener(node: Node) {\r\n        if (node.getComponent(Button)) {\r\n            node.on(\"click\", this.preOnButtonClick, this);\r\n            if (this.openBtnLongPress) {\r\n                node.on(Node.EventType.TOUCH_START, this.preOnButtonTouchStart, this);\r\n                node.on(Node.EventType.TOUCH_MOVE, this.preOnButtonTouchMove, this);\r\n                node.on(Node.EventType.TOUCH_END, this.preOnButtonTouchEnd, this);\r\n                node.on(Node.EventType.TOUCH_CANCEL, this.preOnButtonTouchCancel, this);\r\n            }\r\n        }\r\n        if (node.getComponent(ScrollView)) {\r\n            let name = node.name;\r\n            if (name.indexOf(\"NoUtil\") == -1 && !node.getComponent(ScrollViewUtil)) {\r\n                node.addComponent(ScrollViewUtil);\r\n            }\r\n        }\r\n        // if (node.getComponent(Label)) {\r\n        //     let label = node.getComponent(Label);\r\n        //     label.useSystemFont = true;\r\n        // }\r\n        // if (node.getComponent(RichText)) {\r\n        //     let richText = node.getComponent(RichText);\r\n        //     richText.useSystemFont = true;\r\n        // }\r\n\r\n        let chs = node.children;\r\n        for (let i = 0, max = chs.length; i < max; i++) {\r\n            let ch = chs[i];\r\n            this.addButtonListener(ch);\r\n        }\r\n\r\n    };\r\n\r\n    preOnButtonClick(btn: any) {\r\n        if (!this.openAllBtnInteractive) {\r\n            return;\r\n        }\r\n        if (this.openBtnLongPress && this.btnLongTrigCount > 0) {\r\n            this.btnLongTrigCount = 0;\r\n            return;\r\n        }\r\n\r\n        let node = btn.node;\r\n        let name = node.name;\r\n        myLog.i(this.layerName + \" onButtonClick \" + name);\r\n\r\n        if (this[\"onButtonClick\"]) {\r\n            this[\"onButtonClick\"](node, node.name);\r\n        }\r\n\r\n        if (name.length >= 2) {\r\n            let top = name.substring(0, 1);\r\n            let remain = name.substring(1, name.length);\r\n            let key = \"onClick\" + top.toLocaleUpperCase() + remain;\r\n            if (this[key]) {\r\n                this[key](node);\r\n            }\r\n        }\r\n\r\n        if (!node.hasPlayAudio) {\r\n            // 如果还没播放按钮音效，就播放通用按钮音效\r\n        }\r\n    }\r\n\r\n    preOnButtonLongClick(btnNode: Node) {\r\n        if (!this.openAllBtnInteractive) {\r\n            return;\r\n        }\r\n\r\n        let name = btnNode.name;\r\n        myLog.i(this.layerName + \" onButtonLongClick \" + name);\r\n        if (this[\"onButtonLongClick\"]) {\r\n            return this[\"onButtonLongClick\"](btnNode, name);\r\n        }\r\n\r\n        if (name.length >= 2) {\r\n            let top = name.substring(0, 1);\r\n            let remain = name.substring(1, name.length);\r\n            let key = \"onLongClick\" + top.toLocaleUpperCase() + remain;\r\n            if (this[key]) {\r\n                return this[key](btnNode);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    preOnButtonTouchStart(event: EventTouch) {\r\n        let btnNode = event.target;\r\n        let touch = event.touch;\r\n        this.btnLongNode = btnNode;\r\n        this.btnLognTrigTimeCount = 0;\r\n        this.btnLongTrigCount = 0;\r\n    }\r\n\r\n    preOnButtonTouchMove(event: EventTouch) {\r\n\r\n    }\r\n\r\n    preOnButtonTouchEnd(event: EventTouch) {\r\n        this.btnLongNode = null;\r\n    }\r\n\r\n    preOnButtonTouchCancel(event: EventTouch) {\r\n        this.btnLongNode = null;\r\n    }\r\n\r\n    openPropInfoLayer2(id: number, num: number = undefined) {\r\n        if (num == undefined) {\r\n            num = UserData.getInstance().getPropNumById(id);\r\n        }\r\n        let obj = {\r\n            id: id,\r\n            num: num\r\n        };\r\n        this.openLayer(constants.layers.PropInfoLayer2, obj);\r\n    }\r\n\r\n    isShowingLayer(layerName: string) {\r\n        return layerManager.isShowingLayer(layerName);\r\n    }\r\n\r\n    showHintLayer(msg: string, cb?: Function) {\r\n        let hintLayer = find(\"Canvas/hintLayer\");\r\n        hintLayer.active = true;\r\n        // @ts-ignore\r\n        hintLayer.cb = cb;\r\n        this.setString(find(\"ui/hint\", hintLayer), msg);\r\n    }\r\n    hideHintLayer() {\r\n        let hintLayer = find(\"Canvas/hintLayer\");\r\n        hintLayer.active = false;\r\n        // @ts-ignore\r\n        if (hintLayer.cb) {\r\n            // @ts-ignore\r\n            hintLayer.cb();\r\n        }\r\n    }\r\n\r\n    openMsgBoxLayer(hint: string) {\r\n        let obj = {\r\n            hint: hint\r\n        };\r\n        this.openLayer(constants.layers.MsgBoxLayer, obj);\r\n    }\r\n\r\n    openAwardGetLayer(awardArr: any) {\r\n        if (!awardArr || awardArr.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        this.openLayer(constants.layers.RewardLayer, { propArr: awardArr, notMoveAni: true });\r\n    }\r\n\r\n    openAwardInfoLayer(awardArr: any) {\r\n        if (!awardArr || awardArr.length <= 0) {\r\n            return;\r\n        }\r\n        this.openLayer(constants.layers.AwardInfoLayer, { awardArr: awardArr });\r\n    }\r\n\r\n    setRoleSkin(roleNode: Node, id: number = 0) {\r\n        let skin = UserData.getInstance().getHeroSkin(id);\r\n        roleNode.getComponent(sp.Skeleton).setSkin(skin);\r\n    }\r\n\r\n    playAudioEffect(name: string, btnNode?: any, delayTime?: number) {\r\n        if (!delayTime) {\r\n            delayTime = 0;\r\n        }\r\n        if (cocosUtil.isValid(btnNode)) {\r\n            btnNode.hasPlayAudio = true;\r\n        }\r\n        this.scheduleOnce(() => {\r\n            audioManager.playEffect(name);\r\n            if (cocosUtil.isValid(btnNode)) {\r\n                btnNode.hasPlayAudio = undefined;\r\n            }\r\n        }, delayTime)\r\n    }\r\n\r\n    onClickBtnClose(node: Node) {\r\n        this.closeLayer();\r\n    }\r\n\r\n    openLayer(layerName: string, data?: any, cb?: Function, showCb?: Function) {\r\n        // 默认每个弹窗只允许同时显示一个\r\n        if (typeof (data) == \"function\") {\r\n            cb = data;\r\n            data = null;\r\n        }\r\n\r\n        layerManager.openSingleLayer(layerName, data, cb, (baseLayer: BaseLayer, prefab: Prefab) => {\r\n            if (baseLayer.autoReleaseAsset && baseLayer.resLoader) {\r\n                baseLayer.resLoader.addAsset(prefab);\r\n                if (baseLayer.preLoadAssetConfigArr) {\r\n                    baseLayer.preLoadAssetConfigArr.forEach((assetConfig: AssetConfig) => {\r\n                        if (assetConfig.asset) {\r\n                            baseLayer.resLoader.addAsset(assetConfig.asset);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (showCb) {\r\n                showCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    closeLayer(layerId?: number | string) {\r\n        if (!layerId) {\r\n            layerId = this.layerId;\r\n        }\r\n        if (layerId && layerId != -1) {\r\n            layerManager.closeLayer(layerId);\r\n            return;\r\n        }\r\n        this.node.destroy();\r\n    }\r\n\r\n    addEventArr(arr: any) {\r\n        this.eventArr = arr;\r\n        for (let i in arr) {\r\n            let val = arr[i];\r\n            if (!val) {\r\n                continue;\r\n            }\r\n            eventManager.on(val, this.preProcessEvent, this);\r\n        }\r\n    }\r\n\r\n    removeEventArr(arr: any) {\r\n        for (let i in arr) {\r\n            let val = arr[i];\r\n            if (!val) {\r\n                continue;\r\n            }\r\n            eventManager.off(val, this.preProcessEvent, this);\r\n        }\r\n    }\r\n\r\n    preProcessEvent(event: any) {\r\n        let ac = event.ac;\r\n        let data = event.data;\r\n        let key = msgac.ac2KeyObj[ac] + \"Ret\";\r\n        if (this[key]) {\r\n            this[key].call(this, data);\r\n        }\r\n        this.processEvent(ac, data);\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n\r\n    }\r\n\r\n    showLackItem(itemId: number) {\r\n        let itemRow = designManager.getRowById(constants.tableName.prop, itemId);\r\n        if (!itemRow) {\r\n            return;\r\n        }\r\n        this.createNotice(localText.lackItemHint.format(itemRow.name));\r\n    }\r\n\r\n    showGetItem(itemId: number, num: number) {\r\n        // let itemRow = designManager.getRowById(constants.tableName.item, itemId);\r\n        // this.createNotice(localText.textObj.itemGet.format(itemRow.name, num));\r\n    }\r\n\r\n    createNotice(content) {\r\n        layerManager.createNotice(content);\r\n    }\r\n\r\n    scrollViewSetData(scrollViewNode: Node, arr: any, refreshItemFunc?: Function, resetPos: boolean = true, itemTween: boolean = false) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.setData(arr, (itemUI: Node, item: any, index: number) => {\r\n            if (refreshItemFunc) {\r\n                refreshItemFunc(itemUI, item, index);\r\n            }\r\n            this.addButtonListener(itemUI);\r\n        }, resetPos, itemTween);\r\n    }\r\n    scrollViewAddData(scrollViewNode: Node, arr: any, resetPos: boolean = false) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.pushData(arr, resetPos);\r\n    }\r\n    scrollViewRefreshList(scrollViewNode: Node) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.refreshList();\r\n    }\r\n    scrollViewRefreshItemUI(scrollViewNode: Node, itemUI: Node, item?: any) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.refreshIndex(itemUI[\"index\"], item);\r\n    }\r\n    scrollViewRefreshItemUIByIndex(scrollViewNode: Node, index: number, item?: any) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.refreshIndex(index, item);\r\n    }\r\n    scrollViewRemoveItemUI(scrollViewNode: Node, itemUI: Node, resetPos: boolean = false) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.removeByIndex(itemUI[\"index\"], resetPos);\r\n    }\r\n    scrollViewRemoveItemUIByIndex(scrollViewNode: Node, index: number, resetPos: boolean = false) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.removeByIndex(index, resetPos);\r\n    }\r\n    scrollViewScrollToEnd(scrollViewNode: Node, time?: number) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.scrollToEnd(time);\r\n    }\r\n    scrollViewScrollToItemUI(scrollViewNode: Node, itemUI: Node, time?: number) {\r\n        this.scrollViewScrollToIndex(scrollViewNode, itemUI[\"index\"], time);\r\n    }\r\n    scrollViewScrollToIndex(scrollViewNode: Node, index: number, time?: number) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil || index == undefined) {\r\n            return;\r\n        }\r\n        scrollViewUtil.scrollToIndex(index);\r\n    }\r\n\r\n    setProgressBar(progressBar: Node | ProgressBar, percent: number) {\r\n        if (progressBar instanceof Node) {\r\n            progressBar = progressBar.getComponent(ProgressBar);\r\n        }\r\n        if (progressBar) {\r\n            progressBar.progress = percent;\r\n        }\r\n    }\r\n\r\n    setNumString(node: Node, num: any) {\r\n        num = cocosUtil.formatNum(num);\r\n        this.setString(node, num);\r\n    }\r\n\r\n    setItemLayer(node: Node, arr: any, cb?: Function) {\r\n        let itemLayer = cocosUtil.addComponentOnce(node, ItemLayer);\r\n        itemLayer.initUI(this, arr, cb);\r\n    }\r\n\r\n    setNumItemLayer(node: Node, num: number, cb?: Function) {\r\n        let arr = [];\r\n        for (let i = 0; i < num; i++) {\r\n            arr.push(i + 1);\r\n        }\r\n        let itemLayer = node.getComponent(ItemLayer);\r\n        if (!itemLayer) {\r\n            itemLayer = node.addComponent(ItemLayer);\r\n        }\r\n        itemLayer.initUI(this, arr, (itemUI: Node, item: any, index: number) => {\r\n            if (cb) {\r\n                cb(itemUI, item, index);\r\n            }\r\n        });\r\n    }\r\n\r\n    setPropItem(id: number, iconNode: Node, num: number = 0, bgNode?: Node, numNode?: Node) {\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        if (!row) {\r\n            myLog.e(\"setPropItem error id:\" + id);\r\n        }\r\n        let icon = \"prop/\" + row.icon;\r\n        if (row.type == 11) {\r\n            let wRow = designManager.getRowById(constants.tableName.weapon, row.weaponid);\r\n            icon = \"weapon/\" + wRow.icon;\r\n        }\r\n        this.setSpriteFrame2(iconNode, icon);\r\n        if (bgNode) {\r\n            this.setSpriteFrame2(bgNode, \"prop/propbg\" + row.quality);\r\n        }\r\n        if (num > 0 && numNode) {\r\n            this.setString(numNode, \"x\" + num);\r\n        }\r\n    }\r\n\r\n    // 屏幕振动\r\n    shakeScreen() {\r\n        cocosUtil.tweenShakeNode(layerManager.getPopLayerParentNode());\r\n    }\r\n\r\n    removeRenderBatch(node: Node) {\r\n        let itemLayer = node.parent.getComponent(ItemLayer);\r\n        if (itemLayer && itemLayer.renderChildBatch) {\r\n            itemLayer.renderChildBatch.removeRootItemNode(node);\r\n        }\r\n    }\r\n\r\n    addRenderBatch(node: Node) {\r\n        let itemLayer = node.parent.getComponent(ItemLayer);\r\n        if (itemLayer && itemLayer.renderChildBatch) {\r\n            itemLayer.renderChildBatch.addRootItemNode(node);\r\n        }\r\n    }\r\n\r\n    setString(node: Node, info: any) {\r\n        if (!node) {\r\n            myLog.e(\"setString error:node is null\", info);\r\n            return;\r\n        }\r\n        info = info + \"\";\r\n        let label = node.getComponent(Label);\r\n        if (label) {\r\n            label.string = info;\r\n            return;\r\n        }\r\n\r\n        let rich = node.getComponent(RichText);\r\n        if (rich) {\r\n            rich.string = info;\r\n            return;\r\n        }\r\n    }\r\n\r\n    setSpriteFrame(node: Node, name: string, showCb?: Function, bundleName1 = constants.bundles.icon) {\r\n        if (!name) {\r\n            return;\r\n        }\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let sprite = node.getComponent(Sprite);\r\n        if (!cocosUtil.isValid(sprite)) {\r\n            return;\r\n        }\r\n        sprite.enabled = false;\r\n        node[\"loadName\"] = name;\r\n\r\n        let bundleName = bundleName1;\r\n        let d = name.split(\"_\");\r\n        let path = d[0] + \"/\" + name;\r\n        let arr = name.split(\"|\");\r\n        if (arr.length >= 2) {\r\n            bundleName = arr[0];\r\n            path = arr[1];\r\n        }\r\n\r\n        resManager.loadSpriteFrame(bundleName, path, (err, spriteFrame: SpriteFrame) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(sprite)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            if (this.autoReleaseAsset) {\r\n                this.resLoader.addAsset(spriteFrame);\r\n            }\r\n            sprite.enabled = true;\r\n            sprite.spriteFrame = spriteFrame;\r\n            if (showCb) {\r\n                showCb();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    setSpriteFrame2(node: Node, name: string, showCb?: Function, bundleName1 = constants.bundles.icon) {\r\n        if (!name) {\r\n            return;\r\n        }\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let sprite = node.getComponent(Sprite);\r\n        if (!cocosUtil.isValid(sprite)) {\r\n            return;\r\n        }\r\n        sprite.enabled = false;\r\n        node[\"loadName\"] = name;\r\n\r\n        let bundleName = bundleName1;\r\n        let path = name\r\n\r\n        resManager.loadSpriteFrame(bundleName, path, (err, spriteFrame: SpriteFrame) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(sprite)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            if (this.autoReleaseAsset) {\r\n                this.resLoader.addAsset(spriteFrame);\r\n            }\r\n            sprite.enabled = true;\r\n            sprite.spriteFrame = spriteFrame;\r\n            if (showCb) {\r\n                showCb();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    setSpineData(node: Node, name: string, showCb?: Function) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let skeleton = node.getComponent(sp.Skeleton);\r\n        if (!cocosUtil.isValid(skeleton)) {\r\n            return;\r\n        }\r\n        skeleton.enabled = false;\r\n        node[\"loadName\"] = name;\r\n        let bundleName = constants.bundles.spine;\r\n        let spinePath = name + \"/\" + name;\r\n\r\n        resManager.loadSpineData(bundleName, spinePath, (err, skeletonData: sp.SkeletonData) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(skeleton)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            if (this.autoReleaseAsset) {\r\n                this.resLoader.addAsset(skeletonData);\r\n            }\r\n            skeleton.enabled = true;\r\n            skeleton.skeletonData = skeletonData;\r\n            if (showCb) {\r\n                showCb(skeleton);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    setSpineData2(node: Node, bundleName, name: string, showCb?: Function) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let skeleton = node.getComponent(sp.Skeleton);\r\n        if (!cocosUtil.isValid(skeleton)) {\r\n            return;\r\n        }\r\n        skeleton.enabled = false;\r\n        node[\"loadName\"] = name;\r\n        let spinePath = name\r\n\r\n        resManager.loadSpineData(bundleName, spinePath, (err, skeletonData: sp.SkeletonData) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(skeleton)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            if (this.autoReleaseAsset) {\r\n                this.resLoader.addAsset(skeletonData);\r\n            }\r\n            skeleton.enabled = true;\r\n            skeleton.skeletonData = skeletonData;\r\n            if (showCb) {\r\n                showCb(skeleton);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    update(dt: number) {\r\n        if (this.openBtnLongPress && this.btnLongNode) {\r\n            this.btnLognTrigTimeCount += dt;\r\n            if (this.btnLognTrigTimeCount >= this.btnLongTrigTime) {\r\n                let isGoOn = this.preOnButtonLongClick(this.btnLongNode);\r\n                this.btnLongTrigCount++;\r\n                if (!isGoOn) {\r\n                    // 默认只会触发一次\r\n                    this.btnLongNode = null;\r\n                    this.btnLognTrigTimeCount = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Button, Component, Node, Prefab, Sprite, SpriteFrame, tween, UITransform, v3, view, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { layerManager } from '../../manager/layerManager';\r\nimport { ResLoader, resManager } from '../../manager/resManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { ScrollViewUtil } from '../base/ScrollViewUtil';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BaseUILayer')\r\nexport class BaseUILayer extends Component {\r\n\r\n    // 资源管理类\r\n    private resLoader: ResLoader = new ResLoader();\r\n\r\n    public layerId: number = -1;\r\n    public layerData: any = {};\r\n\r\n    @property\r\n    isShowBanner: Boolean = false;\r\n\r\n    onLoad() {\r\n        // super.onLoad();\r\n        // this.initLayout()\r\n    }\r\n\r\n    onEnable() {\r\n        if (this.isShowBanner && !playerModel.isRecordAd) {\r\n            //  myLog.i(\"展示banner\")\r\n            tyqSDK.showBannerAd()\r\n        }\r\n    }\r\n\r\n\r\n    getScreenScale() {\r\n        let screen1 = view.getVisibleSize()\r\n        let resolute = view.getDesignResolutionSize()\r\n        let scale = 1\r\n        if (screen1.width / screen1.height <= 720 / 1280) {\r\n            scale = screen1.width / resolute.width\r\n        } else {\r\n            scale = screen1.height / resolute.height\r\n        }\r\n        return scale\r\n    }\r\n\r\n    toast(content) {\r\n        layerManager.createNotice(content);\r\n    }\r\n\r\n    onDisable() {\r\n        if (this.isShowBanner) {\r\n            tyqSDK.hideBannerAd()\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n    }\r\n\r\n    setSpriteFrame2(node: Node, name: string, showCb?: Function, bundleName1 = constants.bundles.icon) {\r\n        if (!name) {\r\n            return;\r\n        }\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let sprite = node.getComponent(Sprite);\r\n        if (!cocosUtil.isValid(sprite)) {\r\n            return;\r\n        }\r\n        sprite.enabled = false;\r\n        node[\"loadName\"] = name;\r\n\r\n        let bundleName = bundleName1;\r\n        let path = name\r\n\r\n        resManager.loadSpriteFrame(bundleName, path, (err, spriteFrame: SpriteFrame) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(node)) {\r\n                return;\r\n            }\r\n            if (!cocosUtil.isValid(sprite)) {\r\n                return;\r\n            }\r\n            if (node[\"loadName\"] != name) {\r\n                return;\r\n            }\r\n            this.resLoader.addAsset(spriteFrame);\r\n            sprite.enabled = true;\r\n            sprite.spriteFrame = spriteFrame;\r\n            if (showCb) {\r\n                showCb(sprite.node);\r\n            }\r\n        });\r\n    }\r\n\r\n    openLayer(layerName: string, data?: any, cb?: Function, showCb?: Function) {\r\n        // 默认每个弹窗只允许同时显示一个\r\n        if (typeof (data) == \"function\") {\r\n            cb = data;\r\n            data = null;\r\n        }\r\n        layerManager.openSingleLayer(layerName, data, cb, (baseLayer: BaseUILayer, prefab: Prefab) => {\r\n            if (baseLayer.resLoader && prefab) {\r\n                baseLayer.resLoader.addAsset(prefab);\r\n            }\r\n            if (showCb) {\r\n                showCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    addTopUILayer(layerName) {\r\n        resManager.loadAsset(constants.bundles.layer, layerName, Prefab, null, (err, prefab) => {\r\n            if (err) {\r\n                myLog.e(\"LayerManager.openLayer error:\" + err.message, layerName, err);\r\n                return;\r\n            }\r\n\r\n\r\n            let node = cocosUtil.instantiate(prefab);\r\n            let com = node.getComponent(layerName) || node.addComponent(layerName);\r\n\r\n            // 添加到节点上后，会马上触发onLoad和onEnable回调，而start方法是在首次执行update之前被调用\r\n            node.parent = this.node;\r\n        });\r\n    }\r\n\r\n    onClickClose() {\r\n        this.closeLayer()\r\n    }\r\n\r\n    closeLayer(layerId?: number | string) {\r\n        if (!layerId) {\r\n            layerId = this.layerId;\r\n        }\r\n        if (layerId && layerId != -1) {\r\n            layerManager.closeLayer(layerId);\r\n            return;\r\n        }\r\n        this.node.destroy();\r\n    }\r\n\r\n    stringToArr(str: string) {\r\n        let index = str.indexOf(\"[\")\r\n        let endIndex = str.indexOf(\"]\")\r\n        let newStr = str.substring(index + 1, endIndex)\r\n        return newStr.split(\",\")\r\n    }\r\n\r\n    fitScrollView(curview: Node, minHeigth, maxHeigth) {\r\n        let windowSize = view.getVisibleSize();\r\n        let resolute = view.getDesignResolutionSize()\r\n        let scale = 1\r\n        if (windowSize.width / windowSize.height <= 720 / 1280) {\r\n            scale = windowSize.width / resolute.width\r\n        } else {\r\n            scale = windowSize.height / resolute.height\r\n        }\r\n        curview.getComponent(UITransform).height = Math.min(maxHeigth, minHeigth + (windowSize.height / scale / 2 - 1280 / 2))\r\n    }\r\n\r\n    fitNodeWidget(node: Node, posy) {\r\n        let windowSize = view.getVisibleSize();\r\n        let resolute = view.getDesignResolutionSize()\r\n        let scale = 1\r\n        if (windowSize.width / windowSize.height <= 720 / 1280) {\r\n            scale = windowSize.width / resolute.width\r\n        } else {\r\n            scale = windowSize.height / resolute.height\r\n        }\r\n        node.position = v3(node.position.x, 0 - windowSize.height / scale / 2 + posy, node.position.z)\r\n        console.log(\"fitNodeWidget \" + node.name, node.position.y)\r\n    }\r\n\r\n    scrollViewSetData(scrollViewNode: Node, arr: any, refreshItemFunc?: Function, data?: any, notResetPos?: boolean) {\r\n        let scrollViewUtil = scrollViewNode.getComponent(ScrollViewUtil);\r\n        if (!scrollViewUtil) {\r\n            return;\r\n        }\r\n        scrollViewUtil.setData(arr, (itemUI: Node, item: any, index: number) => {\r\n            if (refreshItemFunc) {\r\n                refreshItemFunc(itemUI, item, index, data);\r\n            }\r\n            //  this.addButtonListener(itemUI);\r\n        });\r\n    }\r\n\r\n    setImageCustomSize(node: Node, size) {\r\n        let width = node.getComponent(UITransform).width\r\n        let height = node.getComponent(UITransform).height\r\n        let scale = Math.min(size / width, size / height)\r\n        let newWidth = width * scale\r\n        let newHeight = height * scale\r\n        node.getComponent(UITransform).width = newWidth\r\n        node.getComponent(UITransform).height = newHeight\r\n        //node.scale = v3(scale, scale, 1)\r\n    }\r\n\r\n    addButtonHander(btnComponent: Node | Button, target: Node, com: string, hander: string, customEventData?: any) {\r\n        if (btnComponent instanceof Button) {\r\n        } else {\r\n            if (btnComponent.getComponent(Button)) {\r\n                btnComponent = btnComponent.getComponent(Button)\r\n            } else {\r\n                btnComponent = btnComponent.addComponent(Button);\r\n            }\r\n        }\r\n        btnComponent.transition = Button.Transition.SCALE;\r\n        let eventHander = new Component.EventHandler();\r\n        eventHander.target = target;\r\n        eventHander.component = com;\r\n        eventHander.handler = hander;\r\n        eventHander.customEventData = customEventData;\r\n        btnComponent.clickEvents = [eventHander];\r\n    }\r\n\r\n    showGetReward(rewardArr) {\r\n        audioManager.playEffect(\"coin\")\r\n\r\n        rewardArr.forEach((element, index) => {\r\n            let propData = designManager.getRowById(constants.tableName.prop, element.Id)\r\n            let icon = \"prop/\" + propData.icon\r\n            if (propData.type == 11) {\r\n                let weaponData = designManager.getRowById(constants.tableName.weapon, propData.weaponid)\r\n                icon = \"weapon/\" + weaponData.icon\r\n            }\r\n            if (propData.type == 1) {\r\n                this.playCoinFlyAnim(8, icon, v3(0, 60, 0), v3(200, 600, 0), 40)\r\n            } else if (propData.type == 10) {\r\n                this.playCoinFlyAnim(8, icon, v3(0, -60, 0), v3(-300, 600, 0), 40)\r\n            } else if (propData.type == 9) {\r\n                this.playCoinFlyAnim(8, icon, v3(0, -60, 0), v3(50, 600, 0), 40)\r\n            } else if (propData.type == 8 || propData.type == 11 || propData.type == 17) {\r\n                this.playCoinFlyAnim(element.Num, icon, v3(0, 0, 0), v3(-150, -600, 0), 20, 100, index * 0.02)\r\n            } else {\r\n                this.playCoinFlyAnim(8, icon, v3(0, 0, 0), v3(-150, -600, 0), 20, 100, index * 0.01)\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**金币落袋具体实现方法 */\r\n    protected playCoinFlyAnim(count: number, iconpath, startPos, endPos, r: number = 50, iconSize = 0, delay = 0) {\r\n        //金币分散成圆\r\n\r\n        let points = this.getCirclePoints(r, startPos, count);\r\n        let coinNodeList = points.map(pos => {\r\n            var coin = new Node(\"Sprite\");\r\n            coin.addComponent(Sprite);\r\n            if (iconSize > 0) {\r\n                let self = this\r\n                let fun = function (sprite) {\r\n                    self.setImageCustomSize(sprite, iconSize)\r\n                }\r\n                this.setSpriteFrame2(coin, iconpath, fun)\r\n            } else {\r\n                this.setSpriteFrame2(coin, iconpath)\r\n            }\r\n            coin.layer = this.node.layer\r\n            // cc.find('Canvas').addChild(coin);\r\n            this.node.addChild(coin);\r\n            coin.setPosition(pos.x, pos.y, 0);\r\n            coin.scale = v3(0, 0, 0)\r\n            tween(coin).to(0.2, { scale: v3(1.2, 1.2, 1.2) }).to(0.2, { scale: v3(1, 1, 1) }).union().repeatForever().start()\r\n            return {\r\n                node: coin,\r\n                startPos: startPos,\r\n                midPos: pos,\r\n                endPos: endPos,\r\n                dis: this.calcDistance(pos, endPos)\r\n            }\r\n        })\r\n\r\n        //执行动作\r\n        let i = 0;\r\n        coinNodeList.forEach((item, idx) => {\r\n            i++;\r\n            tween(item.node)\r\n                .to(0.15, { position: v3(item.midPos.x, item.midPos.y, 0) })//初始位置\r\n                .delay(idx * 0.05 + 0.5 + delay)\r\n                .to(0.35, { position: v3(item.endPos.x, item.endPos.y, 0) })//终点\r\n                .call(() => {\r\n                    item.node.destroy();\r\n                })\r\n                .union()\r\n                .start()\r\n        });\r\n    }\r\n\r\n    protected getCirclePoints(r: number, pos, count: number, randomScope: number = 50) {\r\n        let points = []\r\n        for (let i = 0; i < count; i++) {\r\n            let radians = (Math.PI / 180) * Math.round(360 / count)\r\n            let x = pos.x + r * Math.sin(radians * i)\r\n            let y = pos.y + r * Math.cos(radians * i)\r\n            points.unshift(v3(x + Math.random() * randomScope, y + Math.random() * randomScope, 0))\r\n        }\r\n        return points\r\n    }\r\n\r\n    /**\r\n* 已知两点求距离\r\n* @param {cc.Vec2} pos1\r\n* @param {cc.Vec2} pos2\r\n*/\r\n    public calcDistance(pos1, pos2) {\r\n        let xdiff = pos1.x - pos2.x;\r\n        let ydiff = pos1.y - pos2.y;\r\n        let dis = Math.pow((xdiff * xdiff + ydiff * ydiff), 0.5);\r\n        return dis;\r\n    };\r\n}\r\n\r\n","import { assetManager, Component, SpriteFrame, Texture2D, _decorator, Node, Sprite } from \"cc\";\r\nimport { Wechat } from \"./platform/wechat/wechat\";\r\nimport { Channel, tyqAdManager } from \"./tyqAdManager\";\r\nimport { tyqSDKConfig } from \"./tyqSDKConfig\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('beHaviorComponent')\r\nexport class beHaviorComponent extends Component {\r\n\r\n    @property({ type: Node }) icon: Node = null;\r\n    @property({ tooltip: \"广告业务1：系统分配，0：自定义\" }) strategy = 1;\r\n    @property({ tooltip: \"强制0：广告，1分享，strategy == 1时才生效\" }) currentShow = 0;\r\n\r\n    private isClick = false\r\n    onEnable() {\r\n    }\r\n\r\n    start() {\r\n        if (!tyqSDKConfig.isOpenBeHavior) {\r\n            console.log(\"beHaviorComponent destroy\")\r\n            this.destroy()\r\n            return\r\n        }\r\n\r\n        this.node.on(Node.EventType.TOUCH_START, () => {\r\n            console.log(\"beHaviorComponent 点击\")\r\n            this.isClick = true\r\n        }, this);\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            return\r\n        }\r\n        if (this.strategy == 1) {\r\n            if (Wechat.isShareBehavior()) {\r\n                this.loadAsset(\"icon\", \"prop/ui_Share\", SpriteFrame, null, (err, sp) => {\r\n                    this.icon.getComponent(Sprite).spriteFrame = sp\r\n                })\r\n                tyqAdManager.reportShareBehavior(1, this.strategy, 1)\r\n            } else {\r\n                tyqAdManager.reportShareBehavior(1, this.strategy, 0)\r\n            }\r\n        } else {\r\n            if (this.currentShow == 1) {\r\n                this.loadAsset(\"icon\", \"prop/ui_Share\", SpriteFrame, null, (err, sp) => {\r\n                    this.icon.getComponent(Sprite).spriteFrame = sp\r\n                })\r\n                tyqAdManager.reportShareBehavior(1, this.strategy, 1)\r\n            } else {\r\n                tyqAdManager.reportShareBehavior(1, this.strategy, 0)\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            return\r\n        }\r\n        if (this.strategy == 1) {\r\n            if (Wechat.isShareBehavior()) {\r\n                this.loadAsset(\"icon\", \"prop/ui_Share\", SpriteFrame, null, (err, sp) => {\r\n                    this.icon.getComponent(Sprite).spriteFrame = sp\r\n                })\r\n                tyqAdManager.reportShareBehavior(this.isClick ? 4 : 3, this.strategy, 1)\r\n            } else {\r\n                tyqAdManager.reportShareBehavior(this.isClick ? 4 : 3, this.strategy, 0)\r\n            }\r\n        } else {\r\n            if (this.currentShow == 1) {\r\n                this.loadAsset(\"icon\", \"prop/ui_Share\", SpriteFrame, null, (err, sp) => {\r\n                    this.icon.getComponent(Sprite).spriteFrame = sp\r\n                })\r\n                tyqAdManager.reportShareBehavior(this.isClick ? 4 : 3, this.strategy, 1)\r\n            } else {\r\n                tyqAdManager.reportShareBehavior(this.isClick ? 4 : 3, this.strategy, 0)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n   * 从bundle中加载某个资源，优先使用缓存中的\r\n   * @param bundleName bundle名称\r\n   * @param path 资源路径\r\n   * @param assetType 资源类型\r\n   * @param onProgress 加载进度回调\r\n   * @param onComplete 加载完成回调\r\n   */\r\n    loadAsset(bundleName: string, path: string, assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        if (assetType == SpriteFrame) {\r\n            path += \"/spriteFrame\";\r\n        } else if (assetType == Texture2D) {\r\n            path += \"/texture\";\r\n        }\r\n        let bundle = assetManager.getBundle(bundleName);\r\n        if (bundle && bundle.get(path, assetType)) {\r\n            if (onComplete) {\r\n                onComplete(null, bundle.get(path, assetType));\r\n            }\r\n            return;\r\n        }\r\n\r\n        let loadAssetFunc = () => {\r\n            bundle.load(path, assetType, (finish: number, total: number) => {\r\n                if (onProgress) {\r\n                    onProgress(finish / total);\r\n                }\r\n            }, (err, asset) => {\r\n                if (err) {\r\n                    console.log(\"ResManager.loadAsset error:\" + err.message, \"bundleName:\" + bundleName, \"path:\" + path, err);\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                if (onComplete) {\r\n                    onComplete(null, asset);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (!bundle) {\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                if (err) {\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                bundle = retBundle;\r\n                loadAssetFunc();\r\n            });\r\n            return;\r\n        }\r\n\r\n        loadAssetFunc();\r\n    }\r\n\r\n}","import { instantiate, Label, Node, Prefab, RichText, tween, UIOpacity, UITransform, v3, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BlessLayer')\r\nexport class BlessLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具选择容器\" }) propBlessLayer: Node[] = [];\r\n    @property({ type: Node, tooltip: \"道具结果容器\" }) BlessResultLayer: Node = null;\r\n\r\n    @property({ type: Prefab, tooltip: \"道具节点\" }) propItem: Prefab = null;\r\n\r\n    @property({ type: Node, tooltip: \"道具列表View\" }) propView: Node = null;\r\n    @property({ type: Node, tooltip: \"道具列表View\" }) scrollView: Node = null;\r\n    @property({ type: Node }) resultLight: Node = null;\r\n    @property({ type: Node, tooltip: \"合成按钮\" }) btnBless: Node = null;\r\n    @property({ type: Node }) btnlayer: Node = null;\r\n    @property({ type: Node }) blessPropNode: Node = null;\r\n\r\n    @property({ type: Node }) attrIcon: Node = null;\r\n    @property({ type: Label }) attrlabel: Label = null;\r\n    @property({ type: Label }) propNameLab: Label = null;\r\n    @property({ type: Label }) attrNumLab: Label = null;\r\n    @property({ type: RichText }) tishiText: RichText = null;\r\n\r\n    @property({ type: Node }) selectListNode: Node = null;\r\n    @property({ type: Node }) selectBtnNode: Node = null;\r\n\r\n    @property({ type: Label }) needCoinLabel: Label = null;\r\n\r\n\r\n    @property({ type: Node }) needIcon: Node = null;\r\n\r\n\r\n    _curBlessId = 0\r\n    _curBlessNum = 0\r\n\r\n    NeedBlessNum = 3\r\n\r\n    onLoad() {\r\n        this.fitScrollView(this.propView, 320, 600)\r\n        this.fitNodeWidget(this.btnlayer, 30)\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        eventManager.on(msgac.wearDrop, this.initList, this);\r\n        this.btnBless.active = false\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n        eventManager.off(msgac.wearDrop, this.initList, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.selectListNode.active = false\r\n        this._curIndex = 0\r\n        this.initSelectData()\r\n        this.blessPropNode.active = false\r\n        this.tishiText.string = \"\"\r\n    }\r\n\r\n    initList() {\r\n        let arr = UserData.getInstance().getPropSort()\r\n        let dataArr = []\r\n        if (this._curIndex == 0) {\r\n            arr.forEach(element => {\r\n                // let num = (this._curBlessId == element.id) ? element.num - this._curBlessNum : element.num\r\n                if (this._curBlessId == element.id || this._curBlessId <= 0) {\r\n                    let curprop = designManager.getRowById(constants.tableName.prop, element.id)\r\n                    if (curprop.quality < 5) {\r\n                        let num = element.num\r\n                        for (let i = 0; i < num; i++) {\r\n                            dataArr.push([element.id, element.iswear == 1 && i == 0, i < this._curBlessNum])\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            arr.forEach(element => {\r\n                // let num = (this._curBlessId == element.id) ? element.num - this._curBlessNum : element.num\r\n                if (this._curBlessId == element.id || this._curBlessId <= 0) {\r\n                    let curprop = designManager.getRowById(constants.tableName.prop, element.id)\r\n                    if (curprop.wearIndex == this._curIndex && curprop.quality < 5) {\r\n                        let num = element.num\r\n                        for (let i = 0; i < num; i++) {\r\n                            dataArr.push([element.id, element.iswear == 1 && i == 0, i < this._curBlessNum])\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        this.scrollViewSetData(this.scrollView, dataArr, this.initItem, [this._curBlessId])\r\n    }\r\n\r\n    initItem(itemUI: Node, item: any, index: number, data) {\r\n        if (item[0] == data[0] || data[0] == 0) {\r\n            itemUI.getComponent(PropItemPrefab).setView(item[0], 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch)\r\n        } else {\r\n            itemUI.getComponent(PropItemPrefab).setView(item[0], 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_Grey)\r\n        }\r\n        itemUI.getChildByName(\"wear\").active = item[1]\r\n        itemUI.getChildByName(\"gou\").active = item[2]\r\n        if (item[2]) {\r\n            itemUI.getChildByName(\"grayMask\").active = true\r\n        }\r\n        itemUI.getComponent(PropItemPrefab).setScale(125)\r\n    }\r\n\r\n    selectProp(event) {\r\n\r\n        let itemData = event.target.item\r\n        if (itemData[2]) {\r\n            return\r\n        }\r\n        if (this._curBlessNum >= this.NeedBlessNum) {\r\n            this.toast(\"合成材料已经足够\")\r\n            return\r\n        }\r\n        let propid = itemData[0]\r\n        let pos = event.target.parent.getComponent(UITransform).convertToWorldSpaceAR(event.target.position)\r\n        if (propid != this._curBlessId && this._curBlessId != 0) {\r\n            return\r\n        }\r\n\r\n        this.addSelectProp(propid, 1, pos)\r\n    }\r\n\r\n    addSelectProp(propid, num = 1, startp = null) {\r\n        this._curBlessId = propid\r\n        for (let index = 0; index < num; index++) {\r\n            let item = this.propBlessLayer[this._curBlessNum].getChildByName(\"prop\")\r\n            if (item == null) {\r\n                item = instantiate(this.propItem)\r\n                item.position = v3(0, 0, 0)\r\n                item.name = \"prop\"\r\n                this.propBlessLayer[this._curBlessNum].addChild(item)\r\n                item.getComponent(PropItemPrefab).setScale(120)\r\n            }\r\n            item.on(Node.EventType.TOUCH_END, this.unSelectProp, this);\r\n            item.active = true\r\n            item.getComponent(PropItemPrefab).setView(propid, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch)\r\n\r\n            if (startp) {\r\n                let p = this.propBlessLayer[this._curBlessNum].getComponent(UITransform).convertToNodeSpaceAR(startp)\r\n                item.position = p\r\n                tween(item).to(0.2, { position: v3(0, 0, 0) }).start()\r\n            }\r\n\r\n            this._curBlessNum += 1\r\n        }\r\n\r\n        if (this._curBlessNum < this.NeedBlessNum) {\r\n            for (let index = this._curBlessNum; index < this.NeedBlessNum; index++) {\r\n                let item = this.propBlessLayer[index].getChildByName(\"prop\")\r\n                if (item == null) {\r\n                    item = instantiate(this.propItem)\r\n                    item.position = v3(0, 0, 0)\r\n                    item.name = \"prop\"\r\n                    this.propBlessLayer[index].addChild(item)\r\n                    item.getComponent(PropItemPrefab).setScale(120)\r\n                    //   item.on(Node.EventType.TOUCH_END, this.unSelectProp, this);\r\n                }\r\n                item.active = true\r\n                item.getComponent(PropItemPrefab).setView(propid, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_Grey)\r\n            }\r\n            this.btnBless.active = false\r\n        } else {\r\n            this.btnBless.active = true\r\n        }\r\n\r\n        let curProp = designManager.getRowById(constants.tableName.prop, this._curBlessId)\r\n        // if(curProp.quality ==1){\r\n        this.needCoinLabel.string = \"x\" + designManager.config[\"compose\" + curProp.quality]\r\n        if (curProp.quality == 4) {\r\n            this.setSpriteFrame2(this.needIcon, \"prop/prop_diamond2\")\r\n        } else {\r\n            this.setSpriteFrame2(this.needIcon, \"prop/prop_coin1\")\r\n        }\r\n        //  }\r\n        if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n            this.showResultProp([curProp.blessId])\r\n        }\r\n        this.selectBtnNode.active = this._curBlessNum <= 0\r\n        this.initList()\r\n    }\r\n\r\n    showResultProp(...propid) {\r\n\r\n        this.BlessResultLayer.removeAllChildren()\r\n        if (propid) {\r\n            propid.forEach(element => {\r\n                let item = instantiate(this.propItem)\r\n                item.getComponent(PropItemPrefab).setView(element, 1, PropItemPrefab.Type_HideNum)\r\n                item.getComponent(PropItemPrefab).setScale(130)\r\n                item.position = v3(0, 0, 0)\r\n                // item.getComponent(Button).clickEvents = []\r\n                this.BlessResultLayer.addChild(item)\r\n            });\r\n            this.showLight(this.BlessResultLayer.children.length > 0)\r\n            this.blessPropNode.active = this.BlessResultLayer.children.length > 0\r\n            this.showPropInfo()\r\n            if (this.BlessResultLayer.children.length <= 0) {\r\n                this.tishiText.string = \"\"\r\n            }\r\n        } else {\r\n            this.showLight(false)\r\n            this.blessPropNode.active = false\r\n            this.tishiText.string = \"\"\r\n        }\r\n    }\r\n\r\n    showPropInfo() {\r\n        if (this._curBlessId <= 0) {\r\n            return\r\n        }\r\n        let propData = designManager.getRowById(constants.tableName.prop, this._curBlessId)\r\n        if (propData == null) {\r\n            return\r\n        }\r\n        if (propData && propData.blessId && propData.blessId > 0) {\r\n            var propData2 = designManager.getRowById(constants.tableName.prop, propData.blessId)\r\n        }\r\n\r\n        if (propData.atk > 0) {\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_gj\", null, constants.bundles.wwqVec)\r\n            this.attrNumLab.string = \"\" + cocosUtil.formatNumString(propData2.atk)\r\n            this.attrNumLab.color = constants.colors.blue.parseColor()\r\n            this.attrlabel.string = \"攻击 \" + \"\" + cocosUtil.formatNumString(propData.atk)\r\n        } else if (propData.hp > 0) {\r\n            this.attrNumLab.string = \"\" + cocosUtil.formatNumString(propData2.hp)\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_sm\", null, constants.bundles.wwqVec)\r\n            this.attrlabel.string = \"生命 \" + \"\" + cocosUtil.formatNumString(propData.hp)\r\n            this.attrNumLab.color = constants.colors.green.parseColor()\r\n        }\r\n        this.propNameLab.string = \"\" + propData2.name\r\n        if (this.NeedBlessNum - this._curBlessNum <= 0) {\r\n            this.tishiText.string = \"\"\r\n        } else {\r\n            let propColor = [\"灰色\", \"绿色\", \"蓝色\", \"紫色\", \"黄色\"]\r\n            let propColor2 = [\"#818ca0\", \"#38ff38\", \"#328adc\", \"#ff48d7\", \"#ffb848\"]\r\n            this.tishiText.string = \"<color=#ffffff>需要材料：\" + (this.NeedBlessNum - this._curBlessNum) + \"x</color><color=\" + propColor2[propData.quality - 1] + \">\" + propColor[propData.quality - 1] + \"</color><color=#ffffff>\" + propData.name + \"</color>\"\r\n        }\r\n    }\r\n\r\n    showLight(isShow) {\r\n        this.resultLight.active = false\r\n        if (isShow) {\r\n            this.resultLight.active = true\r\n            tween(this.resultLight.getComponent(UIOpacity)).stop()\r\n            tween(this.resultLight.getComponent(UIOpacity)).to(0.7, { opacity: 0 }).to(0.4, { opacity: 255 }).union().repeatForever().start()\r\n        }\r\n    }\r\n\r\n    unSelectProp() {\r\n        this._curBlessNum--\r\n        let item = this.propBlessLayer[this._curBlessNum].getChildByName(\"prop\")\r\n\r\n        if (this._curBlessNum <= 0) {\r\n            this._curBlessId = 0\r\n            for (let index = 0; index < this.NeedBlessNum; index++) {\r\n                let item = this.propBlessLayer[index].getChildByName(\"prop\")\r\n                if (item) {\r\n                    item.active = false\r\n                    item.off(Node.EventType.TOUCH_END, this.unSelectProp, this);\r\n                }\r\n            }\r\n            this.showResultProp()\r\n            //  return\r\n        } else if (item) {\r\n            //  item.active = false\r\n            //  item.off(Node.EventType.TOUCH_END, this.unSelectProp, this);\r\n            if (this._curBlessId > 0) {\r\n                item.active = true\r\n                item.getComponent(PropItemPrefab).setView(this._curBlessId, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_Grey)\r\n            }\r\n        }\r\n        this.btnBless.active = false\r\n        this.selectBtnNode.active = this._curBlessNum <= 0\r\n        this.initList()\r\n    }\r\n\r\n    blessAction() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (this._curBlessNum < this.NeedBlessNum) {\r\n            this.toast(\"需要3个合成材料\")\r\n            return\r\n        }\r\n        let curProp = designManager.getRowById(constants.tableName.prop, this._curBlessId)\r\n        if (curProp) {\r\n            let coinNum = designManager.config[\"compose\" + curProp.quality] || 100\r\n            if (((curProp.quality == 4 && UserData.getInstance().checkAndUseBaoshi(coinNum, true)) || (curProp.quality != 4 && UserData.getInstance().cheackAndUseCoin(coinNum, true)))) {\r\n                if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n                    UserData.getInstance().blessProp(this._curBlessId, curProp.blessId, 0 - this._curBlessNum)\r\n                    this.showResultProp([curProp.blessId])\r\n                    this.clearBlessLayer()\r\n                    this.showResultProp()\r\n                    this.initList()\r\n                    tyqSDK.eventSendCustomEvent(\"合成装备成功\")\r\n                    this.openLayer(constants.layers.BlessResultLayer, { blessId: curProp.id, getPropId: curProp.blessId });\r\n                    playerModel.addDayTaskNum(9);\r\n                }\r\n            } else {\r\n                if (curProp.quality != 4) {\r\n                    tyqSDK.eventSendCustomEvent(\"合成装备金币不足\")\r\n                    this.toast(\"金币不足\")\r\n                    this.openLayer(constants.layers.RewardItemLayer, { propId: 101, num: designManager.config.adCoin })\r\n                } else {\r\n                    tyqSDK.eventSendCustomEvent(\"合成装备钻石不足\")\r\n                    this.toast(\"钻石不足\")\r\n                    this.openLayer(constants.layers.RewardItemLayer, { propId: 801, num: designManager.config.adDiamond })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    clearBlessLayer() {\r\n        this._curBlessId = 0\r\n        this._curBlessNum = 0\r\n        this.tishiText.string = \"\"\r\n        this.propBlessLayer[0].removeAllChildren()\r\n        this.propBlessLayer[1].removeAllChildren()\r\n        this.propBlessLayer[2].removeAllChildren()\r\n    }\r\n\r\n    allBlessProp() {\r\n        let arr = UserData.getInstance().propData\r\n        let result = []\r\n        for (let index = 0; index < arr.length; index++) {\r\n            if (arr[index].num >= this.NeedBlessNum) {\r\n                let curProp = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n                    result.push(curProp.blessId)\r\n                    UserData.getInstance().blessProp(arr[index].id, curProp.blessId, 0 - this.NeedBlessNum)\r\n                }\r\n            }\r\n        }\r\n\r\n        this.showResultProp(result)\r\n        this.clearBlessLayer()\r\n        this.initList()\r\n    }\r\n\r\n    _curAutoIndex = 0\r\n    autoBlessAction() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let arr = UserData.getInstance().propData\r\n        if (this._curBlessId > 0) {\r\n            if (this._curBlessNum < this.NeedBlessNum) {\r\n                for (let i = this._curAutoIndex + 1; i < arr.length + this._curAutoIndex + 1; i++) {\r\n                    let index = i % arr.length\r\n                    if (arr[index].id == this._curBlessId && arr[index].num - this._curBlessNum > 0) {\r\n                        let curprop = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                        if (curprop.quality < 5) {\r\n                            this._curAutoIndex = index\r\n                            this.addSelectProp(arr[index].id, Math.min(arr[index].num - this._curBlessNum, this.NeedBlessNum - this._curBlessNum))\r\n                            return\r\n                        }\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                for (let i = this._curAutoIndex + 1; i < arr.length + this._curAutoIndex + 1; i++) {\r\n                    let index = i % arr.length\r\n                    if (arr[index].num >= this.NeedBlessNum) {\r\n                        let curprop = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                        if (curprop.quality < 5) {\r\n                            this.clearBlessLayer()\r\n                            this._curAutoIndex = index\r\n                            this.addSelectProp(arr[index].id, this.NeedBlessNum)\r\n                            return\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = this._curAutoIndex + 1; i < arr.length + this._curAutoIndex + 1; i++) {\r\n                let index = i % arr.length\r\n                if (arr[index].num >= this.NeedBlessNum) {\r\n                    let curprop = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                    if (curprop.quality < 5) {\r\n                        this.clearBlessLayer()\r\n                        this._curAutoIndex = index\r\n                        this.addSelectProp(arr[index].id, this.NeedBlessNum)\r\n                        return\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.toast(\"没有可以合成的装备\")\r\n    }\r\n\r\n    closeBless() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.closeLayer()\r\n    }\r\n\r\n    onSelectBtnClick() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.selectListNode.active = !this.selectListNode.active\r\n        this.setSpriteFrame2(this.selectBtnNode.getChildByName(\"jianxia\"), this.selectListNode.active ? \"heroLayer/jianshang\" : \"heroLayer/jianxia\", null, constants.bundles.wwqVec)\r\n    }\r\n\r\n    _curIndex = 0\r\n    onSelectItemClick(event, data) {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this._curIndex = parseInt(data)\r\n        this.onSelectBtnClick()\r\n        this.initSelectData()\r\n    }\r\n\r\n    initSelectData() {\r\n        let selectcurbg = this.selectBtnNode.getChildByName(\"selectcurbg\")\r\n        if (this._curIndex == 0) {\r\n            selectcurbg.getChildByName(\"propicon\").active = false\r\n            selectcurbg.getChildByName(\"Label\").active = true\r\n        } else {\r\n            selectcurbg.getChildByName(\"propicon\").active = true\r\n            selectcurbg.getChildByName(\"Label\").active = false\r\n            this.setSpriteFrame2(selectcurbg.getChildByName(\"propicon\"), \"heroLayer/propicon\" + this._curIndex, null, constants.bundles.wwqVec)\r\n        }\r\n        this.initList()\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator, Node, Prefab, instantiate, v3, Button, tween, UIOpacity, UITransform, Label, RichText, Quat } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BlessResultLayer')\r\nexport class BlessResultLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具选择容器\" }) propBlessLayer: Node[] = [];\r\n    @property({ type: Node, tooltip: \"道具结果容器\" }) BlessResultLayer: Node = null;\r\n\r\n    @property({ type: Prefab, tooltip: \"道具节点\" }) propItem: Prefab = null;\r\n\r\n    @property({ type: Node }) btnlayer: Node = null;\r\n    @property({ type: Label }) propNameLab: Label = null;\r\n    @property({ type: Node }) attrIcon: Node = null;\r\n    @property({ type: Label }) attrlabel: Label = null;\r\n    @property({ type: Label }) attrNumLab1: Label = null;\r\n    @property({ type: Label }) attrNumLab: Label = null;\r\n\r\n    @property({ type: Node }) attrNodebg: Node = null;\r\n\r\n    @property({ type: Node }) title: Node = null;\r\n\r\n\r\n    onLoad() {\r\n        myLog.i(\"BlessResultLayer onLoad\")\r\n        this.fitNodeWidget(this.btnlayer, 0)\r\n    }\r\n\r\n    \r\n\r\n    onEnable() {\r\n        myLog.i(\"BlessResultLayer onEnable\")\r\n        super.onEnable();\r\n        let blessId = this.layerData.blessId\r\n        let getPropId = this.layerData.getPropId\r\n        for (let i = 0; i < 3; i++) {\r\n            let item = instantiate(this.propItem)\r\n            item.position = i == 2 ? v3(0, 0, 0) : v3(0, 10, 0)\r\n            item.name = \"prop\"\r\n            this.propBlessLayer[i].addChild(item)\r\n            item.getComponent(PropItemPrefab).setScale(120)\r\n            item.getComponent(PropItemPrefab).setView(blessId, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch)\r\n        }\r\n        this.startAnimal()\r\n\r\n        let propData = designManager.getRowById(constants.tableName.prop, blessId)\r\n        let propData2 = designManager.getRowById(constants.tableName.prop, getPropId)\r\n\r\n        this.propNameLab.string = propData.name\r\n\r\n        if (propData.atk > 0) {\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_gj\", null, constants.bundles.wwqVec)\r\n            this.attrNumLab.string = \"+\" + propData2.atk\r\n            this.attrNumLab.color = constants.colors.blue.parseColor()\r\n            this.attrlabel.string = \"攻击\"\r\n            this.attrNumLab1.string = \"\" + propData.atk\r\n        } else if (propData.hp > 0) {\r\n            this.attrNumLab.string = \"+\" + propData2.hp\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_sm\", null, constants.bundles.wwqVec)\r\n            this.attrlabel.string = \"生命\"\r\n            this.attrNumLab.color = constants.colors.green.parseColor()\r\n            this.attrNumLab1.string = \"\" + propData.hp\r\n        }\r\n\r\n        this.attrNodebg.active = false\r\n    }\r\n\r\n    startAnimal() {\r\n        // let quat: Quat = new Quat();\r\n        // let quat2: Quat = new Quat();\r\n        // Quat.fromEuler(quat, 0, 30, 0);\r\n        // Quat.fromEuler(quat2, 0, -30, 0);\r\n        tween(this.propBlessLayer[0]).delay(1).to(0.1, { position: v3(15, 268, 0) }).hide().start()\r\n        tween(this.propBlessLayer[1]).delay(1).to(0.1, { position: v3(15, 268, 0) }).hide().start()\r\n        let getPropId = this.layerData.getPropId\r\n        let item = this.propBlessLayer[2].getChildByName(\"prop\")\r\n        let self = this\r\n        tween(this.propBlessLayer[2]).delay(1).hide().delay(0.8).call(function () {\r\n            item.getComponent(PropItemPrefab).setView(getPropId, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnTouch)\r\n            self.attrNodebg.active = true\r\n            self.btnlayer.active = true\r\n        }).show().set({ scale: v3(0, 0, 0) }).to(0.2, { scale: v3(1, 1, 1) }).start()\r\n        tween(this.attrNodebg).delay(1.8).to(0.1, { scale: v3(1.2, 1.2, 1.2) }).to(0.1, { scale: v3(1, 1, 1) }).start()\r\n\r\n        tween(this.attrIcon).hide().delay(1.9).show().start()\r\n        tween(this.propNameLab.node).hide().delay(1.9).show().start()\r\n        tween(this.attrNumLab.node).hide().delay(2.1).show().start()\r\n        tween(this.attrNumLab1.node).hide().delay(2.1).show().start()\r\n        tween(this.title).hide().delay(1.7).show().start()\r\n\r\n        // tween(this.propBlessLayer[0]).to(0.2, { rotation:quat}).to(0.2, { rotation:quat2}).to(0.2, { rotation:quat}).to(0.2, { rotation:quat2}).to(0.3,{position:v3(15,268, 0)}).start()\r\n        // tween(this.propBlessLayer[1]).to(0.2, { rotation:quat}).to(0.2, { rotation:quat2}).to(0.2, { rotation:quat}).to(0.2, { rotation:quat2}).to(0.3,{position:v3(15,268, 0)}).start()\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.btnlayer.active = false\r\n    }\r\n\r\n    closeBless() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.closeLayer()\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, Tween, UITransform, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Monster } from '../monsters/Monster';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('blockArrow')\r\nexport class blockArrow extends Component {\r\n\r\n    hint: Hint;\r\n    monster: Monster;\r\n\r\n    outVec1: Vec3 = v3(0, 0, 0);\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        this.monster = this.hint.extraObj.monster;\r\n        let duration = this.hint.extraObj.duration;\r\n        let dis = this.hint.extraObj.dis;\r\n\r\n        let tf = this.hint.bodyNode.getComponent(UITransform);\r\n        tf.width = 120;\r\n\r\n        Tween.stopAllByTarget(tf);\r\n        tween(tf).to(duration, { width: dis }).call(() => {\r\n            this.hint.recycleSelf();\r\n        }).start();\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        // 角度\r\n        mapModel.player.node.getPosition(this.outVec1).subtract(this.monster.node.position);\r\n        this.node.angle = cocosUtil.vec2XAngle(this.outVec1);\r\n\r\n        // 位置\r\n        this.node.position = this.monster.node.position;\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, Enum, Rect, Size, Vec2, _decorator } from 'cc';\r\nimport { EDITOR } from 'cc/env';\r\nimport { physicsGroup } from '../other/physicsGroup';\r\nconst { ccclass, property, executeInEditMode } = _decorator;\r\n\r\n@ccclass('BoxColliderUtil')\r\n@executeInEditMode(true)\r\nexport class BoxColliderUtil extends Component {\r\n\r\n    @property\r\n    protected _offset = new Vec2();\r\n    @property\r\n    get offset() {\r\n        return this._offset;\r\n    }\r\n    set offset(v) {\r\n        this._offset = v;\r\n    }\r\n\r\n    @property\r\n    private _size = new Size(1, 1);\r\n    @property\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    set size(v) {\r\n        this._size = v;\r\n    }\r\n\r\n    @property\r\n    tag = 0;\r\n\r\n    @property({ type: Enum(physicsGroup) })\r\n    group = physicsGroup.DEFAULT;\r\n\r\n    @property\r\n    isSync = false;\r\n\r\n    public worldPoints = [\r\n        new Vec2(),\r\n        new Vec2(),\r\n        new Vec2(),\r\n        new Vec2(),\r\n    ];\r\n\r\n    public worldAabb = new Rect();\r\n\r\n    contactColliderObj: any = {};\r\n    contactBeginCb: Function;\r\n    contactEndCb: Function;\r\n\r\n    onDisable() {\r\n        // 通知碰撞中的碰撞结束了\r\n        for (let i in this.contactColliderObj) {\r\n            let collider = this.contactColliderObj[i];\r\n            if (!collider) {\r\n                continue;\r\n            }\r\n            this.contactEnd(collider);\r\n        }\r\n    }\r\n\r\n    private getContactKey(collider: BoxColliderUtil) {\r\n        return this.uuid + \"_\" + collider.uuid;\r\n    }\r\n\r\n    updateCollider() {\r\n        const aabb = this.worldAabb;\r\n        aabb.x = this.offset.x - this.size.width * 0.5;\r\n        aabb.y = this.offset.y - this.size.height * 0.5;\r\n        aabb.width = this.size.width;\r\n        aabb.height = this.size.height;\r\n\r\n        const wp0 = this.worldPoints[0];\r\n        const wp1 = this.worldPoints[1];\r\n        const wp2 = this.worldPoints[2];\r\n        const wp3 = this.worldPoints[3];\r\n\r\n        aabb.transformMat4ToPoints(this.node.worldMatrix, wp0, wp1, wp2, wp3);\r\n\r\n        let minX = Math.min(wp0.x, wp1.x, wp2.x, wp3.x);\r\n        let maxX = Math.max(wp0.x, wp1.x, wp2.x, wp3.x);\r\n        let minY = Math.min(wp0.y, wp1.y, wp2.y, wp3.y);\r\n        let maxY = Math.max(wp0.y, wp1.y, wp2.y, wp3.y);\r\n\r\n        aabb.x = minX;\r\n        aabb.y = minY;\r\n        aabb.width = maxX - minX;\r\n        aabb.height = maxY - minY;\r\n    }\r\n\r\n    setContactBegin(cb: Function) {\r\n        this.contactBeginCb = cb;\r\n    }\r\n    setContactEnd(cb: Function) {\r\n        this.contactEndCb = cb;\r\n    }\r\n\r\n    contactBegin(collider: BoxColliderUtil) {\r\n        const key1 = this.getContactKey(collider);\r\n        const key2 = collider.getContactKey(this);\r\n        if (!this.contactColliderObj[key1]) {\r\n            this.contactColliderObj[key1] = collider;\r\n            if (this.contactBeginCb) {\r\n                this.contactBeginCb(this, collider);\r\n            }\r\n        }\r\n\r\n        if (!collider.contactColliderObj[key2]) {\r\n            collider.contactColliderObj[key2] = this;\r\n            if (collider.contactBeginCb) {\r\n                collider.contactBeginCb(collider, this);\r\n            }\r\n        }\r\n    }\r\n    contactEnd(collider: BoxColliderUtil) {\r\n        const key1 = this.getContactKey(collider);\r\n        const key2 = collider.getContactKey(this);\r\n\r\n        let collider1 = this.contactColliderObj[key1];\r\n        if (collider1 && collider1 == collider) {\r\n            this.contactColliderObj[key1] = undefined;\r\n            if (this.contactEndCb) {\r\n                this.contactEndCb(this, collider);\r\n            }\r\n        }\r\n\r\n        let collider2 = collider.contactColliderObj[key2];\r\n        if (collider2 && collider2 == this) {\r\n            collider.contactColliderObj[key2] = undefined;\r\n            if (collider.contactEndCb) {\r\n                collider.contactEndCb(collider, this);\r\n            }\r\n        }\r\n    }\r\n\r\n    update() {\r\n        // @ts-ignore\r\n        if (!EDITOR || cc.GAME_VIEW) {\r\n            return;\r\n        }\r\n        if (!this.isSync) {\r\n            return;\r\n        }\r\n        let boxCollider = null;\r\n        let colliderArr = this.getComponents(BoxCollider2D);\r\n        for (let i = 0; i < colliderArr.length; i++) {\r\n            let collider = colliderArr[i];\r\n            if (collider.tag == this.tag) {\r\n                boxCollider = collider;\r\n                break;\r\n            }\r\n        }\r\n        if (!boxCollider) {\r\n            return;\r\n        }\r\n\r\n        this.offset.x = boxCollider.offset.x;\r\n        this.offset.y = boxCollider.offset.y;\r\n\r\n        this.size.width = boxCollider.size.width;\r\n        this.size.height = boxCollider.size.height;\r\n    }\r\n\r\n}\r\n\r\n","import { Button, Color, find, Node, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BoxMonsterLayer')\r\nexport class BoxMonsterLayer extends BaseLayer {\r\n\r\n    getIndexs: any = {};\r\n    canRefresh: boolean = true;\r\n    refreshCount: number = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let itemUIArr = this.getNodeByPath(\"ui/bg/itemLayer\").children;\r\n        let arr = this.getItemArr();\r\n\r\n        itemUIArr.forEach((node: any, index: number) => {\r\n            let item = arr[index];\r\n            node.item = item;\r\n            node.index = index;\r\n            this.refreshSelectItem(node, item, index);\r\n        });\r\n\r\n        this.refreshBtnsLayer();\r\n    }\r\n\r\n    refreshBtnsLayer() {\r\n        let btnRefresh = this.getNodeByPath(\"ui/bg/btnRefresh\");\r\n        btnRefresh.getComponent(Button).enabled = true;\r\n        if (this.canRefresh && this.refreshCount < designManager.config.carTime) {\r\n            cocosUtil.setRenderableColor(btnRefresh, Color.WHITE, true);\r\n        } else {\r\n            cocosUtil.setRenderableColor(btnRefresh, constants.colors.yin.parseColor(), true);\r\n            btnRefresh.getComponent(Button).enabled = false;\r\n        }\r\n\r\n        let limitNode = this.getNodeByPath(\"ui/bg/btnRefresh/limit\");\r\n        this.setString(limitNode, \"(%d/%d)\".format(this.refreshCount, designManager.config.carTime));\r\n    }\r\n\r\n    refreshSelectLayer() {\r\n        let itemUIArr = this.getNodeByPath(\"ui/bg/itemLayer\").children;\r\n        itemUIArr.forEach((node: any, index: number) => {\r\n            this.refreshSelectItem(node, node.item, node.index);\r\n        });\r\n    }\r\n\r\n    refreshSelectItem(itemUI: Node, item: any, index: number) {\r\n        let skillItem = find(\"skillItem\", itemUI);\r\n        let propItem = find(\"propItem\", itemUI);\r\n        if (skillItem) {\r\n            skillItem.active = false;\r\n        }\r\n        propItem.active = false;\r\n\r\n        find(\"hasGet\", itemUI).active = this.getIndexs[index] ? true : false;\r\n\r\n        if (item.name == constants.tableName.prop) {\r\n            propItem.active = true;\r\n            let row = designManager.getRowById(constants.tableName.prop, item.id);\r\n            let info = row.info;\r\n            if (item.id == constants.propIds.coin || item.id == constants.propIds.diamond) {\r\n                info = localText.propGet.format(item.num, row.name);\r\n            }\r\n            this.setString(find(\"info\", propItem), info);\r\n        } else {\r\n            skillItem.active = true;\r\n            let info = item.info;\r\n            let id = designManager.getFirstIdByType(item.type);\r\n            if (info) {\r\n                id = info.id + 1;\r\n            }\r\n            let row = designManager.getRowById(item.name, id);\r\n\r\n            this.setSpriteFrame(find(\"icon\", skillItem), row.icon);\r\n\r\n            let starLayer = find(\"starLayer\", skillItem);\r\n            this.setNumItemLayer(starLayer, row.lv, (starNode: Node) => {\r\n                let iconNode = find(\"icon\", starNode);\r\n                let icon2Node = find(\"icon2\", starNode);\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    iconNode.active = false;\r\n                    icon2Node.active = true;\r\n                } else {\r\n                    iconNode.active = true;\r\n                    icon2Node.active = false;\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    getItemArr() {\r\n        let arr = mapModel.mapSystem.getSelectItemArr();\r\n        arr.forEach((item: any) => {\r\n            if (item.name == constants.tableName.prop) {\r\n                // 随机金币\r\n                item.id = constants.propIds.coin\r\n                item.num = utilTools.getFloatValue(designManager.config.carGoldNum[0], designManager.config.carGoldNum[1], true);\r\n            }\r\n        });\r\n\r\n        // 金币\r\n        arr.push({\r\n            name: constants.tableName.prop,\r\n            id: constants.propIds.coin,\r\n            num: designManager.config.carGold\r\n        });\r\n        // 钻石\r\n        arr.push({\r\n            name: constants.tableName.prop,\r\n            id: constants.propIds.diamond,\r\n            num: designManager.config.carDiamond\r\n        });\r\n        // 回血\r\n        arr.push({\r\n            name: constants.tableName.prop,\r\n            id: constants.propIds.addHpPercent\r\n        });\r\n\r\n        return arr;\r\n\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    onClickBtnRefresh() {\r\n        sdkManager.openAd(\"宝箱怪换一批\", (st: number) => {\r\n            if (st == 1) {\r\n                this.refreshCount++;\r\n                this.initUI();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnGetAd(node: any) {\r\n        sdkManager.openAd(\"宝箱怪奖励\", (st: number) => {\r\n            if (st == 1) {\r\n                let item = node.parent.item;\r\n                switch (item.name) {\r\n                    case constants.tableName.weapon:\r\n                        mapModel.weaponSystem.addWeapon(item.type);\r\n                        break;\r\n                    case constants.tableName.skill:\r\n                        mapModel.skillSystem.addSkill(item.type);\r\n                        break;\r\n                    case constants.tableName.skill2:\r\n                        mapModel.skillSystem.addSkill2(item.type);\r\n                        break;\r\n                    case constants.tableName.prop:\r\n                        mapModel.propSystem.getProp(item.id, item.num);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                this.canRefresh = false;\r\n                let index = node.parent.index;\r\n                this.getIndexs[index] = 1;\r\n                this.refreshSelectLayer();\r\n                this.refreshBtnsLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnGet(node: any) {\r\n        let item = node.parent.parent.item;\r\n        let index = node.parent.parent.index;\r\n        mapModel.propSystem.getProp(item.id, item.num);\r\n        this.getIndexs[index] = 1;\r\n        this.refreshSelectLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, Label,  Node, Sprite, _decorator, UITransform, v3, Tween } from 'cc';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BtnLayer')\r\nexport class BtnLayer extends Component {\r\n\r\n    bolInit = false\r\n    intCheckTime = 1\r\n    runTime: 0;\r\n    runTimeLast: 0;\r\n    tween: Tween<Node>;\r\n\r\n    @property({ type: Label, tooltip: \"发光\" }) light: Node = null;\r\n\r\n    onLoad() {\r\n        this.bolInit = false;\r\n        this.runTime = 0;\r\n        this.runTimeLast = 0;\r\n        this.intCheckTime = 1;\r\n        this.tween = null;\r\n        this.node.getChildByName(\"light\").active = false\r\n\r\n    }\r\n\r\n    setStart() {\r\n        if (this.node.parent && this.tween == null) {\r\n            this.runTime = 0;\r\n            this.runTimeLast = 0;\r\n            if (this.node.getComponent(Sprite).spriteFrame == null)\r\n                this.node.getComponent(Sprite).spriteFrame = this.node.parent.getComponent(Sprite).spriteFrame;\r\n                \r\n            this.node.getComponent(UITransform).width = this.node.parent.getComponent(UITransform).width;\r\n            this.node.getComponent(UITransform).height = this.node.parent.getComponent(UITransform).height;\r\n\r\n            //光放大\r\n            let nodeLight = this.node.getChildByName(\"light\");\r\n            let xscale = this.node.parent.getComponent(UITransform).width / nodeLight.getComponent(UITransform).width;\r\n            let yscale = this.node.parent.getComponent(UITransform).height / nodeLight.getComponent(UITransform).height;\r\n            let scale = Math.max(xscale, yscale);\r\n            nodeLight.scale = v3(scale,scale,1);\r\n            this.node.getChildByName(\"light\").active =true\r\n\r\n            this.tween = tween(nodeLight).show().set({ position: v3(-(this.node.parent.getComponent(UITransform).width + nodeLight.getComponent(UITransform).width) * 0.5, 0) }).to(0.8, { position: v3((this.node.parent.getComponent(UITransform).width + nodeLight.getComponent(UITransform).width) * 0.5, 0, 0) }).hide().delay(0.2 + Math.random() * 0.5).union().repeatForever();\r\n            this.tween.start();\r\n        }\r\n    }\r\n\r\n    setStop() {\r\n        if (this.tween) {\r\n            this.tween.stop();\r\n            this.tween = null;\r\n            this.node.getChildByName(\"light\").active =false\r\n            this.node.getChildByName(\"light\").position = v3(-(this.node.parent.getComponent(UITransform).width + this.node.getChildByName(\"light\").getComponent(UITransform).width) * 0.5, 0,0);\r\n        }\r\n    };\r\n\r\n    update(dt) {\r\n        this.runTime += dt;\r\n        // if(!this.bolInit)\r\n        // {\r\n        //     this.bolInit = true;\r\n        //     this.setStart();\r\n        // }\r\n        if (this.runTime > this.intCheckTime) {\r\n            this.runTime = 0;\r\n            if (this.node.parent.getComponent(Sprite).color.toHEX(\"#rrggbb\").toLowerCase() == \"ffffff\") {\r\n                this.setStart();\r\n            }\r\n            else this.setStop();\r\n        }\r\n    }\r\n}\r\n\r\n","import { BoxCollider2D, Collider2D, Component, Contact2DType, find, Node, Tween, v3, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from '../monsters/Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Bullet')\r\nexport class Bullet extends Component {\r\n\r\n    id: number;\r\n    row: any;\r\n    direction: Vec3;\r\n    isDestroyInNoShow: boolean;\r\n    extraObj: any;\r\n\r\n    speed: number;\r\n    atk: number;\r\n\r\n    bodyNode: Node;\r\n    collider: BoxCollider2D;\r\n    bulletUtil: any;\r\n\r\n    timeCount: number;\r\n\r\n    contactItemArr: any;\r\n\r\n    // 是否是跟踪子弹，默认是跟踪玩家\r\n    isFollow: boolean = false;\r\n    // 跟踪转速\r\n    rotateSpeed: number = Math.PI / 3;\r\n\r\n    // Vec3集中缓存\r\n    vec3Obj = {\r\n        targetPos: v3(0, 0, 0),\r\n        direction: v3(0, 0, 0),\r\n\r\n        outVec3: v3(0, 0, 0),\r\n    };\r\n\r\n    onLoad() {\r\n        this.collider = this.node.getComponent(BoxCollider2D);\r\n        if (this.collider) {\r\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.contactBegin, this);\r\n            this.collider.on(Contact2DType.END_CONTACT, this.contactEnd, this);\r\n        }\r\n        this.bodyNode = find(\"body\", this.node);\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n\r\n    init(id: number, group: number, startWorldPos?: Vec3, direction?: Vec3, extraObj?: any) {\r\n        if (!this.bodyNode) {\r\n            this.onLoad();\r\n        }\r\n\r\n        if (this.collider) {\r\n            this.collider.group = group;\r\n            this.collider.enabled = true;\r\n        }\r\n        this.id = id;\r\n        this.extraObj = extraObj;\r\n\r\n        if (!startWorldPos) {\r\n            // 默认起始位置为玩家位置\r\n            startWorldPos = cocosUtil.convertToWorldSpace(mapModel.player.node);\r\n        }\r\n        let pos = cocosUtil.convertToNodeSpace(this.node, startWorldPos);\r\n        this.node.setPosition(pos);\r\n\r\n        if (!direction) {\r\n            // 默认朝向玩家\r\n            direction = this.getFacePlayerDirection();\r\n        }\r\n        if (direction.x == 0 && direction.y == 0) {\r\n            direction.x = 1;\r\n        }\r\n        this.direction = direction.clone().normalize();\r\n\r\n        let row = designManager.getRowById(constants.tableName.bullet, id);\r\n        this.row = row;\r\n        this.speed = row.speed;\r\n        this.atk = row.atk;\r\n\r\n        let angle = utilTools.radianToAngle(Math.atan2(this.direction.y, this.direction.x));\r\n        this.node.angle = angle;\r\n\r\n        this.timeCount = 0;\r\n        this.isFollow = false;\r\n        this.contactItemArr = [];\r\n        this.isDestroyInNoShow = false;\r\n        Tween.stopAllByTarget(this.node);\r\n        this.unscheduleAllCallbacks();\r\n\r\n        try {\r\n            let bulletUtilStr = this.node.name;\r\n            switch (this.node.name) {\r\n                case \"bullet1011\":\r\n                case \"bullet1012\":\r\n                    bulletUtilStr = \"bullet1011\";\r\n                    break;\r\n                case \"bullet1021\":\r\n                case \"bullet1022\":\r\n                    bulletUtilStr = \"bullet1021\";\r\n                    break;\r\n                case \"bullet1041\":\r\n                case \"bullet1043\":\r\n                    bulletUtilStr = \"bullet1041\";\r\n                    break;\r\n                case \"bullet1042\":\r\n                case \"bullet1044\":\r\n                    bulletUtilStr = \"bullet1042\";\r\n                    break;\r\n                case \"bullet1051\":\r\n                case \"bullet1053\":\r\n                    bulletUtilStr = \"bullet1051\";\r\n                    break;\r\n                case \"bullet1052\":\r\n                case \"bullet1054\":\r\n                    bulletUtilStr = \"bullet1052\";\r\n                    break;\r\n                case \"bullet1061\":\r\n                case \"bullet1062\":\r\n                    bulletUtilStr = \"bullet1061\";\r\n                    break;\r\n                case \"bullet1081\":\r\n                case \"bullet1082\":\r\n                    bulletUtilStr = \"bullet1081\";\r\n                    break;\r\n                case \"bullet1091\":\r\n                case \"bullet1092\":\r\n                    bulletUtilStr = \"bullet1091\";\r\n                    break;\r\n                case \"bullet1101\":\r\n                case \"bullet1104\":\r\n                    bulletUtilStr = \"bullet1101\";\r\n                    break;\r\n                case \"bullet1102\":\r\n                case \"bullet1105\":\r\n                    bulletUtilStr = \"bullet1102\";\r\n                    break;\r\n                case \"bullet1103\":\r\n                case \"bullet1106\":\r\n                    bulletUtilStr = \"bullet1103\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            let bulletUtil = cocosUtil.addComponentOnce(this, bulletUtilStr);\r\n            bulletUtil.unscheduleAllCallbacks();\r\n            this.bulletUtil = bulletUtil;\r\n            // @ts-ignore\r\n            bulletUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getFacePlayerDirection() {\r\n        let pos = this.node.getPosition();\r\n        return mapModel.player.node.getPosition().subtract(pos);\r\n    }\r\n\r\n    setDirection(direction: Vec3) {\r\n        this.direction = direction.normalize();\r\n    }\r\n\r\n    contactBegin(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        let contactItem = null;\r\n        if (otherCollider.group == physicsGroup.MONSTER && otherCollider.tag == 0) {\r\n            contactItem = otherCollider.getComponent(Monster);\r\n        } else if (otherCollider.group == physicsGroup.PLAYER) {\r\n            contactItem = mapModel.player;\r\n        }\r\n        if (contactItem) {\r\n            // 子弹打到敌方\r\n            if (this.contactEnmeyCanHide()) {\r\n                this.recycleSelf();\r\n            } else {\r\n                if (this.contactItemArr.indexOf(contactItem) == -1) {\r\n                    this.contactItemArr.push(contactItem);\r\n                    contactItem.contactBulletTime = 0;\r\n                }\r\n            }\r\n            if (this.bulletUtil && this.bulletUtil.contactBegin) {\r\n                this.bulletUtil.contactBegin(otherCollider.node);\r\n            }\r\n            let dam = this.atk;\r\n            if (this.extraObj && this.extraObj.atkPercentAdd > 0) {\r\n                dam = dam * (1 + this.extraObj.atkPercentAdd);\r\n                dam = Math.ceil(dam);\r\n            }\r\n            contactItem.hitWithDam(dam, this.getShineColor());\r\n            audioManager.playEffect(this.row.audio);\r\n        }\r\n\r\n        // 玩家子弹打敌方子弹\r\n        if (otherCollider.group == physicsGroup.MONSTER_BULLET) {\r\n            let bullet = otherCollider.getComponent(Bullet);\r\n            if (bullet.contactEnmeyCanHide()) {\r\n                bullet.recycleSelf();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    contactEnd(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        let contactItem = null;\r\n        if (otherCollider.group == physicsGroup.MONSTER) {\r\n            contactItem = otherCollider.getComponent(Monster);\r\n        } else if (otherCollider.group == physicsGroup.PLAYER) {\r\n            contactItem = mapModel.player;\r\n        }\r\n        if (contactItem) {\r\n            let index = this.contactItemArr.indexOf(contactItem);\r\n            if (index != -1) {\r\n                this.contactItemArr.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    getShineColor() {\r\n        if (this.bulletUtil && this.bulletUtil.shineColor) {\r\n            return this.bulletUtil.shineColor;\r\n        }\r\n    }\r\n\r\n    // 碰到敌人是否消失\r\n    contactEnmeyCanHide() {\r\n        if (this.bulletUtil && this.bulletUtil.contactNotHide) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // 飞到屏幕外，是否可以销毁\r\n    outScreenCanRecyle() {\r\n        if (this.bulletUtil && this.bulletUtil.outScreenNotRecycle) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    recycleSelf() {\r\n        mapModel.bulletSystem.recycleBulletNode(this.node);\r\n        if (this.bulletUtil && this.bulletUtil.recycleSelfEnd) {\r\n            this.bulletUtil.recycleSelfEnd();\r\n        }\r\n        Tween.stopAllByTarget(this.node);\r\n        Tween.stopAllByTarget(this.bodyNode);\r\n        this.unscheduleAllCallbacks();\r\n        if (this.bulletUtil) {\r\n            this.bulletUtil.unscheduleAllCallbacks();\r\n        }\r\n\r\n    }\r\n\r\n    getFollowTargetPos() {\r\n        if (this.bulletUtil && this.bulletUtil.targetPos) {\r\n            return cocosUtil.vec3CopyVal(this.vec3Obj.targetPos, this.bulletUtil.targetPos);\r\n        }\r\n        // 默认跟踪玩家\r\n        return cocosUtil.vec3CopyVal(this.vec3Obj.targetPos, mapModel.player.node.position);\r\n    }\r\n\r\n    update(dt: number) {\r\n        let canMove = true;\r\n        if (this.bulletUtil && this.bulletUtil.moveStop) {\r\n            canMove = false;\r\n        }\r\n        if (this.speed <= 0) {\r\n            canMove = false;\r\n        }\r\n        if (canMove) {\r\n            let dis = this.speed * dt;\r\n            let pos = this.node.position;\r\n            if (this.isFollow) {\r\n                // 根据转速，慢慢调整角度\r\n                let targetPos = this.getFollowTargetPos();\r\n                let direction = targetPos.subtract(pos).normalize();\r\n                let radian1 = Math.atan2(direction.y, direction.x);\r\n                if (radian1 < 0) {\r\n                    radian1 += Math.PI * 2;\r\n                }\r\n                let radian2 = Math.atan2(this.direction.y, this.direction.x);\r\n                if (radian2 < 0) {\r\n                    radian2 += Math.PI * 2;\r\n                }\r\n                let dr = this.rotateSpeed * dt;\r\n                let maxDr = Math.abs(radian1 - radian2);\r\n                if (dr > maxDr) {\r\n                    dr = maxDr;\r\n                }\r\n                if (radian1 > radian2) {\r\n                    if (radian1 - radian2 > Math.PI) {\r\n                        dr = -dr;\r\n                    }\r\n                } else {\r\n                    if (radian2 - radian1 < Math.PI) {\r\n                        dr = -dr;\r\n                    }\r\n                }\r\n                this.direction = Vec3.rotateZ(this.vec3Obj.outVec3, this.direction, Vec3.ZERO, dr);\r\n                let angle = utilTools.radianToAngle(Math.atan2(this.direction.y, this.direction.x));\r\n                this.node.angle = angle;\r\n            } else {\r\n                let angle = utilTools.radianToAngle(Math.atan2(this.direction.y, this.direction.x));\r\n                this.node.angle = angle;\r\n            }\r\n\r\n            let lastDirection = null;\r\n            if (this.bulletUtil && this.bulletUtil.targetPos && this.bulletUtil.arriveTargetPos) {\r\n                // 需要判断是否到达目的地\r\n                let targetPos = this.getFollowTargetPos();\r\n                lastDirection = targetPos.subtract(pos);\r\n            }\r\n\r\n            pos.add(cocosUtil.vec3CopyVal(this.vec3Obj.direction, this.direction).multiplyScalar(dis));\r\n            this.node.position = pos;\r\n\r\n            if (lastDirection) {\r\n                let targetPos = this.getFollowTargetPos();\r\n                let afterDirection = targetPos.subtract(pos);\r\n                let afterAngle = utilTools.radianToAngle(Vec2.angle(lastDirection, afterDirection));\r\n                if (afterAngle > 90) {\r\n                    // 到达目的地\r\n                    this.bulletUtil.arriveTargetPos();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.contactItemArr.length > 0) {\r\n            utilTools.forArr(this.contactItemArr, (contactItem: any) => {\r\n                contactItem.contactBulletTime += dt;\r\n                let timeGap = 0.5;\r\n                if (this.bulletUtil && this.bulletUtil.contactBulletTime > 0) {\r\n                    timeGap = this.bulletUtil.contactBulletTime;\r\n                }\r\n                if (contactItem.contactBulletTime >= timeGap) {\r\n                    contactItem.contactBulletTime = 0;\r\n                    contactItem.hitWithDam(this.atk, this.getShineColor());\r\n                    audioManager.playEffect(this.row.audio);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.timeCount += dt;\r\n        if (this.timeCount >= 2 && this.outScreenCanRecyle() && !mapModel.isInScreenVisible(this.node)) {\r\n            this.recycleSelf();\r\n        }\r\n    }\r\n}\r\n\r\n","import { Component, tween, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-锤子\r\n@ccclass('bullet1011')\r\nexport class bullet1011 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 重力加速度\r\n    g: number = -800;\r\n    // 初速度\r\n    v: number = 800;\r\n\r\n    vx: number = 0;\r\n    vy: number = 0;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        tween(this.node).by(1, { angle: 360 }).repeatForever().start();\r\n\r\n        // 抛射角度\r\n        let floatRadian = Math.PI / 15;\r\n        let radian = utilTools.getFloatValue(Math.PI / 2 - floatRadian, Math.PI / 2 + floatRadian);\r\n\r\n        this.vx = this.v * Math.cos(radian);\r\n        this.vy = this.v * Math.sin(radian);\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        pos.x += this.vx * dt;\r\n        pos.y += this.vy * dt;\r\n        this.vy += this.g * dt;\r\n        this.node.setPosition(pos);\r\n        if (!mapModel.isInScreenVisible(this.node)) {\r\n            this.bullet.recycleSelf();\r\n        }\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj)) {\r\n            this.bullet.extraObj.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 炮弹巨人-跟踪子弹\r\n@ccclass('bullet10170')\r\nexport class bullet10170 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.rotateSpeed = Math.PI / 4 + Math.random() * Math.PI / 2;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = true;\r\n        }, 0.4 + Math.random() * 0.2);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = false;\r\n        }, 2.5 + Math.random() * 0.5);\r\n\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 显示爆炸特效\r\n        mapModel.hintSystem.addHint(HintNames.hit2, cocosUtil.convertToWorldSpace(this.bullet.node));\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪-光波\r\n@ccclass('bullet10180')\r\nexport class bullet10180 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪-水滴\r\n@ccclass('bullet10190')\r\nexport class bullet10190 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        let bulletId = this.bullet.extraObj;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.recycleSelf();\r\n            // 变成泥浆\r\n            mapModel.bulletSystem.addBullet(bulletId, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.8);\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Color, Component, UIOpacity, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪-泥浆\r\n@ccclass('bullet10200')\r\nexport class bullet10200 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    contactBulletTime: number = 1;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    shineColor: Color = \"#2AA32A\".parseColor();\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n        this.node.angle = 0;\r\n\r\n        this.animationCtrl.playAnimation(\"ani\", true);\r\n        this.getComponent(UIOpacity).opacity = 255;\r\n        this.node.scale = v3(1, 1, 1);\r\n        let scale = this.bullet.extraObj;\r\n        if (scale > 0) {\r\n            this.node.scale = v3(scale, scale, 1);\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            cocosUtil.tweenFadeOut(this.node, 1, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, 2);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, v3, Vec3, _decorator } from 'cc';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-转盘\r\n@ccclass('bullet1021')\r\nexport class bullet1021 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    direction: Vec3;\r\n\r\n    // 转速\r\n    speed: number = -Math.PI * 1.5;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        let direction = this.bullet.extraObj.direction;\r\n        this.direction = direction;\r\n\r\n        let scale = this.getScale();\r\n        this.node.setScale(v3(scale, scale, 1));\r\n        tween(this.node).by(0.6, { angle: -360 }).repeatForever().start();\r\n\r\n        this.show();\r\n\r\n        this.bullet.extraObj.endCb(this.bullet);\r\n    }\r\n\r\n    getScale() {\r\n        let scale = 1 + mapModel.skillSystem.getSkill2RangeAddScale();\r\n        return scale;\r\n    }\r\n\r\n    hide(isAtOnce: boolean = false) {\r\n        if (isAtOnce) {\r\n            this.bullet.recycleSelf();\r\n            return;\r\n        }\r\n        cocosUtil.tweenScaleOut(this.node, 0.5, () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n    }\r\n\r\n    show() {\r\n        let scale = this.getScale();\r\n        this.node.setScale(v3(0, 0, 0));\r\n        this.node.active = true;\r\n        tween(this.node).to(0.5, { scale: v3(scale, scale, 1) }).start();\r\n    }\r\n\r\n    update(dt: number) {\r\n        // 围绕玩家进行旋转\r\n        let radian = this.speed * dt;\r\n        Vec3.rotateZ(this.direction, this.direction, Vec3.ZERO, radian);\r\n        let playerPos = mapModel.player.node.position.clone();\r\n        playerPos.add(this.direction);\r\n        this.node.position = playerPos;\r\n    }\r\n}\r\n\r\n","import { Component, tween, UITransform, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-飞镖\r\n@ccclass('bullet1031')\r\nexport class bullet1031 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    moveSpeed: number;\r\n    yinTimeCount: number;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveSpeed = 1200;\r\n        this.yinTimeCount = 0;\r\n\r\n        tween(this.node).by(0.2, { angle: -360 }).repeatForever().start();\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        this.moveSpeed -= 30;\r\n        let moveDis = this.moveSpeed * dt;\r\n        let direction = this.bullet.direction.clone().multiplyScalar(moveDis);\r\n        pos.add(direction);\r\n        this.node.setPosition(pos);\r\n\r\n        this.yinTimeCount += dt;\r\n        if (this.yinTimeCount > 0.2) {\r\n            this.yinTimeCount = 0;\r\n            let tf = this.bullet.bodyNode.getComponent(UITransform);\r\n            let extraObj = {\r\n                width: tf.width,\r\n                height: tf.height,\r\n            };\r\n            mapModel.hintSystem.addHint(HintNames.feiBiao, cocosUtil.convertToWorldSpace(this.node), this.node.angle, extraObj);\r\n        }\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj)) {\r\n            this.bullet.extraObj.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-油桶\r\n@ccclass('bullet1041')\r\nexport class bullet1041 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.node.angle = 0;\r\n\r\n        tween(this.node).by(0.6, { angle: -360 }).repeatForever().start();\r\n        let targetPos = this.bullet.extraObj.targetPos;\r\n        tween(this.node).to(0.6, { position: targetPos }, { easing: \"quadOut\" }).call(() => {\r\n            this.bullet.recycleSelf();\r\n            // 燃烧火焰\r\n            mapModel.bulletSystem.addBullet(this.bullet.id + 1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node), null, this.bullet.extraObj.time);\r\n        }).start();\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Color, Component, tween, v3, _decorator } from 'cc';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-油桶-火焰\r\n@ccclass('bullet1042')\r\nexport class bullet1042 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n    contactBulletTime: number = 0.5;\r\n\r\n    shineColor: Color = \"#FF1313\".parseColor();\r\n\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.node.setScale(v3(0.3, 0.3, 1));\r\n        let scale = this.getScale();\r\n        tween(this.node).to(0.06, { scale: v3(scale, scale, 1) }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            tween(this.node).to(0.15, { scale: v3(0, 0, 1) }).call(() => {\r\n                this.bullet.recycleSelf();\r\n            }).start();\r\n        }, this.bullet.extraObj);\r\n\r\n    }\r\n\r\n    getScale() {\r\n        let scale = 1 + mapModel.skillSystem.getSkill2RangeAddScale();\r\n        return scale;\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-导弹\r\n@ccclass('bullet1051')\r\nexport class bullet1051 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    hasScheduled: boolean;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.hasScheduled = false;\r\n\r\n        this.bullet.speed = this.bullet.speed * (1 + mapModel.skillSystem.getSkill2BulletSpeedAddPercent());\r\n    }\r\n\r\n    contactBegin() {\r\n        if (this.hasScheduled) {\r\n            return;\r\n        }\r\n        this.hasScheduled = true;\r\n        this.scheduleOnce(() => {\r\n            this.bullet.recycleSelf();\r\n            // 爆炸\r\n            mapModel.bulletSystem.addBullet(this.bullet.id + 1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.15);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-导弹-爆炸\r\n@ccclass('bullet1052')\r\nexport class bullet1052 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 保证只算一次伤害\r\n    contactBulletTime: number = 6;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        let atk = this.bullet.atk * (1 + mapModel.skillSystem.getSkill2AtkAddPercent());\r\n        this.bullet.atk = Math.floor(atk);\r\n\r\n        this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-科技球\r\n@ccclass('bullet1061')\r\nexport class bullet1061 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    isOutScreenReflex: boolean;\r\n\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.isOutScreenReflex = false;\r\n\r\n        cocosUtil.tweenScaleIn(this.node, 0.5);\r\n\r\n        tween(this.node).by(0.6, { angle: 360 }).repeatForever().start();\r\n        this.scheduleOnce(() => {\r\n            cocosUtil.tweenScaleOut(this.node, 0.5, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, this.bullet.extraObj.time);\r\n\r\n    }\r\n\r\n    contactBegin() {\r\n        if (this.isOutScreenReflex) {\r\n            return;\r\n        }\r\n        // 打到怪物，反方向随机角度\r\n        let direction = this.bullet.direction.negative();\r\n        let radian = utilTools.angleToRadian(60);\r\n        radian = utilTools.getFloatValue(-radian, radian);\r\n        Vec3.rotateZ(direction, direction, Vec3.ZERO, radian);\r\n        this.bullet.setDirection(direction);\r\n    }\r\n\r\n    mirrorReflex(isX: boolean, force: boolean = false) {\r\n        if (this.isOutScreenReflex && !force) {\r\n            return;\r\n        }\r\n        this.isOutScreenReflex = true;\r\n        // 碰到屏幕边缘，做镜面反射\r\n        if (isX) {\r\n            this.bullet.direction.x *= -1;\r\n            return;\r\n        }\r\n        this.bullet.direction.y *= -1;\r\n    }\r\n\r\n    outScreenX(pos: Vec3, playerPos: Vec3) {\r\n        return Math.abs(playerPos.x - pos.x) >= mapModel.visibleHalfSize.width;\r\n    }\r\n\r\n    outScreenY(pos: Vec3, playerPos: Vec3) {\r\n        return Math.abs(playerPos.y - pos.y) >= mapModel.visibleHalfSize.height;\r\n    }\r\n\r\n    outWallX(pos: Vec3) {\r\n        if (!mapModel.mapSystem.wallLayer.active) {\r\n            return false;\r\n        }\r\n        if (pos.x >= mapModel.mapSystem.wallRightVal || pos.x <= mapModel.mapSystem.wallLeftVal) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    outWallY(pos: Vec3) {\r\n        if (!mapModel.mapSystem.wallLayer.active) {\r\n            return false;\r\n        }\r\n        if (pos.y >= mapModel.mapSystem.wallTopVal || pos.y <= mapModel.mapSystem.wallBottomVal) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    update(dt: number) {\r\n        let playerPos = mapModel.player.node.position;\r\n        let pos = this.node.position;\r\n        if (this.outScreenX(pos, playerPos)) {\r\n            this.mirrorReflex(true);\r\n            return;\r\n        }\r\n        if (this.outWallX(pos)) {\r\n            this.mirrorReflex(true, true);\r\n            return;\r\n        }\r\n        if (this.outScreenY(pos, playerPos)) {\r\n            this.mirrorReflex(false);\r\n            return;\r\n        }\r\n        if (this.outWallY(pos)) {\r\n            this.mirrorReflex(false, true);\r\n            return;\r\n        }\r\n        this.isOutScreenReflex = false;\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj.invokeClass)) {\r\n            this.bullet.extraObj.invokeClass.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Color, Component, find, Node, tween, Tween, UIOpacity, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-力场\r\n@ccclass('bullet1071')\r\nexport class bullet1071 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n    contactBulletTime: number = 1;\r\n\r\n    lv: number;\r\n    shineColor: Color;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        let lv = this.bullet.extraObj.lv;\r\n        this.lv = lv;\r\n\r\n        let frameColor = \"#22D600\".parseColor();\r\n        if (lv == constants.design.maxLv) {\r\n            frameColor = \"#FF00F5\".parseColor();\r\n        }\r\n        this.shineColor = frameColor;\r\n        this.initScale();\r\n\r\n        Tween.stopAllByTarget(this.bullet.bodyNode);\r\n        let uiOpacity = this.bullet.bodyNode.getComponent(UIOpacity);\r\n        uiOpacity.opacity = 0;\r\n        tween(uiOpacity).to(2, { opacity: 255 }).start();\r\n\r\n        cocosUtil.setRenderableColor(this.bullet.bodyNode, frameColor);\r\n        let frameLayer = find(\"frameLayer\", this.node);\r\n        let time = 0.8;\r\n        utilTools.forArr(frameLayer.children, (frameNode: Node, index: number) => {\r\n            frameNode.active = false;\r\n            cocosUtil.setRenderableColor(frameNode, frameColor);\r\n            Tween.stopAllByTarget(frameNode);\r\n            this.scheduleOnce(() => {\r\n                tween(frameNode).call(() => {\r\n                    frameNode.active = true;\r\n                    frameNode.scale = v3(0, 0, 1);\r\n                    frameNode.getComponent(UIOpacity).opacity = 255;\r\n                    frameNode.angle = Math.random() * 360;\r\n                }).to(time * 4, { scale: v3(0.8, 0.8, 1) }).to(time, { scale: v3(1, 1, 1) }, {\r\n                    onUpdate: (node: Node, ratio: number) => {\r\n                        frameNode.getComponent(UIOpacity).opacity = 255 * (1 - ratio);\r\n                    }\r\n                }).union().repeatForever().start();\r\n            }, index * time * 1.25);\r\n        });\r\n\r\n        this.bullet.extraObj.endCb(this);\r\n    }\r\n\r\n    initScale() {\r\n        let scale = 0.8 + this.lv * 0.4;\r\n        scale += mapModel.skillSystem.getSkill2RangeAddScale();\r\n        this.node.scale = v3(scale, scale, 1);\r\n    }\r\n\r\n    update() {\r\n        // 跟随玩家移动\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        this.node.setPosition(playerPos);\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        this.unscheduleAllCallbacks();\r\n        utilTools.forArr(find(\"frameLayer\", this.node).children, (frameNode: Node) => {\r\n            Tween.stopAllByTarget(frameNode);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-闪电\r\n@ccclass('bullet1081')\r\nexport class bullet1081 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-钻头\r\n@ccclass('bullet1091')\r\nexport class bullet1091 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    isOutScreenReflex: boolean;\r\n\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.isOutScreenReflex = false;\r\n\r\n        this.bullet.speed = this.bullet.speed * (1 + mapModel.skillSystem.getSkill2BulletSpeedAddPercent());\r\n        let atk = this.bullet.atk * (1 + mapModel.skillSystem.getSkill2AtkAddPercent());\r\n        this.bullet.atk = Math.floor(atk);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.recycleSelf();\r\n        }, this.bullet.extraObj.time);\r\n\r\n    }\r\n\r\n    mirrorReflex(isX: boolean, force: boolean = false) {\r\n        if (this.isOutScreenReflex && !force) {\r\n            return;\r\n        }\r\n        this.isOutScreenReflex = true;\r\n        // 碰到边缘，做镜面反射\r\n        if (isX) {\r\n            this.bullet.direction.x *= -1;\r\n            return;\r\n        }\r\n        this.bullet.direction.y *= -1;\r\n    }\r\n\r\n    outScreenX(pos: Vec3, playerPos: Vec3) {\r\n        return Math.abs(playerPos.x - pos.x) >= mapModel.visibleHalfSize.width;\r\n    }\r\n\r\n    outScreenY(pos: Vec3, playerPos: Vec3) {\r\n        return Math.abs(playerPos.y - pos.y) >= mapModel.visibleHalfSize.height;\r\n    }\r\n\r\n    outWallX(pos: Vec3) {\r\n        if (!mapModel.mapSystem.wallLayer.active) {\r\n            return false;\r\n        }\r\n        if (pos.x >= mapModel.mapSystem.wallRightVal || pos.x <= mapModel.mapSystem.wallLeftVal) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    outWallY(pos: Vec3) {\r\n        if (!mapModel.mapSystem.wallLayer.active) {\r\n            return false;\r\n        }\r\n        if (pos.y >= mapModel.mapSystem.wallTopVal || pos.y <= mapModel.mapSystem.wallBottomVal) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    update(dt: number) {\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        let pos = this.node.getPosition();\r\n        if (this.outScreenX(pos, playerPos)) {\r\n            this.mirrorReflex(true);\r\n            return;\r\n        }\r\n        if (this.outWallX(pos)) {\r\n            this.mirrorReflex(true, true);\r\n            return;\r\n        }\r\n        if (this.outScreenY(pos, playerPos)) {\r\n            this.mirrorReflex(false);\r\n            return;\r\n        }\r\n        if (this.outWallY(pos)) {\r\n            this.mirrorReflex(false, true);\r\n            return;\r\n        }\r\n        this.isOutScreenReflex = false;\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj.invokeClass)) {\r\n            this.bullet.extraObj.invokeClass.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, macro, tween, Tween, v3, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-轰炸机\r\n@ccclass('bullet1101')\r\nexport class bullet1101 extends Component {\r\n\r\n    bullet: Bullet;\r\n    hasTweenPlay: boolean = false;\r\n\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    // 轰炸机等级\r\n    lv: number;\r\n    targetDis: number = 260;\r\n\r\n    // 转速\r\n    radianSpeed: number;\r\n    radian: number;\r\n\r\n    shotTimeCount: number;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.radianSpeed = 0;\r\n\r\n        this.setUpDownTween(true);\r\n\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        playerPos.x += 80;\r\n        playerPos.y += 80;\r\n        this.node.setPosition(playerPos);\r\n\r\n        this.lv = this.bullet.extraObj.lv;\r\n        this.bullet.extraObj.endCb(this);\r\n    }\r\n\r\n    setUpDownTween(isOpen: boolean) {\r\n        if (isOpen) {\r\n            if (!this.hasTweenPlay) {\r\n                this.hasTweenPlay = true;\r\n                tween(this.node).by(1, { position: v3(0, 20, 0) }).by(1, { position: v3(0, -20, 0) }).union().repeatForever().start();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.hasTweenPlay) {\r\n            this.hasTweenPlay = false;\r\n            Tween.stopAllByTarget(this.node);\r\n        }\r\n    }\r\n\r\n    startShot(duration: number) {\r\n        this.radianSpeed = Math.PI * 2 / duration;\r\n        // 随机一个开始角度\r\n        this.radian = Math.random() * Math.PI * 2;\r\n        // 每隔一定时间发射一枚子弹\r\n        this.schedule(this.shot, 0.1 - this.lv * 0.01, macro.REPEAT_FOREVER);\r\n        // duration后，停止轰炸\r\n        this.scheduleOnce(() => {\r\n            this.radianSpeed = 0;\r\n            this.unschedule(this.shot);\r\n        }, duration);\r\n    }\r\n\r\n    shot() {\r\n        let pos = v3(this.targetDis + (Math.random() - 0.5) * 50, 0, 0);\r\n        Vec3.rotateZ(pos, pos, Vec3.ZERO, this.radian + (Math.random() - 0.5) * utilTools.angleToRadian(20));\r\n        let targetPos = mapModel.player.node.getPosition().add(pos);\r\n\r\n        // 发射角度\r\n        let direction = targetPos.clone().subtract(this.node.getPosition());\r\n        let radian = (Math.random() - 0.5) * utilTools.angleToRadian(180);\r\n        Vec3.rotateZ(direction, direction, Vec3.ZERO, radian);\r\n        mapModel.bulletSystem.addBullet(this.bullet.id + 1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node), direction, targetPos);\r\n    }\r\n\r\n    update(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        if (pos.x > playerPos.x) {\r\n            this.node.scale = v3(-1, 1, 1);\r\n        } else {\r\n            this.node.scale = v3(1, 1, 1);\r\n        }\r\n\r\n        // 目标位置\r\n        playerPos.x += 80;\r\n        playerPos.y += 80;\r\n\r\n        let speed = 0;\r\n        let dis = Vec2.distance(pos, playerPos);\r\n        if (dis > 5) {\r\n            speed = dis * 2;\r\n            let maxSpeed = mapModel.player.getMoveSpeed() * 1.5;\r\n            if (speed > maxSpeed) {\r\n                speed = maxSpeed;\r\n            }\r\n        }\r\n        if (this.hasTweenPlay && dis <= 30) {\r\n            speed = 0;\r\n        }\r\n        if (speed > 0) {\r\n            this.setUpDownTween(false);\r\n            let direction = playerPos.subtract(pos).normalize();\r\n            direction.multiplyScalar(dt * speed);\r\n            pos.add(direction);\r\n            this.node.setPosition(pos);\r\n        } else {\r\n            this.setUpDownTween(true);\r\n        }\r\n\r\n        if (this.radianSpeed > 0) {\r\n            this.radian -= this.radianSpeed * dt;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, macro, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-轰炸机-子弹\r\n@ccclass('bullet1102')\r\nexport class bullet1102 extends Component {\r\n\r\n    bullet: Bullet;\r\n    // 不可以自动销毁\r\n    outScreenNotRecycle: boolean = true;\r\n\r\n    targetPos: Vec3;\r\n    hint: any;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.targetPos = this.bullet.extraObj;\r\n        this.hint = null;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = true;\r\n            this.bullet.rotateSpeed = Math.PI * 6;\r\n        }, 0.02 + Math.random() * 0.02);\r\n\r\n        mapModel.hintSystem.addHint(HintNames.targetPos2, cocosUtil.convertToWorldSpaceWithPos(this.node, this.targetPos), 0, (hint: any) => {\r\n            if (!cocosUtil.isValid(this) || !this.node.activeInHierarchy) {\r\n                hint.recycleSelf();\r\n                return;\r\n            }\r\n            this.hint = hint;\r\n        });\r\n\r\n        this.schedule((dt: number) => {\r\n            let speed = this.bullet.speed;\r\n            speed -= 20;\r\n            if (speed < 200) {\r\n                speed = 200;\r\n            }\r\n            this.bullet.speed = speed;\r\n            if (Vec2.distance(this.targetPos, this.node.getPosition()) <= 100) {\r\n                this.arriveTargetPos();\r\n            }\r\n        }, 0.1, macro.REPEAT_FOREVER);\r\n    }\r\n\r\n    arriveTargetPos() {\r\n        this.bullet.recycleSelf();\r\n        if (cocosUtil.isValid(this.hint)) {\r\n            this.hint.hint.recycleSelf();\r\n        }\r\n        // 爆炸\r\n        mapModel.bulletSystem.addBullet(this.bullet.id + 1, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-轰炸机-子弹爆炸\r\n@ccclass('bullet1103')\r\nexport class bullet1103 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 保证只算一次伤害\r\n    contactBulletTime: number = 6;\r\n\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.node.angle = 0;\r\n        this.animationCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, Tween, tween, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-大闪电球分出来的小闪电球\r\n@ccclass('bullet12')\r\nexport class bullet12 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        tween(this.bullet.node).by(4, { angle: -360 }).repeatForever().start();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, Vec2, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-静态扳手\r\n@ccclass('bullet13')\r\nexport class bullet13 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n\r\n    // 电极扳手\r\n    bulletId: number = 1010;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n\r\n        this.bullet.node.angle = 0;\r\n\r\n        let targetPos = this.bullet.extraObj;\r\n        let dis = Vec2.distance(this.bullet.node.getPosition(), targetPos);\r\n        let time = dis / this.bullet.speed;\r\n\r\n        tween(this.bullet.node).by(time, { angle: 360 }).start();\r\n        tween(this.bullet.node).to(time, { position: targetPos }).call(() => {\r\n            this.bullet.recycleSelf();\r\n            mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.bullet.node));\r\n        }).start();\r\n\r\n        mapModel.hintSystem.addHint(HintNames.targetPos, cocosUtil.convertToWorldSpaceWithPos(this.bullet.node, targetPos), 0, time);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, Tween, UIOpacity, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-电极扳手\r\n@ccclass('bullet14')\r\nexport class bullet14 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n    contactNotHide: boolean = true;\r\n\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n        this.bullet.node.angle = 0;\r\n\r\n        let uiOpacity = this.bullet.getComponent(UIOpacity);\r\n        if (uiOpacity) {\r\n            uiOpacity.opacity = 255;\r\n        }\r\n\r\n        if (!this.aniCtrl) {\r\n            this.aniCtrl = this.bullet.addComponent(AnimationCtrl);\r\n        }\r\n        this.aniCtrl.playAnimation(\"bashou\", true, () => {\r\n            this.startColliderAni();\r\n        });\r\n        this.startColliderAni();\r\n\r\n        this.scheduleOnce(() => {\r\n            cocosUtil.tweenFadeOut(this.bullet.node, 1, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, 2.6);\r\n\r\n    }\r\n\r\n    startColliderAni() {\r\n        Tween.stopAllByTarget(this.bullet.collider.size);\r\n        Tween.stopAllByTarget(this.bullet.collider.offset);\r\n        this.bullet.collider.size.width = 80;\r\n        this.bullet.collider.size.height = 80;\r\n        this.bullet.collider.offset.y = 0;\r\n        tween(this.bullet.collider.size).delay(0.55).to(0.05, { width: 500, height: 180 }).delay(0.3).to(0.05, { width: 80, height: 80 }).start();\r\n        tween(this.bullet.collider.offset).delay(0.55).to(0.05, { y: -30 }).delay(0.3).to(0.05, { y: 0 }).start();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 葱-满级-甩出的子弹\r\n@ccclass('bullet16')\r\nexport class bullet16 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 如来神掌\r\n@ccclass('bullet17')\r\nexport class bullet17 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = true;\r\n    contactNotHide: boolean = true;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.collider.enabled = false;\r\n        this.scheduleOnce(() => {\r\n            this.bullet.collider.enabled = true;\r\n        }, 0.2);\r\n        this.bullet.node.angle = this.bullet.extraObj;\r\n        let aniCtrl = this.addComponent(AnimationCtrl);\r\n        aniCtrl.playAnimation(\"2\", false, () => {\r\n            mapModel.bulletSystem.recycleBulletNode(this.node);\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-锤子-普通\r\n@ccclass('bullet18')\r\nexport class bullet18 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n    contactNotHide: boolean = true;\r\n\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n        this.bullet.node.angle = 0;\r\n\r\n        this.aniCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n\r\n        this.aniCtrl.playAnimation(\"3\", false, () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-锤子-高级\r\n@ccclass('bullet19')\r\nexport class bullet19 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n    contactNotHide: boolean = true;\r\n\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n        this.bullet.node.angle = 0;\r\n        this.bullet.collider.enabled = false;\r\n\r\n        let scale = 1;\r\n        if (this.bullet.extraObj && this.bullet.extraObj.scale > 0) {\r\n            scale = this.bullet.extraObj.scale;\r\n        }\r\n        this.node.setScale(v3(scale, scale, 1));\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.collider.enabled = true;\r\n        }, 0.1);\r\n\r\n        this.aniCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n        this.aniCtrl.playAnimation(\"4\", false, () => {\r\n            this.bullet.recycleSelf();\r\n        });\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, find, UITransform, _decorator } from 'cc';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-激光枪-普通\r\n@ccclass('bullet20')\r\nexport class bullet20 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = true;\r\n    contactNotHide: boolean = true;\r\n    contactBulletTime: number = 1;\r\n\r\n    bodyNodeTf: UITransform;\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.bodyNodeTf = find(\"body\", this.node).getComponent(UITransform);\r\n\r\n        this.bullet.extraObj.invokeClass(bullet);\r\n    }\r\n\r\n    setBodyWidth(width: number) {\r\n        this.bodyNodeTf.width = width;\r\n        this.bullet.collider.size.width = width - 15;\r\n        this.bullet.collider.offset.x = (width - 15) * 0.5 - 13;\r\n    }\r\n\r\n}\r\n\r\n","import { Component, find, UITransform, _decorator } from 'cc';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-激光枪-高级\r\n@ccclass('bullet21')\r\nexport class bullet21 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = true;\r\n    contactNotHide: boolean = true;\r\n    contactBulletTime: number = 1;\r\n\r\n    bodyNodeTf: UITransform;\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.bodyNodeTf = find(\"body\", this.node).getComponent(UITransform);\r\n\r\n        this.bullet.extraObj.invokeClass(bullet);\r\n    }\r\n\r\n    setBodyWidth(width: number) {\r\n        this.bodyNodeTf.width = width;\r\n        this.bullet.collider.size.width = width - 15;\r\n        this.bullet.collider.offset.x = (width - 15) * 0.5 - 24;\r\n    }\r\n\r\n}\r\n\r\n","import { Animation, Component, find, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 武器-魔法弩\r\n@ccclass('bullet22')\r\nexport class bullet22 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        find(\"body\", this.node).getComponent(Animation).play(\"ani\");\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 狙击手-跟踪子弹\r\n@ccclass('bullet4')\r\nexport class bullet4 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.rotateSpeed = Math.PI;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = true;\r\n        }, 0.3);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.isFollow = false;\r\n        }, 3);\r\n\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 显示爆炸特效\r\n        mapModel.hintSystem.addHint(HintNames.hit2, cocosUtil.convertToWorldSpace(this.bullet.node));\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, macro, tween, UIOpacity, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 狙击手-大子弹\r\n@ccclass('bullet5')\r\nexport class bullet5 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n    moveStop: boolean = false;\r\n\r\n    direction1: Vec3;\r\n    direction2: Vec3;\r\n\r\n    bulletId = 1005;\r\n    // 小子弹产生的角度转速\r\n    turnSpeed: number = Math.PI / 3;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        this.bullet.node.setScale(v3(1, 1, 1));\r\n        let uiOpacity = this.bullet.getComponent(UIOpacity);\r\n        if (uiOpacity) {\r\n            uiOpacity.opacity = 255;\r\n        }\r\n        this.moveStop = true;\r\n\r\n        let dx = 200;\r\n        if (this.bullet.direction.x < 0) {\r\n            dx = -dx;\r\n        }\r\n        tween(this.bullet.node).by(0.3, { position: v3(dx, 0, 0) }, { easing: \"quadOut\" }).call(() => {\r\n            this.moveStop = false;\r\n            this.bullet.direction = mapModel.player.node.getPosition().subtract(this.bullet.node.getPosition()).normalize();\r\n            cocosUtil.tweenBlink(this.bullet.node, 0.5);\r\n            // 开始不断产生小子弹\r\n            this.direction1 = v3(0, 1, 0);\r\n            this.direction2 = v3(0, -1, 0);\r\n            this.schedule(this.createSmallBullet, 0.2, macro.REPEAT_FOREVER);\r\n        }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            this.unschedule(this.createSmallBullet);\r\n            cocosUtil.tweenScaleOut(this.bullet.node, 0.2, () => {\r\n                this.bullet.recycleSelf();\r\n            });\r\n        }, 6);\r\n\r\n    }\r\n\r\n    createSmallBullet(dt: number) {\r\n        let radian = dt * this.turnSpeed;\r\n        let startPos = cocosUtil.convertToWorldSpace(this.bullet.node);\r\n        Vec3.rotateZ(this.direction1, this.direction1, Vec3.ZERO, radian);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, startPos, this.direction1);\r\n\r\n        Vec3.rotateZ(this.direction2, this.direction2, Vec3.ZERO, radian);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, startPos, this.direction2);\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, tween, _decorator } from 'cc';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 电锯人-齿轮\r\n@ccclass('bullet6')\r\nexport class bullet6 extends Component {\r\n\r\n    bullet: Bullet;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        tween(this.bullet.node).by(0.5, { angle: -360 }).repeatForever().start();\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, find, Node, UITransform, Vec2, _decorator } from 'cc';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-闪电\r\n@ccclass('bullet8')\r\nexport class bullet8 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n    moveStop: boolean = false;\r\n\r\n    bodyNode: Node;\r\n    heightWidthRatio: number = 207 / 440;\r\n\r\n    // 最大跟踪长度\r\n    maxFollowDis: number = 600;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n\r\n        this.bodyNode = find(\"body\", this.bullet.node);\r\n\r\n        this.updateAngleAndDis();\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.recycleSelf();\r\n        }, 2.3);\r\n\r\n    }\r\n\r\n    updateAngleAndDis() {\r\n        // 角度\r\n        let direction = this.bullet.getFacePlayerDirection();\r\n        let angle = utilTools.radianToAngle(Math.atan2(direction.y, direction.x));\r\n        this.bullet.node.angle = angle;\r\n\r\n        // 长度\r\n        let dis = Vec2.distance(this.bullet.node.getPosition(), mapModel.player.node.getPosition()) + 40;\r\n        if (dis > this.maxFollowDis) {\r\n            dis = this.maxFollowDis;\r\n        }\r\n        this.bodyNode.getComponent(UITransform).width = dis;\r\n        this.bodyNode.getComponent(UITransform).height = this.heightWidthRatio * dis;\r\n        this.bullet.getComponent(BoxCollider2D).offset.x = dis - 50;\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.updateAngleAndDis();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, v3, Vec2, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-大闪电球\r\n@ccclass('bullet9')\r\nexport class bullet9 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = false;\r\n    contactNotHide: boolean = true;\r\n\r\n    bulletId: number = 1008;\r\n\r\n    timeCount: number = 0;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.timeCount = 0;\r\n\r\n        this.moveStop = true;\r\n\r\n        let time = 0.7;\r\n        this.bullet.node.setScale(v3(0.1, 0.1, 1));\r\n        tween(this.bullet.node).to(time, { scale: v3(1.5, 1.5, 1) }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.direction = this.bullet.getFacePlayerDirection().normalize();\r\n            let playerPos = mapModel.player.node.getPosition();\r\n            let dis = Vec2.distance(playerPos, this.bullet.node.getPosition());\r\n            let time = dis / this.bullet.speed;\r\n            tween(this.bullet.node).to(time, { position: playerPos }).call(() => {\r\n                this.bullet.recycleSelf();\r\n                // 生成一圈小子弹\r\n                let p = this.bullet.node.getPosition();\r\n                let arr = cocosUtil.getCircleDirectionArr(10);\r\n                p = cocosUtil.convertToWorldSpaceWithPos(this.bullet.node, p);\r\n                utilTools.forArr(arr, (direction: any) => {\r\n                    mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n                });\r\n                // 爆炸特效\r\n                mapModel.hintSystem.addHint(HintNames.boom1, p);\r\n            }).start();\r\n        }, time);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, Prefab, UITransform, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { physicsGroup } from '../../other/physicsGroup';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nimport { Bullet } from '../item/bullet/Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BulletSystem')\r\nexport class BulletSystem extends BaseLayer {\r\n\r\n    // 按照子弹id进行UI分层\r\n    idBulletLayerObj: any = {};\r\n\r\n    bulletLayer: Node;\r\n    bulletLayer2: Node;\r\n\r\n    waitAddArr: any = [];\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.bulletLayer = this.node;\r\n        this.bulletLayer2 = find(\"bulletLayer2\", this.node.parent);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    getBulletLayerNameById(id: number) {\r\n        return \"bulletLayer\" + id;\r\n    }\r\n\r\n    getBulletLayerById(id: number) {\r\n        let row = designManager.getRowById(constants.tableName.bullet, id);\r\n        let bulletLayer = this.idBulletLayerObj[id];\r\n        if (!bulletLayer) {\r\n            bulletLayer = new Node(this.getBulletLayerNameById(id));\r\n            bulletLayer.addComponent(UITransform);\r\n            bulletLayer.setPosition(0, 0);\r\n\r\n            switch (row.prefab) {\r\n                case \"bullet1042\": // 油桶燃烧-普通\r\n                case \"bullet1044\": // 油桶燃烧-高级\r\n                case \"bullet1071\": // 力场\r\n                case \"bullet10200\": // 泥浆\r\n                    bulletLayer.parent = this.bulletLayer2;\r\n                    break;\r\n                default:\r\n                    bulletLayer.parent = this.bulletLayer;\r\n                    break;\r\n            }\r\n\r\n            this.idBulletLayerObj[id] = bulletLayer;\r\n\r\n            let nodePoolUtil = bulletLayer.addComponent(NodePoolUtil);\r\n            nodePoolUtil.init(mapModel.bulletPrefabObj[row.prefab]);\r\n        }\r\n        return bulletLayer;\r\n    }\r\n\r\n    loadBulletPrefab(path: string) {\r\n        return new Promise((resolve, reject) => {\r\n            resManager.loadAsset(constants.bundles.bullet, path, Prefab, null, (err, prefab) => {\r\n                if (err) {\r\n                    reject();\r\n                    return;\r\n                }\r\n                resolve(prefab);\r\n            });\r\n        });\r\n    }\r\n\r\n    async addBullet(id: number, group: number, startWorldPos?: Vec3, direction?: Vec3, extraObj?: any) {\r\n        let nodePoolUtil = this.getBulletLayerById(id).getComponent(NodePoolUtil);\r\n        let row = designManager.getRowById(constants.tableName.bullet, id);\r\n        let tmpFunc = () => {\r\n            if (!cocosUtil.isValid(nodePoolUtil)) {\r\n                return;\r\n            }\r\n            if (!nodePoolUtil.itemNode) {\r\n                nodePoolUtil.init(mapModel.bulletPrefabObj[row.prefab]);\r\n            }\r\n            if (!nodePoolUtil.node.activeInHierarchy) {\r\n                let bullet: any = {};\r\n                bullet.id = id;\r\n                bullet.group = group;\r\n                bullet.startWorldPos = startWorldPos;\r\n                bullet.direction = direction;\r\n                bullet.extraObj = extraObj;\r\n                this.waitAddArr.push(bullet);\r\n                return;\r\n            }\r\n            let bulletNode = nodePoolUtil.getNode();\r\n            let bullet: Bullet = cocosUtil.addComponentOnce(bulletNode, Bullet);\r\n            bullet.init(id, group, startWorldPos, direction, extraObj);\r\n\r\n        };\r\n\r\n        if (!mapModel.bulletPrefabObj[row.prefab]) {\r\n            let prefab: any = await this.loadBulletPrefab(row.prefab);\r\n            mapModel.bulletPrefabObj[row.prefab] = prefab;\r\n        }\r\n        tmpFunc();\r\n    }\r\n\r\n    // 遍历屏幕范围内的怪物子弹\r\n    forVisibleMonsterBullet(cb: (bullet: Bullet) => void) {\r\n        utilTools.forArr(this.node.children, (bulletLayer: Node) => {\r\n            utilTools.forArr(bulletLayer.children, (bulletNode: Node) => {\r\n                if (!bulletNode.active) {\r\n                    return;\r\n                }\r\n                if (!mapModel.isInScreenVisible(bulletNode)) {\r\n                    return;\r\n                }\r\n                let bullet = bulletNode.getComponent(Bullet);\r\n                if (bullet.collider && bullet.collider.group == physicsGroup.MONSTER_BULLET) {\r\n                    cb(bullet);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    recycleAllBulletNodeById(id: number) {\r\n        let name = this.getBulletLayerNameById(id);\r\n        let bulletLayer = find(name, this.bulletLayer);\r\n        if (bulletLayer) {\r\n            utilTools.forArr(bulletLayer.children, (node: Node) => {\r\n                node.getComponent(Bullet).recycleSelf();\r\n            });\r\n        }\r\n        bulletLayer = find(name, this.bulletLayer2);\r\n        if (bulletLayer) {\r\n            utilTools.forArr(bulletLayer.children, (node: Node) => {\r\n                node.getComponent(Bullet).recycleSelf();\r\n            });\r\n        }\r\n    }\r\n\r\n    recycleBulletNode(bulletNode: Node) {\r\n        let bullet = bulletNode.getComponent(Bullet);\r\n        let nodePoolUtil = this.getBulletLayerById(bullet.id).getComponent(NodePoolUtil);\r\n        nodePoolUtil.recycleNode(bulletNode);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        let bullet = this.waitAddArr.shift();\r\n        if (bullet) {\r\n            this.addBullet(bullet.id, bullet.group, bullet.startWorldPos, bullet.direction, bullet.extraObj);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BuyLifeLayer')\r\nexport class BuyLifeLayer extends BaseLayer {\r\n\r\n    diamondNumNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.diamondNumNode = this.getNodeByPath(\"ui/btns/btnDiamond/info/num\");\r\n        this.isShowBannerAd = true;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        UserData.getInstance().mapData = null;\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.setString(this.diamondNumNode, \"x\" + designManager.config.backLifeDiamond);\r\n    }\r\n\r\n    onClickBtnDiamond() {\r\n        UserData.getInstance().useBaoShi(-designManager.config.backLifeDiamond);\r\n        playerModel.skillLifeNum++;\r\n        this.closeLayer();\r\n        eventManager.send(msgac.mapRefreshSkill);\r\n    }\r\n\r\n    onClickBtnAd() {\r\n        sdkManager.openAd(\"购买复活\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillLifeNum++;\r\n                this.closeLayer();\r\n                eventManager.send(msgac.mapRefreshSkill);\r\n            }\r\n        });\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator, Node, instantiate, Label, PageView, Sprite, Layout, v3, Prefab, Button } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { RedPointLogicMgr, RPointMask } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ChapterLayer')\r\nexport class ChapterLayer extends BaseUILayer {\r\n    @property({ type: Node, tooltip: \"地图名字\" }) mapName: Node = null;\r\n    @property({ type: Node, tooltip: \"地图节点\" }) mapItem: Node = null;\r\n    @property({ type: Node, tooltip: \"pageView\" }) pageContent: Node = null;\r\n    @property({ type: Node, tooltip: \"选择按钮\" }) selectBtn: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"地图详情\" }) rewardLayer: Node = null;\r\n\r\n    @property({ type: PageView, tooltip: \"地图\" }) mapPage: PageView = null;\r\n\r\n    @property({ type: Prefab, tooltip: \"奖励节点\" }) rewardItem: Prefab = null;\r\n\r\n    @property({ type: Label, tooltip: \"提示1\" }) tishiLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"提示2\" }) tishiLabel2: Label = null;\r\n\r\n    @property({ type: Node, tooltip: \"单倍奖励\" }) btn1: Node = null;\r\n    @property({ type: Node, tooltip: \"双倍奖励\" }) btn2: Node = null;\r\n\r\n\r\n    _curPageId = 0\r\n    _curOpenLevel = 1\r\n    _curRewardList = []\r\n    _curIndex = 0\r\n\r\n    onLoad() {\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        let curMap = UserData.getInstance().getCurMap()\r\n        this._curOpenLevel = curMap\r\n        this.setSpriteFrame2(this.mapName, \"homeLayer/map_name\" + (mapData[curMap - 1].id), null, constants.bundles.wwqVec)\r\n        for (let index = 0; index < 3; index++) {\r\n            let item = instantiate(this.mapItem)\r\n            this.pageContent.addChild(item)\r\n            item.getChildByName(\"timeLabel\").getComponent(Label).string = (index * 5 + 5) + \"分钟\"\r\n            item.getChildByName(\"chapterNum\").getComponent(Label).string = \"第\" + curMap + \"章\"\r\n        }\r\n    }\r\n\r\n    start() {\r\n        // let curMap = UserData.getInstance().getCurMap() - 1\r\n        // // this.setPage(curMap)\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        for(let i = 0; i < 3;i++)\r\n        if (leveldata.Time >= (this._curIndex * 5 + 5) * 60) {\r\n            if (leveldata.ReceiveState[i] == 0) {\r\n                this.mapPage.scrollToPage(i)\r\n                this.setPage(i)\r\n                return\r\n            }\r\n        }\r\n\r\n        this.mapPage.scrollToPage(0)\r\n        this.setPage(0)\r\n    }\r\n\r\n    setPage(index) {\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        let curMap = UserData.getInstance().getCurMap()\r\n        let children = this.pageContent.children\r\n        for (let i = 0; i < children.length; i++) {\r\n            let element = children[i];\r\n            element.getChildByName(\"light\").active = i == index\r\n            if (i == index) {\r\n                element.scale = v3(1, 1, 1)\r\n            } else {\r\n                element.scale = v3(0.8, 0.8, 1)\r\n            }\r\n        }\r\n\r\n        this.tishiLabel.string = \"生存超过\" + (index * 5 + 5) + \"分钟\"\r\n        this.tishiLabel2.string = \"生存超过\" + (index * 5 + 5) + \"分钟才可领取\"\r\n\r\n        this._curIndex = index\r\n        this._curRewardList = mapData[curMap - 1][\"reward\" + (index + 1)]\r\n\r\n        //  this._curRewardList.push([204,1000])\r\n        this.updateBtnState()\r\n        this.rewardLayer.removeAllChildren()\r\n        for (let i = 0; i < this._curRewardList.length; i++) {\r\n            let element = this._curRewardList[i];\r\n            //  let dataArr = this.stringToArr(element)\r\n            let item = instantiate(this.rewardItem)\r\n            item.position = v3(0, 0, 0)\r\n            this.rewardLayer.addChild(item)\r\n            item.getComponent(PropItemPrefab).setView(element[0], element[1])\r\n        }\r\n    }\r\n\r\n    updateBtnState() {\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        this.btn1.getComponent(Button).interactable = false\r\n        this.btn2.getComponent(Button).interactable = false\r\n\r\n        this.btn2.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n        this.btn1.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n        RedPointLogicMgr.ins().setRPointView(this.btn1,null,false)\r\n        if (leveldata.Time >= (this._curIndex * 5 + 5) * 60) {\r\n            if (leveldata.ReceiveState[this._curIndex] == 0) {\r\n                this.btn1.getComponent(Button).interactable = true\r\n                this.btn1.getComponent(Sprite).color = constants.colors.white.parseColor()\r\n                this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n                RedPointLogicMgr.ins().setRPointView(this.btn1,null,true)\r\n            } else {\r\n                this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"已领取\"\r\n            }\r\n            if (leveldata.ReceiveState[this._curIndex] < 2) {\r\n                this.btn2.getComponent(Button).interactable = true\r\n                this.btn2.getComponent(Sprite).color = constants.colors.white.parseColor()\r\n            }\r\n        } else {\r\n            this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n        }\r\n    }\r\n\r\n    scrowPage(event) {\r\n        myLog.i(\"event \", event)\r\n        this.setPage(event._curPageIdx)\r\n    }\r\n\r\n    onGetReward() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let curRewardArr = UserData.getInstance().tobePropItem(this._curRewardList)\r\n        UserData.getInstance().getRewardProp(curRewardArr, 1)\r\n        this.showGetReward(curRewardArr)\r\n        let leveldata = UserData.getInstance().getLevelData(this._curOpenLevel)\r\n        leveldata.ReceiveState[this._curIndex] = 1\r\n        UserData.getInstance().setLevelData(leveldata)\r\n        this.updateBtnState()\r\n     //   RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n    }\r\n\r\n    onGetRewardDouble() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        sdkManager.openAd(\"章节宝箱双倍领取\" + (this._curIndex * 5 + 5) + \"分钟\", (st: number) => {\r\n            if (st == 1) {\r\n                let curRewardArr = UserData.getInstance().tobePropItem(this._curRewardList)\r\n\r\n                UserData.getInstance().getRewardProp(curRewardArr, 2)\r\n                this.showGetReward(curRewardArr)\r\n\r\n                let leveldata = UserData.getInstance().getLevelData(this._curOpenLevel)\r\n                leveldata.ReceiveState[this._curIndex] = 2\r\n                UserData.getInstance().setLevelData(leveldata)\r\n                this.updateBtnState()\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    onDisable() {\r\n    }\r\n\r\n    onDestroy() {\r\n    }\r\n\r\n    backHome() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        myLog.i(\"backHome\")\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        this.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { Button, Color, Component, Input, input, instantiate, isValid, Node, Quat, sys, tween, Tween, UIOpacity, UIRenderer, UITransform, v3, Vec2, Vec3, view } from \"cc\";\r\nimport { utilTools } from \"./utilTools\";\r\n\r\n// 拓展String.parseColor方法\r\nString.prototype.parseColor = function () {\r\n    let color = new Color(this);\r\n\r\n    return color;\r\n}\r\n\r\nObject.defineProperty(Node.prototype, \"opacity\", {\r\n    // 表示能否通过delete删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性，默认值为false。\r\n    configurable: true,\r\n    // 表示能否通过for in循环访问属性，默认值为false\r\n    enumerable: true,\r\n    // 3.writable：表示能否修改属性的值。默认值为false。\r\n    // 4.value：包含这个属性的数据值。默认值为undefined。\r\n    get() {\r\n        let op = cocosUtil.addComponentOnce(this, UIOpacity);\r\n        return op.opacity;\r\n    },\r\n    set(p: number) {\r\n        let op = cocosUtil.addComponentOnce(this, UIOpacity);\r\n        op.opacity = p;\r\n    }\r\n});\r\n\r\n\r\nexport const cocosUtil = {\r\n\r\n    /**\r\n     * 以node为中心的圆环区域内的随机点\r\n     * @param minRadius 最小半径\r\n     * @param maxRadius 最大半径\r\n     * @param isWorld 是否转为世界坐标，默认：是node坐标系下\r\n     */\r\n    getAroundPos(node: Node, minRadius: number, maxRadius: number, isWorld: boolean = false) {\r\n        let radius = utilTools.getFloatValue(minRadius, maxRadius, true);\r\n        let radian = Math.random() * Math.PI * 2;\r\n        let pos = v3(radius, 0, 0);\r\n        Vec3.rotateZ(pos, pos, Vec3.ZERO, radian);\r\n\r\n        pos = node.getPosition().add(pos);\r\n        if (isWorld) {\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(node, pos);\r\n        }\r\n\r\n        return pos;\r\n    },\r\n\r\n    /**\r\n     * 以node为中心的矩形环区域内的随机点\r\n     * @param node 参考节点\r\n     * @param minWidth 最小宽度\r\n     * @param minHeight 最小高度\r\n     * @param maxWidth 最大宽度\r\n     * @param maxHeight 最大高度\r\n     * @param isWorld 是否转为世界坐标，默认：是node坐标系下\r\n     */\r\n    getRectPos(node: Node, minWidth: number, minHeight: number, maxWidth?: number, maxHeight?: number, isWorld: boolean = false) {\r\n        if (!maxWidth) {\r\n            maxWidth = minWidth + 10;\r\n        }\r\n        if (!maxHeight) {\r\n            maxHeight = minHeight + 10;\r\n        }\r\n        // 分割成4个矩形\r\n        let arr = [];\r\n        // 上\r\n        let r1: any = {};\r\n        r1.x = -maxWidth * 0.5;\r\n        r1.y = minHeight * 0.5;\r\n        r1.width = maxWidth;\r\n        r1.height = (maxHeight - minHeight) * 0.5;\r\n        r1.weight = r1.width * r1.height;\r\n        arr.push(r1);\r\n\r\n        // 下\r\n        let r2: any = {};\r\n        r2.x = r1.x;\r\n        r2.y = -maxHeight * 0.5;\r\n        r2.width = r1.width;\r\n        r2.height = r1.height;\r\n        r2.weight = r1.weight;\r\n        arr.push(r2);\r\n\r\n        // 左\r\n        let r3: any = {};\r\n        r3.x = -maxWidth * 0.5;\r\n        r3.y = -minHeight * 0.5;\r\n        r3.width = (maxWidth - minWidth) * 0.5;\r\n        r3.height = minHeight;\r\n        r3.weight = r3.width * r3.height;\r\n        arr.push(r3);\r\n\r\n        // 右\r\n        let r4: any = {};\r\n        r4.x = minWidth * 0.5;\r\n        r4.y = r3.y;\r\n        r4.width = r3.width;\r\n        r4.height = r3.height;\r\n        r4.weight = r3.weight;\r\n        arr.push(r4);\r\n\r\n        let r = utilTools.getRowByWeight(arr);\r\n        let x = r.x + Math.random() * r.width;\r\n        let y = r.y + Math.random() * r.height;\r\n\r\n        let pos = v3(x, y);\r\n        pos = node.getPosition().add(pos);\r\n        if (isWorld) {\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(node, pos);\r\n        }\r\n\r\n        return pos;\r\n    },\r\n\r\n    /**\r\n     * 得到与x轴正方向的夹角，取值范围：0~360度\r\n     * @param pos \r\n     */\r\n    vec2XAngle(pos: Vec2 | Vec3): number {\r\n        let rad = Math.atan2(pos.y, pos.x);\r\n        if (rad < 0) {\r\n            rad += Math.PI * 2;\r\n        }\r\n        let angle = utilTools.radianToAngle(rad);\r\n\r\n        return angle;\r\n    },\r\n\r\n    vec3CopyVal(outVec3: Vec3, srcVec3: Vec3) {\r\n        outVec3.x = srcVec3.x;\r\n        outVec3.y = srcVec3.y;\r\n        outVec3.z = srcVec3.z;\r\n\r\n        return outVec3;\r\n    },\r\n\r\n    schedule(com: Component, cb: Function, interval: number, repeatNum: number, delayTime: number = 0, isAtOnce: boolean = false) {\r\n        com.schedule(cb, interval, repeatNum, delayTime);\r\n        if (isAtOnce) {\r\n            cb();\r\n        }\r\n    },\r\n\r\n    addComponentOnce(item: Node | Component, name: any): any {\r\n        let com = item.getComponent(name);\r\n        if (!com) {\r\n            com = item.addComponent(name);\r\n        }\r\n        return com;\r\n    },\r\n\r\n    /**\r\n     * 以direction为中间方向，angle为间隔角度，获取num数量的，长度为radius的向量\r\n     * @param direction 基准方向\r\n     * @param angle 角度值\r\n     * @param num 个数，包括基准向量\r\n     * @param radius 向量长度\r\n     */\r\n    getSectorDirectionArr(direction: Vec3, angle: number, num: number, radius: number = 1) {\r\n        direction = direction.clone().normalize().multiplyScalar(radius);\r\n        if (num <= 1) {\r\n            return [direction];\r\n        }\r\n\r\n        let da = Math.floor(num / 2);\r\n        let radian = utilTools.angleToRadian(angle);\r\n        let topArr = [];\r\n        let downArr = [];\r\n        for (let i = da; i >= 1; i--) {\r\n            let dir1 = new Vec3(0, 0, 0);\r\n            let dr = radian * i;\r\n            Vec3.rotateZ(dir1, direction, Vec3.ZERO, dr);\r\n            topArr.push(dir1);\r\n\r\n            let dir2 = new Vec3(0, 0, 0);\r\n            dr = -radian * (da + 1 - i);\r\n            Vec3.rotateZ(dir2, direction, Vec3.ZERO, dr);\r\n            downArr.push(dir2);\r\n        }\r\n\r\n        topArr.push(direction);\r\n        let arr = topArr.concat(downArr);\r\n\r\n        return arr;\r\n    },\r\n\r\n    /**\r\n     * 获取num个围成方向为圆圈的，长度为radius的向量\r\n     * @param pos 圆心点\r\n     * @param num 个数\r\n     * @param radius 向量长度\r\n     */\r\n    getCircleDirectionArr(num: number, radius: number = 1) {\r\n        let r = Math.PI * 2 / num;\r\n        let p2 = v3(radius, 0, 0);\r\n        let arr = [];\r\n        // 随机起始角度\r\n        let startRadian = Math.random() * Math.PI * 2;\r\n        for (let i = 0; i < num; i++) {\r\n            let radian = startRadian + r * i;\r\n            let direction = v3(0, 0, 0)\r\n            direction = Vec3.rotateZ(direction, p2.clone(), Vec3.ZERO, radian);\r\n            arr.push(direction);\r\n        }\r\n\r\n        return arr;\r\n    },\r\n\r\n    isInScreenVisible(node: Node): boolean {\r\n        if (!node || !node.parent) {\r\n            return false;\r\n        }\r\n        let orignPos = view.getVisibleOrigin();\r\n        let pos = cocosUtil.convertToWorldSpace(node);\r\n        let height = view.getVisibleSize().height;\r\n        let width = view.getVisibleSize().width;\r\n        let tf = node.getComponent(UITransform);\r\n        // 考虑锚点\r\n        if (pos.x + (1 - tf.anchorX) * tf.width > orignPos.x\r\n            && pos.x - tf.anchorX * tf.width < width + orignPos.x\r\n            && pos.y + (1 - tf.anchorY) * tf.height > orignPos.y\r\n            && pos.y - tf.anchorY * tf.height < height + orignPos.y) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    tweenScaleOut(node: Node, time: number, endCb: Function) {\r\n        tween(node).to(time, { scale: v3(0, 0, 0) }).call(() => {\r\n            endCb();\r\n        }).start();\r\n    },\r\n\r\n    // 受击缩放特效\r\n    tweenHitScale(node: Node, time: number = 0.1, endCb?: Function) {\r\n        Tween.stopAllByTarget(node);\r\n        let scale = node.getScale();\r\n        tween(node)\r\n            .to(time, { scale: v3(scale.x * 0.95, scale.y * 1.1, 1) })\r\n            .to(time * 2, { scale: v3(scale.x, scale.y * 0.9, 1) })\r\n            .to(time * 2, { scale: v3(scale.x * 0.95, scale.y * 1.1, 1) })\r\n            .to(time, { scale: v3(scale.x, scale.y, 1) })\r\n            .call(() => {\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            })\r\n            .start();\r\n    },\r\n\r\n    tweenScaleShake(node: Node, endCb?: Function) {\r\n        let angle = 10;\r\n        let quat1 = new Quat();\r\n        Quat.fromEuler(quat1, 0, 0, angle);\r\n        let quat2 = new Quat();\r\n        Quat.fromEuler(quat2, 0, 0, -angle);\r\n        let quat3 = new Quat();\r\n        Quat.fromEuler(quat3, 0, 0, 0);\r\n\r\n        tween(node)\r\n            .to(0.3, { scale: v3(1.3, 1.3, 1) })\r\n            .to(0.2, { rotation: quat1 })\r\n            .to(0.4, { rotation: quat2 })\r\n            .to(0.2, { rotation: quat3 })\r\n            .to(0.2, { scale: v3(1, 1, 1) })\r\n            .call(() => {\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            }).start();\r\n    },\r\n\r\n    instantiate(node: any) {\r\n        return instantiate(node);\r\n    },\r\n\r\n    // 快速呼吸效果\r\n    tweenBubbling(node: Node) {\r\n        Tween.stopAllByTarget(node);\r\n        node.setScale(v3(0.4, 0.4, 1));\r\n        tween(node).to(0.5, {\r\n            scale: v3(1, 1, 1)\r\n        }).to(0.5, {\r\n            scale: v3(0.4, 0.4, 1)\r\n        }).union().repeatForever().start();\r\n    },\r\n\r\n    /**\r\n     * 异步等待一段时间后，才会往下执行，不会造成阻塞\r\n     * @param com 组件基类\r\n     * @param time 等待时间，单位：秒\r\n     */\r\n    waitTimeAsync(com: Component | number, time?: number) {\r\n        return new Promise((resolve) => {\r\n            if (typeof (com) == \"number\") {\r\n                setTimeout(() => {\r\n                    resolve();\r\n                }, com * 1000);\r\n            } else {\r\n                com.scheduleOnce(() => {\r\n                    resolve();\r\n                }, time);\r\n            }\r\n        });\r\n    },\r\n\r\n    getScreenMidWorldPos() {\r\n        let size = view.getVisibleSize();\r\n        let pos = v3(size.width * 0.5, size.height * 0.5, 0);\r\n\r\n        return pos;\r\n    },\r\n\r\n    nodeChangeParent(node: Node, parent: Node) {\r\n        if (!this.isValid(node) || !this.isValid(parent)) {\r\n            return;\r\n        }\r\n        let pos = cocosUtil.convertToWorldSpace(node);\r\n        node.parent = parent;\r\n        pos = cocosUtil.convertToNodeSpace(node, pos);\r\n        node.setPosition(pos);\r\n    },\r\n\r\n    tweenUIShow(node: Node) {\r\n        Tween.stopAllByTarget(node);\r\n        let scale = node.getScale();\r\n        node.setScale(v3(0.5, 0.5, 1));\r\n        tween(node).to(0.1, {\r\n            scale: scale\r\n        }).start();\r\n    },\r\n\r\n    // 软弹簧效果\r\n    tweenBounceAction(node: Node) {\r\n        Tween.stopAllByTarget(node);\r\n        let scaleX = node.getScale().x;\r\n        let scaleY = node.getScale().y;\r\n        tween(node)\r\n            .to(0.15, { scale: v3(scaleX * 0.4, scaleY * 1.2, 1) }, { easing: 'bounceInOut' })\r\n            .to(0.15, { scale: v3(scaleX * 1.4, scaleY * 0.8, 1) }, { easing: 'bounceInOut' })\r\n            .to(0.2, { scale: v3(scaleX, scaleY, 1) }, { easing: 'smooth' })\r\n            .delay(0.7)\r\n            .union()\r\n            .repeatForever()\r\n            .start();\r\n    },\r\n\r\n    // 节点抖动\r\n    tweenShakeNode(node: Node) {\r\n        let time = 0.1;\r\n        tween(node)\r\n            .to(time, { position: v3(5, -5) })\r\n            .to(time, { position: v3(-5, 5) })\r\n            .to(time, { position: v3(5, 5) })\r\n            .to(time, { position: v3(-5, -5) })\r\n            .to(time, { position: v3(0, 0) })\r\n            .start();\r\n    },\r\n\r\n    // 往下掉落的效果\r\n    tweenFallDown(node: Node, endCb?: Function) {\r\n        node.setScale(0.5, 0.5, 1);\r\n        let pos = node.getPosition();\r\n        cocosUtil.setNodePositionY(node, pos.y + 100);\r\n        tween(node).to(0.3, {\r\n            position: pos\r\n        }).to(0.2, {\r\n            scale: v3(1, 1, 1)\r\n        }).call(() => {\r\n            if (endCb) {\r\n                endCb();\r\n            }\r\n        }).start();\r\n    },\r\n\r\n    // 显现后，往上移动并慢慢隐去\r\n    tweenTopFadeOut(node: Node, endCb?: Function) {\r\n        let uiOpacity = node.getComponent(UIOpacity);\r\n        if (!uiOpacity) {\r\n            uiOpacity = node.addComponent(UIOpacity);\r\n        }\r\n        uiOpacity.opacity = 255;\r\n        node.setScale(1, 1, 1);\r\n        tween(node)\r\n            .to(0.05, {\r\n                scale: v3(1.2, 1.2, 1)\r\n            })\r\n            .to(0.1, {\r\n                scale: v3(1, 1, 1)\r\n            })\r\n            .by(0.5, {\r\n                position: v3(0, 40)\r\n            })\r\n            .by(1, {\r\n                position: v3(0, 0)\r\n            }, {\r\n                onUpdate(target: Node, ratio: number) {\r\n                    uiOpacity.opacity = (1 - ratio) * 255;\r\n                }\r\n            }).union().call(() => {\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            }).start();\r\n    },\r\n\r\n    // 放大再缩小的一个效果\r\n    tweenScaleEffect(node: Node, time?: number, endCb?: Function) {\r\n        if (!time) {\r\n            time = 0.2;\r\n        }\r\n        node.setScale(1, 1, 1);\r\n        tween(node).to(time, {\r\n            scale: v3(1.5, 1.5, 1)\r\n        }).to(time, {\r\n            scale: v3(1, 1, 1)\r\n        }).call(() => {\r\n            if (endCb) {\r\n                endCb();\r\n            }\r\n        }).start();\r\n    },\r\n\r\n    // 边旋转，边飞向目标位置\r\n    async tweenFlyToPos(node: Node, pos: Vec3, endCb?: Function) {\r\n        Tween.stopAllByTarget(node);\r\n\r\n        return new Promise((resolve, reject) => {\r\n            let time = 0.5;\r\n\r\n            let angle = 360;\r\n            let quat = cocosUtil.getQuatByAngleZ(angle);\r\n\r\n            let t1 = tween(node).to(time, {\r\n                position: pos\r\n            });\r\n\r\n            let t2 = tween(node).by(time, {\r\n                rotation: quat\r\n            }, {\r\n                easing: \"quadOut\",\r\n                onUpdate(target: Node, ratio: number) {\r\n                    node.setRotation(cocosUtil.getQuatByAngleZ(angle * ratio));\r\n                }\r\n            });\r\n\r\n            tween(node).parallel(t1, t2).call(() => {\r\n                node.setRotation(cocosUtil.getQuatByAngleZ(0));\r\n                resolve();\r\n                if (endCb) {\r\n                    endCb();\r\n                }\r\n            }).start();\r\n        });\r\n    },\r\n\r\n    // 往右上方做类似抛物线运动\r\n    tweenTopRightPao(node: Node, callbck?: Function) {\r\n        let dx1 = 40;\r\n        let dx2 = 40;\r\n        let dy1 = 100;\r\n        let dy2 = -80;\r\n        dx1 += Math.random() * 20;\r\n        node.setScale(v3(1, 1, 1));\r\n        tween(node)\r\n            .by(0.3, {\r\n                position: v3(dx1, dy1)\r\n            }, {\r\n                easing: \"quadOut\", onUpdate: (target: Node, ratio: number) => {\r\n                    let ds = 0.5 * ratio;\r\n                    node.setScale(v3(1 + ds, 1 + ds, 1));\r\n                }\r\n            })\r\n            .by(0.3, {\r\n                position: v3(dx2, dy2)\r\n            }, {\r\n                easing: \"quadIn\", onUpdate: (target: Node, ratio: number) => {\r\n                    let ds = 0.5 * ratio;\r\n                    node.setScale(v3(1.5 - ds, 1.5 - ds, 1));\r\n                }\r\n            })\r\n            .union()\r\n            .call(() => {\r\n                if (callbck) {\r\n                    callbck();\r\n                }\r\n            }).start();\r\n    },\r\n\r\n    // 从小到放大\r\n    tweenScaleIn(node: Node, time?: number, endCb?: Function) {\r\n        if (!time) {\r\n            time = 0.2;\r\n        }\r\n        node.setScale(0, 0, 1);\r\n        tween(node).to(time, {\r\n            scale: v3(1, 1, 1)\r\n        }).call(() => {\r\n            if (endCb) {\r\n                endCb();\r\n            }\r\n        }).start();\r\n    },\r\n\r\n    // 从小到放大，再恢复到原始大小\r\n    tweenScaleIn2(node: Node, time?: number, endCb?: Function) {\r\n        if (!time) {\r\n            time = 0.2;\r\n        }\r\n        node.setScale(0, 0, 1);\r\n        tween(node).to(time, {\r\n            scale: v3(1.3, 1.3, 1)\r\n        }).to(time / 2, {\r\n            scale: v3(1, 1, 1)\r\n        }).union().call(() => {\r\n            if (endCb) {\r\n                endCb();\r\n            }\r\n        }).start();\r\n    },\r\n\r\n    // 闪烁动画\r\n    tweenBlink(node: Node, time?: number, cb?: Function) {\r\n        if (!time) {\r\n            time = 0.5;\r\n        }\r\n        let uiOpacity = this.addComponentOnce(node, UIOpacity);\r\n        uiOpacity.opacity = 255;\r\n        tween(uiOpacity).to(time, {\r\n            opacity: 80\r\n        }).to(time, {\r\n            opacity: 255\r\n        }).call(() => {\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        }).union().repeatForever().start();\r\n    },\r\n\r\n    // 循环旋转动画\r\n    tweenRotate(node: Node, time?: number) {\r\n        if (!time) {\r\n            time = 2;\r\n        }\r\n        let angle = 360;\r\n        let quat = cocosUtil.getQuatByAngleZ(angle);\r\n        tween(node).by(time, { rotation: quat }, {\r\n            easing: \"linear\",\r\n            onUpdate: (target: Node, ratio: number) => {\r\n                let da = angle * ratio;\r\n                target.setRotation(cocosUtil.getQuatByAngleZ(da));\r\n            }\r\n        }).repeatForever().start();\r\n    },\r\n\r\n    // 上下漂浮\r\n    tweenUpDown(node: Node, dy?: number, time?: number) {\r\n        if (!dy) {\r\n            dy = 6;\r\n        }\r\n        if (!time) {\r\n            time = 1.5;\r\n        }\r\n        let pos1 = node.getPosition();\r\n        pos1.y += dy;\r\n        let pos2 = node.getPosition();\r\n        tween(node).to(time, {\r\n            position: pos1\r\n        }).to(time, {\r\n            position: pos2\r\n        }).union().repeatForever().start();\r\n    },\r\n\r\n    // 淡入动画\r\n    async tweenFadeIn(node: Node, time?: number, cb?: Function) {\r\n        return new Promise((resolve, reject) => {\r\n            if (!time) {\r\n                time = 1;\r\n            }\r\n            let uiOpacity = this.addComponentOnce(node, UIOpacity);\r\n            uiOpacity.opacity = 0;\r\n            tween(uiOpacity).to(time, {\r\n                opacity: 255\r\n            }).call(() => {\r\n                resolve();\r\n                if (cb) {\r\n                    cb();\r\n                }\r\n            }).start();\r\n        });\r\n    },\r\n\r\n    // 淡出动画\r\n    async tweenFadeOut(node: Node, time?: number, cb?: Function) {\r\n        return new Promise((resolve, reject) => {\r\n            if (!time) {\r\n                time = 1.5;\r\n            }\r\n            let uiOpacity = this.addComponentOnce(node, UIOpacity);\r\n            uiOpacity.opacity = 255;\r\n            tween(uiOpacity).to(time, {\r\n                opacity: 0\r\n            }).call(() => {\r\n                resolve();\r\n                if (cb) {\r\n                    cb();\r\n                }\r\n            }).start();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 放大缩小呼吸效果\r\n     * @param node 节点\r\n     * @param time 缩放时长，单位：秒\r\n     * @param scale 缩放大小\r\n     */\r\n    tweenBreath(node: Node, time?: number, scale?: number) {\r\n        if (!time) {\r\n            time = 0.4;\r\n        }\r\n        if (!scale) {\r\n            scale = 1.2;\r\n        }\r\n\r\n        tween(node)\r\n            .to(\r\n                time, {\r\n                scale: v3(scale, scale, 1)\r\n            })\r\n            .to(\r\n                time, {\r\n                scale: v3(1, 1, 1)\r\n            }\r\n            ).union().repeatForever().start();\r\n    },\r\n\r\n    /**\r\n     * 间接性晃动效果\r\n     * @param node 节点\r\n     * @param time 时长，单位：秒\r\n     * @param rotation 旋转角度，单位：度数\r\n     * @param delayTime 中间暂停时长，单位：秒\r\n     * @param isRepeat 是否循环播放，默认：是\r\n     */\r\n    tweenShake(node: Node, time?: number, rotation?: number, delayTime?: number, isRepeat?: boolean) {\r\n        Tween.stopAllByTarget(node);\r\n\r\n        if (!time) {\r\n            time = 0.2;\r\n        }\r\n        if (!rotation) {\r\n            rotation = 6;\r\n        }\r\n        if (delayTime == undefined) {\r\n            delayTime = time * 5;\r\n        }\r\n\r\n        let quat1: Quat = new Quat();\r\n        Quat.fromEuler(quat1, 0, 0, rotation);\r\n\r\n        let quat2: Quat = new Quat();\r\n        Quat.fromEuler(quat2, 0, 0, -rotation);\r\n\r\n        let quat3: Quat = new Quat();\r\n        Quat.fromEuler(quat3, 0, 0, 0);\r\n\r\n        let tweenRet = tween(node).to(time, {\r\n            rotation: quat1\r\n        }).to(time * 2, {\r\n            rotation: quat2\r\n        }).to(time, {\r\n            rotation: quat3\r\n        });\r\n\r\n        if (isRepeat == undefined) {\r\n            tweenRet.delay(delayTime).union().repeatForever().start();\r\n        } else {\r\n            tweenRet.start();\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * 判断节点或者组件是否可用\r\n     * @param node 节点对象 \r\n     */\r\n    isValid(node: Node | Component) {\r\n        if (!node || !isValid(node)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    isAndroid() {\r\n        return sys.platform === sys.Platform.ANDROID;\r\n    },\r\n\r\n    isDesktopBrowser() {\r\n        return sys.platform === sys.Platform.DESKTOP_BROWSER;\r\n    },\r\n\r\n    isIos() {\r\n        return sys.platform === sys.Platform.IOS;\r\n    },\r\n\r\n    isWechatGame() {\r\n        return sys.platform === sys.Platform.WECHAT_GAME;\r\n    },\r\n\r\n    addKeyDownListener(cb, sender) {\r\n        input.on(Input.EventType.KEY_DOWN, cb, sender);\r\n    },\r\n\r\n    init() {\r\n        // 设计分辨率\r\n        this.designSize = view.getDesignResolutionSize();\r\n        // 实际屏幕分辨率\r\n        this.frameSize = view.getFrameSize();\r\n        // 实际屏幕安全区域，{x: 0, y: 0, width: 766.6256157635468, height: 1660}\r\n        // 是以左下角为原点，以设计分辨率为单位的，并且是遵循高度为适配原则后的尺寸\r\n        this.safeAreaRect = sys.getSafeAreaRect();\r\n\r\n        // 计算出顶部刘海屏高度\r\n        this.safeAreaMarginTop = this.designSize.height - this.safeAreaRect.height;\r\n        if (this.safeAreaMarginTop < 0) {\r\n            this.safeAreaMarginTop = 0;\r\n        }\r\n\r\n        this.intiScreenAdapterWidthScale();\r\n        this.initScreenBgAdapterWidthScale();\r\n    },\r\n\r\n\r\n    // UI适配，以高度为适配原则，按照满宽度显示计算，如果宽度不够显示，要乘以这个缩放比例\r\n    intiScreenAdapterWidthScale() {\r\n        let fh = this.frameSize.height;\r\n        let fw = this.frameSize.width;\r\n\r\n        let scale = fh / this.designSize.height;\r\n        let adapterWidth = this.designSize.width * scale;\r\n        let retScale = 1;\r\n        if (adapterWidth > fw) {\r\n            // 屏幕不够显示，有些交互UI会丢失，要进行缩小\r\n            retScale = fw / adapterWidth;\r\n        }\r\n\r\n        // if (this.safeAreaMarginTop > 0) {\r\n        //     // cocos内部以高度为适配策略，但是如果有刘海屏，要额外再缩放一点\r\n        //     let subScale = this.safeAreaMarginTop / this.designSize.height;\r\n        //     retScale -= subScale;\r\n        // }\r\n\r\n        this.screenAdapterScale = retScale;\r\n    },\r\n    getScreenAdapterScale() {\r\n        if (!this.screenAdapterScale) {\r\n            this.screenAdapterScale = 1;\r\n        }\r\n        return this.screenAdapterScale;\r\n    },\r\n\r\n    // 背景图适配，跟上面的UI适配，刚好相反，超出的屏幕不管，屏幕没显示满，要放大\r\n    initScreenBgAdapterWidthScale() {\r\n        let fh = this.frameSize.height;\r\n        let fw = this.frameSize.width;\r\n        let scale = fh / this.designSize.height;\r\n        let adapterWidth = this.designSize.width * scale;\r\n        let retScale = 1;\r\n        if (adapterWidth < fw) {\r\n            // 屏幕没显示满，会有黑边，要进行放大\r\n            retScale = fw / adapterWidth;\r\n        }\r\n\r\n        // if (this.safeAreaMarginTop > 0) {\r\n        //     // 额外增加放大值，使得背景图铺满包括刘海在内的整个屏幕\r\n        //     let addScale = this.safeAreaMarginTop / this.designSize.height;\r\n        //     retScale += addScale;\r\n        // }\r\n\r\n        this.screenBgAdapterScale = retScale;\r\n    },\r\n    getScreenBgAdapterScale() {\r\n        if (!this.screenBgAdapterScale) {\r\n            this.screenBgAdapterScale = 1;\r\n        }\r\n        return this.screenBgAdapterScale;\r\n    },\r\n\r\n    /**\r\n     * 将node坐标转换为世界坐标\r\n     * @param node \r\n     * @param isCenter 是否强制是node的中心点坐标\r\n     */\r\n    convertToWorldSpace(node: Node, isCenter?: boolean): Vec3 {\r\n        let transform = node.parent.getComponent(UITransform);\r\n\r\n        let pos = node.getPosition();\r\n        if (isCenter) {\r\n            let tf = node.getComponent(UITransform);\r\n            pos.x = pos.x + (0.5 - tf.anchorX) * tf.width;\r\n            pos.y = pos.y + (0.5 - tf.anchorY) * tf.height;\r\n        }\r\n\r\n        return transform.convertToWorldSpaceAR(pos);\r\n    },\r\n\r\n    convertToWorldSpaceWithPos(node: Node, pos: Vec3): Vec3 {\r\n        let transform = node.parent.getComponent(UITransform);\r\n        pos = transform.convertToWorldSpaceAR(pos);\r\n\r\n        return pos;\r\n    },\r\n\r\n    /**\r\n     * 获得以node父节点锚点位置为原点的坐标系下的坐标\r\n     * @param node 注意，是同坐标系下的节点\r\n     * @param pos 世界坐标\r\n     */\r\n    convertToNodeSpace(node: Node, pos: Vec3): Vec3 {\r\n        let transform = node.parent.getComponent(UITransform);\r\n\r\n        return transform.convertToNodeSpaceAR(pos);\r\n    },\r\n\r\n    /**\r\n     * 设置渲染节点的颜色叠加\r\n     * @param node 节点\r\n     * @param color 颜色\r\n     * @param isRecursion 是否递归子节点也设置 \r\n     */\r\n    setRenderableColor(node: Node, color: string | Color, isRecursion?: boolean) {\r\n        let renderable = node.getComponent(UIRenderer);\r\n        if (renderable && renderable.color) {\r\n            let temp: Color = null;\r\n            if (typeof (color) == \"string\") {\r\n                temp = color.parseColor();\r\n            } else {\r\n                temp = color;\r\n            }\r\n            renderable.color = temp;\r\n        }\r\n\r\n        if (isRecursion) {\r\n            for (let ch of node.children) {\r\n                this.setRenderableColor(ch, color, isRecursion);\r\n            }\r\n        }\r\n    },\r\n\r\n    getRenderableColor(node: Node): Color {\r\n        let renderable = node.getComponent(UIRenderer);\r\n        if (renderable && renderable.color) {\r\n            return renderable.color.clone();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * 根据十六进制颜色值，获得color对象\r\n     * @param hex \"#333333\"\r\n     */\r\n    getColorByHEX(hex: string): Color {\r\n        let color = new Color(hex);\r\n        // Color.fromHEX(color, hex);\r\n        return color;\r\n    },\r\n\r\n    /**\r\n     * 设置按钮可用状态\r\n     * @param node 按钮对象\r\n     * @param enabled 是否可点击\r\n     */\r\n    setButtonEnabled(node: Node, enabled: boolean) {\r\n        let btn = node.getComponent(Button);\r\n        if (btn) {\r\n            btn.enabled = enabled;\r\n        }\r\n    },\r\n\r\n    getQuatByAngleZ(angle: number) {\r\n        let quat = new Quat();\r\n        Quat.fromEuler(quat, 0, 0, angle);\r\n\r\n        return quat;\r\n    },\r\n\r\n    formatNum(num: number) {\r\n        if (num < 10000) {\r\n            return num;\r\n        }\r\n        if (num < 1000000) {\r\n            num = Math.floor(num / 1000 * 100);\r\n            return (num / 100).toFixed(2) + \"K\";\r\n        }\r\n\r\n        num = Math.floor(num / 1000000 * 100);\r\n        return (num / 100).toFixed(2) + \"M\";\r\n    },\r\n\r\n    formatNumString(num: number) {\r\n        if (num < 1000) {\r\n            return num;\r\n        }\r\n        if (num < 10000) {\r\n            num = Math.floor(num / 1000 * 10);\r\n            return (num / 10).toFixed(1) + \"K\";\r\n        }\r\n\r\n        if (num < 10000000) {\r\n            num = Math.floor(num / 10000 * 10);\r\n            return (num / 10).toFixed(1) + \"w\";\r\n        }\r\n\r\n        num = Math.floor(num / 1000000 * 100);\r\n        return (num / 100).toFixed(2) + \"M\";\r\n    },\r\n\r\n\r\n    setNodePositionX(node: Node, x: number) {\r\n        let pos = node.getPosition();\r\n        pos.x = x;\r\n        node.setPosition(pos);\r\n    },\r\n\r\n    setNodePositionY(node: Node, y: number) {\r\n        let pos = node.getPosition();\r\n        pos.y = y;\r\n        node.setPosition(pos);\r\n    },\r\n\r\n    /**\r\n     * 绘制一条曲线路径\r\n     * @param  {Object} node canvas渲染上下文\r\n     * @param  {Array<number>} start 起点\r\n     * @param  {Array<number>} end 终点\r\n     * @param  {number} curveness 曲度(0-1)\r\n     * @param  {number} percent 绘制百分比(0-100)\r\n     */\r\n    drawCurvePath(node, start, end, curveness, percent, delay = 0) {\r\n\r\n        var cp = [\r\n            (start[0] + end[0]) / 2 - (start[1] - end[1]) * curveness,\r\n            (start[1] + end[1]) / 2 - (end[0] - start[0]) * curveness\r\n        ];\r\n\r\n        // node.position = v3(start[0], start[1], 0);\r\n        let tweenArr = []\r\n        tweenArr.push(tween(node).delay(delay))\r\n        let curx = start[0]\r\n        let cury = start[1]\r\n        for (var t = 0; t <= percent / 100; t += 0.01) {\r\n\r\n            var x = this.quadraticBezier(start[0], cp[0], end[0], t);\r\n            var y = this.quadraticBezier(start[1], cp[1], end[1], t);\r\n            let time = (Math.abs(x - curx) + Math.abs(y - cury)) / 1500\r\n            tweenArr.push(tween(node).to(time, { position: v3(x, y, 0) }))\r\n\r\n            curx = x\r\n            cury = y\r\n        }\r\n        let time = (Math.abs(end[0] - curx) + Math.abs(end[1] - cury)) / 1500\r\n\r\n        tweenArr.push(tween(node).to(time, { position: v3(end[0], end[1], 0) }))\r\n\r\n        tween(node).sequence(...tweenArr).start();\r\n    },\r\n\r\n    quadraticBezier(p0, p1, p2, t) {\r\n        var k = 1 - t;\r\n        return k * k * p0 + 2 * (1 - t) * t * p1 + t * t * p2;    // 这个方程就是二次贝赛尔曲线方程\r\n    }\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('comeShine')\r\nexport class comeShine extends Component {\r\n\r\n    hint: Hint;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        let monsterId = this.hint.extraObj.monsterId;\r\n        this.scheduleOnce(() => {\r\n            mapModel.monsterSystem.createMonster(monsterId, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.4);\r\n    }\r\n\r\n}\r\n\r\n","\r\nexport const GNetConf={\r\n    //蛋壳的联网地址\r\n    mrtgd_WsUrl:\"wss://api.play.xmtyq.com:39001/sh\",\r\n    mrtgd_HttpUrl :\"https://api.play.xmtyq.com:39001\", //http服务地址\r\n\tmrtgd_jjws_WsUrl:\"wss://api.play.xmtyq.com:39002/sh\",\r\n    mrtgd_jjws_HttpUrl :\"https://api.play.xmtyq.com:39002\",\r\n}\r\n\r\n//操作状态\r\nexport const GNetCmd={\r\n    StickPack    : 100000, // 粘包\r\n\tHeartbeat    : 101000, // 用户心跳\r\n\tUserLogin    : 101001, // 用户登录\r\n\tUserRegister : 101002, // 用户注册\r\n\tAntiAddiction  : 101003, // 防沉迷认证\r\n\tSensitiveWordsCheck  : 101004, // 用户保存数据\r\n\tSaveUserRecord  : 102003, // 用户保存数据\r\n    GetRegionData: 102004,// 查询用户某个分区的数据\r\n\tGetRegionList: 102005,// 获取分区列表\r\n\tSaveUserRecordAll:102007,// 用户保存所有数据\r\n\tUploadAvatar:102008,//上传头像\r\n\tGetUserDataByKey :102009, // 获得用户数据\r\n\r\n\tReqWxSession:103001, // 微信接口返回值\r\n\tReqSendAuthCode:103002, // 请求发送短信验证码\r\n\tReqPhoneLogin:103003, // 请求使用手机登录\r\n\r\n\tSetFriendCode : 104001, //设置好友邀请码\r\n\tGetFriendVal  : 104002, //获得好友相关数据\r\n\r\n\tGetRankInfo:201001, //请求获得排行数据\r\n\tGetInviteCode:201002, //请求邀请码\r\n\tGetInviteCodeReward : 201003, //新玩家，输入邀请码，获得邀请码奖励，标记为老用户\r\n\tGetInviteLevelReward : 201004, //老玩家领取奖励\r\n\tPushInviteProcess : 201005, //推送邀请进度\r\n\tIsRankOpen : 201006, //是否开启排行榜\r\n\tGetSomeonePlayerInfo : 201007, //获取其他玩家数据\r\n\r\n\tGetMidAutumnRank : 301001, //中秋活动排行榜\r\n\tSetMidAutumnRank : 301002, //中秋活动排行榜\r\n\tGetWorldBossRank : 301003, //世界boss排行榜查看\r\n\tSetWorldBossRank : 301004, //世界boss排行榜设置\r\n\tPushWorldBossSettle : 301005, //世界boss结算完后推送消息到本地\r\n\tSetWorldBossPlayerStatus : 301006, //设置世界boss挑战的状态\r\n\tGetWorldBossPlayerStatus : 301007, //读取世界boss挑战的状态\r\n\r\n\tGetEmpireSpotData : 302001, //帝国战争的数据读取，每秒\r\n\tActionEmpireSpot : 302002, //帝国战争对地块的行为，1占领 2攻占 3发起掠夺 4参与掠夺 5驱赶\r\n\r\n}\r\n\r\nexport const GClientEvent = {\r\n\r\n}\r\n\r\nexport const GNetConst = {\r\n    SaveHead:\"game\",\r\n\tServerIsNew:\"serverIsNew\",\r\n\tServerIsOld:\"serverIsOld\",\r\n\tResSuccess    : \"success\",\r\n\tResFail    : \"fail\",\r\n\tDataTypeInt : \"int\",\r\n\tDataTypeString : \"string\",\r\n\tDataTypeBoolean : \"boolean\",\r\n\tDataTypeObject : \"object\",\r\n\tServerEventHead : \"ServerDown_\",\r\n    Http_isAlive:\"/isAlive\",\r\n}\r\n\r\nexport enum GLoginState{\r\n\tnoYet=\"noYet\",\r\n\tloginFail=\"loginFail\",\r\n\tloginWithoutAccount=\"loginWithoutAccount\",\r\n\tloginWithAccount=\"loginWithAccount\",\r\n}","\r\nconst constants = {\r\n\r\n    gameName: \"survivalton\",\r\n\r\n    animations: {\r\n        animation: \"animation\",\r\n\r\n        standBy: \"standby\",\r\n        attack: \"attack\",\r\n        hit: \"hit\",\r\n        die: \"die\",\r\n        appear: \"appear\",\r\n        walk: \"walk\",\r\n    },\r\n\r\n    audioNames: {\r\n        home: \"home\",\r\n        map: \"map\",\r\n        win: \"win\",\r\n    },\r\n\r\n    propIds: {\r\n        coin: 101,\r\n        dayAct: 107,\r\n        energy : 108,\r\n\r\n        exp: 201,\r\n        magnet: 301,\r\n        addHpPercent: 401,\r\n        bomb: 501,\r\n        box1: 601,\r\n        box2: 701,\r\n        diamond: 801,\r\n        boxMonsterCoin: 1001,\r\n        equip: 1002,\r\n    },\r\n    propTypes: {\r\n        coin: 1,\r\n        exp: 2,\r\n        skin: 17,\r\n    },\r\n\r\n    mapTypes: {\r\n        main: 1,\r\n        tower: 2,\r\n    },\r\n\r\n    materials: {\r\n        shineColor: \"shader/shineColor\",\r\n        shineColorSpine: \"shader/shineColorSpine\",\r\n    },\r\n\r\n    monsterTypes: {\r\n        common: 1,\r\n        elite: 2,\r\n        boss: 3,\r\n    },\r\n    monsterIds: {\r\n        boxMonster: 24,\r\n    },\r\n\r\n    skillTypes: {\r\n        // 锤子\r\n        hammer: 1,\r\n        // 转盘\r\n        disk: 2,\r\n    },\r\n\r\n    times: {\r\n        minute: 60 * 1000,\r\n        houre: 60 * 60 * 1000,\r\n        day: 24 * 60 * 60 * 1000,\r\n    },\r\n\r\n    tableName: {\r\n        map: \"map\",\r\n        level: \"level\",\r\n        monster: \"monster\",\r\n        weapon: \"weapon\",\r\n        bullet: \"bullet\",\r\n        skill: \"skill\",\r\n        skill2: \"skill2\",\r\n        expLv: \"expLv\",\r\n        expType: \"expType\",\r\n        prop: \"prop\",\r\n        box1: \"box1\",\r\n        config: \"config\",\r\n        heroLevel: \"heroLevel\",\r\n        suit: \"suit\",\r\n        draw: \"draw\",\r\n        weaponOpt: \"weaponOpt\",\r\n        towerFloor: \"towerFloor\",\r\n        dayTask: \"dayTask\",\r\n        daySign: \"daySign\",\r\n        energyAward: \"energyAward\",\r\n        CNTM: \"CNTM\",\r\n        vip: \"vip\",\r\n        share: \"share\",\r\n        monsterTimeAdd: \"monsterTimeAdd\",\r\n\r\n    },\r\n\r\n    bundles: {\r\n        audio: \"audio\",\r\n        bullet: \"bullet\",\r\n        common: \"common\",\r\n        design: \"design\",\r\n        hint: \"hint\",\r\n        icon: \"icon\",\r\n        layer: \"layer\",\r\n        monster: \"monster\",\r\n        prefab: \"prefab\",\r\n        spine: \"spine\",\r\n        ui: \"ui\",\r\n        weapon: \"weapon\",\r\n        wwqVec: \"wwqVec\",\r\n    },\r\n\r\n    layers: {\r\n        LoadingLayer: \"LoadingLayer\",\r\n        NoticeLayer: \"NoticeLayer\",\r\n\r\n        HomeLayer: \"HomeLayer\",\r\n        MapLayer: \"MapLayer\",\r\n        MapFightLayer: \"MapFightLayer\",\r\n        SkillSelectLayer: \"SkillSelectLayer\",\r\n        PauseLayer: \"PauseLayer\",\r\n        LuckyDrawLayer: \"LuckyDrawLayer\",\r\n        LevelLayer: \"LevelLayer\",\r\n        ChapterLayer: \"ChapterLayer\",\r\n        SettlementLayer: \"SettlementLayer\",\r\n        BackHomeLayer: \"BackHomeLayer\",\r\n        BackLifeLayer: \"BackLifeLayer\",\r\n        BackMapLayer: \"BackMapLayer\",\r\n        HandLayer: \"HandLayer\",\r\n        TransLayer: \"TransLayer\",\r\n        BoxMonsterLayer: \"BoxMonsterLayer\",\r\n        TowerLayer: \"TowerLayer\",\r\n        TowerFloorLayer: \"TowerFloorLayer\",\r\n        TowerRoleLayer: \"TowerRoleLayer\",\r\n        DayTaskLayer: \"DayTaskLayer\",\r\n        EnergyLayer: \"EnergyLayer\",\r\n        DaySignLayer: \"DaySignLayer\",\r\n        LetterLayer: \"LetterLayer\",\r\n        SkinChangeLayer: \"SkinChangeLayer\",\r\n        PropInfoLayer2: \"PropInfoLayer2\",\r\n        AwardInfoLayer: \"AwardInfoLayer\",\r\n        VipLayer: \"VipLayer\",\r\n        ShareLayer: \"ShareLayer\",\r\n        MsgBoxLayer: \"MsgBoxLayer\",\r\n        BuyLifeLayer: \"BuyLifeLayer\",\r\n\r\n        PropInfoLayer: \"PropInfoLayer\",\r\n        BlessLayer: \"BlessLayer\",\r\n        BlessResultLayer: \"BlessResultLayer\",\r\n        MoreGameLayer: \"MoreGameLayer\",\r\n\r\n        RewardItemLayer: \"RewardItemLayer\",\r\n        ShopLayer: \"ShopLayer\",\r\n        RewardLayer: \"RewardLayer\",\r\n        SettingLayer: \"SettingLayer\",\r\n        PatrolLayer: \"PatrolLayer\",\r\n        PatrolFastLayer: \"PatrolFastLayer\",\r\n\r\n        GuessGameLayer: \"GuessGameLayer\",\r\n        GuessResultLayer: \"GuessResultLayer\",\r\n        PyramidDrawLayer: \"PyramidDrawLayer\",\r\n        RewardSkinLayer: \"RewardSkinLayer\",\r\n        RewardRedBoxLayer: \"RewardRedBoxLayer\",\r\n    },\r\n\r\n    // 自动保存时间间隔\r\n    saveTimeGap: 1000 * 60 * 5,\r\n\r\n    colors: {\r\n        yin: \"#666666\",\r\n        white: \"#ffffff\",\r\n        green: \"#38ff38\",\r\n        blue: \"#1096fd\",\r\n        purple: \"#f153ff\",\r\n    },\r\n\r\n    // 零散策划数据\r\n    design: {\r\n        // 满级\r\n        maxLv: 5,\r\n        // 武器数量限制\r\n        weaponNum: 4,\r\n        // 主动/被动技能数量限制\r\n        skillNum: 6,\r\n\r\n        // 单局最多复活次数\r\n        backLifeMax: 1,\r\n    },\r\n\r\n}\r\n\r\nexport { constants };\r\n\r\n","import { Component, Label, macro, _decorator } from \"cc\";\r\nimport { msgac } from \"../game/data/msgac\";\r\nimport { eventManager } from \"../game/manager/eventManager\";\r\nimport { UserData } from \"../game/model/UserData\";\r\nimport { utilTools } from \"./utilTools\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CountTimeUtil')\r\nexport class CountTimeUtil extends Component {\r\n\r\n    _time = 0;\r\n    _callFun = null\r\n\r\n    onLoad() {\r\n        this.node.getComponent(Label).string = utilTools.getTimeStr(this._time * 1000, true)\r\n    }\r\n\r\n    setTime(time, callFun = null) {\r\n        this._time = time\r\n        this._callFun = callFun\r\n        if (this._time > 0) {\r\n            this.node.getComponent(Label).string = utilTools.getTimeStr(this._time * 1000, true)\r\n            this.schedule(this.updateTime, 1, macro.REPEAT_FOREVER)\r\n        } else {\r\n            this.node.getComponent(Label).string = \"\"\r\n        }\r\n    }\r\n\r\n    start() {\r\n        // this.schedule(this.updateTime, 1, macro.REPEAT_FOREVER)\r\n    }\r\n\r\n    updateTime() {\r\n        if (this._time > 0) {\r\n            this._time--\r\n            this.node.getComponent(Label).string = utilTools.getTimeStr(this._time * 1000, true)\r\n        }\r\n        if (this._time <= 0) {\r\n            this.unschedule(this.updateTime)\r\n            this.node.getComponent(Label).string = \"\"\r\n            this._callFun && this._callFun()\r\n            // UserData.getInstance().checkPowerTime()\r\n            // eventManager.send(msgac.commonResRefresh);\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nimport { Component, director, _decorator } from 'cc';\r\nimport { tyqSDK } from '../tyqSDK';\r\nimport { GLoginState, GNetCmd, GNetConst } from './conf';\r\nimport Http from './http';\r\nimport ServerCtr from './ServerCtr';\r\nimport TimeCtr from './TimeCtr';\r\nimport { WmSocket } from './wmsocket';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CronCtr')\r\nexport default class CronCtr extends Component {\r\n\r\n    private static _instance: CronCtr;\r\n\r\n    public static getInstance(): CronCtr {\r\n        if (!this._instance) {\r\n            this._instance = new CronCtr();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    msgArr = [];\r\n    msgArrIdx = 0;\r\n\r\n    isPutEnable: boolean = false;\r\n    testTimeDelta: number = 0;\r\n\r\n    //保存队列，第一条和下一条按时间差150毫秒内的记录，统一一次性发送，发送成功后再发送下一批次\r\n    //断线重连\r\n    //本地存储登录返回的uid，区号\r\n    //数据存储，key_uid_区号_time,按照time进行排序\r\n    //服务端记录一个时间\r\n    //切号\r\n    // saverQueue:object[] = []; //{data:协议内容,time:TimeCtr.GetInstance().ServerTime}\r\n    //\r\n    // set SaverQueue(data){\r\n    //     this.saverQueue.push({data:data, time:TimeCtr.GetInstance().ServerTime})\r\n    // }\r\n\r\n    init() {\r\n        director.on(GNetCmd.Heartbeat.toString(), this.onHeartbeat)\r\n        director.on(GNetCmd.SaveUserRecord.toString(), this.respSaveUserRecord, this)\r\n        this.schedule(this.reqHeartBeat, 3);\r\n        this.startHeartbeat()\r\n    }\r\n\r\n    startHeartbeat() {\r\n        ///重连定时器\r\n        WmSocket.getInstance();\r\n        Http.getInstance().httpPost(tyqSDK.getUrl().httpUrl + GNetConst.Http_isAlive, {}, (res: any) => {\r\n            console.log(\"server response :\", res)\r\n            if (res != -1) {\r\n                TimeCtr.GetInstance().UpdateServerTime(res.serverTime);\r\n                WmSocket.getInstance().connect();\r\n            }\r\n        }, () => {\r\n            ServerCtr.GetInstance().loginState = GLoginState.loginFail;\r\n        });\r\n\r\n        // ()=>{\r\n        //     if(WmSocket.getInstance().isConnected()==false){\r\n        //         Http.getInstance().httpPost(gl.server_http_url, {}, (res)=>{\r\n        //             // cc.log(\"接受到的请求内容是\", res)\r\n        //             if(res != -1){\r\n        //                 TimeCtr.GetInstance().UpdateServerTime(res.serverTime);\r\n        //                 EventMgr.getInstance().event(\"ws_reconnect\");\r\n        //             }\r\n        //         });\r\n        //     }else{\r\n        //         if(GlParam.isEnterGame){\r\n        //             this.heartbeatCheck()\r\n        //         }\r\n        //     }\r\n        // }\r\n    }\r\n\r\n\r\n    onHeartbeat(data: any) {\r\n        // console.log(\"heartbeat \", data)\r\n        if (data.status != GNetConst.ResSuccess) {\r\n            // GD.GameState = GGameState.stop\r\n            // mygame.pause()\r\n            // TimeCtr.GetInstance().ServerTime = data.time\r\n            //被抢登了\r\n            if (ServerCtr.GetInstance().loginState == GLoginState.loginWithAccount) {\r\n                ServerCtr.GetInstance().loginState = GLoginState.noYet;\r\n            }\r\n            TimeCtr.GetInstance().ReInit();\r\n            // uiManager.instance.showDialog(Const.Dialogs.kick_prompt)\r\n            // App.event(GameEvent.ShowFlyTips,{text:`<color=red>账号已在其他设备登录</c>`})//${i18n.t('txt.login_msg_out')}\r\n            CronCtr.getInstance().isPutEnable = false;\r\n\r\n            // let errMsg = `账号已在其他设备登录`;\r\n            // let cheatLevel = localStorage.getItem(\"cheatLevel\")\r\n            // if(cheatLevel!=\"\"){\r\n            // \tcheatLevel = parseInt(cheatLevel)\r\n            // \tif(cheatLevel==1){\r\n            // \t\terrMsg = `<color=${Res.RedColor}>服务端检测到你正在使用非法外挂，如再发现直接封号</c>`;\r\n            // \t}else if(cheatLevel==2){\r\n            // \t\terrMsg = `<color=${Res.RedColor}>该区账号涉嫌作弊已被封禁，如再开挂所有区服全部封禁 </c>`;\r\n            // \t}else if(cheatLevel>=3){\r\n            // \t\terrMsg = `<color=${Res.RedColor}>该账号已封禁</c>`;\r\n            // \t}\r\n            // \tcc.sys.localStorage.removeItem(\"cheatLevel\")\r\n            // }\r\n            // cc.game.restart();\r\n        } else {\r\n            TimeCtr.GetInstance().UpdateServerTimeByHeartbeat(data.time * 1000);\r\n            WmSocket.getInstance().lastHeartbeatTime = TimeCtr.GetInstance().ServerTime\r\n        }\r\n        // else{\r\n        // \t//检查版本号是否和服务端匹配\r\n        // \tif (data.version.includes('@'+this.center.Version)==false){\r\n        // \t\tthis.ui.CloseAllPanel();\r\n        // \t\tthis.ui.ShowPanel('LoadPanel');\r\n        // \t\t//弹窗提示当前版本号不对\r\n        // \t\tApp.event(GameEvent.ShowFlyTips,{text:`<color=red>发现新版本，请先更新!</c>`})//${i18n.t('txt.login_msg_version')}\r\n        // \t\tGlParam.isEnterGame = false;\r\n        // \t}\r\n        // }\r\n    }\r\n\r\n    reqHeartBeat() {\r\n        // console.log(\"-----心跳-----\", WmSocket.getInstance().isConnected(), ServerCtr.GetInstance().loginState);\r\n\r\n        if (WmSocket.getInstance().isConnected() == false) {\r\n            // uiManager.instance.showDialog(Const.Dialogs.net_prompt, )\r\n            // Notifications.emit(GDef.wdEvent.showTip, {msg:\"网络连接异常\"})\r\n            Http.getInstance().httpPost(tyqSDK.getUrl().httpUrl + GNetConst.Http_isAlive, {}, (res: any) => {\r\n                // cc.log(\"接受到的请求内容是\", res)\r\n                if (res != -1) {\r\n                    TimeCtr.GetInstance().UpdateServerTime(res.serverTime);\r\n                    director.emit(\"ws_reconnect\");\r\n                }\r\n            }, () => {\r\n                ServerCtr.GetInstance().loginState = GLoginState.loginFail;\r\n            });\r\n        } else {\r\n            if (ServerCtr.GetInstance().loginState == GLoginState.loginFail) {\r\n                //重连后登录\r\n                ServerCtr.GetInstance().wxLoginBegin();\r\n            } else {\r\n                this.heartbeatCheck()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    respSaveUserRecord(data: any) {\r\n\r\n        if (data.status == GNetConst.ResFail) {\r\n            console.error(\"发现作弊1----\", data, data.cheatLevel, data.hasOwnProperty(\"cheatLevel\"))\r\n            // let cheatLevel = data.cheatLevel\r\n            // if(cheatLevel!==undefined){\r\n            //     // cc.log(\"cheatLevel2--------!!!!---\", cheatLevel)\r\n            //     localStorage.setItem(\"cheatLevel\", cheatLevel+\"\")\r\n            //     //直接发送一个心跳利用心跳到登录页面\r\n            //     let data = {\r\n            //         \"cmd\": GNetCmd.Heartbeat,\r\n            //         \"lang\": \"zh\",\r\n            //         \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n            //     }\r\n            //     WmSocket.getInstance().send({\"data\":data});\r\n            // }\r\n            // uiManager.instance.showDialog(Const.Dialogs.kick_prompt)\r\n            // GameStorage.setString(\"cheatLevel\", data.cheatLevel)\r\n        }\r\n        // if(data[\"isEnd\"]==false){\r\n        //     this.sendMultiMsg(data[\"idx\"]+1)\r\n        // }\r\n    }\r\n\r\n    // cloudSave(obj){\r\n    //     // 进入游戏每隔5分钟存储一次\r\n    //     obj.schedule(()=>{\r\n    //         if(!GlParam.isEnterGame){\r\n    //             return;\r\n    //         }\r\n    //         this.cloudSaveManual()\r\n    //         // if(WmSocket.getInstance().isConnected()){\r\n    //         //     let data = {\r\n    //         //         \"cmd\": GNetCmd.SaveUserRecord,\r\n    //         //         \"lang\": \"zh\",\r\n    //         //         \"token\": GameStorage.getString(\"loginToken\"),\r\n    //         //         // \"jsonData\": JSON.stringify(GameStorage.getAll()),\r\n    //         //         \"jsonData\": JSON.stringify(GameStorage.getAll()),\r\n    //         //     }\r\n    //         //     cc.log(\"长度测试\",JSON.stringify(GameStorage.getAll()).length)\r\n    //         //     WmSocket.getInstance().send({\"data\":data});\r\n    //         // }\r\n\r\n    //     }, 300);\r\n    // }\r\n\r\n    sendMultiMsg(i: number) {\r\n        // for(let i=0; i<strArr.length; i++){\r\n        //\r\n        // }\r\n\r\n        let data = {\r\n            // \"cmd\": GNetCmd.SaveUserRecord,\r\n            \"cmd\": GNetCmd.SaveUserRecord,\r\n            \"lang\": \"zh\",\r\n            \"type\": \"slice\",\r\n            \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n            // \"jsonData\":JSON.stringify(GameStorage.getAll()),\r\n            \"jsonData\": this.msgArr[i],\r\n            \"isEnd\": i == this.msgArr.length - 1,\r\n            \"isStart\": i == 0,\r\n            \"idx\": i\r\n        }\r\n        if (!data.jsonData || data.jsonData == \"\" || data.jsonData == \"{}\") {\r\n            return\r\n        }\r\n        // cc.log(\"分段存储\", data)\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    //保存数据到云端\r\n    saveDataToCloud(key: string, val: any) {\r\n        if (ServerCtr.GetInstance().loginState != GLoginState.loginWithAccount) {\r\n            return;\r\n        }\r\n        // cc.log(\"上传数据时间标记---------\", new Date().getTime(),  new Date().getTime()-this.testTimeDelta )\r\n        this.testTimeDelta = new Date().getTime()\r\n        if (WmSocket.getInstance().isConnected()) {\r\n            let data = {\r\n                \"cmd\": GNetCmd.SaveUserRecord,\r\n                \"lang\": \"zh\",\r\n                \"type\": \"single\",\r\n                \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n                \"version\": ServerCtr.GetInstance().dataVersion,\r\n                // \"jsonData\":JSON.stringify(GameStorage.getAll()),\r\n                // \"jsonData\":JSON.stringify(GameStorage.getAll(isFirst)),\r\n                \"key\": key,\r\n                \"val\": String(val),\r\n                \"dml\": \"add upd\"\r\n            }\r\n            // cc.log(\"长度测试\", JSON.stringify(GameStorage.getAll(isFirst)).length)\r\n            WmSocket.getInstance().send({ \"data\": data });\r\n        }\r\n    }\r\n\r\n    uploadAllRecord(jsonData: any) {\r\n        if (ServerCtr.GetInstance().loginState != GLoginState.loginWithAccount) {\r\n            return;\r\n        }\r\n        let data = {\r\n            // \"cmd\": GNetCmd.SaveUserRecord,\r\n            \"cmd\": GNetCmd.SaveUserRecordAll,\r\n            \"lang\": \"zh\",\r\n            \"type\": \"single\",\r\n            \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n            // \"jsonData\":JSON.stringify(GameStorage.getAll()),\r\n            \"version\": ServerCtr.GetInstance().dataVersion,\r\n            \"allData\": JSON.stringify(jsonData),\r\n        }\r\n        // if (!data.jsonData || data.jsonData == \"\" || data.jsonData == \"{}\") {\r\n        //     return\r\n        // }\r\n        // cc.log(\"长度测试\", JSON.stringify(GameStorage.getAll(isFirst)).length)\r\n        console.warn(\"发送数据到云端---\", data)\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    // UploadEmptyRecord(){\r\n    //     if (!ServerCtr.GetInstance().isLogin) {\r\n    //         return;\r\n    //     }\r\n    //     let data = {\r\n    //         // \"cmd\": GNetCmd.SaveUserRecord,\r\n    //         \"cmd\": GNetCmd.SaveUserRecordAll,\r\n    //         \"lang\": \"zh\",\r\n    //         \"type\": \"single\",\r\n    //         \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n    //         // \"jsonData\":JSON.stringify(GameStorage.getAll()),\r\n    //         \"allData\":JSON.stringify({}),\r\n    //     }\r\n    //     // if (!data.jsonData || data.jsonData == \"\" || data.jsonData == \"{}\") {\r\n    //     //     return\r\n    //     // }\r\n    //     // cc.log(\"长度测试\", JSON.stringify(GameStorage.getAll(isFirst)).length)\r\n    //     WmSocket.getInstance().send({\"data\":data});\r\n    // }\r\n\r\n\r\n    // cloudDeleteManual(key:string){\r\n    //     // if (!this.isPutEnable) {\r\n    //     //     return;\r\n    //     // }\r\n    //     if (!ServerCtr.GetInstance().isLogin) {\r\n    //         return;\r\n    //     }\r\n    //     if(WmSocket.getInstance().isConnected()){\r\n    //         let data = {\r\n    //             // \"cmd\": GNetCmd.SaveUserRecord,\r\n    //             \"cmd\": GNetCmd.SaveUserRecord,\r\n    //             \"lang\": \"zh\",\r\n    //             \"type\": \"single\",\r\n    //             \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n    //             \"key\":key,\r\n    //             \"val\":\"\",\r\n    //             \"dml\":\"del\"\r\n    //         }\r\n    //         Public.warn(\"del--------------\")\r\n    //         WmSocket.getInstance().send({\"data\":data});\r\n    //     }\r\n    // }\r\n\r\n    heartbeatCheck() {\r\n        let data = {\r\n            \"cmd\": GNetCmd.Heartbeat,\r\n            \"lang\": \"zh\",\r\n            \"token\": ServerCtr.GetInstance().token,//GameStorage.getString(\"loginToken\"),\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n}\r\n","import { find, Node, Tween, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DaySignLayer')\r\nexport class DaySignLayer extends BaseLayer {\r\n\r\n    itemUIArr: any = [];\r\n    awardDay: number = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        let itemLayer = this.getNodeByPath(\"ui/itemLayer\");\r\n        let propItem = find(\"propItem\", itemLayer);\r\n        for (let i = 0; i < 2; i++) {\r\n            cocosUtil.instantiate(propItem).parent = itemLayer;\r\n        }\r\n        let itemLayer2 = cocosUtil.instantiate(itemLayer);\r\n        itemLayer2.parent = itemLayer.parent;\r\n        let pos = itemLayer2.getPosition();\r\n        pos.y -= 150;\r\n        itemLayer2.position = pos;\r\n        cocosUtil.instantiate(propItem).parent = itemLayer;\r\n\r\n        itemLayer.children.forEach((itemUI: Node) => {\r\n            this.itemUIArr.push(itemUI);\r\n        });\r\n        itemLayer2.children.forEach((itemUI: Node) => {\r\n            this.itemUIArr.push(itemUI);\r\n        });\r\n\r\n        // test\r\n        // let startTime = new Date(new Date().getTime() - constants.times.day * 6);\r\n        // startTime.setHours(0);\r\n        // startTime.setMinutes(0);\r\n        // startTime.setSeconds(0);\r\n        // startTime.setMilliseconds(0);\r\n        // playerModel.daySignObj.startTime = startTime;\r\n        // delete playerModel.daySignObj;\r\n\r\n        if(tyqAdManager.getChannel() == Channel.OPPO_MINI_GAME){\r\n            playerModel.daySignObj.notBox = 1\r\n        }\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let now = new Date();\r\n        let day = Math.floor((now.getTime() - playerModel.daySignObj.startTime) / constants.times.day);\r\n        this.awardDay = day;\r\n        for (let i = 0; i < this.itemUIArr.length; i++) {\r\n            let itemUI = this.itemUIArr[i];\r\n            let row = designManager.getRowById(constants.tableName.daySign, i + 1);\r\n            this.setPropItem(row.award[0], find(\"icon\", itemUI), row.award[1], find(\"bg\", itemUI), find(\"num/val\", itemUI));\r\n            this.setString(find(\"day\", itemUI), localText.dayIndex.format(i + 1));\r\n\r\n            let getNode = find(\"get\", itemUI);\r\n            let patchNode = find(\"patch\", itemUI);\r\n            let targetNode = find(\"target\", itemUI);\r\n            getNode.active = false;\r\n            patchNode.active = false;\r\n            targetNode.active = false;\r\n            let hasGet = false;\r\n            if (playerModel.daySignObj.awardDayArr.indexOf(i) != -1) {\r\n                hasGet = true;\r\n            }\r\n            if (hasGet) {\r\n                getNode.active = true;\r\n            } else if (i < day) {\r\n                patchNode.active = true;\r\n            } else if (i == day) {\r\n                targetNode.active = true;\r\n                Tween.stopAllByTarget(targetNode);\r\n                cocosUtil.tweenBlink(targetNode, 0.3);\r\n            }\r\n        }\r\n\r\n        // 已签到次数\r\n        this.setString(this.getNodeByPath(\"ui/bottom/info/has/info/text\"), playerModel.daySignObj.awardDayArr.length + localText.ci);\r\n        // 未签到次数\r\n        this.setString(this.getNodeByPath(\"ui/bottom/info/no/info/text\"), 7 - playerModel.daySignObj.awardDayArr.length + localText.ci);\r\n\r\n        this.setProgressBar(this.getNodeByPath(\"ui/bottom/bar\"), playerModel.daySignObj.awardDayArr.length / 7);\r\n\r\n        this.refreshFinalAwardLayer();\r\n        this.refreshBoxLayer();\r\n    }\r\n\r\n    refreshFinalAwardLayer() {\r\n        let getNode = this.getNodeByPath(\"ui/bottom/extraAward/get\");\r\n        let lockNode = this.getNodeByPath(\"ui/bottom/extraAward/lock\");\r\n        getNode.active = false;\r\n        lockNode.active = false;\r\n        if (playerModel.daySignObj.finalAward) {\r\n            getNode.active = true;\r\n        } else if (playerModel.daySignObj.awardDayArr.length < 7) {\r\n            lockNode.active = true;\r\n        }\r\n    }\r\n\r\n    refreshBoxLayer() {\r\n        if (playerModel.daySignObj.notBox) {\r\n            this.getNodeByPath(\"ui/hintLayer/btnBox/gou\").active = false;\r\n        } else {\r\n            this.getNodeByPath(\"ui/hintLayer/btnBox/gou\").active = true;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    signWithDay(day: number, double: boolean = false) {\r\n        let row = designManager.getRowById(constants.tableName.daySign, day + 1);\r\n        if (!row) {\r\n            return;\r\n        }\r\n\r\n        let awardArr = [row.award];\r\n        if (double) {\r\n            awardArr.push(row.award);\r\n        }\r\n        awardArr = UserData.getInstance().addPropArrByDesign(awardArr);\r\n        this.openAwardGetLayer(awardArr);\r\n        playerModel.daySignObj.awardDayArr.push(day);\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBtnGetAward() {\r\n        let row = designManager.getRowById(constants.tableName.daySign, this.awardDay + 1);\r\n        if (!row) {\r\n            this.createNotice(localText.daySignOutdate);\r\n            return;\r\n        }\r\n        if (playerModel.daySignObj.awardDayArr.indexOf(this.awardDay) != -1) {\r\n            // 已领取奖励了\r\n            this.createNotice(localText.daySignHasGet);\r\n            return;\r\n        }\r\n\r\n        playerModel.addDayTaskNum(2);\r\n\r\n        tyqSDK.eventSendCustomEvent(\"签到玩家\")\r\n\r\n        if (playerModel.daySignObj.notBox) {\r\n            this.signWithDay(this.awardDay);\r\n        } else {\r\n            sdkManager.openAd(\"签到双倍奖励\", (st: number) => {\r\n                if (st == 1) {\r\n                    this.signWithDay(this.awardDay, true);\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onClickBtnPatch() {\r\n        let targetDay = -1;\r\n        for (let i = 0; i < 7; i++) {\r\n            if (playerModel.daySignObj.awardDayArr.indexOf(i) == -1) {\r\n                targetDay = i;\r\n                break;\r\n            }\r\n        }\r\n        if (targetDay == -1 || targetDay >= this.awardDay) {\r\n            this.createNotice(localText.daySignNoLeave);\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"快速补签\", (st: number) => {\r\n            if (st == 1) {\r\n                this.signWithDay(targetDay);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    onClickBtnBox() {\r\n        if (playerModel.daySignObj.notBox) {\r\n            playerModel.daySignObj.notBox = 0;\r\n        } else {\r\n            playerModel.daySignObj.notBox = 1;\r\n        }\r\n        this.refreshBoxLayer();\r\n    }\r\n\r\n    onClickExtraAward() {\r\n        if (playerModel.daySignObj.awardDayArr.length < 7) {\r\n            this.createNotice(localText.daySignFinalAwardHint);\r\n            return;\r\n        }\r\n        if (playerModel.daySignObj.finalAward) {\r\n            // 已领取\r\n            this.createNotice(localText.hasGet);\r\n            return;\r\n        }\r\n\r\n        playerModel.daySignObj.finalAward = 1;\r\n        let propItem = UserData.getInstance().addPropByDesign(designManager.config.daySignFinalAward);\r\n        this.openAwardGetLayer([propItem]);\r\n\r\n        this.refreshFinalAwardLayer();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DayTaskLayer')\r\nexport class DayTaskLayer extends BaseLayer {\r\n\r\n    flagArr = [25, 50, 75, 100];\r\n    taskListNode: Node;\r\n\r\n    // preLoadAssetConfigArr = [\r\n    //     { bundle: \"ui\", path: \"day_task/item_bg\", type: SpriteFrame }\r\n    // ];\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.taskListNode = this.getNodeByPath(\"ui/listbg/list\");\r\n\r\n        // test\r\n        // UserData.getInstance().addPropNum(constants.propIds.dayAct, 90);\r\n        // delete playerModel.dayTaskObj;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.overDay\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshTopLayer();\r\n\r\n        let tb = designManager.getTable(constants.tableName.dayTask);\r\n        let arr = [];\r\n        for (let i = 0; i < tb.length; i++) {\r\n            let row = tb[i];\r\n            let task: any = {};\r\n            task.id = row.id;\r\n            arr.push(task);\r\n        }\r\n\r\n        // 排序 已完成(未领取)-进度快-已领取\r\n        utilTools.sortArr(arr, (task1: any, task2: any) => {\r\n            let row1 = designManager.getRowById(constants.tableName.dayTask, task1.id);\r\n            let row2 = designManager.getRowById(constants.tableName.dayTask, task2.id);\r\n            let info1 = playerModel.getTaskInfoById(task1.id);\r\n            let info2 = playerModel.getTaskInfoById(task2.id);\r\n            let v1 = info1.num / row1.needNum;\r\n            let v2 = info2.num / row2.needNum;\r\n            if (info1.getAward) {\r\n                v1 = -1;\r\n            }\r\n            if (info2.getAward) {\r\n                v2 = -1;\r\n            }\r\n            if (v1 < v2) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n\r\n        this.scrollViewSetData(this.taskListNode, arr, this.refreshTaskItem.bind(this), true, true);\r\n\r\n    }\r\n\r\n    refreshTopLayer() {\r\n        let actNum = UserData.getInstance().dayAct;\r\n        this.setString(this.getNodeByPath(\"ui/top/act/num\"), actNum);\r\n        this.setProgressBar(this.getNodeByPath(\"ui/top/progress\"), actNum / 100);\r\n\r\n        let chs = this.getNodeByPath(\"ui/top/progress/boxs\").children;\r\n        for (let i = 0; i < chs.length; i++) {\r\n            let itemUI = chs[i];\r\n            itemUI.index = i;\r\n            let num = this.flagArr[i];\r\n            this.setString(find(\"num\", itemUI), num);\r\n            let shineNode = find(\"shine\", itemUI);\r\n            let iconNode = find(\"icon\", itemUI);\r\n            let openNode = find(\"open\", itemUI);\r\n            shineNode.active = false;\r\n            iconNode.active = false;\r\n            openNode.active = false;\r\n            if (actNum >= num) {\r\n                let flag = this.getAwardFlag(i);\r\n                if (playerModel.dayTaskObj.awardFlagArr.indexOf(flag) == -1) {\r\n                    // 还没领取\r\n                    iconNode.active = true;\r\n                    shineNode.active = true;\r\n                    cocosUtil.tweenBreath(shineNode, 0.5, 1.2);\r\n                } else {\r\n                    // 已领取\r\n                    openNode.active = true;\r\n                }\r\n            } else {\r\n                shineNode.active = false;\r\n                iconNode.active = true;\r\n                openNode.active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    refreshTaskItem(itemUI: any, task: any) {\r\n        let row = designManager.getRowById(constants.tableName.dayTask, task.id);\r\n        this.setString(find(\"info\", itemUI), row.info);\r\n        find(\"awardLayer\", itemUI).children.forEach((awardItem: any, index: number) => {\r\n            let propId = row.award[index][0];\r\n            let propNum = row.award[index][1];\r\n            this.setPropItem(propId, find(\"icon\", awardItem), propNum, null, find(\"num/val\", awardItem));\r\n            awardItem.award = row.award[index];\r\n        });\r\n        let info = playerModel.getTaskInfoById(row.id);\r\n        let num = info.num;\r\n        if (row.id == 1 && num > 1) {\r\n            num = 1;\r\n        }\r\n        this.setString(find(\"progress/hint\", itemUI), num + \"/\" + row.needNum);\r\n        this.setProgressBar(find(\"progress\", itemUI), info.num / row.needNum);\r\n        this.setString(find(\"btnGo/text\", itemUI), row.btnText);\r\n\r\n        let btnGet = find(\"btnGet\", itemUI);\r\n        let btnGo = find(\"btnGo\", itemUI);\r\n        let doneNode = find(\"done\", itemUI);\r\n        btnGet.item = task;\r\n        btnGo.item = task;\r\n        btnGet.active = false;\r\n        btnGo.active = false;\r\n        doneNode.active = false;\r\n        if (info.num >= row.needNum) {\r\n            if (info.getAward) {\r\n                doneNode.active = true;\r\n            } else {\r\n                btnGet.active = true;\r\n            }\r\n        } else {\r\n            btnGo.active = true;\r\n        }\r\n\r\n        if (row.type == 3 && designManager.config.taskDoge > UserData.getInstance().$freeDraw) {\r\n            btnGo.getChildByName(\"hand\").active = true\r\n        } else {\r\n            btnGo.getChildByName(\"hand\").active = false\r\n        }\r\n    }\r\n\r\n    overDayRet() {\r\n        this.initUI();\r\n    }\r\n\r\n    getAwardFlag(index: number) {\r\n        return \"dayTaskAward\" + (index + 1);\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBoxItem(node: any) {\r\n        let awardArr = [];\r\n        for (let i = 0; i < this.flagArr.length; i++) {\r\n            let flag = this.getAwardFlag(i);\r\n            let award = designManager.config[flag];\r\n            let num = this.flagArr[i];\r\n            let actNum = UserData.getInstance().dayAct;\r\n            if (actNum < num) {\r\n                // 还未达成\r\n                continue;\r\n            }\r\n            if (playerModel.dayTaskObj.awardFlagArr.indexOf(flag) != -1) {\r\n                // 已领取奖励\r\n                continue;\r\n            }\r\n            let propItem = UserData.getInstance().addPropNum(award[0], award[1]);\r\n            playerModel.dayTaskObj.awardFlagArr.push(flag);\r\n            awardArr.push(propItem);\r\n            tyqSDK.eventSendCustomEvent(\"每日任务-完成\" + this.flagArr[i])\r\n        }\r\n        if (awardArr.length > 0) {\r\n            this.openAwardGetLayer(awardArr);\r\n            this.refreshTopLayer();\r\n        } else {\r\n            let flag = this.getAwardFlag(node.index);\r\n            let award = designManager.config[flag];\r\n            this.openAwardInfoLayer([award]);\r\n        }\r\n    }\r\n\r\n    onClickBtnGo(node: any) {\r\n        let row = designManager.getRowById(constants.tableName.dayTask, node.item.id);\r\n        let obj: any = {};\r\n        switch (row.type) {\r\n            case 2:\r\n                obj.layerName = constants.layers.DaySignLayer;\r\n                break;\r\n            case 3:\r\n                obj.layerName = \"ShopLayer\";\r\n                obj.taskGo = true\r\n                break;\r\n            case 4:\r\n            case 5:\r\n            case 6:\r\n            case 7:\r\n            case 10:\r\n                obj.layerName = \"MainLayer\";\r\n                break;\r\n            case 8:\r\n                obj.layerName = \"PatrolLayer\";\r\n                break;\r\n            case 9:\r\n                obj.layerName = \"BlessLayer\";\r\n                break;\r\n            case 11:\r\n                obj.layerName = \"RewardItemLayer\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        eventManager.send(msgac.jumpLayer, obj);\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnGet(node: any) {\r\n        let info = playerModel.getTaskInfoById(node.item.id);\r\n        let row = designManager.getRowById(constants.tableName.dayTask, node.item.id);\r\n        if (info.getAward) {\r\n            // 已领取\r\n            return;\r\n        }\r\n        if (info.num < row.needNum) {\r\n            // 还未完成\r\n            return;\r\n        }\r\n        let arr = UserData.getInstance().addPropArrByDesign(row.award);\r\n        this.openAwardGetLayer(arr);\r\n        info.getAward = 1;\r\n        this.refreshTopLayer();\r\n        this.scrollViewRefreshList(this.taskListNode);\r\n        eventManager.send(msgac.refreshRedPoint);\r\n        tyqSDK.eventSendCustomEvent(\"每日任务-参与领取奖励\")\r\n    }\r\n\r\n    onClickAwardItem(node: any) {\r\n        let award = node.award;\r\n        this.openPropInfoLayer2(award[0], award[1]);\r\n    }\r\n\r\n}\r\n\r\n","import { Color, Canvas, UITransform, instantiate, math, Toggle, TextureCube, _decorator, Component, Button, labelAssembler, game, director, Node, Scene, renderer, CameraComponent, Label, ForwardPipeline, RichText } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('internal.DebugViewRuntimeControl')\r\nexport class DebugViewRuntimeControl extends Component {\r\n    @property(Node)\r\n    compositeModeToggle: Node | null = null;\r\n    @property(Node)\r\n    singleModeToggle: Node | null = null;\r\n    @property(Node)\r\n    EnableAllCompositeModeButton: Node | null = null;\r\n\t_single: number = 0;\r\n\r\n    private strSingle: string[] = [\r\n        'No Single Debug',\r\n        'Vertex Color',\r\n        'Vertex Normal',\r\n        'Vertex Tangent',\r\n        'World Position',\r\n        'Vertex Mirror',\r\n        'Face Side',\r\n        'UV0',\r\n        'UV1',\r\n        'UV Lightmap',\r\n        'Project Depth',\r\n        'Linear Depth',\r\n\r\n        'Fragment Normal',\r\n        'Fragment Tangent',\r\n        'Fragment Binormal',\r\n        'Base Color',\r\n        'Diffuse Color',\r\n        'Specular Color',\r\n        'Transparency',\r\n        'Metallic',\r\n        'Roughness',\r\n        'Specular Intensity',\r\n        'IOR',\r\n\r\n        'Direct Diffuse',\r\n        'Direct Specular',\r\n        'Direct All',\r\n        'Env Diffuse',\r\n        'Env Specular',\r\n        'Env All',\r\n        'Emissive',\r\n        'Light Map',\r\n        'Shadow',\r\n        'AO',\r\n\r\n        'Fresnel',\r\n        'Direct Transmit Diffuse',\r\n        'Direct Transmit Specular',\r\n        'Env Transmit Diffuse',\r\n        'Env Transmit Specular',\r\n        'Transmit All',\r\n        'Direct Internal Specular',\r\n        'Env Internal Specular',\r\n        'Internal All',\r\n\r\n        'Fog',\r\n    ];\r\n    private strComposite: string[] = [\r\n        'Direct Diffuse',\r\n        'Direct Specular',\r\n        'Env Diffuse',\r\n        'Env Specular',\r\n        'Emissive',\r\n        'Light Map',\r\n        'Shadow',\r\n        'AO',\r\n\r\n        'Normal Map',\r\n        'Fog',\r\n\r\n        'Tone Mapping',\r\n        'Gamma Correction',\r\n\r\n        'Fresnel',\r\n        'Transmit Diffuse',\r\n        'Transmit Specular',\r\n        'Internal Specular',\r\n        'TT',\r\n    ];\r\n    private strMisc: string[] = [\r\n        'CSM Layer Coloration',\r\n        'Lighting With Albedo',\r\n    ];\r\n\r\n    private compositeModeToggleList: Node[] = [];\r\n    private singleModeToggleList: Node[] = [];\r\n    private miscModeToggleList: Node[] = [];\r\n    private textComponentList: RichText[] = [];\r\n    private labelComponentList: Label[] = [];\r\n    private textContentList: string[] = [];\r\n    private hideButtonLabel: Label;\r\n    start() {\r\n        // get canvas resolution\r\n        const canvas = this.node.parent.getComponent(Canvas);\r\n        if (!canvas) {\r\n            console.error('debug-view-runtime-control should be child of Canvas');\r\n            return;\r\n        }\r\n\r\n        const uiTransform = this.node.parent.getComponent(UITransform);\r\n        const halfScreenWidth = uiTransform.width * 0.5;\r\n        const halfScreenHeight = uiTransform.height * 0.5;\r\n\r\n        let x = -halfScreenWidth + halfScreenWidth * 0.1, y = halfScreenHeight - halfScreenHeight * 0.1;\r\n        const width = 200, height = 20;\r\n\r\n        // new nodes\r\n        const miscNode = this.node.getChildByName('MiscMode');\r\n        const buttonNode = instantiate(miscNode);\r\n        buttonNode.parent = this.node;\r\n        buttonNode.name = 'Buttons';\r\n        const titleNode = instantiate(miscNode);\r\n        titleNode.parent = this.node;\r\n        titleNode.name = 'Titles';\r\n\r\n        // title\r\n        for (let i = 0; i < 2; i++) {\r\n            const newLabel = instantiate(this.EnableAllCompositeModeButton.getChildByName('Label'));\r\n            newLabel.setPosition(x + (i > 0 ? 50 + width * 2 : 150), y, 0.0);\r\n            newLabel.setScale(0.75, 0.75, 0.75);\r\n            newLabel.parent = titleNode;\r\n            const labelComponent = newLabel.getComponent(Label);\r\n            labelComponent.string = i ? '----------Composite Mode----------' : '----------Single Mode----------';\r\n            labelComponent.color = Color.WHITE;\r\n            labelComponent.overflow = 0;\r\n            this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n        }\r\n\r\n        y -= height;\r\n        // single\r\n        let currentRow = 0;\r\n        for (let i = 0; i < this.strSingle.length; i++, currentRow++) {\r\n            if (i === this.strSingle.length >> 1) {\r\n                x += width;\r\n                currentRow = 0;\r\n            }\r\n            const newNode = i ? instantiate(this.singleModeToggle) : this.singleModeToggle;\r\n            newNode.setPosition(x, y - height * currentRow, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = this.singleModeToggle.parent;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strSingle[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleSingleMode, this);\r\n\r\n            this.singleModeToggleList[i] = newNode;\r\n        }\r\n\r\n        x += width;\r\n        // buttons\r\n        this.EnableAllCompositeModeButton.setPosition(x + 15, y, 0.0);\r\n        this.EnableAllCompositeModeButton.setScale(0.5, 0.5, 0.5);\r\n        this.EnableAllCompositeModeButton.on(Button.EventType.CLICK, this.enableAllCompositeMode, this);\r\n        this.EnableAllCompositeModeButton.parent = buttonNode;\r\n        let labelComponent = this.EnableAllCompositeModeButton.getComponentInChildren(Label);\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n\r\n        const changeColorButton = instantiate(this.EnableAllCompositeModeButton);\r\n        changeColorButton.setPosition(x + 90, y, 0.0);\r\n        changeColorButton.setScale(0.5, 0.5, 0.5);\r\n        changeColorButton.on(Button.EventType.CLICK, this.changeTextColor, this);\r\n        changeColorButton.parent = buttonNode;\r\n        labelComponent = changeColorButton.getComponentInChildren(Label);\r\n        labelComponent.string = 'TextColor';\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n\r\n        const HideButton = instantiate(this.EnableAllCompositeModeButton);\r\n        HideButton.setPosition(x + 200, y, 0.0);\r\n        HideButton.setScale(0.5, 0.5, 0.5);\r\n        HideButton.on(Button.EventType.CLICK, this.hideUI, this);\r\n        HideButton.parent = this.node.parent;\r\n        labelComponent = HideButton.getComponentInChildren(Label);\r\n        labelComponent.string = 'Hide UI';\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n        this.hideButtonLabel = labelComponent;\r\n\r\n        // misc\r\n        y -= 40;\r\n        for (let i = 0; i < this.strMisc.length; i++) {\r\n            const newNode = instantiate(this.compositeModeToggle);\r\n            newNode.setPosition(x, y - height * i, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = miscNode;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strMisc[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            const toggleComponent = newNode.getComponent(Toggle);\r\n            toggleComponent.isChecked = i ? true : false;\r\n            newNode.on(Toggle.EventType.TOGGLE, i ? this.toggleLightingWithAlbedo : this.toggleCSMColoration, this);\r\n            this.miscModeToggleList[i] = newNode;\r\n        }\r\n\r\n        // composite\r\n        y -= 150;\r\n        for (let i = 0; i < this.strComposite.length; i++) {\r\n            const newNode = i ? instantiate(this.compositeModeToggle) : this.compositeModeToggle;\r\n            newNode.setPosition(x, y - height * i, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = this.compositeModeToggle.parent;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strComposite[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleCompositeMode, this);\r\n\r\n            this.compositeModeToggleList[i] = newNode;\r\n        }\r\n    }\r\n\r\n    isTextMatched(textUI, textDescription) : boolean {\r\n        let tempText = new String(textUI);\r\n        const findIndex = tempText.search('>');\r\n        if (findIndex === -1) {\r\n            return textUI === textDescription;\r\n        } else {\r\n            tempText = tempText.substr(findIndex + 1);\r\n            tempText = tempText.substr(0, tempText.search('<'));\r\n            return tempText === textDescription;\r\n        }\r\n    }\r\n    toggleSingleMode(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        const textComponent = toggle.getComponentInChildren(RichText);\r\n        for (let i = 0; i < this.strSingle.length; i++) {\r\n            if (this.isTextMatched(textComponent.string, this.strSingle[i])) {\r\n                debugView.singleMode = i;\r\n            }\r\n        }\r\n    }\r\n    toggleCompositeMode(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        const textComponent = toggle.getComponentInChildren(RichText);\r\n        for (let i = 0; i < this.strComposite.length; i++) {\r\n            if (this.isTextMatched(textComponent.string, this.strComposite[i])) {\r\n                debugView.enableCompositeMode(i, toggle.isChecked);\r\n            }\r\n        }\r\n    }\r\n    toggleLightingWithAlbedo(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.lightingWithAlbedo = toggle.isChecked;\r\n    }\r\n    toggleCSMColoration(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.csmLayerColoration = toggle.isChecked;\r\n    }\r\n    enableAllCompositeMode(button: Button) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.enableAllCompositeMode(true);\r\n        for (let i = 0; i < this.compositeModeToggleList.length; i++) {\r\n            const toggleComponent = this.compositeModeToggleList[i].getComponent(Toggle);\r\n            toggleComponent.isChecked = true;\r\n        }\r\n\r\n        let toggleComponent = this.miscModeToggleList[0].getComponent(Toggle);\r\n        toggleComponent.isChecked = false;\r\n        debugView.csmLayerColoration = false;\r\n        toggleComponent = this.miscModeToggleList[1].getComponent(Toggle);\r\n        toggleComponent.isChecked = true;\r\n        debugView.lightingWithAlbedo = true;\r\n    }\r\n    hideUI(button: Button) {\r\n        const titleNode = this.node.getChildByName('Titles');\r\n        const activeValue = !titleNode.active;\r\n        this.singleModeToggleList[0].parent.active = activeValue;\r\n        this.miscModeToggleList[0].parent.active = activeValue;\r\n        this.compositeModeToggleList[0].parent.active = activeValue;\r\n        this.EnableAllCompositeModeButton.parent.active = activeValue;\r\n        titleNode.active = activeValue;\r\n        this.hideButtonLabel.string = activeValue ? 'Hide UI' : 'Show UI';\r\n    }\r\n\r\n    private _currentColorIndex = 0;\r\n    private strColor: string[] = [\r\n        '<color=#ffffff>',\r\n        '<color=#000000>',\r\n        '<color=#ff0000>',\r\n        '<color=#00ff00>',\r\n        '<color=#0000ff>',\r\n    ];\r\n    private color: Color[] = [\r\n        Color.WHITE,\r\n        Color.BLACK,\r\n        Color.RED,\r\n        Color.GREEN,\r\n        Color.BLUE,\r\n    ];\r\n    changeTextColor(button: Button) {\r\n        this._currentColorIndex++;\r\n        if (this._currentColorIndex >= this.strColor.length) {\r\n            this._currentColorIndex = 0;\r\n        }\r\n        for (let i = 0; i < this.textComponentList.length; i++) {\r\n            this.textComponentList[i].string = this.strColor[this._currentColorIndex] + this.textContentList[i] + '</color>';\r\n        }\r\n        for (let i = 0; i < this.labelComponentList.length; i++) {\r\n            this.labelComponentList[i].color = this.color[this._currentColorIndex];\r\n        }\r\n    }\r\n\r\n    onLoad() {\r\n    }\r\n    update(deltaTime: number) {\r\n    }\r\n}\r\n","import { JsonAsset } from \"cc\";\r\nimport { constants } from \"../data/constants\";\r\nimport { resManager } from \"./resManager\";\r\n\r\nclass DesignManager {\r\n\r\n    private static _instance: DesignManager;\r\n    private constructor() { };\r\n    public static get instance(): DesignManager {\r\n        if (!this._instance) {\r\n            this._instance = new DesignManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    // 原始对象 {表名:[记录1]]}\r\n    private tb2Arr: object = {};\r\n    // id索引(唯一)对象 {表名:{id:记录}}\r\n    private tb2Obj: object = {};\r\n    // type索引(一对多) {表名:{type:[记录]}\r\n    private tbType2Arr: object = {};\r\n\r\n    // 零散数据表\r\n    public config: any = {};\r\n\r\n    loadAllDesignTable(onProgress?: Function, onComplete?: Function) {\r\n        resManager.loadAsset(constants.bundles.design, \"design\", JsonAsset, (percent: number) => {\r\n            if (onProgress) {\r\n                onProgress(percent);\r\n            }\r\n        }, (err, asset) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n            this.tb2Arr = asset.json;\r\n\r\n            // 数据格式化\r\n            for (let tbName in this.tb2Arr) {\r\n                let tbData = this.tb2Arr[tbName];\r\n                this.initTable(tbName, tbData);\r\n            }\r\n\r\n            // 释放资源\r\n            resManager.releaseAsset(asset);\r\n\r\n            if (onComplete) {\r\n                onComplete();\r\n            }\r\n        });\r\n    }\r\n\r\n    initTable(tbName: string, tbData: object) {\r\n        this.tb2Obj[tbName] = {};\r\n        for (let i in tbData) {\r\n            let row = tbData[i];\r\n            // id索引\r\n            this.tb2Obj[tbName][row.id] = row;\r\n            if (row.hasOwnProperty(\"type\") && row.type != \"\" && row.type != null) {\r\n                // type索引\r\n                if (!this.tbType2Arr[tbName]) {\r\n                    this.tbType2Arr[tbName] = {};\r\n                }\r\n                if (!this.tbType2Arr[tbName][row.type]) {\r\n                    this.tbType2Arr[tbName][row.type] = [];\r\n                }\r\n                let tmpArr = this.tbType2Arr[tbName][row.type];\r\n                tmpArr.push(row);\r\n            }\r\n            if (tbName == \"config\") {\r\n                this.config[row.name] = row.val || row.val2 ;\r\n            }\r\n        }\r\n    }\r\n\r\n    getTable(tableName: string) {\r\n        return this.tb2Arr[tableName];\r\n    }\r\n\r\n    getRowById(tableName: string, id: number) {\r\n        return this.tb2Obj[tableName][id];\r\n    }\r\n\r\n    getRowsByType(tableName: string, type: number | string) {\r\n        if (this.tbType2Arr[tableName] && this.tbType2Arr[tableName][type]) {\r\n            return this.tbType2Arr[tableName][type];\r\n        }\r\n        return [];\r\n    }\r\n\r\n    getLastRow(tableName: string) {\r\n        let tb = this.getTable(tableName);\r\n        return tb[tb.length - 1];\r\n    }\r\n\r\n    getFirstIdByType(type: number) {\r\n        return type * 10 + 1;\r\n    }\r\n\r\n}\r\n\r\nexport const designManager = DesignManager.instance;\r\n\r\n","import { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { utilTools } from \"../../utils/utilTools\";\r\nimport { constants } from \"../data/constants\";\r\nimport { audioManager } from \"../manager/audioManager\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { layerManager } from \"../manager/layerManager\";\r\nimport { mapModel } from \"./mapModel\";\r\nimport { playerModel } from \"./playerModel\";\r\n\r\n// 开发阶段，为了调试方便，把单例放入window\r\nif (cocosUtil.isDesktopBrowser()) {\r\n    window.designManager = designManager;\r\n    window.audioManager = audioManager;\r\n    window.utilTools = utilTools;\r\n    window.constants = constants;\r\n    window.layerManager = layerManager;\r\n\r\n    window.mapModel = mapModel;\r\n    window.playerModel = playerModel;\r\n}","import { Component, tween, v3, _decorator } from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DialogEffect')\r\nexport class DialogEffect extends Component {\r\n\r\n    onEnable() {\r\n        tween(this.node).set({ scale: v3(0, 0, 0) }).to(0.17, { scale: v3(1.1, 1.1, 1.2) }).to(0.06, { scale: v3(1, 1, 1) }).start();\r\n    }\r\n}","import { find, Node, ScrollView, UITransform, v2, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('EnergyLayer')\r\nexport class EnergyLayer extends BaseLayer {\r\n\r\n    timeNode: Node;\r\n    barNode: Node;\r\n    contentNode: Node;\r\n    handNode: Node;\r\n\r\n    itemUIArr: any = [];\r\n\r\n    onLoad() {\r\n        this.layerName = constants.layers.EnergyLayer;\r\n        super.onLoad();\r\n\r\n        this.timeNode = this.getNodeByPath(\"ui/time/text\");\r\n        this.barNode = this.getNodeByPath(\"ui/energyListNoUtil/view/content/bar\");\r\n        this.contentNode = this.getNodeByPath(\"ui/energyListNoUtil/view/content\");\r\n        this.handNode = this.getNodeByPath(\"ui/energyListNoUtil/view/content/hand\");\r\n        this.handNode.active = false;\r\n\r\n        let rowArr = designManager.getTable(constants.tableName.energyAward);\r\n        let energyItem = find(\"layer/energyItem\", this.contentNode);\r\n        let itemUI: any = energyItem;\r\n        for (let i = 0; i < rowArr.length; i++) {\r\n            let row = rowArr[i];\r\n            if (i > 0) {\r\n                itemUI = cocosUtil.instantiate(energyItem);\r\n                itemUI.parent = find(\"layer\", this.contentNode);\r\n            }\r\n            itemUI.row = row;\r\n            this.itemUIArr.push(itemUI);\r\n        }\r\n\r\n        let height = itemUI.getComponent(UITransform).height;\r\n        this.contentNode.getComponent(UITransform).height = height * (rowArr.length + 0.5);\r\n        this.barNode.getComponent(UITransform).height = height * rowArr.length;\r\n\r\n        // test\r\n        // UserData.getInstance().addPropNum(108, 600);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        this.addEventArr([\r\n            msgac.energyObjRefresh\r\n        ]);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.refreshShowList();\r\n        });\r\n    }\r\n\r\n    refreshShowList() {\r\n        this.handNode.active = false;\r\n        let listNode = this.getNodeByPath(\"ui/energyListNoUtil\");\r\n        // 自动滚动，优先到首个未领取奖励的地方，其次首个未完成的地方\r\n        let targetItemUI = null;\r\n        for (let i = 0; i < this.itemUIArr.length; i++) {\r\n            let row = this.itemUIArr[i].row;\r\n            let info = playerModel.getEnergyAwardInfoById(row.id);\r\n            if (UserData.getInstance().energy >= row.num && (!info.award1)) {\r\n                targetItemUI = this.itemUIArr[i];\r\n                break;\r\n            }\r\n        }\r\n        if (targetItemUI) {\r\n            this.handNode.active = true;\r\n            let pos = cocosUtil.convertToWorldSpace(find(\"awardLayer/awardItem1\", targetItemUI));\r\n            pos = cocosUtil.convertToNodeSpace(this.handNode, pos);\r\n            this.handNode.position = pos;\r\n        }\r\n\r\n        if (!targetItemUI) {\r\n            for (let i = 0; i < this.itemUIArr.length; i++) {\r\n                let row = this.itemUIArr[i].row;\r\n                if (UserData.getInstance().energy < row.num) {\r\n                    targetItemUI = this.itemUIArr[i];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (!targetItemUI) {\r\n            targetItemUI = this.itemUIArr[this.itemUIArr.length - 1];\r\n        }\r\n\r\n        let my = Math.abs(targetItemUI.position.y) - targetItemUI.getComponent(UITransform).height;\r\n        if (my < 0) {\r\n            my = 0;\r\n        }\r\n        let pos = v2(0, 0);\r\n        pos.y = my;\r\n        listNode.getComponent(ScrollView).scrollToOffset(pos, 0.6);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.removeEventArr([\r\n            msgac.energyObjRefresh\r\n        ]);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    energyObjRefreshRet(data: any) {\r\n        let scrollView = this.getNodeByPath(\"ui/energyListNoUtil\").getComponent(ScrollView);\r\n        scrollView.stopAutoScroll();\r\n        scrollView.scrollToTop();\r\n        this.initUI();\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshTimeNode();\r\n        this.refreshItemUIArr();\r\n        this.refrshProgress();\r\n    }\r\n\r\n    refreshTimeNode() {\r\n        let duration = playerModel.energyObj.endTime.getTime() - new Date().getTime();\r\n        let day = Math.floor(duration / constants.times.day);\r\n        let hour = Math.ceil((duration - day * constants.times.day) / constants.times.houre);\r\n        this.setString(this.timeNode, localText.energyTimeHint.format(day, hour));\r\n    }\r\n\r\n    refrshProgress() {\r\n        let tb = designManager.getTable(constants.tableName.energyAward);\r\n        let id = 0;\r\n        for (let i = 0; i < tb.length; i++) {\r\n            let row = tb[i];\r\n            if (UserData.getInstance().energy < row.num) {\r\n                id = i + 1;\r\n                break;\r\n            }\r\n        }\r\n        let p = 1 / tb.length * (id - 1);\r\n        if (id == 0) {\r\n            p = 1;\r\n        } else {\r\n            let row = designManager.getRowById(constants.tableName.energyAward, id);\r\n            let lastRow = designManager.getRowById(constants.tableName.energyAward, id - 1);\r\n            let lastNum = 0;\r\n            if (lastRow) {\r\n                lastNum = lastRow.num;\r\n            }\r\n            let max = row.num - lastNum;\r\n            let r = UserData.getInstance().energy - lastNum;\r\n            let rp = (1 / tb.length) * (r / max);\r\n            p += rp;\r\n        }\r\n        this.setProgressBar(this.barNode, p);\r\n    }\r\n\r\n    refreshItemUIArr() {\r\n        for (let i = 0; i < this.itemUIArr.length; i++) {\r\n            let itemUI = this.itemUIArr[i];\r\n            let row = itemUI.row;\r\n            this.setString(find(\"flag/rank\", itemUI), row.id);\r\n            this.setString(find(\"flag/num\", itemUI), row.num + localText.point);\r\n            let info = playerModel.getEnergyAwardInfoById(row.id);\r\n\r\n            // 普通奖励\r\n            find(\"awardLayer/awardItem1\", itemUI).row = row;\r\n            let shineNode1 = find(\"awardLayer/awardItem1/shine\", itemUI);\r\n            let lockNode1 = find(\"awardLayer/awardItem1/lock\", itemUI);\r\n            let hasGetNode1 = find(\"awardLayer/awardItem1/hasGet\", itemUI);\r\n            shineNode1.active = false;\r\n            lockNode1.active = false;\r\n            hasGetNode1.active = false;\r\n            if (UserData.getInstance().energy >= row.num) {\r\n                if (info.award1) {\r\n                    // 已领取\r\n                    hasGetNode1.active = true;\r\n                } else {\r\n                    // 可领取\r\n                    shineNode1.active = true;\r\n                }\r\n            } else {\r\n                lockNode1.active = true;\r\n            }\r\n\r\n            // 广告奖励\r\n            find(\"awardLayer/awardItem2\", itemUI).row = row;\r\n            let shineNode2 = find(\"awardLayer/awardItem2/shine\", itemUI);\r\n            let lockNode2 = find(\"awardLayer/awardItem2/lock\", itemUI);\r\n            let hasGetNode2 = find(\"awardLayer/awardItem2/hasGet\", itemUI);\r\n            shineNode2.active = false;\r\n            lockNode2.active = false;\r\n            hasGetNode2.active = false;\r\n            if (UserData.getInstance().energy >= row.num) {\r\n                if (info.award2) {\r\n                    // 已领取\r\n                    hasGetNode2.active = true;\r\n                } else {\r\n                    // 可领取\r\n                    shineNode2.active = true;\r\n                }\r\n            } else {\r\n                lockNode2.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickAwardItem1(node: any) {\r\n        let row = node.row;\r\n        if (UserData.getInstance().energy < row.num) {\r\n            // 还未完成\r\n            this.openAwardInfoLayer(row.award1);\r\n            return;\r\n        }\r\n        let info = playerModel.getEnergyAwardInfoById(row.id);\r\n        if (info.award1) {\r\n            // 已领取\r\n            this.openAwardInfoLayer(row.award1);\r\n            return;\r\n        }\r\n        info.award1 = 1;\r\n        let award = UserData.getInstance().addPropArrByDesign(row.award1);\r\n        this.openAwardGetLayer(award);\r\n        this.initUI();\r\n        this.refreshShowList();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickAwardItem2(node: any) {\r\n        let row = node.row;\r\n        if (UserData.getInstance().energy < row.num) {\r\n            // 还未完成\r\n            this.openAwardInfoLayer(row.award2);\r\n            return;\r\n        }\r\n        let info = playerModel.getEnergyAwardInfoById(row.id);\r\n        if (info.award2) {\r\n            // 已领取\r\n            this.openAwardInfoLayer(row.award2);\r\n            return;\r\n        }\r\n        sdkManager.openAd(\"能量战令\", (st: number) => {\r\n            if (st == 1) {\r\n                info.award2 = 1;\r\n                let award = UserData.getInstance().addPropArrByDesign(row.award2);\r\n                this.openAwardGetLayer(award);\r\n                this.initUI();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBar() {\r\n        // playerModel.energyObj.endTime = new Date();\r\n        // UserData.getInstance().addPropNum(108, 100);\r\n        // this.initUI();\r\n    }\r\n\r\n}\r\n\r\n","import { myLog } from \"../../common/myLog\";\r\nimport { msgac } from \"../data/msgac\";\r\n\r\n\r\nclass EventManager {\r\n\r\n    private static _instance: EventManager;\r\n    private constructor() { }\r\n    public static get instance(): EventManager {\r\n        if (!this._instance) {\r\n            this._instance = new EventManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    acList: any = {};\r\n\r\n    on(ac: string | number, cb: Function, sender: any) {\r\n        let arr = this.acList[ac];\r\n        if (!arr) {\r\n            arr = [];\r\n            this.acList[ac] = arr;\r\n        }\r\n\r\n        // 避免重复添加\r\n        for (let i in arr) {\r\n            let item = arr[i];\r\n            if (item.sender == sender) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        let item: any = {};\r\n        item.cb = cb;\r\n        item.sender = sender;\r\n        arr.push(item);\r\n    }\r\n\r\n\r\n    off(ac: string | number, cb: Function, sender: any) {\r\n        let arr = this.acList[ac];\r\n        if (!arr) {\r\n            return;\r\n        }\r\n\r\n        let tmpArr = [];\r\n        for (let i in arr) {\r\n            let item = arr[i];\r\n            if (item.cb == cb && item.sender == sender) {\r\n                continue;\r\n            }\r\n            tmpArr.push(item);\r\n        }\r\n\r\n        this.acList[ac] = tmpArr;\r\n    }\r\n\r\n    offWithSender(sender: any) {\r\n        for (let ac in this.acList) {\r\n            let arr = this.acList[ac];\r\n\r\n            let tmpArr = [];\r\n            for (let i in arr) {\r\n                let item = arr[i];\r\n                if (item.sender == sender) {\r\n                    continue;\r\n                }\r\n                tmpArr.push(item);\r\n            }\r\n\r\n            this.acList[ac] = tmpArr;\r\n        }\r\n    }\r\n\r\n    send(ac: string | number, data?: any) {\r\n        let arr = this.acList[ac];\r\n        if (!arr) {\r\n            return;\r\n        }\r\n        let isLog = true;\r\n        if (data && data.notMyLog) {\r\n            isLog = false;\r\n        }\r\n        if (ac == msgac.joystick\r\n\r\n        ) {\r\n            isLog = false;\r\n        }\r\n        if (isLog) {\r\n            let key = msgac.ac2KeyObj[ac];\r\n            myLog.i(key, data);\r\n        }\r\n        try {\r\n            for (let i in arr) {\r\n                let item = arr[i];\r\n                let cb = item.cb;\r\n                let sender = item.sender;\r\n                let info = {\r\n                    ac: ac,\r\n                    data: data\r\n                };\r\n                cb.call(sender, info);\r\n            }\r\n        } catch (err) {\r\n            myLog.e(\"eventManager send error:\" + err.message, ac, data, err);\r\n        }\r\n    }\r\n}\r\n\r\nexport const eventManager = EventManager.instance;\r\n\r\n","import { Component, tween, UIOpacity, UITransform, _decorator } from 'cc';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('feiBiao')\r\nexport class feiBiao extends Component {\r\n\r\n    hint: Hint;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        let tf = this.hint.bodyNode.getComponent(UITransform);\r\n        tf.width = this.hint.extraObj.width;\r\n        tf.height = this.hint.extraObj.height;\r\n\r\n        let uiOpacity = this.getComponent(UIOpacity);\r\n        uiOpacity.opacity = 255;\r\n\r\n        tween(uiOpacity).to(0.3, { opacity: 0 }).call(() => {\r\n            this.hint.recycleSelf();\r\n        }).start();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import * as cc from \"cc\";\r\n\r\nenum READ_FILE_TYPE {\r\n    DATA_URL,// readAsDataURL, base64\r\n    TEXT,// readAsText\r\n    BINARY,// readAsBinaryString\r\n    ARRAYBUFFER,// readAsArrayBuffer\r\n}\r\n\r\nexport class FileUtils {\r\n    /**\r\n    * 打开文件选择器\r\n    *\r\n    * @param {string} accept\r\n    * @param {(file: File) => void} callback\r\n    * @memberof FileMgr\r\n    */\r\n    public static openLocalFile(accept: string, callback: (file: File) => void) {\r\n        let inputEl: HTMLInputElement = <HTMLInputElement>document.getElementById('file_input');\r\n        if (!inputEl) {\r\n            // console.log('xxxxxx createElement input');\r\n            inputEl = document.createElement('input');\r\n            inputEl.id = 'file_input';\r\n            inputEl.setAttribute('id', 'file_input');\r\n            inputEl.setAttribute('type', 'file');\r\n            inputEl.setAttribute('class', 'fileToUpload');\r\n            inputEl.style.opacity = '0';\r\n            inputEl.style.position = 'absolute';\r\n            inputEl.setAttribute('left', '-999px');\r\n            document.body.appendChild(inputEl);\r\n        }\r\n\r\n        accept = accept || \".*\";\r\n        inputEl.setAttribute('accept', accept);\r\n\r\n        inputEl.onchange = (event) => {\r\n            let files = inputEl.files\r\n            if (files && files.length > 0) {\r\n                var file = files[0];\r\n                if (callback) callback(file);\r\n            }\r\n        }\r\n        inputEl.click();\r\n    }\r\n\r\n    /**\r\n     * 读取本地文件数据\r\n     *\r\n     * @param {File} file\r\n     * @param {READ_FILE_TYPE} readType\r\n     * @param {((result: string | ArrayBuffer) => void)} callback\r\n     * @memberof FileMgr\r\n     */\r\n    public static readLocalFile(file: File, readType: READ_FILE_TYPE, callback: (result: string | ArrayBuffer) => void) {\r\n        var reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            if (callback) {\r\n                if (reader.readyState == FileReader.DONE) {\r\n                    callback(reader.result!);\r\n                } else {\r\n                    callback(null!);\r\n                }\r\n            }\r\n        };\r\n        switch (readType) {\r\n            case READ_FILE_TYPE.DATA_URL:\r\n                reader.readAsDataURL(file);\r\n                break;\r\n            case READ_FILE_TYPE.TEXT:\r\n                reader.readAsText(file);   //作为字符串读出\r\n                //reader.readAsText(file,'gb2312');   //默认是用utf-8格式输出的，想指定输出格式就再添加一个参数，像txt的ANSI格式只能用国标才能显示出来\r\n                break;\r\n            case READ_FILE_TYPE.BINARY:\r\n                reader.readAsBinaryString(file);\r\n                break;\r\n            case READ_FILE_TYPE.ARRAYBUFFER:\r\n                reader.readAsArrayBuffer(file);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 保存数据到本地\r\n     *\r\n     * @param {*} textToWrite       要保存的文件内容\r\n     * @param {*} fileNameToSaveAs  要保存的文件名\r\n     * @memberof FileMgr\r\n     */\r\n    public static saveForBrowser(textToWrite: string, fileNameToSaveAs: string) {\r\n        if (cc.sys.isBrowser) {\r\n            console.log(\"浏览器\");\r\n            let textFileAsBlob = new Blob([textToWrite], { type: 'text/plain;charset=utf-8' });\r\n            let downloadLink = document.createElement(\"a\");\r\n            downloadLink.download = fileNameToSaveAs;\r\n            downloadLink.innerHTML = \"Download File\";\r\n            if (window.webkitURL != null) {\r\n                // Chrome allows the link to be clicked            \r\n                // without actually adding it to the DOM.            \r\n                downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);\r\n            } else {\r\n                // Firefox requires the link to be added to the DOM            \r\n                // before it can be clicked.            \r\n                downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\r\n                // downloadLink.onclick = destroyClickedElement;            \r\n                downloadLink.style.display = \"none\";\r\n                document.body.appendChild(downloadLink);\r\n            }\r\n            downloadLink.click();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 保存数据到本地\r\n     *\r\n     * @param {*} data   要保存的文件内容 支持 ArrayBuffer | string\r\n     * @param {*} model  打开文件模式\r\n     * @param {*} fullPath  要保存的文件路径+文件名\r\n     * @memberof FileMgr\r\n     */\r\n    public static saveDataForNative(data: ArrayBuffer | string, fullPath: string, model: string = 'wb') {\r\n        if (cc.sys.isNative) {\r\n            let myGlobal: any = window;\r\n            let myjsb = myGlobal.myjsb;\r\n            if (myjsb) {\r\n                let ret = myjsb.MyFileUtils.getInstance().writeDataToFile(data, model, fullPath);\r\n                return ret;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}","import { Component, EventTouch, find, Node, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { msgac } from '../../data/msgac';\r\nimport { eventManager } from '../../manager/eventManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface JoystickData {\r\n    type: string,\r\n    event: EventTouch,\r\n    pos: Vec3\r\n}\r\n\r\n@ccclass('GameCtrl')\r\nexport class GameCtrl extends Component {\r\n\r\n    // 摇杆节点\r\n    joystickNode: Node;\r\n\r\n    // 摇杆中间的小圆圈节点\r\n    blockNode: Node;\r\n    // 可移动的半径范围\r\n    radius: number = 70;\r\n\r\n    orignPosition: Vec3;\r\n\r\n    onLoad() {\r\n\r\n        this.joystickNode = find(\"joystick\", this.node);\r\n        this.blockNode = find(\"block\", this.joystickNode);\r\n\r\n        this.orignPosition = this.joystickNode.getPosition().clone();\r\n    }\r\n\r\n    start() {\r\n        this.node.on(Node.EventType.TOUCH_START, this.touchStart, this);\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        this.node.on(Node.EventType.TOUCH_END, this.touchEnd, this);\r\n        this.node.on(Node.EventType.TOUCH_CANCEL, this.touchCancel, this);\r\n    }\r\n\r\n    touchStart(event: EventTouch) {\r\n        let location = event.getUILocation();\r\n        let pos = new Vec3(location.x, location.y, 0);\r\n        pos = cocosUtil.convertToNodeSpace(this.joystickNode, pos);\r\n        this.joystickNode.setPosition(pos);\r\n        this.blockNode.setPosition(0, 0);\r\n        this.sendTouchEvent(\"start\", event);\r\n    }\r\n\r\n    touchMove(event: EventTouch) {\r\n        let location = event.getUILocation();\r\n        let pos = new Vec3(location.x, location.y, 0);\r\n        pos = cocosUtil.convertToNodeSpace(this.blockNode, pos);\r\n        let dis = pos.length();\r\n        if (dis > this.radius) {\r\n            pos.normalize().multiplyScalar(this.radius);\r\n        }\r\n        this.blockNode.setPosition(pos);\r\n        this.sendTouchEvent(\"move\", event, pos);\r\n    }\r\n\r\n    touchEnd(event: EventTouch) {\r\n        this.joystickNode.setPosition(this.orignPosition);\r\n        this.blockNode.setPosition(0, 0);\r\n        this.sendTouchEvent(\"end\", event);\r\n    }\r\n    touchCancel(event: EventTouch) {\r\n        this.joystickNode.setPosition(this.orignPosition);\r\n        this.blockNode.setPosition(0, 0);\r\n        this.sendTouchEvent(\"end\", event);\r\n    }\r\n\r\n    sendTouchEvent(type: string, event: EventTouch, pos?: Vec3) {\r\n        if (pos) {\r\n            pos = pos.normalize().clone();\r\n        }\r\n        let data: JoystickData = {\r\n            type,\r\n            event,\r\n            pos\r\n        };\r\n        eventManager.send(msgac.joystick, data);\r\n    }\r\n\r\n}\r\n\r\n","import { assetManager, AudioSource, director, EventTouch, find, Node, _decorator } from 'cc';\r\nimport { myLog } from '../common/myLog';\r\nimport { GLoginState, GNetCmd, GNetConst } from '../tyqSDK/network/conf';\r\nimport CronCtr from '../tyqSDK/network/CronCtr';\r\nimport ServerCtr from '../tyqSDK/network/ServerCtr';\r\nimport { tyqAdManager } from '../tyqSDK/tyqAdManager';\r\nimport { cocosUtil } from '../utils/cocosUtil';\r\nimport { BaseLayer } from './compoment/base/BaseLayer';\r\nimport { constants } from './data/constants';\r\nimport { msgac } from './data/msgac';\r\nimport { audioManager } from './manager/audioManager';\r\nimport { eventManager } from './manager/eventManager';\r\nimport { layerManager } from './manager/layerManager';\r\nimport { localStorageManager } from './manager/localStorageManager';\r\nimport { playerModel } from './model/playerModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameLaunch')\r\nexport class GameLaunch extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        if (playerModel.isInDevelopmentEnvironment()) {\r\n            myLog.isOpen = true;\r\n        }\r\n\r\n        cocosUtil.init();\r\n        msgac.init();\r\n\r\n        super.onLoad();\r\n\r\n        let btnTest = this.getNodeByPath(\"btnTest\");\r\n        btnTest.active = playerModel.isInDevelopmentEnvironment();\r\n\r\n        let layer1 = find(\"layer1\", this.node);\r\n        let layerHint = find(\"layerHint\", this.node);\r\n        layerManager.init(layer1, layerHint);\r\n\r\n        // 设置音频播放组件\r\n        audioManager.setMusicAudioSource(this.getNodeByPath(\"audio/music\").getComponent(AudioSource));\r\n        audioManager.setEffectAudioSource(this.getNodeByPath(\"audio/effect\").getComponent(AudioSource));\r\n\r\n        let loadingName = constants.layers.LoadingLayer;\r\n        this.getNodeByPath(loadingName).addComponent(loadingName);\r\n\r\n        let noticeName = constants.layers.NoticeLayer;\r\n        find(noticeName, layerHint).addComponent(noticeName);\r\n\r\n        myLog.i(\"========启动参数：\", tyqAdManager.getEnterUrlQuery());\r\n\r\n        director.on(GNetCmd.GetFriendVal.toString(), this.onMessageEvent, this);\r\n\r\n        director.on(GNetCmd.ReqWxSession.toString(), this.onMessageEvent, this);\r\n        director.on(GNetCmd.GetRegionData.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.openLayer,\r\n            msgac.showNotice,\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n    }\r\n\r\n    start() {\r\n        let canvasNode = find(\"Canvas\");\r\n        canvasNode.on(Node.EventType.TOUCH_START, (event: EventTouch) => {\r\n            eventManager.send(msgac.globalTouchStart, event);\r\n        });\r\n\r\n    }\r\n\r\n    onMessageEvent(value) {\r\n        console.log(\"处理服务端发送的消息:\", value);\r\n        if (value.status != GNetConst.ResSuccess) {\r\n            console.error(\"服务端响应失败~!\")\r\n            ServerCtr.GetInstance().isLogin = false;\r\n            CronCtr.getInstance().isPutEnable = false;\r\n            ServerCtr.GetInstance().loginState = GLoginState.loginWithAccount\r\n            return;\r\n        }\r\n        let ctr = ServerCtr.GetInstance();\r\n        switch (value.cmd) {\r\n            case GNetCmd.GetFriendVal:\r\n                playerModel.shareObj.friendNum = value.friendCnt;\r\n                let friendData = JSON.parse(value.friendData);\r\n                playerModel.shareObj.friendAdNum = friendData.videoCalCnt;\r\n                playerModel.shareObj.friendPassNum = friendData.friendPassCnt;\r\n                break;\r\n            case GNetCmd.ReqWxSession:\r\n                ctr.token = value.token;\r\n                ctr.regionDataList = value.regionDataList;\r\n                if (value.nickName && value.nickName != '') {\r\n                    ctr.nickName = value.nickName;\r\n                }\r\n                //直接请求服务端数据\r\n                ServerCtr.GetInstance().reqRegionData()\r\n                if (value.wxRes && value.wxRes.openid) {\r\n                    localStorageManager.openId = value.wxRes.openid;\r\n                }\r\n                if (value.uid) {\r\n                    localStorageManager.uid = value.uid;\r\n                }\r\n                break;\r\n            case GNetCmd.GetRegionData:\r\n                ctr.token = value.token;\r\n                ctr.isLogin = true;\r\n                //标记是账号登录\r\n                ServerCtr.GetInstance().serverDataVersion = value.dataVersion\r\n\r\n                //如果服务端的版本大于本地，直接赋值\r\n                if (value.dataVersionFlag == GNetConst.ServerIsNew) {\r\n                    ServerCtr.GetInstance().serverData = JSON.parse(value.jsonData)\r\n                }\r\n\r\n                ctr.loginState = GLoginState.loginWithAccount\r\n                CronCtr.getInstance().isPutEnable = false;\r\n\r\n                console.log(\"获得服务端数据!\", ServerCtr.GetInstance().serverData)\r\n\r\n                ctr.uid = value.uid;\r\n                ctr.regionId = value.regionId;\r\n\r\n\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    openLayerRet(data: any) {\r\n        this.openLayer(constants.layers[data.name], data);\r\n    }\r\n\r\n    showNoticeRet(data: any) {\r\n        this.createNotice(data);\r\n    }\r\n\r\n    onClickBtnTest(node: Node) {\r\n        myLog.i(assetManager.assets);\r\n\r\n    }\r\n\r\n    onClickBtnHintClose() {\r\n        this.hideHintLayer();\r\n    }\r\n\r\n}\r\n\r\n","import {_decorator, Component, game,} from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nimport { WECHAT } from 'cc/env';\r\n\r\n@ccclass\r\nexport default class GameMemoryStorage {\r\n\r\n    //用户登录区服，然后拉取服务端记录，原有代码接口不变，底层存取数据改为内存，另外再备份到磁盘已备修改器修改上传，规避获取不到磁盘数据的情况。\r\n    //修改以后，所有数据存取都是走内存，当用户重新登录的时候，内存自动清空，再清空本地磁盘数据\r\n    static memory:any = {}; //内存\r\n    static publicKey = \"JmksO12Ldl60Lsk\"\r\n    static isEncrypt = false;\r\n\r\n    public static getItem(key:string){\r\n        // if(!this.memory.hasOwnProperty(key)){\r\n        //     return \"\"\r\n        // }\r\n        // let res = \"\";\r\n        // try{\r\n        //     res = this.decrypt(this.memory[key]);\r\n        // }catch (e){\r\n        //     res = this.memory[key]\r\n        // }\r\n        // res = this.memory[key]\r\n        // res = localStorage.getItem(key);\r\n        return localStorage.getItem(key)\r\n    }\r\n\r\n    public static setItem(key:string, value:string){\r\n        // this.memory[key] = value+\"\";\r\n        localStorage.setItem(key,this.encrypt(value));\r\n    }\r\n\r\n    public static removeItem(key:string){\r\n        // delete this.memory[key];\r\n        localStorage.removeItem(key);\r\n    }\r\n\r\n    public static len(){\r\n        return Object.keys(this.memory).length;\r\n    }\r\n\r\n    public static keys(){\r\n        let keys = [];\r\n        for (let k in this.memory){\r\n            keys.push(k);\r\n        }\r\n        return keys;\r\n    }\r\n\r\n    public static encrypt(content:string){\r\n        return content\r\n        // if(this.isEncrypt==false) return content;\r\n        // return  encrypt.encrypt(JSON.stringify(content),this.publicKey,256);\r\n        //加密解密示例代码\r\n        // var secretkey= 'open_sesame'; // 加密密钥\r\n        // var dataString = content\r\n        // var encrypted = encrypt.encrypt(dataString,secretkey,256);\r\n        // var myString=JSON.parse(encrypt.decrypt(encrypted,secretkey,256))\r\n        // cc.log('原始字符串:'+dataString)\r\n        // cc.log('加密后:'+encrypted)\r\n        // cc.log('解密后看看对不对:'+myString)\r\n\r\n    }\r\n\r\n    public static decrypt(content:string){\r\n        return content\r\n        // if(this.isEncrypt==false) return content;\r\n        // return JSON.parse(encrypt.decrypt(content,this.publicKey,256));\r\n    }\r\n\r\n}\r\n","\r\nimport { _decorator, Component, Node , sys} from 'cc';\r\nimport { GNetConst } from './conf';\r\nimport GameMemoryStorage from './GameMemoryStorage';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameStorage')\r\nexport class GameStorage extends Component {\r\n\r\n    static GameKey = GNetConst.SaveHead;\r\n\r\n    public static Key(key:string){\r\n        return this.GameKey + '_' + key;\r\n    }\r\n\r\n    public static GetRawKey(key:string){\r\n        return key.replace(GameStorage.GameKey+\"_\",\"\")\r\n    }\r\n\r\n    static getStorage(){\r\n        return GameMemoryStorage\r\n        // return Const.isActiveMemoryTmp?GameMemoryStorageTmp: GameMemoryStorage\r\n    }\r\n\r\n    static getInt(key:string, def:number = 0){\r\n        let n = this.getStorage().getItem(this.Key(key));\r\n        if (n !== null && n !== \"\") {\r\n            return Number(n);\r\n        }\r\n        return def;\r\n    }\r\n\r\n    static setInt(key:string, num:number){\r\n        key = this.Key(key);\r\n        this.getStorage().setItem(key, num+\"\");\r\n    }\r\n    static setIntMemory(key:string,num:number){\r\n        key = this.Key(key);\r\n        this.getStorage().setItem(key, num+\"\");\r\n    }\r\n\r\n    static getBoolean(key:string, def:boolean = false){\r\n        let n = this.getStorage().getItem(this.Key(key));\r\n        if (n !== null&&n !== \"\") {\r\n            return Number(n) == 1?true:false;\r\n        }\r\n        return def;\r\n    }\r\n\r\n    static setBoolean(key:string,is:boolean){\r\n        key = this.Key(key);\r\n        let v = is?1:0;\r\n        this.getStorage().setItem(key,v+\"\");\r\n    }\r\n    static setBooleanMemory(key:string,is:boolean){\r\n        key = this.Key(key);\r\n        let v = is?1:0;\r\n        this.getStorage().setItem(key,v+\"\");\r\n    }\r\n\r\n    static getString(key:string,def:string = ''){\r\n        let n = this.getStorage().getItem(this.Key(key));\r\n        if (n !== null&& n !== \"\") {\r\n            return n;\r\n        }\r\n        return def;\r\n    }\r\n    //登录部分信息才用\r\n    static getStringDisk(key:string,def:string = ''){\r\n        let n = localStorage.getItem(this.Key(key));\r\n        if (n !== null&& n !== \"\") {\r\n            return n;\r\n        }\r\n        return def;\r\n    }\r\n    static getIntDisk(key:string,def:string = ''){\r\n        let n = localStorage.getItem(this.Key(key));\r\n        if (n !== null&& n !== \"\") {\r\n            return Number(n);\r\n        }\r\n        return def;\r\n    }\r\n    static setStringDisk(key:string,val:string){\r\n        localStorage.setItem(this.Key(key), val);\r\n    }\r\n\r\n    static setStringMemory(key:string,val:string){\r\n        key = this.Key(key);\r\n        this.getStorage().setItem(key,val);\r\n        localStorage.setItem(key, val);\r\n    }\r\n\r\n    static setString(key:string,num:string){\r\n        key = this.Key(key);\r\n        this.getStorage().setItem(key,num);\r\n        if (key == GameStorage.GameKey+'login_account') {\r\n            return;\r\n        }\r\n    }\r\n\r\n\r\n    static getObject(key:string,def:any = null){\r\n        let n = this.getStorage().getItem(this.Key(key));\r\n        if (n !== null&& n !== \"\") {\r\n            try {\r\n                let json = JSON.parse(n);\r\n                return json || def;\r\n            } catch (error) {\r\n                return def;\r\n            }\r\n            \r\n        }\r\n        return def;\r\n    }\r\n\r\n    static setObject(key:string,obj:any){\r\n        key = this.Key(key);\r\n        let v = JSON.stringify(obj);\r\n        this.getStorage().setItem(key,v);\r\n    }\r\n    static sendObject(key:string, obj:any){\r\n        key = this.Key(key);\r\n        let v = JSON.stringify(obj);\r\n    }\r\n\r\n    static setObjectMemory(key:string,obj:any){\r\n        key = this.Key(key);\r\n        let v = JSON.stringify(obj);\r\n        this.getStorage().setItem(key,v);\r\n    }\r\n\r\n    static removeItem(key:string){\r\n        key = this.Key(key);\r\n        this.getStorage().removeItem(key);\r\n    }\r\n\r\n    static clear(){\r\n        // console.log('清除数据:',localStorage.length)\r\n\r\n        let list:string[] = [];\r\n\r\n        for (let i = 0; i <  localStorage.length; i++) {\r\n            let key:string =  localStorage.key(i)!; //获取本地存储的Key\r\n            if (key.indexOf(this.GameKey) >=0 && key.indexOf('login') == -1 && key.indexOf('zzdl') == -1) {\r\n                // cc.log(\"清理前检查key\", key, key.indexOf(this.GameKey) )\r\n                list.push(key);\r\n            }\r\n        }\r\n\r\n        let keys = this.getStorage().keys();\r\n        for (let i = 0; i <  keys.length; i++) {\r\n            let key:string =  keys[i]; //获取本地存储的Key\r\n            if (key.indexOf('login') == -1 && key.indexOf('zzdl') == -1) {\r\n                // console.log(\"清除key:\",key)\r\n                list.push(key);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < list.length; i++) {\r\n            const key = list[i];\r\n            this.getStorage().removeItem(key);\r\n            // this.removeItem(key);\r\n        }\r\n        //清空本地无用的缓存\r\n\r\n        // localStorage.clear();\r\n    }\r\n\r\n    //老用户不用改为内存\r\n    static clearByKey(gameKey:string){\r\n        let list:string[] = [];\r\n        for (let i = 0; i <  localStorage.length; i++) {\r\n            let key:string =  localStorage.key(i)!; //获取本地存储的Key\r\n            if (key.indexOf(gameKey) != -1) {\r\n                list.push(key);\r\n            }\r\n        }\r\n        for (let i = 0; i < list.length; i++) {\r\n            const key = list[i];\r\n            this.getStorage().removeItem(key);\r\n        }\r\n    }\r\n\r\n    static getStringArrayByKey(str:string){\r\n        // console.log(\"获取列表:\",str)\r\n        let list:any[] = [];\r\n        let list2:any[] = [];\r\n        let keys = this.getStorage().keys();\r\n        for (let i = 0; i <  keys.length; i++) {\r\n            const key:string =  keys[i]; //获取本地存储的Key\r\n            //console.log(\"key:\",key);\r\n            if (key.indexOf(str) != -1) {\r\n                let n = this.getStorage().getItem(key);\r\n                // console.log(\"=====n:\",n)\r\n                list.push(n);\r\n                list2.push(key)\r\n            }\r\n        }\r\n        return {keys: list2, values: list};\r\n    }\r\n\r\n    static getObjectArrayByKey(str:string){\r\n       // console.log(\"获取列表:\",str)\r\n        let list:any[] = [];\r\n        let keys = this.getStorage().keys();\r\n        for (let i = 0; i <  keys.length; i++) {\r\n            const key:string =  keys[i]; //获取本地存储的Key\r\n            //console.log(\"key:\",key);\r\n            if (key.indexOf(str) != -1) {\r\n                let n = this.getStorage().getItem(key);\r\n                //console.log(\"n:\",n)\r\n                let value = null;\r\n                if (n !== null&& n !== \"\") {\r\n                    try {\r\n                        let json = JSON.parse(n);\r\n                        value = json || null;\r\n                    } catch (error) {\r\n                        value = null;\r\n                    }\r\n                }\r\n                if (value) {\r\n                    list.push(value);\r\n                }\r\n                \r\n            }\r\n            \r\n        }\r\n        return list;\r\n    }\r\n\r\n    //老用户兼容使用，不改动，以及GM也使用这个接口上传数据到云端\r\n    static getAll(isFirst:boolean = false){\r\n        let jsonData:any = {}\r\n        for (let i = 0; i <  localStorage.length; i++) {\r\n            const key:string =  localStorage.key(i)!; //获取本地存储的Key\r\n            if (key.indexOf('login') != -1) {\r\n                continue;\r\n            }\r\n            if (isFirst) {\r\n                let oldKey = key;\r\n                let newKey = key.replace('zzdl',GameStorage.GameKey);\r\n                jsonData[newKey] = localStorage.getItem(oldKey)\r\n            }\r\n            else{\r\n                if (key.indexOf('zzdl') != -1) {\r\n                    continue;\r\n                }\r\n                jsonData[key]=localStorage.getItem(key)\r\n            }\r\n            \r\n            // console.log(key);\r\n            // console.log(localStorage.getItem(key));//所有value\r\n            // console.log(\"---------------------------------\");\r\n        }\r\n\r\n        if (isFirst) {\r\n            let spliceDatas:any = {};\r\n            for (const key in jsonData) {\r\n                if (Object.prototype.hasOwnProperty.call(jsonData, key)) {\r\n                    const value = jsonData[key];\r\n                    // 大数据拆分.\r\n                    // 1.装备\r\n                    // 2.玄天宝录\r\n                    // console.log(\"老用户数据处理key:\",key,value);\r\n                    switch (key) {\r\n                        case GameStorage.GameKey+'_sect_xtbls':\r\n                            {\r\n                                let datas = JSON.parse(value);\r\n                                // console.log(\"xtbl datas:\",datas.length,datas);\r\n                                for (let i = 0; i < datas.length; i++) {\r\n                                    const xtbl = datas[i];\r\n                                    let data = {\r\n                                        id:xtbl.id,\r\n                                        star:xtbl.star,\r\n                                        debris:xtbl.debris\r\n                                    }\r\n                                    // GameStorage.setObject('SectXtbl_'+xtbl.id,data);\r\n                                    spliceDatas[GameStorage.GameKey + '_SectXtbl_'+xtbl.id] = JSON.stringify(data);\r\n                                }\r\n                            }\r\n                            break;\r\n                        case GameStorage.GameKey+'_pack_equips':\r\n                            {\r\n                                let datas = JSON.parse(value);\r\n                                // console.log(\"equip datas:\",datas.length,datas);\r\n                                for (let i = 0; i < datas.length; i++) {\r\n                                    const equip = datas[i];\r\n                                    let data = {\r\n                                        id:equip.id,\r\n                                        index:equip.index,\r\n                                        level:equip.level,\r\n                                        star:equip.star,\r\n                                        partner:equip.partner,\r\n                                        score:equip.score,\r\n                                        skill_skr:equip.skill_skr,\r\n                                        skill_skr_attr:equip.skill_skr_attr,\r\n                                        skill_star:equip.skill_star,\r\n                                        skill_star_attr:equip.skill_star_attr,\r\n                                    };\r\n                                    // GameStorage.setObject('pack_equip_'+equip.index,data);\r\n                                    spliceDatas[GameStorage.GameKey + 'pack_equip_' + equip.index] = JSON.stringify(data);\r\n                                }\r\n                            }\r\n                            break;    \r\n                        default:\r\n                            {\r\n                                localStorage.setItem(key,value);\r\n                            }\r\n                            break;\r\n                    }\r\n                    \r\n                }\r\n            }\r\n            delete jsonData['zzdl_sect_xtbls'];\r\n            delete jsonData['zzdl_pack_equips'];\r\n\r\n            // console.log(\"spliceDatas:\",spliceDatas);\r\n\r\n            for (const key in spliceDatas) {\r\n                const data = spliceDatas[key];\r\n                jsonData[key] = data;\r\n            }\r\n        }\r\n\r\n        return jsonData\r\n    }\r\n\r\n    static async setAll(jsonData:any){\r\n        // console.log(\"11111覆盖数据\")\r\n        // await this.clear();\r\n        // console.log(\"覆盖前清除所有数据........\",jsonData)\r\n        \r\n        for(let key in jsonData){\r\n            this.getStorage().setItem(key, jsonData[key])\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { MapWrap } from \"./MapWrap\";\r\n\r\nexport default class GParam  {\r\n    private arguments : MapWrap<string, Object> = new MapWrap<string, Object>();\r\n\r\n    private _onlyArgument;\r\n    constructor(msg?: any) {\r\n        this._onlyArgument = msg;\r\n    }\r\n\r\n    public push(key: string, val: Object) {\r\n        if(!key) return;\r\n        this.arguments.set(key, val);\r\n    }\r\n\r\n    /**\r\n     * 获取参数\r\n     * @param key 参数Key\r\n     */\r\n    public get<T>(key?: string) : T {\r\n        if(!key) return this._onlyArgument as T;\r\n        return this.arguments.get(key) as T;\r\n    }\r\n\r\n    /**\r\n     * 清理\r\n     */\r\n    public clear() : void {\r\n        this.arguments.clear();\r\n    }\r\n\r\n    /**\r\n     * 将参数转成Array\r\n     */\r\n    public toList() : Object[] {\r\n        if(this.arguments.size == 0) return null;\r\n        return this.arguments.values();\r\n    }\r\n    /**\r\n     * ToString实现\r\n     */\r\n    public toString() : string {\r\n        let keys = this.arguments.keys();\r\n        var str = '';\r\n        for(let index = 0; index < keys.length; index++) {\r\n            str += keys[index] + \"=\" + this.get(keys[index]) + \"/t\";\r\n        }\r\n        return str;\r\n    }\r\n}","import { instantiate, Label, Node, Sprite, SpriteFrame, tween, v3, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GuessGameLayer')\r\nexport class GuessGameLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property(Node) armNodeGuess: Node = null;\r\n    @property(Node) selectBetNode: Node = null;\r\n\r\n    @property(Node) itemLayer: Node = null;\r\n    @property(Node) selectGuessNode: Node = null;\r\n    @property(Node) guessLayer: Node = null;\r\n\r\n\r\n    @property(Label) tipLabel: Label = null;\r\n    @property({ type: Node }) btnlayer: Node = null;\r\n\r\n\r\n    @property(SpriteFrame) guessSprite: SpriteFrame[] = [];\r\n\r\n    @property(Node) items: Node[] = [];\r\n    @property(Node) guessItems: Node[] = [];\r\n\r\n    _curSelectGuess = -1\r\n    _curSelectBet = -1\r\n\r\n\r\n\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        this.addTopUILayer(\"TopUILayer\")\r\n        this.fitNodeWidget(this.btnlayer, 30)\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n        eventManager.off(\"initGuess\",this.initGuess,this)\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        ///   console.log(\"tyqSDK.showCustomRectCenterAd\")\r\n        eventManager.on(\"initGuess\",this.initGuess,this)\r\n\r\n        let stone1 = designManager.config[\"stone1\"]\r\n        console.log(\"stone1 = \", stone1)\r\n        for (let index = 0; index < 6; index++) {\r\n            if (stone1[index] && this.items[index]) {\r\n                this.items[index].getChildByName(\"numLab\").getComponent(Label).string = \"\" + stone1[index][1]\r\n                //\tthis.items[index].getChildByName(\"gou\").active = false\r\n            }\r\n        }\r\n    }\r\n\r\n    closeBless() {\r\n        this.closeLayer()\r\n    }\r\n\r\n    initGuess() {\r\n        this.selectBetNode.removeAllChildren()\r\n        this.armNodeGuess.active = false\r\n        let selectGuess = this.selectGuessNode.getChildByName(\"selectGuess\")\r\n        if (selectGuess) {\r\n            selectGuess.removeFromParent()\r\n        }\r\n        this._index = 0\r\n        this._dtTime = 0\r\n        this._isStartRun = false\r\n\r\n        this._curSelectGuess = -1\r\n        this.itemLayer.active = true\r\n        this.guessLayer.active = true\r\n\r\n        this.tipLabel.node.active = true\r\n        this.tipLabel.string = \"默认上次选择金额，可重新选择\"\r\n\r\n        if (this._curSelectBet > -1) {\r\n            for (let index = 0; index < 6; index++) {\r\n                if (this.items[index]) {\r\n                    this.items[index].getChildByName(\"gou\").active = this._curSelectBet == index\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    onSelectBet(event, data) {\r\n        if (this._curSelectBet == data && this.selectBetNode.children.length > 0) {\r\n            this.selectBetNode.removeAllChildren()\r\n            this._curSelectBet = -1\r\n            this.itemLayer.active = true\r\n\r\n            for (let index = 0; index < 6; index++) {\r\n                if (this.items[index]) {\r\n                    this.items[index].getChildByName(\"gou\").active = this._curSelectBet == index\r\n                }\r\n            }\r\n            this.tipLabel.string = \"请选择下注金额\"\r\n            return\r\n        }\r\n\r\n        this._curSelectBet = data\r\n        //this.items[this._curSelectBet].getChildByName(\"icon\").color = cc.Color.GRAY\r\n        console.log(\"select bet = \", data)\r\n        //\tconsole.log(\"select event.target = \", event)\r\n        let selectItem = instantiate(this.items[this._curSelectBet])\r\n        selectItem.getChildByName(\"gou\").active = false\r\n        this.selectBetNode.addChild(selectItem)\r\n        tween(selectItem).to(0.5, { position: v3(0, -30, 0) }).start()\r\n        this.tipLabel.string = \"请猜拳\"\r\n        this.itemLayer.active = false\r\n    }\r\n\r\n    onSelectBtn(event, data) {\r\n        if (this._curSelectGuess >= 0) {\r\n            return\r\n        }\r\n\r\n        if (this._curSelectBet < 0) {\r\n            this.toast(\"请先下注\")\r\n            return\r\n        }\r\n\r\n        let curBet = designManager.config[\"stone1\"][this._curSelectBet]\r\n        let propItem: PropItem = {\r\n            Id: curBet[0],\r\n            Num: curBet[1]\r\n        };\r\n        if (!UserData.getInstance().checkUseProp(propItem)) {\r\n            this.toast(\"资源不足\")\r\n            return\r\n        }\r\n        this._curSelectGuess = parseInt(data + \"\")\r\n        // let selectItem = instantiate(this.guessItems[this._curSelectGuess])\r\n        // selectItem.name = \"selectGuess\"\r\n        // selectItem.position = v3(-300, 0, 0)\r\n        // this.selectGuessNode.addChild(selectItem)\r\n        this._isStartRun = true\r\n        // let self = this\r\n        // tween(selectItem).to(0.6, { position: v3(0, 0, 0) }).call(function () {\r\n        //     self._isStartRun = true\r\n        // //    self.armNodeGuess.active = true\r\n        // }).start()\r\n\r\n        this.tipLabel.node.active = false\r\n        this.guessLayer.active = false\r\n    }\r\n\r\n    openResult() {\r\n\r\n        let result = Math.floor(Math.random() * 3)\r\n        let str = [\"石头\", \"剪刀\", \"布\"]\r\n        console.log(\"我方：\", str[this._curSelectGuess])\r\n        console.log(\"敌方：\", str[result])\r\n        this.armNodeGuess.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = this.guessSprite[result]\r\n        let stoneDraw = designManager.config[\"stoneDraw\"]\r\n        //console.log(\"stoneDraw \", stoneDraw)\r\n        let multiplier = 1\r\n\r\n        if (this._curSelectGuess - result == -1 || this._curSelectGuess - result == 2) {\r\n            //\tconsole.log(\" ---- win\")\r\n            multiplier = stoneDraw[0]\r\n        } else if (this._curSelectGuess == result) {\r\n            //console.log(\" ---- 平局\")\r\n            multiplier = stoneDraw[1]\r\n        } else {\r\n            //console.log(\" ---- lose\")\r\n            multiplier = stoneDraw[2]\r\n        }\r\n        let curBet = designManager.config[\"stone1\"][this._curSelectBet]\r\n        let propItem: PropItem = {\r\n            Id: curBet[0],\r\n            Num: curBet[1] * multiplier\r\n        };\r\n\r\n        UserData.getInstance().getRewardProp([propItem])\r\n        this.openLayer(constants.layers.GuessResultLayer, { propArr: [propItem], myGuess: this._curSelectGuess, otherGuess: result });\r\n        this.initGuess()\r\n    }\r\n\r\n    _index = 0\r\n    _dtTime = 0\r\n    _isStartRun = false\r\n    protected update(dt: number): void {\r\n        if (!this._isStartRun) {\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.GuessResultLayer, { myGuess: this._curSelectGuess, selectBet: this._curSelectBet });\r\n        this._isStartRun = false\r\n        tyqSDK.eventSendCustomEvent(\"参与猜拳\")\r\n        return\r\n\r\n        this._dtTime += dt\r\n        if (this._dtTime > 0.1) {\r\n            this._dtTime = 0\r\n            this.armNodeGuess.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = this.guessSprite[this._index % 3]\r\n            this._index++\r\n            if (this._index > 20) {\r\n                this._isStartRun = false\r\n                this.openResult()\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { Label, Node, sp, Sprite, SpriteFrame, tween, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { RewardLayer } from './RewardLayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GuessResultLayer')\r\nexport class GuessResultLayer extends RewardLayer {\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property(Sprite) guessItem2: Sprite = null;\r\n    @property(Sprite) guessItem1: Sprite = null;\r\n    @property(sp.Skeleton) spk: sp.Skeleton = null;\r\n\r\n    @property({ type: Node }) btnNode: Node = null;\r\n\r\n    @property({ type: Node }) resultNode: Node = null;\r\n\r\n    @property({ type: Node }) rewardNode: Node = null;\r\n\r\n    @property(SpriteFrame) guessSprite: SpriteFrame[] = [];\r\n    @property(SpriteFrame) guessNameSprite: SpriteFrame[] = [];\r\n\r\n    _curSelectGuess = -1\r\n    private _curSelectBet: any;\r\n\r\n    private _propItem = null\r\n\r\n    onLoad() {\r\n\r\n    }\r\n    onEnable() {\r\n\r\n    }\r\n\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        ///   console.log(\"tyqSDK.showCustomRectCenterAd\")\r\n        let curGuess = this.layerData.myGuess\r\n        this._curSelectBet = this.layerData.selectBet\r\n        this.guessItem1.spriteFrame = this.guessSprite[parseInt(curGuess)]\r\n        this.selfNodeGuess.getChildByName(\"cloth1\").getComponent(Sprite).spriteFrame = this.guessNameSprite[parseInt(curGuess)]\r\n\r\n        this._curSelectGuess = this.layerData.myGuess\r\n        this.selfNodeGuess.position = v3(-380, 0, 0)\r\n        this.armNodeGuess.position = v3(380, 0, 0)\r\n        let self = this\r\n        tween(this.selfNodeGuess).to(0.2, { position: v3(-190, 0, 0) }).call(function () {\r\n            self._isStartRun = true\r\n        }).start()\r\n        tween(this.armNodeGuess).to(0.2, { position: v3(190, 0, 0) }).start()\r\n\r\n        this.resultNode.active = false\r\n        this.rewardNode.active = false\r\n        this.btnNode.active = false\r\n    }\r\n\r\n    closeBless() {\r\n        eventManager.send(\"initGuess\")\r\n\r\n        this.closeLayer()\r\n    }\r\n\r\n    _index = 0\r\n    _dtTime = 0\r\n    _isStartRun = false\r\n\r\n    @property(Node) armNodeGuess: Node = null;\r\n    @property(Node) selfNodeGuess: Node = null;\r\n\r\n\r\n    protected update(dt: number): void {\r\n        if (!this._isStartRun) {\r\n            return\r\n        }\r\n        this._dtTime += dt\r\n        if (this._dtTime > 0.1) {\r\n            this._dtTime = 0\r\n            this.armNodeGuess.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = this.guessSprite[this._index % 3]\r\n            this.armNodeGuess.getChildByName(\"cloth1\").getComponent(Sprite).spriteFrame = this.guessNameSprite[this._index % 3]\r\n\r\n            this._index++\r\n            if (this._index > 20) {\r\n                this._isStartRun = false\r\n                this.openResult()\r\n            }\r\n        }\r\n    }\r\n\r\n    openResult() {\r\n\r\n        let result = Math.floor(Math.random() * 3)\r\n        let str = [\"石头\", \"剪刀\", \"布\"]\r\n        console.log(\"我方：\", str[this._curSelectGuess])\r\n        console.log(\"敌方：\", str[result])\r\n        this.armNodeGuess.getChildByName(\"icon\").getComponent(Sprite).spriteFrame = this.guessSprite[result]\r\n        this.armNodeGuess.getChildByName(\"cloth1\").getComponent(Sprite).spriteFrame = this.guessNameSprite[result]\r\n\r\n        let stoneDraw = designManager.config[\"stoneDraw\"]\r\n        //console.log(\"stoneDraw \", stoneDraw)\r\n        let multiplier = 1\r\n        this.resultNode.active = true\r\n        this.resultNode.position = v3(0, 550, 0)\r\n        tween(this.resultNode).to(0.2, { position: v3(0, 480, 0) }).start()\r\n\r\n        let result1 = this.resultNode.getChildByName(\"result1\")\r\n\r\n        result1.position = v3(0, 150, 0)\r\n        let self = this\r\n        tween(result1).to(0.2, { position: v3(0, 33, 0) }).call(function () {\r\n            self.btnNode.active = true\r\n        }).start()\r\n\r\n        if (this._curSelectGuess - result == -1 || this._curSelectGuess - result == 2) {\r\n            console.log(\" ---- win\")\r\n            multiplier = stoneDraw[0]\r\n            this.setSpriteFrame2(result1, \"activityRes/result1\", null, constants.bundles.wwqVec)\r\n            this.showYanhua()\r\n        } else if (this._curSelectGuess == result) {\r\n            console.log(\" ---- 平局\")\r\n            multiplier = stoneDraw[1]\r\n            this.setSpriteFrame2(result1, \"activityRes/result2\", null, constants.bundles.wwqVec)\r\n        } else {\r\n            this.setSpriteFrame2(result1, \"activityRes/result3\", null, constants.bundles.wwqVec)\r\n            console.log(\" ---- lose\")\r\n            multiplier = stoneDraw[2]\r\n        }\r\n\r\n        let curBet = designManager.config[\"stone1\"][this._curSelectBet]\r\n        let propItem: PropItem = {\r\n            Id: curBet[0],\r\n            Num: curBet[1] * multiplier\r\n        };\r\n\r\n        let propdata = designManager.getRowById(constants.tableName.prop, curBet[0])\r\n        this.setSpriteFrame2(this.rewardNode.getChildByName(\"icon\"), \"prop/\" + propdata.icon)\r\n        this.rewardNode.active = true\r\n        this.rewardNode.getChildByName(\"numLab\").getComponent(Label).string = curBet[1] * multiplier + \"\"\r\n        UserData.getInstance().getRewardProp([propItem])\r\n        this._propItem = [propItem]\r\n        //    this.openLayer(constants.layers.GuessResultLayer, { propArr: [propItem], myGuess: this._curSelectGuess, otherGuess: result });\r\n    }\r\n\r\n    doubleGet() {\r\n        let self = this\r\n        sdkManager.openAd(\"猜拳双倍奖励\", (st: number) => {\r\n            if (st == 1) {\r\n                if (self._propItem)\r\n                    UserData.getInstance().getRewardProp(self._propItem)\r\n\r\n                self.closeBless()\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n","import { assetManager } from \"cc\";\r\n\r\n\r\nexport class H5AdSdk4399 {\r\n\r\n    private static _instance: H5AdSdk4399;\r\n    private constructor() { }\r\n    public static get instance(): H5AdSdk4399 {\r\n        if (!this._instance) {\r\n            this._instance = new H5AdSdk4399();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    /**\r\n     * 激励视频广告统一播放接口\r\n     * 完整观看广告后，获得奖励，调用：tmpFunc(1)\r\n     * 中途退出或者观看失败，调用：tmpFunc(0)\r\n     * @param cb \r\n     */\r\n    showRewardedAd(successCb: Function) {\r\n        if (window.h5api) {\r\n            console.log(\"开始播放 h5api\");\r\n            /**\r\n             * 此callback回调函数的形式\r\n             *\r\n             * @param obj  广告状态\r\n             */\r\n            function videocallback(obj) {\r\n                console.log(\"代码:\" + obj.code + \",消息:\" + obj.message);\r\n                if (obj.code === 10000) {\r\n                    console.log(\"开始播放\");\r\n                } else if (obj.code === 10001) {\r\n                    console.log(\"播放结束\");\r\n                    successCb && successCb(1)\r\n                } else {\r\n                    console.log(\"广告异常\");\r\n                    successCb && successCb(0);\r\n                }\r\n            }\r\n\r\n            window.h5api.playAd(videocallback);\r\n            return\r\n        }\r\n        return\r\n    }\r\n\r\n\r\n    public checkDownUrl() {\r\n        if (window.h5api) {\r\n            let is4399 = true;\r\n            let checkbin = (function () {\r\n                if (!is4399) return;\r\n                let selfPip = function (task: any, done: any): any {\r\n                    const input = task.output = task.input;\r\n                    for (let i = 0; i < input.length; i++) {\r\n                        let item = input[i];\r\n                        if (!item.url) continue;\r\n                        let arr = item.url.split(\".\");\r\n                        if (arr.length >= 2 && arr[arr.length - 1] == \"cconb\") {\r\n                            item.url = \"\";\r\n                            for (let index = 0; index < arr.length - 1; index++) {\r\n                                const element = arr[index];\r\n                                item.url += (element + \".\");\r\n                            }\r\n                            item.url += \"_cconb.dbbin\";\r\n                        }\r\n                        if (arr.length >= 2 && arr[arr.length - 1] == \"bin\") {\r\n                            item.url = \"\";\r\n                            for (let index = 0; index < arr.length - 1; index++) {\r\n                                const element = arr[index];\r\n                                item.url += (element + \".\");\r\n                            }\r\n                            item.url += \"dbbin\";\r\n                        }\r\n                    }\r\n                    return null;\r\n                }\r\n                //@ts-ignore\r\n                // if (!CC_BUILD) return;\r\n                assetManager.transformPipeline.append(selfPip);\r\n                //@ts-ignore\r\n                let dw = assetManager.downloader._downloaders;\r\n                let dbbin = dw[\".dbbin\"];\r\n                assetManager.downloader.register(\"dbbin\", (url: string, options: any, onComplete: any) => {\r\n                    if (url.includes(\"_cconb\")) {\r\n                        dw[\".cconb\"]()\r\n                    } else {\r\n                        dbbin();\r\n                    }\r\n                })\r\n            });\r\n            checkbin()\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { msgac } from '../../data/msgac';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HandLayer')\r\nexport class HandLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.globalTouchStart\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n\r\n    }\r\n\r\n    globalTouchStartRet(data: any) {\r\n        this.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, Label, Node, Prefab, sp, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { RedPointLogicMgr, RedpointPos, RPointMask } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HeroLayer')\r\nexport class HeroLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具列表容器\" }) propLayer: Node = null;\r\n    @property({ type: Prefab, tooltip: \"道具节点\" }) rewardItem: Prefab = null;\r\n    @property({ type: Node, tooltip: \"道具列表View\" }) propView: Node = null;\r\n    @property({ type: Node, tooltip: \"道具列表View\" }) scrollView: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"穿戴装备\" }) propNodeLeft: Node = null;\r\n    @property({ type: Node, tooltip: \"穿戴装备\" }) propNodeRight: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"攻击力\" }) attackLabel: Node = null;\r\n    @property({ type: Node, tooltip: \"生命值\" }) lifeLabel: Node = null;\r\n\r\n\r\n    @property({ type: Node, tooltip: \"排序按钮\" }) sortbtn: Node = null;\r\n\r\n\r\n    @property({ type: sp.Skeleton, tooltip: \"角色spine\" }) heroSk: sp.Skeleton = null;\r\n\r\n\r\n    _propNodeList = [];\r\n\r\n    _isSort = false\r\n\r\n    onLoad() {\r\n        this.fitScrollView(this.propView, 320, 600)\r\n\r\n        for (let i = 0; i < this.propNodeLeft.children.length; i++) {\r\n            this._propNodeList.push(this.propNodeLeft.children[i]);\r\n        }\r\n        for (let i = 0; i < this.propNodeRight.children.length; i++) {\r\n            this._propNodeList.push(this.propNodeRight.children[i]);\r\n        }\r\n\r\n        // test\r\n        // UserData.getInstance().addPropByDesign([10155, 1]);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        eventManager.on(msgac.wearDrop, this.updateProp, this);\r\n        eventManager.on(msgac.updateDropData, this.updateProp, this);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n        eventManager.off(msgac.wearDrop, this.updateProp, this);\r\n        eventManager.off(msgac.updateDropData, this.updateProp, this);\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.initList()\r\n        this.initWearDrop()\r\n\r\n        this.attackLabel.getComponent(Label).string = UserData.getInstance().attack + \"\"\r\n        this.lifeLabel.getComponent(Label).string = UserData.getInstance().life + \"\"\r\n\r\n        RedPointLogicMgr.ins().setRPointView(this.node.getChildByName(\"btnBless\"), null, UserData.getInstance().checkPropCanBless())\r\n        RedPointLogicMgr.ins().on(this.node, [{ mask: [RPointMask.RPM_BlessProp], subPath: \"btnBless\" },])\r\n\r\n        tyqSDK.eventSendCustomEvent(\"进入装备界面\")\r\n\r\n        this.sortbtn.getChildByName(\"Label\").getComponent(Label).string = \"按品质排序\"\r\n\r\n        this.heroSk.setSkin(UserData.getInstance().getHeroSkin())\r\n    }\r\n\r\n    updateProp() {\r\n        this.initList()\r\n        this.initWearDrop()\r\n        this.attackLabel.getComponent(Label).string = UserData.getInstance().attack + \"\"\r\n        this.lifeLabel.getComponent(Label).string = UserData.getInstance().life + \"\"\r\n    }\r\n\r\n    initWearDrop() {\r\n        let propdata = UserData.getInstance().wearProp\r\n        myLog.i(\"propdata = \", propdata)\r\n        for (let i = 0; i < propdata.length && i < this._propNodeList.length; i++) {\r\n            let item = this._propNodeList[i].getChildByName(\"PropItem\")\r\n            if (item == null) {\r\n                item = instantiate(this.rewardItem)\r\n                this._propNodeList[i].addChild(item)\r\n                item.name = \"PropItem\"\r\n            }\r\n            item.getComponent(PropItemPrefab).setView(propdata[i], i + 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_UnWear)\r\n            item.getComponent(PropItemPrefab).setScale(130)\r\n        }\r\n    }\r\n\r\n    initList() {\r\n        if (this._isSort) {\r\n            let dataArr = this.getPropList()\r\n            let equipSort = (a: number, b: number) => {\r\n                let equipDataA = designManager.getRowById(constants.tableName.prop, a)\r\n                let equipDataB = designManager.getRowById(constants.tableName.prop, b)\r\n                return equipDataB.quality - equipDataA.quality;\r\n            }\r\n            dataArr.sort(equipSort);\r\n            this.scrollViewSetData(this.scrollView, dataArr, this.initItem)\r\n        } else {\r\n            let dataArr = this.getPropList()\r\n            let equipSort = (a: number, b: number) => {\r\n                let equipDataA = designManager.getRowById(constants.tableName.prop, a)\r\n                let equipDataB = designManager.getRowById(constants.tableName.prop, b)\r\n                return equipDataA.wearIndex - equipDataB.wearIndex;\r\n            }\r\n            dataArr.sort(equipSort);\r\n            this.scrollViewSetData(this.scrollView, dataArr, this.initItem)\r\n        }\r\n\r\n    }\r\n\r\n    initItem(itemUI: Node, item: any, index: number) {\r\n        itemUI.getComponent(PropItemPrefab).setView(item, 1, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_ToWear)\r\n        itemUI.getComponent(PropItemPrefab).setScale(120)\r\n        RedPointLogicMgr.ins().setRPointView(itemUI, null, UserData.getInstance().checkThisPropBestToWear(item), null, RedpointPos.right)\r\n    }\r\n\r\n    updateRedPoint() {\r\n        let children = this.propLayer.children\r\n        children.forEach(itemUI => {\r\n            RedPointLogicMgr.ins().setRPointView(itemUI, null, UserData.getInstance().checkThisPropBestToWear(itemUI.getComponent(PropItemPrefab).propId))\r\n        });\r\n    }\r\n\r\n    getPropList() {\r\n        let arr = UserData.getInstance().getPropSort()\r\n        let dataArr = []\r\n        arr.forEach(element => {\r\n            let num = element.iswear == 1 ? element.num - 1 : element.num\r\n            let row = designManager.getRowById(constants.tableName.prop, element.id);\r\n            if (row.type != 8 && row.type != 11) {\r\n                return;\r\n            }\r\n            for (let i = 0; i < num; i++) {\r\n                dataArr.push(element.id)\r\n            }\r\n        });\r\n        return dataArr\r\n    }\r\n\r\n    propSort() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (this._isSort) {\r\n            this.sortbtn.getChildByName(\"Label\").getComponent(Label).string = \"按品质排序\"\r\n            this._isSort = false\r\n        } else {\r\n            this.sortbtn.getChildByName(\"Label\").getComponent(Label).string = \"取消排序\"\r\n            this._isSort = true\r\n        }\r\n\r\n        this.initList()\r\n    }\r\n\r\n    openBless() {\r\n        //  this.closeLayer()\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.BlessLayer)\r\n    }\r\n\r\n    onClickBtnSkin() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SkinChangeLayer, () => {\r\n            this.heroSk.setSkin(UserData.getInstance().getHeroSkin())\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { Component, find, Node, Tween, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport const HintNames = {\r\n    targetPos: \"targetPos\",\r\n    targetPos2: \"targetPos2\",\r\n    targetPos3: \"targetPos3\",\r\n    hit1: \"hit1\",\r\n    hit2: \"hit2\",\r\n    hit3: \"hit3\",\r\n    hit4: \"hit4\",\r\n    hit5: \"hit5\",\r\n    hit6: \"hit6\",\r\n    hit7: \"hit7\",\r\n    boom1: \"boom1\",\r\n    feiBiao: \"feiBiao\",\r\n    blockArrow: \"blockArrow\",\r\n    comeShine: \"comeShine\",\r\n};\r\n\r\n@ccclass('Hint')\r\nexport class Hint extends Component {\r\n\r\n    bodyNode: Node;\r\n\r\n    hintUtil: any;\r\n    extraObj: any;\r\n\r\n    init(name: string, worldPos: Vec3, angle: number = 0, extraObj?: any) {\r\n        this.bodyNode = find(\"body\", this.node);\r\n        this.extraObj = extraObj;\r\n        this.unscheduleAllCallbacks();\r\n        Tween.stopAllByTarget(this.node);\r\n\r\n        let pos = cocosUtil.convertToNodeSpace(this.node, worldPos);\r\n        this.node.setPosition(pos);\r\n        this.node.angle = angle;\r\n\r\n        let aniCtrl: AnimationCtrl = cocosUtil.addComponentOnce(find(\"body\", this.node), AnimationCtrl);\r\n        aniCtrl.playAnimation(\"ani\", false, () => {\r\n            mapModel.hintSystem.recycleHintNode(this.node);\r\n        });\r\n\r\n        try {\r\n            this.hintUtil = cocosUtil.addComponentOnce(this, name);\r\n            this.hintUtil.unscheduleAllCallbacks();\r\n            this.hintUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n    }\r\n\r\n    recycleSelf() {\r\n        mapModel.hintSystem.recycleHintNode(this.node);\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, Prefab, UITransform, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nimport { Hint, HintNames } from '../item/hint/Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HintSystem')\r\nexport class HintSystem extends BaseLayer {\r\n\r\n    // 按照名称进行UI分层\r\n    nameLayerObj: any = {};\r\n    namePrefabObj: any = {};\r\n\r\n    hintLayer: Node;\r\n    hintLayer2: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.hintLayer = this.node;\r\n        this.hintLayer2 = find(\"hintLayer2\", this.node.parent);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    getHintLayerNameById(name: string) {\r\n        return name + \"Layer\";\r\n    }\r\n\r\n    getHintLayerByName(name: string) {\r\n        let nameLayer = this.nameLayerObj[name];\r\n        if (!nameLayer) {\r\n            nameLayer = new Node(this.getHintLayerNameById(name));\r\n            nameLayer.addComponent(UITransform);\r\n            nameLayer.setPosition(0, 0);\r\n            switch (name) {\r\n                case HintNames.targetPos:\r\n                case HintNames.targetPos2:\r\n                case HintNames.targetPos3:\r\n                case HintNames.feiBiao:\r\n                case HintNames.blockArrow:\r\n                case HintNames.comeShine:\r\n                    nameLayer.parent = this.hintLayer2;\r\n                    break;\r\n                default:\r\n                    nameLayer.parent = this.hintLayer;\r\n                    break;\r\n            }\r\n            this.nameLayerObj[name] = nameLayer;\r\n\r\n            let nodePoolUtil = nameLayer.addComponent(NodePoolUtil);\r\n            nodePoolUtil.init(this.namePrefabObj[name]);\r\n        }\r\n        return nameLayer;\r\n    }\r\n\r\n    addHint(name: string, worldPos: Vec3, angle: number = 0, extraObj?: any) {\r\n        let nodePoolUtil = this.getHintLayerByName(name).getComponent(NodePoolUtil);\r\n\r\n        let tmpFunc = () => {\r\n            if (!nodePoolUtil.node.activeInHierarchy) {\r\n                return;\r\n            }\r\n            let hintNode = nodePoolUtil.getNode();\r\n            let hint = cocosUtil.addComponentOnce(hintNode, Hint);\r\n            hint.init(name, worldPos, angle, extraObj);\r\n        };\r\n\r\n        if (!this.namePrefabObj[name]) {\r\n            resManager.loadAsset(constants.bundles.hint, name, Prefab, null, (err, prefab) => {\r\n                if (!cocosUtil.isValid(this)) {\r\n                    return;\r\n                }\r\n                this.namePrefabObj[name] = prefab;\r\n                nodePoolUtil.init(prefab);\r\n                tmpFunc();\r\n            });\r\n            return;\r\n        }\r\n        tmpFunc();\r\n\r\n    }\r\n\r\n    recycleHintNode(hintNode: Node) {\r\n        let nodePoolUtil = this.getHintLayerByName(hintNode.name).getComponent(NodePoolUtil);\r\n        nodePoolUtil.recycleNode(hintNode);\r\n    }\r\n\r\n}\r\n\r\n","import { Button, EventHandler, find, instantiate, Node, Prefab, Sprite, tween, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport ServerCtr from '../../../tyqSDK/network/ServerCtr';\r\nimport { tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { RedPointLogicMgr, RPointMask } from '../../manager/RedPointLogicMgr';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ShineColor } from '../shader/ShineColor';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { HeroLayer } from './HeroLayer';\r\nimport { MainLayer } from './MainLayer';\r\nimport { TopUILayer } from './TopUILayer';\r\nimport { TowerLayer } from './TowerLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HomeLayer')\r\nexport class HomeLayer extends BaseLayer {\r\n\r\n    toggles: Node[] = [];\r\n    togglesLock = [false, false, false, false, false];\r\n\r\n    _PageLayer = [constants.layers.TowerLayer, \"HeroLayer\", \"MainLayer\", \"ShopLayer\", constants.layers.EnergyLayer]\r\n\r\n    jumpLayerData: any;\r\n\r\n    tabMainRedPointNode: Node;\r\n    tabEnergyRedPointNode: Node;\r\n\r\n    onLoad() {\r\n        this.chooseDesignResolution()\r\n        this.tabMainRedPointNode = this.getNodeByPath(\"Layout/ui_btn3/redPoint\");\r\n        this.tabEnergyRedPointNode = this.getNodeByPath(\"Layout/ui_btn5/redPoint\");\r\n        if (tyqSDK.getSwitchValue(\"tyq_HeroLayer_open\") == 1) {\r\n            this.togglesLock[1] = false\r\n            RedPointLogicMgr.ins().on(this.node, [{ mask: [RPointMask.RPM_PropWear, RPointMask.RPM_BlessProp], subPath: \"Layout/ui_btn2\" },])\r\n        } else {\r\n            this.togglesLock[1] = true\r\n        }\r\n\r\n        if (tyqSDK.channel != ChannelFlag.WECHAT_JJWS) {\r\n            this.togglesLock[1] = false\r\n        }\r\n\r\n        ServerCtr.GetInstance().reqGetFriendVal();\r\n        this.schedule(() => {\r\n            ServerCtr.GetInstance().reqGetFriendVal();\r\n        }, 60 * 5);\r\n\r\n        myLog.i(\"进游戏的url参数：\", tyqAdManager.getEnterUrlQuery());\r\n        let urlParmas = tyqAdManager.getEnterUrlQuery();\r\n        if (urlParmas && urlParmas.uid) {\r\n            ServerCtr.GetInstance().reqSetFriendCode(urlParmas.uid);\r\n            tyqSDK.eventSendCustomEvent(\"参与分享活动成功进来的玩家\")\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        this.addEventArr([\r\n            msgac.homeHideMenu,\r\n            msgac.mapEnter,\r\n            msgac.jumpLayer,\r\n        ]);\r\n        //  eventManager.on(msgac.homeHideMenu, this.homeHideMenuRet, this)\r\n        if (!UserData.getInstance().mapHand) {\r\n            // 直接进去爬塔第一关\r\n            mapModel.enterMapWithMapId(101, 1);\r\n            return;\r\n        }\r\n\r\n        if (playerModel.hasEnergyAward()) {\r\n            this.setPage(4);\r\n        } else {\r\n            this.setPage(0)\r\n        }\r\n\r\n        if (UserData.getInstance().mapData) {\r\n            this.openLayer(constants.layers.BackMapLayer, null, (mapId: number) => {\r\n                if (mapId) {\r\n                    mapModel.enterMapWithMapId(mapId);\r\n                }\r\n            });\r\n        }\r\n        // RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Layout/ui_btn2\") ,null, true)\r\n        audioManager.playMusic(constants.audioNames.home);\r\n\r\n        if (this.layerData.isWin && this.layerData.floor > 0) {\r\n            // 爬塔胜利\r\n            UserData.getInstance().addTowerMapFloor(this.layerData.mapId);\r\n\r\n            // 跳回去爬塔界面\r\n            let obj: any = {};\r\n            obj.layerName = constants.layers.TowerFloorLayer;\r\n            obj.mapId = this.layerData.mapId;\r\n            eventManager.send(msgac.jumpLayer, obj);\r\n\r\n            let floorRow = designManager.getRowById(constants.tableName.towerFloor, this.layerData.floor);\r\n            let propItem = UserData.getInstance().addPropNum(floorRow.propId, floorRow.propNum);\r\n            this.openAwardGetLayer([propItem]);\r\n\r\n        }\r\n\r\n        // 强制弹出巡逻收益\r\n        if (UserData.getInstance().getPatrolState() <= 0) {\r\n            this.openLayer(constants.layers.PatrolLayer);\r\n            RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnPortal\"), null, false)\r\n        }\r\n\r\n    }\r\n\r\n    refreshRedPoint() {\r\n        if (playerModel.hasLetterAward() || playerModel.hasDaySignAward() || playerModel.hasDayTaskAward() || playerModel.hasVipAward()) {\r\n            this.tabMainRedPointNode.active = true;\r\n        } else {\r\n            this.tabMainRedPointNode.active = false;\r\n        }\r\n\r\n        this.tabEnergyRedPointNode.active = playerModel.hasEnergyAward();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        for (let i = 0; i < 5; i++) {\r\n            this.toggles[i] = this.getNodeByPath(\"Layout/ui_btn\" + (i + 1))\r\n            this.toggles[i].getChildByName(\"icon\").getComponent(Sprite).grayscale = this.togglesLock[i]\r\n            //  console.log(\" this.toggles[i] = \", this.toggles[i])\r\n            let clickEvent = new EventHandler()\r\n            clickEvent.component = \"HomeLayer\"\r\n            clickEvent.target = this.node\r\n            clickEvent.customEventData = i + \"\"\r\n            clickEvent.handler = \"selectPage\"\r\n            if (!this.toggles[i].getComponent(Button)) {\r\n                this.toggles[i].addComponent(Button).clickEvents = [clickEvent]\r\n            }\r\n            // this.toggles[i].addComponent(Button).clickEvents.push(clickEvent)\r\n        }\r\n\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    selectPage(node, event) {\r\n        console.log(\"event =\", event)\r\n        this.setPage(parseInt(event))\r\n        audioManager.playEffect(\"btnClick\")\r\n    }\r\n\r\n    setPage(index) {\r\n\r\n        if (this.togglesLock[index]) {\r\n            this.createNotice(\"还未解锁\")\r\n            return\r\n        }\r\n\r\n        this.getNodeByPath(\"TopUILayer\").active = index != 3\r\n        if (index == 2) {\r\n            eventManager.send(msgac.commonResRefresh)\r\n        }\r\n        // if (index == 3) {\r\n        //     this.openLayer(constants.layers.ShopLayer)\r\n        //     return\r\n        // }\r\n        for (let i = 0; i < 5; i++) {\r\n            if (i != index) {\r\n                this.setSpriteFrame2(this.toggles[i], \"homeLayer/ui_xk\", null, constants.bundles.wwqVec)\r\n                //  this.toggles[i].getChildByName(\"icon\").scale = new Vec3(0.6, 0.6, 1)\r\n                tween(this.toggles[i].getChildByName(\"icon\")).to(0.15, { scale: v3(0.6, 0.6, 1) }).start()\r\n                this.toggles[i].getChildByName(\"name\").active = false\r\n            } else {\r\n                this.setSpriteFrame2(this.toggles[i], \"homeLayer/ui_hdmb\", null, constants.bundles.wwqVec)\r\n                //this.toggles[i].getChildByName(\"icon\").scale = new Vec3(1, 1, 1)\r\n                tween(this.toggles[i].getChildByName(\"icon\")).to(0.15, { scale: v3(1, 1, 1) }).start()\r\n                this.toggles[i].getChildByName(\"name\").active = true\r\n            }\r\n        }\r\n        let uiNode = this.getNodeByPath(\"ui\")\r\n\r\n        if (this._PageLayer[index] != \"\") {\r\n            resManager.loadAsset(constants.bundles.layer, this._PageLayer[index], Prefab, null, (err, prefab) => {\r\n                if (err) {\r\n                    myLog.e(\"LayerManager.openLayer error:\" + err.message, \"MainLayer\", err);\r\n                    return;\r\n                }\r\n                uiNode.removeAllChildren()\r\n                let layerNode = instantiate(prefab);\r\n                uiNode.addChild(layerNode)\r\n                if (this.jumpLayerData) {\r\n                    if (layerNode && layerNode.getComponent(BaseUILayer)) {\r\n                        layerNode.getComponent(BaseUILayer).layerData = this.jumpLayerData\r\n                    }\r\n                    switch (this.jumpLayerData.layerName) {\r\n                        case \"PatrolLayer\":\r\n                            layerNode.getComponent(MainLayer).onClickBtnPartol();\r\n                            break;\r\n                        case \"BlessLayer\":\r\n                            layerNode.getComponent(HeroLayer).openBless();\r\n                            break;\r\n                        case constants.layers.TowerFloorLayer:\r\n                            layerNode.getComponent(TowerLayer).openTowerFloorLayer(this.jumpLayerData.mapId);\r\n                            break;\r\n                        case constants.layers.DaySignLayer:\r\n                            layerNode.getComponent(MainLayer).onClickBtnDaySign();\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    delete this.jumpLayerData;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    jumpLayerRet(data: any) {\r\n        this.jumpLayerData = data;\r\n        switch (data.layerName) {\r\n            case \"ShopLayer\":\r\n                this.setPage(3);\r\n                break;\r\n            case \"MainLayer\":\r\n            case \"PatrolLayer\":\r\n            case constants.layers.DaySignLayer:\r\n                this.setPage(2);\r\n                break;\r\n            case \"BlessLayer\":\r\n                this.setPage(1);\r\n                break;\r\n            case \"RewardItemLayer\":\r\n                this.setPage(2);\r\n                find(\"TopUILayer\", this.node).getComponent(TopUILayer).showRewardItem(null, 2);\r\n                break;\r\n            case constants.layers.RewardSkinLayer:\r\n                this.setPage(2);\r\n                this.openLayer(constants.layers.RewardSkinLayer);\r\n                break;\r\n            case constants.layers.DaySignLayer:\r\n                this.setPage(2);\r\n                this.openLayer(constants.layers.DaySignLayer);\r\n                break;\r\n            case constants.layers.TowerFloorLayer:\r\n                this.setPage(0);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    mapEnterRet(data: any) {\r\n\r\n        // 显示加载进度\r\n        this.openLayer(constants.layers.TransLayer);\r\n        mapModel.loadMapRes((percent: number) => {\r\n            // TODO 刷新加载进度\r\n        }, () => {\r\n            this.openLayer(constants.layers.MapLayer, data, null, () => {\r\n                // 关闭加载进度\r\n                this.closeLayer(constants.layers.TransLayer);\r\n                this.closeLayer(constants.layers.TowerFloorLayer);\r\n                this.closeLayer();\r\n            });\r\n        });\r\n    }\r\n\r\n    homeHideMenuRet(data: any) {\r\n        if (data.hide) {\r\n            this.getNodeByPath(\"Layout\").active = false\r\n        } else {\r\n            this.getNodeByPath(\"Layout\").active = true\r\n        }\r\n    }\r\n\r\n    onClickBtnHit() {\r\n        let bodyNode = this.getNodeByPath(\"monster\");\r\n        // 闪白\r\n        let shineColor = bodyNode.getComponent(ShineColor);\r\n        if (!shineColor) {\r\n            shineColor = bodyNode.addComponent(ShineColor);\r\n        }\r\n        shineColor.startShine(constants.materials.shineColorSpine);\r\n    }\r\n\r\n}\r\n\r\n","\r\nexport default class Http {\r\n\tpublic xhr: XMLHttpRequest = null!;\r\n\t/**\r\n\t * 单例\r\n\t */\r\n\tprivate static _instance: Http;\r\n\r\n\tpublic static getInstance(): Http {\r\n\t\tif (!this._instance) {\r\n\t\t\tthis._instance = new Http();\r\n\t\t}\r\n\t\treturn this._instance;\r\n\t}\r\n\r\n\t/**\r\n\t * post请求\r\n\t * @param {string} url\r\n\t * @param {object} params\r\n\t * @param {function} callback\r\n\t */\r\n\thttpPost(url: string, params: any, callback: Function, failCb?: Function) {\r\n\t\t// cc.myGame.gameUi.onShowLockScreen();\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.onreadystatechange = function () {\r\n\t\t\t// cc.log('xhr.readyState=' + xhr.readyState + '  xhr.status=' + xhr.status);\r\n\t\t\tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t\t\tlet respone = xhr.responseText;\r\n\t\t\t\tlet rsp = JSON.parse(respone);\r\n\t\t\t\t// cc.myGame.gameUi.onHideLockScreen();\r\n\t\t\t\tcallback(rsp);\r\n\t\t\t} else {\r\n\t\t\t\tcallback(-1);\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.open('POST', url, true);\r\n\t\t// if (cc.sys.isNative) {\r\n\t\t// xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\r\n\t\t// xhr.setRequestHeader('Access-Control-Allow-Methods', 'GET, POST');\r\n\t\t// xhr.setRequestHeader('Access-Control-Allow-Headers', 'x-requested-with,content-type');\r\n\t\t// xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t// xhr.setRequestHeader('Authorization', 'Bearer ' + cc.myGame.gameManager.getToken());\r\n\t\t// }\r\n\r\n\t\t// note: In Internet Explorer, the timeout property may be set only after calling the open()\r\n\t\t// method and before calling the send() method.\r\n\t\txhr.timeout = 8000;// 8 seconds for timeout\r\n\t\txhr.send(JSON.stringify(params));\r\n\r\n\t\txhr.onerror = (err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tif (failCb) {\r\n\t\t\t\tfailCb(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n","import { Component, instantiate, Node, sys, _decorator } from 'cc';\r\nimport { BaseLayer } from './BaseLayer';\r\nimport { RenderChildBatch } from './RenderChildBatch';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ItemLayer')\r\nexport class ItemLayer extends Component {\r\n\r\n    private itemUI: Node;\r\n\r\n    // 缓存还未被使用的itemUI\r\n    private itemUIFreeArr: any;\r\n    // 正在显示的itemUI数组\r\n    private itemUIArr: any;\r\n\r\n    private idItemUIObj: any = {};\r\n\r\n    private layerJS: BaseLayer;\r\n    private callback: Function;\r\n\r\n    public renderChildBatch: RenderChildBatch = null;\r\n\r\n    private isFrameLoad: boolean = false;\r\n    private dataArr: any[] = [];\r\n\r\n    onLoad() {\r\n        this.itemUI = this.node.children[0];\r\n        this.itemUI.active = false;\r\n\r\n        this.hideAllItems();\r\n\r\n        this.addRenderChildBatch();\r\n    }\r\n\r\n    public addRenderChildBatch() {\r\n        if (sys.isNative) {\r\n            return;\r\n        }\r\n        this.renderChildBatch = this.getComponent(RenderChildBatch);\r\n        if (this.renderChildBatch) {\r\n            return;\r\n        }\r\n        this.renderChildBatch = this.addComponent(RenderChildBatch);\r\n    }\r\n\r\n    hideAllItems() {\r\n        let chs = this.node.children;\r\n        this.itemUIFreeArr = [];\r\n        this.itemUIArr = [];\r\n        this.idItemUIObj = {};\r\n\r\n        for (let node of chs) {\r\n            node.active = false;\r\n            this.itemUIFreeArr.push(node);\r\n        }\r\n    }\r\n\r\n    initUI(layerJS: BaseLayer, arr: any, callback: Function) {\r\n        this.layerJS = layerJS;\r\n        this.callback = callback;\r\n\r\n        // 先全部回收隐藏\r\n        this.hideAllItems();\r\n\r\n        this.itemUIArr = [];\r\n        this.idItemUIObj = {};\r\n\r\n        if (!this.isFrameLoad) {\r\n            for (let i in arr) {\r\n                let item = arr[i];\r\n                this.addItem(item);\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.dataArr = arr;\r\n        this.frameAddItem();\r\n    }\r\n\r\n    setFrameLoad(frameLoad: boolean) {\r\n        this.isFrameLoad = frameLoad;\r\n    }\r\n\r\n    frameAddItem() {\r\n        this.scheduleOnce(() => {\r\n            if (!this.dataArr || this.dataArr.length <= 0) {\r\n                return;\r\n            }\r\n            let item = this.dataArr.shift();\r\n            this.addItem(item);\r\n            this.frameAddItem();\r\n        });\r\n    }\r\n\r\n    addItem(item: any, cb?: Function) {\r\n        let itemUI = this.itemUIFreeArr.shift();\r\n        if (!itemUI) {\r\n            itemUI = instantiate(this.itemUI);\r\n            itemUI.parent = this.node;\r\n        }\r\n        itemUI.active = true;\r\n        itemUI.item = item;\r\n        let index = this.itemUIArr.length;\r\n        itemUI.index = index;\r\n\r\n        if (typeof (item) == \"object\" && item && item.id != undefined) {\r\n            this.idItemUIObj[item.id] = itemUI;\r\n        }\r\n\r\n        if (cb) {\r\n            cb(itemUI, item, index);\r\n        } else if (this.callback) {\r\n            this.callback(itemUI, item, index);\r\n        }\r\n\r\n        if (this.layerJS && this.layerJS.addButtonListener) {\r\n            this.layerJS.addButtonListener(itemUI);\r\n        }\r\n\r\n        this.itemUIArr.push(itemUI);\r\n\r\n        if (this.renderChildBatch) {\r\n            this.renderChildBatch.addRootItemNode(itemUI);\r\n        }\r\n\r\n        return itemUI;\r\n    }\r\n\r\n    getItemUIById(id: number) {\r\n        if (id == undefined) {\r\n            return null;\r\n        }\r\n        let itemUI = this.idItemUIObj[id];\r\n\r\n        return itemUI;\r\n    }\r\n\r\n    getItemUIByIndex(index: number) {\r\n        let itemUI = null;\r\n        this.forShowItemUI((node: Node, item: any) => {\r\n            if (node[\"index\"] == index) {\r\n                itemUI = node;\r\n                return true;\r\n            }\r\n        });\r\n\r\n        return itemUI;\r\n    }\r\n\r\n    loadAndRefreshItemUIByItem(item: any, cb?: Function) {\r\n        if (!item || item.id == undefined) {\r\n            return;\r\n        }\r\n        let itemUI = this.getItemUIById(item.id);\r\n        if (!itemUI) {\r\n            this.addItem(item, cb);\r\n            return;\r\n        }\r\n        this.refreshItemUIByItem(item);\r\n    }\r\n\r\n    refreshItemUIByItem(item: any) {\r\n        if (!item || item.id == undefined) {\r\n            return;\r\n        }\r\n        let itemUI = this.getItemUIById(item.id);\r\n        if (!itemUI) {\r\n            return;\r\n        }\r\n\r\n        itemUI.item = item;\r\n        this.refreshItemUIByItemUI(itemUI);\r\n    }\r\n\r\n    refreshItemUIByItemUI(itemUI: Node) {\r\n        let item = itemUI[\"item\"];\r\n        if (this.callback) {\r\n            this.callback(itemUI, item, itemUI[\"index\"]);\r\n        }\r\n    }\r\n\r\n    refreshItemUIById(id: number) {\r\n        let itemUI = this.getItemUIById(id);\r\n        if (!itemUI) {\r\n            return;\r\n        }\r\n        this.refreshItemUIByItem(itemUI.item);\r\n    }\r\n\r\n    removeItemUIByIndex(index: number) {\r\n        if (index < 0 || index >= this.itemUIArr.length) {\r\n            return;\r\n        }\r\n        let itemUI = null;\r\n        for (let i = 0; i < this.itemUIArr.length; i++) {\r\n            let tmpItemUI = this.itemUIArr[i];\r\n            if (!tmpItemUI.active || tmpItemUI[\"index\"] != index) {\r\n                continue;\r\n            }\r\n            itemUI = tmpItemUI;\r\n            break;\r\n        }\r\n        this.removeItemUIByItemUI(itemUI);\r\n    }\r\n\r\n    removeItemUIById(id: number) {\r\n        if (id == undefined) {\r\n            return;\r\n        }\r\n        let itemUI = this.idItemUIObj[id];\r\n        this.removeItemUIByItemUI(itemUI);\r\n    }\r\n\r\n    removeItemUIByItemUI(itemUI: Node) {\r\n        if (!itemUI) {\r\n            return;\r\n        }\r\n        itemUI.active = false;\r\n        if (this.itemUIFreeArr.indexOf(itemUI) == -1) {\r\n            // 返回缓存池\r\n            itemUI[\"index\"] = -1;\r\n            this.itemUIFreeArr.push(itemUI);\r\n        }\r\n\r\n        let item = itemUI[\"item\"];\r\n        let index = this.itemUIArr.indexOf(itemUI);\r\n        if (index != -1) {\r\n            // 从正在显示的数组中移除\r\n            this.itemUIArr.splice(index, 1);\r\n            // 重新计算索引index\r\n            for (let i = index; i < this.itemUIArr.length; i++) {\r\n                this.itemUIArr[i][\"index\"] = i;\r\n            }\r\n        }\r\n\r\n        if (typeof (item) == \"object\" && item && item.id != undefined) {\r\n            delete this.idItemUIObj[item.id];\r\n        }\r\n\r\n        if (this.renderChildBatch) {\r\n            this.renderChildBatch.removeRootItemNode(itemUI);\r\n        }\r\n    }\r\n\r\n    forShowItemUI(cb: Function) {\r\n        if (!cb) {\r\n            return;\r\n        }\r\n        for (let itemUI of this.itemUIArr) {\r\n            let ret = cb(itemUI, itemUI.item);\r\n            if (ret) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    refreshUI() {\r\n        if (!this.callback) {\r\n            return;\r\n        }\r\n        for (let node of this.itemUIArr) {\r\n            this.callback(node, node[\"item\"], node[\"index\"]);\r\n        }\r\n    }\r\n}\r\n\r\n","import { director } from 'cc';\n\nexport let _language = 'zh';\n\nexport let ready: boolean = false;\n\n/**\n * 初始化\n * @param language \n */\nexport function init(language: string) {\n    ready = true;\n    _language = language;\n}\n\n/**\n * 翻译数据\n * @param key \n */\nexport function t(key: string) {\n    const win: any = window;\n    \n    if (!win.languages) {\n        return key;\n    }\n    const searcher = key.split('.');\n    \n    let data = win.languages[_language];\n    for (let i = 0; i < searcher.length; i++) {\n        data = data[searcher[i]];\n        if (!data) {\n            return '';\n        }\n    }\n    return data || '';\n}\n\nexport function updateSceneRenderers() { // very costly iterations\n    const rootNodes = director.getScene()!.children;\n    // walk all nodes with localize label and update\n    const allLocalizedLabels: any[] = [];\n    for (let i = 0; i < rootNodes.length; ++i) {\n        let labels = rootNodes[i].getComponentsInChildren('LocalizedLabel');\n        Array.prototype.push.apply(allLocalizedLabels, labels);\n    }\n    for (let i = 0; i < allLocalizedLabels.length; ++i) {\n        let label = allLocalizedLabels[i];\n        if(!label.node.active)continue;\n        label.updateLabel();\n    }\n    // walk all nodes with localize sprite and update\n    const allLocalizedSprites: any[] = [];\n    for (let i = 0; i < rootNodes.length; ++i) {\n        let sprites = rootNodes[i].getComponentsInChildren('LocalizedSprite');\n        Array.prototype.push.apply(allLocalizedSprites, sprites);\n    }\n    for (let i = 0; i < allLocalizedSprites.length; ++i) {\n        let sprite = allLocalizedSprites[i];\n        if(!sprite.node.active)continue;\n        sprite.updateSprite();\n    }\n}\n\n// 供插件查询当前语言使用\nconst win = window as any;\nwin._languageData = {\n    get language() {\n        return _language;\n    },\n    init(lang: string) {\n        init(lang);\n    },\n    updateSceneRenderers() {\n        updateSceneRenderers();\n    },\n};\n","import { find, Node, Prefab } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { BaseLayer } from \"../compoment/base/BaseLayer\";\r\nimport { constants } from \"../data/constants\";\r\nimport { resManager } from \"./resManager\";\r\n\r\n\r\nclass LayerManager {\r\n\r\n    private static _instance: LayerManager;\r\n    private constructor() { }\r\n    public static get instance(): LayerManager {\r\n        if (!this._instance) {\r\n            this._instance = new LayerManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    public layer1: Node;\r\n    private layerHint: Node;\r\n\r\n    // 正在打开中的弹窗\r\n    private openingLayerMap: Map<number, any> = new Map();\r\n    // 已经打开的弹窗\r\n    private openedLayerMap: Map<number, BaseLayer> = new Map();\r\n    // 弹窗名称->弹窗id数组\r\n    private layerNameIdArrMap: Map<string, number[]> = new Map();\r\n\r\n    private layerId: number = 0;\r\n\r\n    loadCommonLayers(onProgress?: Function, onComplete?: Function) {\r\n        let arr = [\r\n            constants.layers.HomeLayer,\r\n        ];\r\n        resManager.loadAssetByPathArr(constants.bundles.layer, arr, Prefab, onProgress, (prefabArr: any) => {\r\n            for (let prefab of prefabArr) {\r\n                prefab.addRef();\r\n            }\r\n            if (onComplete) {\r\n                onComplete(prefabArr);\r\n            }\r\n        });\r\n    }\r\n\r\n    getPopLayerParentNode(): Node {\r\n        return this.layer1;\r\n    }\r\n\r\n    init(layer1: Node, layerHint: Node) {\r\n        this.layer1 = layer1;\r\n        this.layerHint = layerHint;\r\n\r\n        this.openingLayerMap = new Map();\r\n        this.openedLayerMap = new Map();\r\n        this.layerNameIdArrMap = new Map();\r\n        this.layerId = 0;\r\n\r\n    }\r\n\r\n    createNotice(content: any) {\r\n        // 显示一条提示信息\r\n        let noticeLayer = find(constants.layers.NoticeLayer, this.layerHint);\r\n        if (noticeLayer) {\r\n            noticeLayer.getComponent(constants.layers.NoticeLayer)[\"createNotice\"](content);\r\n        }\r\n    }\r\n\r\n    addLayerNameId(name: string, id: number) {\r\n        let arr = this.layerNameIdArrMap.get(name);\r\n        if (!arr) {\r\n            arr = [];\r\n            this.layerNameIdArrMap.set(name, arr);\r\n        }\r\n        arr.push(id);\r\n    }\r\n\r\n    removeLayerNameId(name: string, id: number) {\r\n        let arr = this.layerNameIdArrMap.get(name);\r\n        if (arr && arr.length > 0) {\r\n            let index = arr.indexOf(id);\r\n            if (index != -1) {\r\n                arr.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    openSingleLayer(layerName: string, obj?: any, cb?: Function, openSuccessCb?: Function) {\r\n        if (!obj) {\r\n            obj = {};\r\n        }\r\n        let idArr = this.layerNameIdArrMap.get(layerName);\r\n        if (!idArr || idArr.length <= 0) {\r\n            this.openLayer(layerName, obj, cb, openSuccessCb);\r\n            return;\r\n        }\r\n\r\n        let id = idArr[0];\r\n        let layer = this.openedLayerMap.get(id);\r\n        if (layer) {\r\n            // 已显示，刷新数据\r\n            layer.layerData = obj;\r\n            layer.layerCb = cb;\r\n\r\n            layer.onLoad();\r\n            layer.onEnable();\r\n\r\n            if (openSuccessCb) {\r\n                openSuccessCb(layer);\r\n            }\r\n            return;\r\n        }\r\n\r\n        let layerParams = this.openingLayerMap.get(id);\r\n        if (layerParams) {\r\n            // 正准备显示，更新数据\r\n            layerParams.layerName = layerName;\r\n            layerParams.obj = obj;\r\n            layerParams.cb = cb;\r\n            layerParams.openSuccessCb = openSuccessCb;\r\n        }\r\n    }\r\n\r\n    openLayer(layerName: string, obj?: any, cb?: Function, openSuccessCb?: Function) {\r\n        if (!obj) {\r\n            obj = {};\r\n        }\r\n\r\n        this.layerId++;\r\n        let layerId = this.layerId;\r\n\r\n        let layerParams: any = {};\r\n        layerParams.layerName = layerName;\r\n        layerParams.obj = obj;\r\n        layerParams.cb = cb;\r\n        layerParams.openSuccessCb = openSuccessCb;\r\n        this.openingLayerMap.set(layerId, layerParams);\r\n\r\n        this.addLayerNameId(layerName, layerId);\r\n\r\n        let bundleName = constants.bundles.layer;\r\n        let layerPath = layerName;\r\n        resManager.loadAsset(bundleName, layerPath, Prefab, null, (err, prefab) => {\r\n            if (err) {\r\n                myLog.e(\"LayerManager.openLayer error:\" + err.message, layerName, err);\r\n                return;\r\n            }\r\n            layerParams = this.openingLayerMap.get(layerId);\r\n            if (!layerParams) {\r\n                // 在打开之前，就已经被关闭了\r\n                return;\r\n            }\r\n\r\n            let node = cocosUtil.instantiate(prefab);\r\n            let com = node.getComponent(layerName) || node.addComponent(layerName);\r\n\r\n            // 加载每个layer特定需要的资源\r\n            resManager.loadAssetConfigArr(com.preLoadAssetConfigArr, false, null, () => {\r\n                com.layerData = layerParams.obj;\r\n                com.layerCb = layerParams.cb;\r\n                com.layerName = layerParams.layerName;\r\n                com.layerId = layerId;\r\n\r\n                this.openingLayerMap.delete(layerId);\r\n                this.openedLayerMap.set(layerId, com);\r\n\r\n                // 添加到节点上后，会马上触发onLoad和onEnable回调，而start方法是在首次执行update之前被调用\r\n                node.parent = this.layer1;\r\n\r\n                myLog.i(\"openLayer \" + layerName, obj);\r\n\r\n                if (layerParams.openSuccessCb) {\r\n                    layerParams.openSuccessCb(com, prefab);\r\n                }\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    closeLayer(layerId: number | string) {\r\n        if (typeof (layerId) == \"string\") {\r\n            let idArr = this.layerNameIdArrMap.get(layerId);\r\n            if (!idArr || idArr.length <= 0) {\r\n                return;\r\n            }\r\n            layerId = idArr[idArr.length - 1];\r\n        }\r\n\r\n        let layer = this.openedLayerMap.get(layerId);\r\n        if (layer) {\r\n            layer.node.destroy();\r\n            this.openedLayerMap.delete(layerId);\r\n            this.removeLayerNameId(layer.layerName, layerId);\r\n        }\r\n\r\n        let layerParams = this.openingLayerMap.get(layerId);\r\n        if (layerParams) {\r\n            this.openingLayerMap.delete(layerId);\r\n            this.removeLayerNameId(layerParams.layerName, layerId);\r\n        }\r\n    }\r\n\r\n    isShowingLayer(layerName: string) {\r\n        let idArr = this.layerNameIdArrMap.get(layerName);\r\n        if (!idArr || idArr.length <= 0) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n}\r\n\r\nexport const layerManager = LayerManager.instance;\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { localText } from '../../data/localText';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { msgac } from '../../data/msgac';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LetterLayer')\r\nexport class LetterLayer extends BaseLayer {\r\n\r\n    awardArr = [[101, 10000], [801, 200]];\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.isShowBannerAd = true\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.setItemLayer(this.getNodeByPath(\"ui/awardLayer/itemLayer\"), this.awardArr, this.refreshPropItem.bind(this));\r\n\r\n        if (playerModel.isLetterAward) {\r\n            this.setString(this.getNodeByPath(\"ui/btnGet/text\"), localText.hasGet);\r\n        } else {\r\n            this.setString(this.getNodeByPath(\"ui/btnGet/text\"), localText.get);\r\n        }\r\n    }\r\n\r\n    refreshPropItem(itemUI: Node, award: any) {\r\n        this.setPropItem(award[0], find(\"icon\", itemUI), award[1], find(\"bg\", itemUI), find(\"num\", itemUI));\r\n\r\n        let getNode = find(\"get\", itemUI);\r\n        if (playerModel.isLetterAward) {\r\n            getNode.active = true;\r\n        } else {\r\n            getNode.active = false;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGet() {\r\n        if (playerModel.isLetterAward) {\r\n            this.createNotice(localText.hasGet);\r\n            return;\r\n        }\r\n        playerModel.isLetterAward = 1;\r\n        let arr = UserData.getInstance().addPropArrByDesign(this.awardArr);\r\n        this.openAwardGetLayer(arr);\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBg() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, Label, Node, PageView, Sprite, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LevelLayer')\r\nexport class LevelLayer extends BaseUILayer {\r\n    @property({ type: Node, tooltip: \"地图名字\" }) mapName: Node = null;\r\n    @property({ type: Node, tooltip: \"地图节点\" }) mapItem: Node = null;\r\n    @property({ type: Node, tooltip: \"pageView\" }) pageContent: Node = null;\r\n    @property({ type: Node, tooltip: \"选择按钮\" }) selectBtn: Node = null;\r\n\r\n    @property({ type: Label, tooltip: \"地图详情\" }) mapInfo: Label = null;\r\n    @property({ type: PageView, tooltip: \"地图\" }) mapPage: PageView = null;\r\n\r\n\r\n    _curPageId = 0\r\n    _curOpenLevel = 1\r\n\r\n    onLoad() {\r\n        let mapData = designManager.getRowsByType(constants.tableName.map, constants.mapTypes.main)\r\n        myLog.i(\"----- LevelLayer\", mapData)\r\n        this._curOpenLevel = UserData.getInstance().openLevel\r\n        mapData.forEach((element, index) => {\r\n            let item = instantiate(this.mapItem)\r\n            this.pageContent.addChild(item)\r\n            let icon = item.getChildByName(\"icon\")\r\n            let iconIndex = (mapData[index].id - 1) % 2 + 1;\r\n            this.setSpriteFrame2(icon, \"homeLayer/ui_map\" + iconIndex, null, constants.bundles.wwqVec)\r\n            if (mapData[index].id <= this._curOpenLevel) {\r\n                icon.getComponent(Sprite).color = constants.colors.white.parseColor()\r\n                item.getChildByName(\"lock\").active = false\r\n            } else {\r\n                icon.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n                item.getChildByName(\"lock\").active = true\r\n            }\r\n        });\r\n    }\r\n\r\n    start() {\r\n        let curMap = UserData.getInstance().getCurMap() - 1\r\n        // this.setPage(curMap)\r\n        this.mapPage.scrollToPage(curMap)\r\n        this.setPage(curMap)\r\n    }\r\n\r\n    setPage(index) {\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        this.setSpriteFrame2(this.mapName, \"homeLayer/map_name\" + (mapData[index].id), null, constants.bundles.wwqVec)\r\n\r\n        this.mapInfo.string = mapData[index].mapInfo\r\n\r\n        console.log(\"mapData[index].id=\", mapData[index].id)\r\n        this._curPageId = mapData[index].id\r\n        this.selectBtn.active = mapData[index].id <= this._curOpenLevel\r\n\r\n    }\r\n\r\n    scrowPage(event) {\r\n        myLog.i(\"event \", event)\r\n        this.setPage(event._curPageIdx)\r\n    }\r\n\r\n    onEnable() {\r\n    }\r\n\r\n    onDisable() {\r\n    }\r\n\r\n    onDestroy() {\r\n    }\r\n\r\n    chooseMap() {\r\n        UserData.getInstance().setCurMap(this._curPageId)\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        this.closeLayer()\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n    }\r\n\r\n    backHome() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        myLog.i(\"backHome\")\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        this.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { Node, ProgressBar, Sprite, SpriteFrame, _decorator } from 'cc';\r\nimport { WECHAT } from 'cc/env';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { GLoginState } from '../../../tyqSDK/network/conf';\r\nimport CronCtr from '../../../tyqSDK/network/CronCtr';\r\nimport ServerCtr from '../../../tyqSDK/network/ServerCtr';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { layerManager } from '../../manager/layerManager';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LoadingLayer')\r\nexport class LoadingLayer extends BaseLayer {\r\n\r\n    progressBar: ProgressBar;\r\n    progress: number = 0;\r\n    percentNode: Node;\r\n\r\n    flagNode: Node;\r\n    progressLength: number = 428;\r\n    startGap: number = -202;\r\n\r\n    designResProgress: number = 0;\r\n    designResPercent: number = 0.1;\r\n\r\n    bundleArrProgress: number = 0;\r\n    bundleArrPercent: number = 0.8;\r\n    // 由于bundle加载，没有过程回调，因此模拟一个加载过程，创造友好体验\r\n    bundleLoadingTime: number = -1;\r\n    bundleLoadingMaxTime: number = 6;\r\n\r\n    layerProgress: number = 0;\r\n    layerPercent: number = 0.1;\r\n\r\n    spriteFrameArr: SpriteFrame[] = [];\r\n\r\n    isLogined: boolean = false\r\n\r\n    onLoad() {\r\n\r\n        super.onLoad();\r\n\r\n        this.percentNode = this.getNodeByPath(\"ui/progressBar/percent\");\r\n        this.setString(this.percentNode, \"0%\");\r\n\r\n        this.progressBar = this.getNodeByPath(\"ui/progressBar\").getComponent(ProgressBar);\r\n        this.setProgressBar(this.progressBar, this.progress);\r\n\r\n        this.flagNode = this.getNodeByPath(\"ui/progressBar/flag\");\r\n        let pos = this.flagNode.getPosition();\r\n        pos.x = this.startGap;\r\n        this.flagNode.setPosition(pos);\r\n        this.screenAdapterBG(this.getNodeByPath(\"bg\"))\r\n        this.collectAllSpriteFrame(this.node);\r\n        tyqSDK.initGame()\r\n        sdkManager.initSDK()\r\n        if (tyqSDK.channel == ChannelFlag.WECHAT_JJWS) {\r\n            constants.gameName = \"jjws\";\r\n        }\r\n\r\n        // 游戏名字处理\r\n        let chs = this.getNodeByPath(\"ui/logo\").children;\r\n        for (let node of chs) {\r\n            node.active = false;\r\n        }\r\n        // switch (tyqSDK.channel) {\r\n        //     case ChannelFlag.WECHAT_JJWS:\r\n        //         this.getNodeByPath(\"ui/logo/jjws\").active = true;\r\n        //         break;\r\n        //     default:\r\n        //         this.getNodeByPath(\"ui/logo/mrtgd\").active = true;\r\n        //         break;\r\n        // }\r\n\r\n        //使用本地登录微信账号\r\n      //  let accountNode = this.getNodeByPath(\"account\")\r\n       // accountNode.active = false\r\n        // if(playerModel.isInDevelopmentEnvironment() && HTML5){\r\n        //     accountNode.active = HTML5\r\n        // }\r\n\r\n        //微信登录\r\n        if (WECHAT) {\r\n            CronCtr.getInstance().init() //开启心跳\r\n        } else {\r\n            ServerCtr.GetInstance().loginState = GLoginState.loginWithoutAccount\r\n        }\r\n    }\r\n\r\n    onClickLoginBtn() {\r\n        // let account = this.getNodeByPath(\"account/AccountLabel\").getComponent(Label)!\r\n        // ServerCtr.GetInstance().reqLoginByAccount(account.string, \"\")\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.loadDesignRes(() => {\r\n            // 加载bundle\r\n            this.bundleLoadingTime = 0;\r\n            let bundleArr = [\r\n                constants.bundles.common,\r\n                constants.bundles.hint,\r\n                constants.bundles.icon,\r\n                constants.bundles.layer,\r\n                constants.bundles.monster,\r\n                constants.bundles.prefab,\r\n                constants.bundles.spine,\r\n                constants.bundles.ui,\r\n                constants.bundles.bullet,\r\n                constants.bundles.wwqVec,\r\n\r\n            ];\r\n            resManager.loadBundleArr(bundleArr, (percent: number) => {\r\n                this.bundleArrProgress = percent;\r\n            }, () => {\r\n                this.bundleArrProgress = 1;\r\n                // 再去加载其他需要的资源\r\n                this.loadCommonLayerRes();\r\n            });\r\n        });\r\n        tyqSDK.eventSendCustomEvent(\"进入加载页\", \"玩家人数\")\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n\r\n        this.releaseAllSpriteFrame();\r\n    }\r\n\r\n    collectAllSpriteFrame(node: Node) {\r\n        let sp: Sprite = node.getComponent(Sprite);\r\n        if (sp && sp.spriteFrame) {\r\n            this.spriteFrameArr.push(sp.spriteFrame);\r\n        }\r\n        let chs = node.children;\r\n        for (let i = 0; i < chs.length; i++) {\r\n            let ch = chs[i];\r\n            this.collectAllSpriteFrame(ch);\r\n        }\r\n    }\r\n\r\n    releaseAllSpriteFrame() {\r\n        for (let i = 0; i < this.spriteFrameArr.length; i++) {\r\n            let spriteFrame: SpriteFrame = this.spriteFrameArr[i];\r\n            spriteFrame.decRef();\r\n        }\r\n        this.spriteFrameArr = [];\r\n    }\r\n\r\n    loadDesignRes(cb?: Function) {\r\n        // 加载策划表格数据\r\n        designManager.loadAllDesignTable((percent: number) => {\r\n            this.designResProgress = percent;\r\n        }, () => {\r\n            this.designResProgress = 1;\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        });\r\n    }\r\n\r\n    loadCommonLayerRes() {\r\n        // 加载layer资源\r\n        layerManager.loadCommonLayers((percent: number) => {\r\n            this.layerProgress = percent;\r\n        }, () => {\r\n            this.layerProgress = 1;\r\n        });\r\n    }\r\n\r\n    openHomeLayer() {\r\n        this.closeLayer();\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        tyqSDK.eventSendCustomEvent(\"进入游戏主界面\", \"玩家人数\")\r\n    }\r\n\r\n    onButtonClick(node: Node, name: String) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (!this.progressBar) {\r\n            return;\r\n        }\r\n        if (this.bundleLoadingTime >= 0) {\r\n            this.bundleLoadingTime += dt;\r\n            let p = this.bundleLoadingTime / this.bundleLoadingMaxTime;\r\n            if (p > 1) {\r\n                p = 1;\r\n            }\r\n            if (p > this.bundleArrProgress) {\r\n                this.bundleArrProgress = p;\r\n            }\r\n            if (this.bundleArrProgress >= 1) {\r\n                // 去除小数\r\n                this.bundleArrProgress = 1;\r\n            }\r\n        }\r\n\r\n        let progress = this.designResProgress * this.designResPercent\r\n            + this.bundleArrProgress * this.bundleArrPercent\r\n            + this.layerProgress * this.layerPercent;\r\n\r\n        // 防止计算过后，是0.999999的情况    \r\n        progress = Math.ceil(progress * 10000) / 10000;\r\n\r\n        if (progress > this.progressBar.progress) {\r\n            this.setProgressBar(this.progressBar, progress);\r\n            this.setString(this.percentNode, Math.ceil(progress * 100) + \"%\");\r\n\r\n            let pos = this.flagNode.getPosition();\r\n            pos.x = progress * this.progressLength + this.startGap;\r\n            this.flagNode.setPosition(pos);\r\n        }\r\n        if (progress >= 1) {\r\n            // myLog.i(\"load end:\" + ServerCtr.GetInstance().loginState);\r\n            if (ServerCtr.GetInstance().loginState == GLoginState.noYet) {\r\n                return;\r\n            }\r\n            // if (ServerCtr.GetInstance().loginState == GLoginState.loginFail) {\r\n            //     this.showHintLayer(\"登陆失败，请保证网络畅通后，重启游戏\", () => {\r\n            //         game.restart();\r\n            //     });\r\n            //     return;\r\n            // }\r\n            this.progressBar = undefined;\r\n            playerModel.init();\r\n            this.openHomeLayer();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","\nimport * as i18n from './LanguageData';\n\nimport { _decorator, Component, Label } from 'cc';\nconst { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass('LocalizedLabel')\n@executeInEditMode\nexport class LocalizedLabel extends Component {\n    label: Label | null = null;\n\n    @property({ visible: false })\n    key: string = '';\n\n    @property({ displayName: 'Key', visible: true })\n    get _key() {\n        return this.key;\n    }\n    set _key(str: string) {\n        this.updateLabel();\n        this.key = str;\n    }\n\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('zh');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let label = this.getComponent('cc.Label') as Label;\n        if (label) {\n            this.label = label;\n            this.updateLabel();\n            return;\n        } \n    }\n\n    updateLabel () {\n        this.label && (this.label.string = i18n.t(this.key));\n    }\n}\n","\nimport * as i18n from './LanguageData';\n\nimport { _decorator, Component, SpriteFrame, Sprite } from 'cc';\nconst { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass('LocalizedSpriteItem')\nclass LocalizedSpriteItem {\n    @property\n    language: string = 'zh';\n    @property({\n        type: SpriteFrame,\n    })\n    spriteFrame: SpriteFrame | null = null;\n}\n\n@ccclass('LocalizedSprite')\n@executeInEditMode\nexport class LocalizedSprite extends Component {\n    sprite: Sprite | null = null;\n\n    @property({\n        type: LocalizedSpriteItem,\n    })\n    spriteList = [];\n\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('zh');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let sprite = this.getComponent('cc.Sprite') as Sprite;\n        if (sprite) {\n            this.sprite = sprite;\n            this.updateSprite();\n            return;\n        } \n    }\n\n    updateSprite () {\n        for (let i = 0; i < this.spriteList.length; i++) {\n            const item = this.spriteList[i];\n            // @ts-ignore\n            if (item.language === i18n._language) {\n                // @ts-ignore\n                this.sprite.spriteFrame = item.spriteFrame;\n                break;\n            }\n        }\n    }\n}\n","import { sys } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { constants } from \"../data/constants\";\r\n\r\n\r\nclass LocalStorageManager {\r\n\r\n    private static _instance: LocalStorageManager;\r\n    private constructor() { };\r\n    public static get instance(): LocalStorageManager {\r\n        if (!this._instance) {\r\n            this._instance = new LocalStorageManager();\r\n        }\r\n        return this._instance;\r\n    };\r\n\r\n    getKey(): string {\r\n        if (constants.gameName) {\r\n            return constants.gameName + \"_gameData\";\r\n        }\r\n        return \"gameData\";\r\n    }\r\n\r\n    getGameData() {\r\n        let key = this.getKey();\r\n        let data = sys.localStorage.getItem(key);\r\n        if (data) {\r\n            data = JSON.parse(data);\r\n            return data;\r\n        }\r\n\r\n        return {};\r\n    }\r\n    setGameData(data: object) {\r\n        let key = this.getKey();\r\n        sys.localStorage.setItem(key, JSON.stringify(data));\r\n    }\r\n\r\n    uidKey = constants.gameName + \"_uid\";\r\n    set uid(uid: string) {\r\n        sys.localStorage.setItem(this.uidKey, uid + \"\");\r\n        myLog.i(\"保存uid:\" + uid);\r\n    }\r\n    get uid() {\r\n        return sys.localStorage.getItem(this.uidKey);\r\n    }\r\n\r\n    openIdKey = constants.gameName + \"_openId\";\r\n    set openId(openId: string) {\r\n        sys.localStorage.setItem(this.openIdKey, openId + \"\");\r\n        myLog.i(\"保存openId：\" + openId);\r\n    }\r\n    get openId() {\r\n        return sys.localStorage.getItem(this.openIdKey);\r\n    }\r\n\r\n}\r\n\r\nexport const localStorageManager = LocalStorageManager.instance;\r\n","\r\n// 中文\r\nexport const localText = {\r\n    clickGameStart: \"Click to start the game\",\r\n    adAwardHint: \"Watch the full video to get a reward\",\r\n    noRewardAd: \"No ads available, please try again later\",\r\n    noAd: \"Need to access rewarded video ads\",\r\n    defaultError: \"An error occurred st:%d\",\r\n    lackItemHint: \"Lack %s\",\r\n    itemGet: \"Get %sx%d\",\r\n    timeCd: \"Come back after %s\",\r\n    cd: \"Don't be too frequent, please come back later\",\r\n    propGet: \"Get %d %s\",\r\n    lv: \"Level\",\r\n    maxLv: \"Max level\",\r\n    point: \"Point\",\r\n    energyTimeHint: \"Duration: %d days %d hours\",\r\n    ci: \"Times\",\r\n    daySignHasGet: \"Signed in today\",\r\n    daySignOutdate: \"Sign-in time has passed\",\r\n    daySignNoLeave: \"No need to make up for missed sign-ins\",\r\n    dayIndex: \"Day %d\",\r\n    daySignFinalAwardHint: \"Can only be claimed after 7 days of sign-in\",\r\n    hasGet: \"Claimed\",\r\n    get: \"Claim\",\r\n    notHas: \"Not yet obtained\",\r\n    equipSuccess: \"Equipped successfully\",\r\n    full: \"Reached the limit\",\r\n    wei: \"Place\",\r\n    ge: \"Piece\",\r\n    notGet: \"Cannot claim, current quantity is %d\",\r\n    weaponEquipAdd: \"Increase the attack power of %d% weapon equipment\",\r\n\r\n    coinGetHint: \"Get %d coins\",\r\n    lackDiamond: \"Not enough diamonds\"\r\n};\r\n\r\n","import { find, macro, Node, sp, tween, Tween, UIOpacity, UITransform, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LuckyDrawLayer')\r\nexport class LuckyDrawLayer extends BaseLayer {\r\n\r\n    uiNode: Node;\r\n\r\n    itemLayer: Node;\r\n    circleNodeNum: number = 16;\r\n\r\n    choseNum: number = 0;\r\n    choseArr: any = [];\r\n\r\n    starShineArr: any = [];\r\n    starShineIndex: number = 0;\r\n    showChoseIndex: number = 0;\r\n    showChoseItemUI: Node;\r\n\r\n    startCircle: boolean = false;\r\n    circleEnd: boolean = false;\r\n    btnStart: Node;\r\n    hintNode: Node;\r\n    coinLayer: Node;\r\n    coinNumNode: Node;\r\n    coinNum: number = 0;\r\n\r\n    resultUILayer: Node;\r\n    resultBgNode: Node;\r\n    resultItemLayer: Node;\r\n    resultItemNode: Node;\r\n    resultBtnSure: Node;\r\n\r\n    // 一些特效\r\n    pdNode: Node;\r\n    fireNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.uiNode = this.getNodeByPath(\"ui\");\r\n\r\n        this.btnStart = this.getNodeByPath(\"ui/btnStart\");\r\n        this.hintNode = this.getNodeByPath(\"ui/hint\");\r\n\r\n        this.itemLayer = this.getNodeByPath(\"ui/itemLayer\");\r\n        let itemNode = this.itemLayer.children[0];\r\n        itemNode.parent = null;\r\n        let arr = [\r\n            { x: 0, y: 100 },\r\n            { x: 100, y: 0 },\r\n            { x: 0, y: -100 },\r\n            { x: -100, y: 0 },\r\n        ];\r\n        let lastItemNode = itemNode;\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let info = arr[i];\r\n            for (let k = 1; k <= 4; k++) {\r\n                let node = cocosUtil.instantiate(itemNode);\r\n                node.parent = this.itemLayer;\r\n                let pos = lastItemNode.getPosition();\r\n                pos.x += info.x;\r\n                pos.y += info.y;\r\n                node.position = pos;\r\n                lastItemNode = node;\r\n            }\r\n        }\r\n\r\n        this.coinLayer = this.getNodeByPath(\"ui/coinLayer\");\r\n        this.coinNumNode = this.getNodeByPath(\"ui/coinLayer/num\");\r\n\r\n        this.pdNode = this.getNodeByPath(\"pd\");\r\n        this.fireNode = this.getNodeByPath(\"fire\");\r\n\r\n        this.resultUILayer = this.getNodeByPath(\"resultUi\");\r\n        this.resultBgNode = this.getNodeByPath(\"resultUi/resultBg\");\r\n        this.resultItemLayer = this.getNodeByPath(\"resultUi/itemLayer\");\r\n        this.resultItemNode = this.resultItemLayer.children[0];\r\n        this.resultItemNode.parent = null;\r\n        this.resultBtnSure = this.getNodeByPath(\"resultUi/btnSure\");\r\n\r\n        this.isShowBannerAd = true;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.mapLeave,\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.removeEventArr([\r\n            msgac.mapLeave,\r\n        ]);\r\n    }\r\n\r\n    initUI() {\r\n        this.resultUILayer.active = false;\r\n        this.pdNode.active = false;\r\n        this.fireNode.active = false;\r\n        this.hintNode.active = false;\r\n        this.setString(this.coinNumNode, this.coinNum);\r\n\r\n        this.initItemArr();\r\n        this.btnStart.active = false;\r\n        cocosUtil.tweenScaleIn(this.uiNode, 0.3, () => {\r\n            this.btnStart.active = true;\r\n            cocosUtil.tweenScaleIn(this.btnStart);\r\n        });\r\n    }\r\n\r\n    initItemArr() {\r\n        // 转盘上显示的\r\n        let showArr = [];\r\n        // 最终随机到的\r\n        this.choseArr = [];\r\n        // 选择的个数\r\n        this.choseNum = Math.random() > 0.5 ? 3 : 5;\r\n\r\n        // 随机池子\r\n        let arr = [];\r\n        // 强制选择\r\n        let forceChoseArr = [];\r\n\r\n        // 武器\r\n        utilTools.forArr(mapModel.weaponSystem.weaponArr, (info: any) => {\r\n            let item: any = {};\r\n            item.name = constants.tableName.weapon;\r\n            item.info = info;\r\n            let row = designManager.getRowById(item.name, info.id);\r\n            if (row.lv == constants.design.maxLv - 1) {\r\n                // 4级必选中\r\n                let temp = utilTools.copyObj(item);\r\n                temp.info.id++;\r\n                forceChoseArr.push(temp);\r\n                return;\r\n            }\r\n            let lv = row.lv;\r\n            while (lv < constants.design.maxLv) {\r\n                let temp = utilTools.copyObj(item);\r\n                arr.push(temp);\r\n                lv++;\r\n            }\r\n        });\r\n\r\n        // 主动技能\r\n        utilTools.forArr(mapModel.skillSystem.skillArr, (info: any) => {\r\n            let item: any = {};\r\n            item.name = constants.tableName.skill;\r\n            item.info = info;\r\n            let row = designManager.getRowById(item.name, info.id);\r\n            if (row.lv == constants.design.maxLv - 1) {\r\n                // 4级必选中\r\n                let temp = utilTools.copyObj(item);\r\n                temp.info.id++;\r\n                forceChoseArr.push(temp);\r\n                return;\r\n            }\r\n            let lv = row.lv;\r\n            while (lv < constants.design.maxLv) {\r\n                let temp = utilTools.copyObj(item);\r\n                arr.push(temp);\r\n                lv++;\r\n            }\r\n        });\r\n\r\n        // 被动技能\r\n        utilTools.forArr(mapModel.skillSystem.skill2Arr, (info: any) => {\r\n            let item: any = {};\r\n            item.name = constants.tableName.skill2;\r\n            item.info = info;\r\n            let row = designManager.getRowById(item.name, info.id);\r\n            if (row.lv == constants.design.maxLv - 1) {\r\n                // 4级必选中\r\n                let temp = utilTools.copyObj(item);\r\n                temp.info.id++;\r\n                forceChoseArr.push(temp);\r\n                return;\r\n            }\r\n            let lv = row.lv;\r\n            while (lv < constants.design.maxLv) {\r\n                let temp = utilTools.copyObj(item);\r\n                arr.push(temp);\r\n                lv++;\r\n            }\r\n        });\r\n\r\n        showArr = showArr.concat(forceChoseArr);\r\n\r\n        // 处理强制选择的\r\n        while (forceChoseArr.length > this.choseNum) {\r\n            // 超过选择的数量要移除\r\n            utilTools.getRandomItemByArr(forceChoseArr, true);\r\n        }\r\n        this.choseArr = this.choseArr.concat(forceChoseArr);\r\n\r\n        // 随机池子补满金币\r\n        while (arr.length < this.circleNodeNum - showArr.length) {\r\n            let item: any = {};\r\n            item.name = constants.tableName.prop;\r\n            item.id = constants.propIds.coin;\r\n            item.num = Math.floor(Math.random() * 100) + 1;\r\n            arr.push(item);\r\n        }\r\n\r\n        // 接下来从池子中随机\r\n        while (this.choseArr.length < this.choseNum) {\r\n            let item = utilTools.getRandomItemByArr(arr, true);\r\n            if (!item) {\r\n                break;\r\n            }\r\n            this.choseArr.push(item);\r\n            showArr.push(item);\r\n        }\r\n\r\n        // 补满转盘\r\n        while (showArr.length < this.circleNodeNum) {\r\n            let item = utilTools.getRandomItemByArr(arr, true);\r\n            if (!item) {\r\n                break;\r\n            }\r\n            showArr.push(item);\r\n        }\r\n\r\n        // 随机打乱\r\n        showArr = utilTools.randomArr(showArr, true);\r\n        this.choseArr = utilTools.randomArr(this.choseArr, true);\r\n\r\n        utilTools.forArr(this.itemLayer.children, (itemUI: any, index: number) => {\r\n            let item = showArr[index];\r\n            let row = this.getRowByItem(item);\r\n            item.uiIndex = index;\r\n            itemUI.item = item;\r\n            this.setSpriteFrame(find(\"icon\", itemUI), row.icon);\r\n            find(\"shine\", itemUI).active = false;\r\n            find(\"star\", itemUI).active = false;\r\n            find(\"chose\", itemUI).active = false;\r\n\r\n            // 出场动画\r\n            itemUI.active = false;\r\n            this.scheduleOnce(() => {\r\n                itemUI.active = true;\r\n                cocosUtil.tweenScaleIn(itemUI);\r\n            }, 0.2 + Math.random() * 0.2);\r\n        });\r\n\r\n        // myLog.i(showArr, this.choseArr);\r\n\r\n    }\r\n\r\n    getRowByItem(item: any) {\r\n        let row = null;\r\n        switch (item.name) {\r\n            case constants.tableName.weapon:\r\n            case constants.tableName.skill:\r\n            case constants.tableName.skill2:\r\n                row = designManager.getRowById(item.name, item.info.id);\r\n                break;\r\n            case constants.tableName.prop:\r\n                row = designManager.getRowById(item.name, item.id);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return row;\r\n    }\r\n\r\n    // 开始处理动画表现\r\n    startAnimation() {\r\n        utilTools.waterfall([\r\n            (result: any, cb: Function) => {\r\n                // 转一圈\r\n                this.circleShineAnimation(() => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                // 转第二圈\r\n                this.circleShineAnimation(() => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                // 整圈闪烁\r\n                this.totalShineAnimation(() => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                // 选择数量闪烁\r\n                this.choseNumAnimation(() => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.unscheduleAllCallbacks();\r\n                this.pdNode.active = true;\r\n                this.startCircle = true;\r\n                tween(this.coinLayer).to(0.2, { scale: v3(1.1, 1.1, 1) }).to(0.2, { scale: v3(1, 1, 1) }).union().repeatForever().start();\r\n                // 加金币\r\n                this.schedule(() => {\r\n                    if (this.startCircle && !this.circleEnd) {\r\n                        this.coinNum += 2;\r\n                        this.setString(this.coinNumNode, this.coinNum);\r\n                    }\r\n                }, 0.02, macro.REPEAT_FOREVER);\r\n                // 提示跳过动画\r\n                this.scheduleOnce(() => {\r\n                    this.hintNode.active = true;\r\n                    tween(this.hintNode.getComponent(UIOpacity)).delay(0.5).to(0.5, { opacity: 0 }).to(0.5, { opacity: 255 }).union().repeatForever().start();\r\n                }, 0.5);\r\n                // 开始转圈\r\n                this.startShineStarCircle();\r\n            }\r\n        ]);\r\n\r\n        // 放烟花\r\n        let posArr = [\r\n            v3(-100, 200, 0),\r\n            v3(0, -100, 0),\r\n            v3(150, -250, 0),\r\n            v3(300, -500, 0),\r\n            v3(100, -450, 0),\r\n        ];\r\n\r\n        cocosUtil.schedule(this, () => {\r\n            if (posArr.length <= 0) {\r\n                return;\r\n            }\r\n            let skinName = Math.random() > 0.5 ? \"huang\" : \"lan\";\r\n            let scale = 0.8 + Math.random() * 0.2;\r\n            let pos = utilTools.getRandomItemByArr(posArr, true);\r\n            let fireNode = cocosUtil.instantiate(this.fireNode);\r\n            fireNode.parent = this.fireNode.parent;\r\n            fireNode.active = true;\r\n            fireNode.position = pos;\r\n            fireNode.scale = v3(scale, scale, 1);\r\n            fireNode.getComponent(sp.Skeleton).setSkin(skinName);\r\n            let aniCtrl: AnimationCtrl = cocosUtil.addComponentOnce(fireNode, AnimationCtrl);\r\n            aniCtrl.playAnimationOnce(\"animation\", () => {\r\n                fireNode.parent = null;\r\n            });\r\n        }, 1.5, macro.REPEAT_FOREVER, 0, true);\r\n\r\n    }\r\n\r\n    startShineStarCircle() {\r\n        let chs = this.itemLayer.children;\r\n        let index = 5;\r\n        this.starShineArr = [];\r\n        this.starShineIndex = index + this.choseNum - 1;\r\n        this.showChoseIndex = 0;\r\n        this.showChoseItemUI = null;\r\n\r\n        for (let i = 0; i < this.choseNum; i++) {\r\n            let itemUI = chs[index];\r\n            index++;\r\n            this.initStarShineItemUI(itemUI);\r\n            this.starShineArr.push(itemUI);\r\n        }\r\n        this.schedule(this.addNextStarShine, 0.05, macro.REPEAT_FOREVER);\r\n\r\n        this.scheduleOnce(this.startShowChoseItem, 3 + 2 * Math.random());\r\n    }\r\n\r\n    startShowChoseItem() {\r\n        let item = this.choseArr[this.showChoseIndex];\r\n        if (!item) {\r\n            return;\r\n        }\r\n        this.showChoseItemUI = this.itemLayer.children[item.uiIndex];\r\n        this.showChoseIndex++;\r\n    }\r\n\r\n    initStarShineItemUI(itemUI: Node) {\r\n        let uiOpacity = find(\"shine\", itemUI).getComponent(UIOpacity);\r\n        uiOpacity.node.active = true;\r\n        uiOpacity.opacity = 255;\r\n\r\n        let starNode = find(\"star\", itemUI);\r\n        starNode.angle = Math.random() * 360;\r\n        let animationCtrl: AnimationCtrl = cocosUtil.addComponentOnce(starNode, AnimationCtrl);\r\n        animationCtrl.getComponent(UIOpacity).opacity = 255;\r\n        animationCtrl.node.active = true;\r\n        animationCtrl.playAnimation(\"3\", false, () => {\r\n            animationCtrl.node.active = false;\r\n        });\r\n    }\r\n\r\n    addNextStarShine(dt: number) {\r\n        let chs = this.itemLayer.children;\r\n        this.starShineIndex++;\r\n        if (this.starShineIndex >= this.circleNodeNum) {\r\n            this.starShineIndex = 0;\r\n        }\r\n        let itemUI = chs[this.starShineIndex];\r\n        if (this.showChoseItemUI == itemUI) {\r\n            // 选中了\r\n            this.showChoseItemUI = null;\r\n            this.unschedule(this.addNextStarShine);\r\n            find(\"chose\", itemUI).active = true;\r\n            let starNode = find(\"star\", itemUI);\r\n            starNode.active = true;\r\n            starNode.angle = 0;\r\n            starNode.getComponent(UIOpacity).opacity = 255;\r\n            let animationCtrl: AnimationCtrl = cocosUtil.addComponentOnce(starNode, AnimationCtrl);\r\n            animationCtrl.playAnimation(\"2\", false, () => {\r\n                starNode.active = false;\r\n            });\r\n            // @ts-ignore\r\n            this.playerAddItem(itemUI.item);\r\n            tween(itemUI).to(0.2, { scale: v3(1.5, 1.5, 1) }).to(0.2, { scale: v3(1, 1, 1) }).call(() => {\r\n                if (this.showChoseIndex >= this.choseArr.length) {\r\n                    // 已经全部完成\r\n                    this.showChoseResult();\r\n                } else {\r\n                    // 继续展示下一个\r\n                    this.schedule(this.addNextStarShine, 0.05, macro.REPEAT_FOREVER);\r\n                    this.startShowChoseItem();\r\n                }\r\n            }).start();\r\n            return;\r\n        }\r\n        this.initStarShineItemUI(itemUI);\r\n        this.starShineArr.push(itemUI);\r\n        let outItemUI = this.starShineArr.shift();\r\n        let shineNode = find(\"shine\", outItemUI);\r\n        tween(shineNode.getComponent(UIOpacity)).to(dt * 6, { opacity: 0 }).start();\r\n    }\r\n\r\n    playerAddItem(item: any) {\r\n        let row = this.getRowByItem(item);\r\n        switch (item.name) {\r\n            case constants.tableName.weapon:\r\n                mapModel.weaponSystem.addWeapon(row.type);\r\n                item.info = utilTools.copyObj(mapModel.weaponSystem.getWeaponInfoByType(row.type));\r\n                break;\r\n            case constants.tableName.skill:\r\n                mapModel.skillSystem.addSkill(row.type);\r\n                item.info = utilTools.copyObj(mapModel.skillSystem.getSkillInfoByType(row.type));\r\n                break;\r\n            case constants.tableName.skill2:\r\n                mapModel.skillSystem.addSkill2(row.type);\r\n                item.info = utilTools.copyObj(mapModel.skillSystem.getSkill2InfoByType(row.type));\r\n                break;\r\n            case constants.tableName.prop:\r\n                mapModel.propSystem.getProp(item.id, item.num);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 已全部完成\r\n    async showChoseResult() {\r\n        this.unscheduleAllCallbacks();\r\n        this.circleEnd = true;\r\n        mapModel.propSystem.getProp(constants.propIds.coin, this.coinNum);\r\n\r\n        this.itemLayer.children.forEach((itemUI: Node) => {\r\n            find(\"shine\", itemUI).active = false;\r\n            find(\"star\", itemUI).active = false;\r\n        });\r\n\r\n        this.resultUILayer.active = true;\r\n        this.resultBtnSure.active = false;\r\n        this.resultItemLayer.removeAllChildren();\r\n        await cocosUtil.tweenFadeIn(this.resultBgNode, 0.5);\r\n\r\n        let itemTransform = this.resultItemNode.getComponent(UITransform);\r\n        let itemHeight = itemTransform.height;\r\n        let itemGap = 20;\r\n\r\n        let chs = this.itemLayer.children;\r\n        for (let i = 0; i < this.choseArr.length; i++) {\r\n            let item = this.choseArr[i];\r\n            this.scheduleOnce(() => {\r\n                let node = chs[item.uiIndex];\r\n                let pos = cocosUtil.convertToWorldSpace(node);\r\n                node = cocosUtil.instantiate(node);\r\n                node.parent = this.resultItemLayer;\r\n                node.position = cocosUtil.convertToNodeSpace(node, pos);\r\n                let targetPos = v3(0, 0, 0);\r\n                targetPos.y = -itemHeight * 0.5 - (itemHeight + itemGap) * i;\r\n                tween(node).to(0.2, { position: targetPos }).to(0.1, { scale: v3(0.3, 0.3, 1) }).call(() => {\r\n                    let itemUI = cocosUtil.instantiate(this.resultItemNode);\r\n                    itemUI.parent = this.resultItemLayer;\r\n                    itemUI.position = targetPos;\r\n                    this.refreshResultItemUI(itemUI, item);\r\n                    let shineNode = find(\"shine\", itemUI);\r\n                    shineNode.active = true;\r\n                    cocosUtil.tweenScaleIn2(itemUI, 0.2, () => {\r\n                        cocosUtil.tweenFadeOut(shineNode, 0.6);\r\n                        if (i == this.choseArr.length - 1) {\r\n                            this.resultBtnSure.active = true;\r\n                            cocosUtil.tweenScaleIn2(this.resultBtnSure);\r\n                        }\r\n                    });\r\n                }).start();\r\n            }, i * 0.3);\r\n        }\r\n    }\r\n\r\n    refreshResultItemUI(itemUI: Node, item: any) {\r\n        let row = this.getRowByItem(item);\r\n        this.setSpriteFrame(find(\"icon\", itemUI), row.icon);\r\n        this.setString(find(\"name\", itemUI), row.name);\r\n\r\n        let info = row.info;\r\n        if (item.name == constants.tableName.prop) {\r\n            info = localText.coinGetHint.format(item.num);\r\n        }\r\n        this.setString(find(\"info\", itemUI), info);\r\n\r\n        let starLayer = find(\"starLayer\", itemUI);\r\n        if (item.name == constants.tableName.prop) {\r\n            starLayer.active = false;\r\n            return;\r\n        }\r\n        starLayer.active = true;\r\n        this.setNumItemLayer(starLayer, constants.design.maxLv, (starNode: Node, num: number) => {\r\n            let iconNode = find(\"icon\", starNode);\r\n            let icon2Node = find(\"icon2\", starNode);\r\n            let yinNode = find(\"yin\", starNode);\r\n            if (row.lv >= num) {\r\n                iconNode.active = true;\r\n                icon2Node.active = false;\r\n                yinNode.active = false;\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    iconNode.active = false;\r\n                    icon2Node.active = true;\r\n                }\r\n            } else {\r\n                iconNode.active = false;\r\n                yinNode.active = true;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    choseNumAnimation(endCb: Function) {\r\n        let chs = this.itemLayer.children;\r\n        let index = 5;\r\n        let arr = [];\r\n        for (let i = 0; i < this.choseNum; i++) {\r\n            let itemUI = chs[index];\r\n            arr.push(itemUI);\r\n            index++;\r\n            this.scheduleOnce(() => {\r\n                let uiOpacity = find(\"shine\", itemUI).getComponent(UIOpacity);\r\n                uiOpacity.node.active = true;\r\n                uiOpacity.opacity = 0;\r\n                tween(uiOpacity).to(0.1, { opacity: 255 }).delay(0.15).to(0.1, { opacity: 0 }).union().repeatForever().start();\r\n                if (i == this.choseNum - 1) {\r\n                    this.scheduleOnce(() => {\r\n                        utilTools.forArr(arr, (node: Node) => {\r\n                            find(\"shine\", node).active = false;\r\n                            Tween.stopAllByTarget(find(\"shine\", node).getComponent(UIOpacity));\r\n                        });\r\n                        endCb();\r\n                    }, 0.35);\r\n                }\r\n            }, i * 0.35);\r\n        }\r\n    }\r\n\r\n    totalShineAnimation(endCb: Function) {\r\n        let time = 0.3;\r\n        utilTools.forArr(this.itemLayer.children, (itemUI: Node, index: number) => {\r\n            let uiOpacity = find(\"shine\", itemUI).getComponent(UIOpacity);\r\n            uiOpacity.node.active = true;\r\n            uiOpacity.opacity = 0;\r\n            tween(uiOpacity).to(time, { opacity: 255 }).to(time, { opacity: 0 }).union().repeat(3).call(() => {\r\n                if (index == 0) {\r\n                    endCb();\r\n                }\r\n            }).start()\r\n        });\r\n    }\r\n\r\n    circleShineAnimation(endCb?: Function) {\r\n        let chs = this.itemLayer.children;\r\n        let count = 0;\r\n        let opacityTime = 0.1;\r\n        let delayTime = 0.5;\r\n        for (let i = 13; i >= 5; i--) {\r\n            let node = chs[i];\r\n            let time = count * 0.05;\r\n\r\n            let shineNode = find(\"shine\", node);\r\n            shineNode.active = true;\r\n            let uiOpacity = shineNode.getComponent(UIOpacity);\r\n            uiOpacity.opacity = 0;\r\n            this.scheduleOnce(() => {\r\n                tween(uiOpacity).to(opacityTime, { opacity: 255 }).delay(delayTime).to(opacityTime, { opacity: 0 }).call(() => {\r\n                    if (i == 5) {\r\n                        endCb();\r\n                    }\r\n                }).start();\r\n            }, time);\r\n\r\n            if (i != 13 && i != 5) {\r\n                let sideNode = chs[(26 - i) % this.circleNodeNum];\r\n                let sideShineNode = find(\"shine\", sideNode);\r\n                sideShineNode.active = true;\r\n                let sideOpacity = sideShineNode.getComponent(UIOpacity);\r\n                sideOpacity.opacity = 0;\r\n                this.scheduleOnce(() => {\r\n                    tween(sideOpacity).to(opacityTime, { opacity: 255 }).delay(delayTime).to(opacityTime, { opacity: 0 }).start();\r\n                }, time);\r\n            }\r\n            count++;\r\n        }\r\n    }\r\n\r\n    mapLeaveRet() {\r\n        this.closeLayer();\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnStart() {\r\n        this.btnStart.active = false;\r\n        this.startAnimation();\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBg() {\r\n        if (!this.hintNode.active) {\r\n            return;\r\n        }\r\n        this.hintNode.active = false;\r\n        if (this.showChoseIndex >= 1) {\r\n            return;\r\n        }\r\n        this.circleEnd = true;\r\n        // 一次性给金币\r\n        let coin = 300;\r\n        if (this.choseNum >= 3) {\r\n            coin = 450;\r\n        }\r\n        coin = coin + 100 * Math.random();\r\n        coin = Math.floor(coin);\r\n        if (coin <= this.coinNum) {\r\n            coin = coin + 50 * Math.random();\r\n            coin = Math.floor(coin);\r\n        }\r\n        this.coinNum = coin;\r\n        this.setString(this.coinNumNode, this.coinNum);\r\n\r\n        this.unschedule(this.startShowChoseItem);\r\n        this.startShowChoseItem();\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    onClickBtnSure() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { EditBox, Label, Node, sp, Sprite, tween, v3, Vec3, VideoPlayer, view, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { RedPointLogicMgr } from '../../manager/RedPointLogicMgr';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { TopUILayer } from './TopUILayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MainLayer')\r\nexport class MainLayer extends BaseLayer {\r\n\r\n    toggles: Node[] = [];\r\n    togglesLock = [true, false, false, false, true];\r\n\r\n    @property({ type: Node }) btnRedBox: Node = null;\r\n    @property({ type: Node }) handNode: Node = null;\r\n\r\n    emailRedPointNode: Node;\r\n    daySignRedPointNode: Node;\r\n    dayTaskRedPointNode: Node;\r\n    vipRedPointNode: Node;\r\n    duihuanBg: Node;\r\n\r\n    btnShare: Node;\r\n    videoPlayer: Node;\r\n\r\n    shurukuang: EditBox;\r\n\r\n    onLoad() {\r\n        // this.chooseDesignResolution()\r\n        // let mapData = designManager.getTable(constants.tableName.map)\r\n        // let curMap = UserData.getInstance().getCurMap() - 1\r\n\r\n        // this.setSpriteFrame2(this.getNodeByPath(\"Map/map_name\"), \"homeLayer/map_name\" + (mapData[curMap].id), null, constants.bundles.wwqVec)\r\n        // this.setSpriteFrame2(this.getNodeByPath(\"Map/btnMap/icon\"), \"homeLayer/ui_map\" + (mapData[curMap].id), null, constants.bundles.wwqVec)\r\n        // this.getNodeByPath(\"btnGo/Label\").getComponent(Label).string = \"X\" + mapData[curMap].energy\r\n        // let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        // this.getNodeByPath(\"Map/timeLabel\").getComponent(Label).string = \"最高生存时间：\" + utilTools.getTimeStrChinese(leveldata.Time * 1000)\r\n        // RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnMap/icon\"),null, true)\r\n\r\n        this.emailRedPointNode = this.getNodeByPath(\"btnLetter/redPoint\");\r\n        this.daySignRedPointNode = this.getNodeByPath(\"btnsLeft/btnDaySign/redPoint\");\r\n        this.dayTaskRedPointNode = this.getNodeByPath(\"btnsLeft/btnDayTask/redPoint\");\r\n        this.vipRedPointNode = this.getNodeByPath(\"btnsRight/btnVip/redPoint\");\r\n\r\n        this.btnShare = this.getNodeByPath(\"btnsRight/btnShare\");\r\n\r\n        let btnPyramid = this.getNodeByPath(\"btnsLeft/btnPyramid\")\r\n        if (btnPyramid) {\r\n            if (UserData.getInstance().roleLv < designManager.config.qingdianLock) {\r\n                btnPyramid.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n            }\r\n        }\r\n\r\n        let btnDayTask = this.getNodeByPath(\"btnsLeft/btnDayTask\")\r\n        if (btnDayTask) {\r\n            if (UserData.getInstance().roleLv < designManager.config.taksLock) {\r\n                btnDayTask.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n            }\r\n        }\r\n\r\n        let btnGuess = this.getNodeByPath(\"btnsLeft/btnGuess\")\r\n        if (btnGuess) {\r\n            if (UserData.getInstance().roleLv < designManager.config.caiquanLock) {\r\n                btnGuess.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n            }\r\n        }\r\n\r\n        // this.duihuanBg = this.getNodeByPath(\"patbg1\");\r\n        // this.duihuanBg.active = false\r\n\r\n        // this.videoPlayer = this.getNodeByPath(\"VideoPlayer\");\r\n        // this.videoPlayer.active = false\r\n\r\n       // this.shurukuang = this.duihuanBg.getChildByName(\"EditBox\").getComponent(EditBox)\r\n    }\r\n\r\n    onClickBtnDuihuan() {\r\n        this.duihuanBg.active = true\r\n        let tishi = this.duihuanBg.getChildByName(\"tishilabel\")\r\n        tishi.active = false\r\n    }\r\n\r\n    onClickBtnCloseTuihuan() {\r\n        this.duihuanBg.active = false\r\n    \r\n    }\r\n    onClickBtnTuihuan() {\r\n        let tishi = this.duihuanBg.getChildByName(\"tishilabel\")\r\n        tishi.active = false\r\n        let str = this.shurukuang.getComponent(EditBox).string\r\n        let strArr = str.split(\"_\")\r\n        if (strArr.length > 1) {\r\n            if (strArr[0] == \"tyq\") {\r\n                let curPath = \"\"\r\n                let index = strArr[1]\r\n                curPath = \"https://oss.game.xmtyq.com/game/video_wxgame/bpxt/tyq_\" + (index) + \".mp4?token=6d4ae1582d1f97a26ccf250d29313750\"\r\n                tishi.active = false\r\n                this.videoPlayer.getComponent(VideoPlayer).remoteURL = curPath\r\n                this.videoPlayer.active = true\r\n            } else {\r\n                tishi.active = true\r\n            }\r\n        } else {\r\n            tishi.active = true\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        // this.addEventArr([\r\n        //     msgac.mapEnter,\r\n        // ]);\r\n\r\n        if ((tyqSDK.channel == ChannelFlag.WECHAT_JJWS || tyqSDK.channel == ChannelFlag.WECHAT_MRTGD) && tyqAdManager.getChannel() != Channel.OPPO_MINI_GAME) {\r\n            this.btnShare.active = true;\r\n        } else {\r\n            this.btnShare.active = false;\r\n        }\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    refreshRedPoint() {\r\n        this.emailRedPointNode.active = playerModel.hasLetterAward();\r\n        this.daySignRedPointNode.active = playerModel.hasDaySignAward();\r\n        this.dayTaskRedPointNode.active = UserData.getInstance().roleLv >= designManager.config.taksLock && playerModel.hasDayTaskAward();\r\n        this.vipRedPointNode.active = playerModel.hasVipAward();\r\n    }\r\n\r\n    start() {\r\n        let btnset = this.getNodeByPath(\"btnSet\")\r\n        let btnEmail = this.getNodeByPath(\"btnLetter\")\r\n        let TopUILayer = this.node.parent.parent.getChildByName(\"TopUILayer\")\r\n\r\n        if (btnset.position.y > TopUILayer.position.y - 84) {\r\n            btnset.position = v3(btnset.position.x, TopUILayer.position.y - 84, btnset.position.z)\r\n            btnEmail.position = v3(btnEmail.position.x, TopUILayer.position.y - 84, btnEmail.position.z)\r\n        }\r\n\r\n        let screen1 = view.getVisibleSize()\r\n        if (screen1.width / screen1.height >= 720 / 1440) {\r\n            let btnGo = this.getNodeByPath(\"btnGo\")\r\n            btnGo.position = new Vec3(btnGo.position.x, -360, btnGo.position.z)\r\n            let Map = this.getNodeByPath(\"Map\")\r\n            Map.position = new Vec3(Map.position.x, 30, Map.position.z)\r\n        }\r\n        if (UserData.getInstance()._isShowOpenLevel && UserData.getInstance().getCurMap() > 1) {\r\n            UserData.getInstance()._isShowOpenLevel = false\r\n            this.initMapLevel(UserData.getInstance().getCurMap() - 1, false)\r\n            let role = this.getNodeByPath(\"Map/role\")\r\n            role.active = false\r\n            tween(role).delay(1).call(function () {\r\n                role.active = true\r\n            }).start()\r\n            let self = this\r\n            tween(this.getNodeByPath(\"Map/btnMap\")).delay(0.35).to(0.35, { scale: v3(0, 0, 0) }).call(function () {\r\n                self.initMapLevel(UserData.getInstance().getCurMap(), true)\r\n            }).to(0.2, { scale: v3(1, 1, 1) }).start()\r\n        } else {\r\n            this.initMapLevel(UserData.getInstance().getCurMap(), true)\r\n        }\r\n\r\n        let arr = []\r\n        let propArr = designManager.getRowsByType(constants.tableName.CNTM, 1)\r\n        for (let i = 0; i < propArr.length; i++) {\r\n            let data = propArr[i].award[0]\r\n            arr.push(data[0])\r\n        }\r\n        if (UserData.getInstance().isHaveProp(arr)) {\r\n            this.btnRedBox.removeFromParent()\r\n        } else {\r\n            tween(this.btnRedBox).to(3, { position: v3(180, 220, 0) }).to(3, { position: v3(-180, 120, 0) }).to(3, { position: v3(180, 20, 0) }).to(3, { position: v3(-180, -90, 0) }).to(3, { position: v3(180, 80, 0) }).to(3, { position: v3(-180, -80, 0) }).to(3, { position: v3(180, 20, 0) })\r\n                .to(3, { position: v3(-180, 120, 0) }).to(3, { position: v3(180, 220, 0) }).to(3, { position: v3(-180, 350, 0) }).union().repeatForever().start()\r\n        }\r\n\r\n        // let role = this.getNodeByPath(\"Map/role\")\r\n        // if (UserData.getInstance().getCurMap() == 1) {\r\n        //     tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).to(0.8, { position: v3(90, 0, 0) }).to(0.8, { position: v3(130, 0, 0) }).set({ scale: v3(1.5, 1.5, 0) }).to(0.5, { position: v3(90, 0, 0) }).to(0.8, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n        // } else if (UserData.getInstance().getCurMap() == 2) {\r\n        //     this.setSpineData2(role, constants.bundles.monster, \"monster22/ncg\", function () {\r\n        //         role.getComponent(sp.Skeleton).animation = \"walk\"\r\n        //         role.getComponent(sp.Skeleton).loop = true\r\n        //     })\r\n        //     tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n        // } else {\r\n        //     role.active = false\r\n        // }\r\n        // mapModel.loadMapRes((percent: number) => {\r\n        // }, () => { })\r\n        RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnChapter\"), null, UserData.getInstance().checkChapterCanReward())\r\n        RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnPortal\"), null, UserData.getInstance().getPatrolState() <= 0)\r\n    }\r\n\r\n    initMapLevel(level, isaction) {\r\n\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        this.setSpriteFrame2(this.getNodeByPath(\"Map/map_name\"), \"homeLayer/map_name\" + (mapData[level - 1].id), null, constants.bundles.wwqVec)\r\n\r\n        let iconIndex = (mapData[level - 1].id - 1) % 2 + 1;\r\n        this.setSpriteFrame2(this.getNodeByPath(\"Map/btnMap/icon\"), \"homeLayer/ui_map\" + iconIndex, null, constants.bundles.wwqVec)\r\n\r\n        this.getNodeByPath(\"btnGo/Label\").getComponent(Label).string = \"X\" + mapData[level - 1].energy\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        this.getNodeByPath(\"Map/timeLabel\").getComponent(Label).string = \"最高生存时间：\" + utilTools.getTimeStrChinese(leveldata.Time * 1000)\r\n\r\n        let role = this.getNodeByPath(\"Map/role\")\r\n        if (isaction) {\r\n\r\n            tween(role).stop()\r\n            let skin = \"skin1\";\r\n            if (level == 3 || level == 4) {\r\n                skin = \"skin2\";\r\n            }\r\n            if (level == 1 || level == 3) {\r\n                role.getComponent(sp.Skeleton).setSkin(skin);\r\n                tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).to(0.8, { position: v3(90, 0, 0) }).to(0.8, { position: v3(130, 0, 0) }).set({ scale: v3(1.5, 1.5, 0) }).to(0.5, { position: v3(90, 0, 0) }).to(0.8, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n            } else if (level == 2 || level == 4) {\r\n                this.setSpineData2(role, constants.bundles.monster, \"monster22/ncg\", function () {\r\n                    role.getComponent(sp.Skeleton).animation = \"walk\"\r\n                    role.getComponent(sp.Skeleton).loop = true\r\n                    role.getComponent(sp.Skeleton).setSkin(skin);\r\n                })\r\n                tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n            } else {\r\n                role.active = false\r\n            }\r\n        }\r\n\r\n        this.handNode.active = false;\r\n        let curMap = UserData.getInstance().getCurMap() - 1\r\n        if (UserData.getInstance().power >= mapData[curMap].energy) {\r\n            this.handNode.active = true;\r\n        }\r\n    }\r\n\r\n    onClickBtnGo() {\r\n        // let node = (this.getNodeByPath(\"prop_coin1\"))\r\n        // // let node = new Node\r\n        // // node.addComponent(Sprite)\r\n        // let btnGo = this.getNodeByPath(\"ui\")\r\n        // UserData.getInstance().showGetAnimal(btnGo, node, [0, 0], [0, 800])\r\n        // return\r\n\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let curMap = UserData.getInstance().getCurMap() - 1\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n\r\n        if (UserData.getInstance().power < mapData[curMap].energy) {\r\n            this.createNotice(\"体力不足\")\r\n            return\r\n        }\r\n\r\n        UserData.getInstance().usePower(0 - mapData[curMap].energy)\r\n        let topUILayer = this.node.parent.parent.getChildByName(\"TopUILayer\")\r\n        topUILayer.getComponent(TopUILayer).showUseAnimal(1, 0 - mapData[curMap].energy)\r\n\r\n        playerModel.addDayTaskNum(7, mapData[curMap].energy);\r\n\r\n        mapModel.enterMapWithMapId(UserData.getInstance().getCurMap());\r\n    }\r\n\r\n    onClickBtnMap() {\r\n        myLog.i(\"btnMap\")\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.closeLayer()\r\n        this.openLayer(constants.layers.LevelLayer);\r\n    }\r\n\r\n    onClickBtnChapter() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        myLog.i(\"btnMap\")\r\n        this.closeLayer()\r\n        this.openLayer(constants.layers.ChapterLayer, { chapter: 11 });\r\n    }\r\n\r\n    onClickBtnPartol() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.PatrolLayer);\r\n        RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnPortal\"), null, false)\r\n    }\r\n\r\n    onClickBtnSet() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SettingLayer);\r\n    }\r\n\r\n    onClickBtnDayTask() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.taksLock) {\r\n            this.createNotice(\"角色\" + designManager.config.taksLock + \"级后解锁\");\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.DayTaskLayer);\r\n    }\r\n\r\n    onClickBtnDaySign() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.DaySignLayer);\r\n    }\r\n\r\n    onClickBtnGuess() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.caiquanLock) {\r\n            this.createNotice(\"角色\" + designManager.config.caiquanLock + \"级后解锁\");\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.GuessGameLayer);\r\n    }\r\n\r\n    onClickBtnPyramid() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.qingdianLock) {\r\n            this.createNotice(\"角色\" + designManager.config.qingdianLock + \"级后解锁\");\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.PyramidDrawLayer);\r\n    }\r\n\r\n    onClickOpenLayer(event, data) {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(data);\r\n    }\r\n\r\n    onClickBtnLetter() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.LetterLayer);\r\n    }\r\n\r\n    onClickBtnEquipCompose() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.BlessLayer);\r\n    }\r\n\r\n    onClickBtnSkinChange() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SkinChangeLayer);\r\n    }\r\n\r\n    onClickBtnVip() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.VipLayer);\r\n    }\r\n\r\n    onClickBtnShare() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.ShareLayer);\r\n        tyqSDK.eventSendCustomEvent(\"参与活动分享\")\r\n    }\r\n\r\n}\r\n\r\n","\r\n\r\nimport { find, Node, ProgressBar, tween, Tween, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { GameCtrl } from '../item/GameCtrl';\r\nimport { Player } from '../item/Player';\r\nimport { ShineColor } from '../shader/ShineColor';\r\nimport { BulletSystem } from '../sys/BulletSystem';\r\nimport { HintSystem } from '../sys/HintSystem';\r\nimport { MapSystem } from '../sys/MapSystem';\r\nimport { MonsterSystem } from '../sys/MonsterSystem';\r\nimport { NumSystem } from '../sys/NumSystem';\r\nimport { PropSystem } from '../sys/PropSystem';\r\nimport { SkillSystem } from '../sys/SkillSystem';\r\nimport { WeaponSystem } from '../sys/WeaponSystem';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MapLayer')\r\nexport class MapLayer extends BaseLayer {\r\n\r\n    fightCapNode: Node;\r\n\r\n    mapSystem: MapSystem;\r\n\r\n    player: Player;\r\n    gameCtrl: GameCtrl;\r\n\r\n    timeNode: Node;\r\n    expProgress: Node;\r\n    expLvNode: Node;\r\n    expBarColorArr = [\"#00FF00\", \"#00C2FF\", \"#FF00D6\", \"#FF2900\"];\r\n    expBarColorIndex = 0;\r\n    expBarShineColor: ShineColor;\r\n    expLvUpCount: number = 0;\r\n    coinNumNode: Node;\r\n    coinIconNode: Node;\r\n    diamondNumNode: Node;\r\n    killMonsterNumNode: Node;\r\n\r\n    bossHpLayer: Node;\r\n    bossDamProgressBar: ProgressBar;\r\n    bossHpProgress: Node;\r\n\r\n    skillBombIcon: Node;\r\n    skillBombAd: Node;\r\n    skillBombNum: Node;\r\n    skillBombCd: Node;\r\n\r\n    btnSkillHeal: Node;\r\n    skillHealIcon: Node;\r\n    skillHealAd: Node;\r\n    skillHealNum: Node;\r\n    skillHealCd: Node;\r\n\r\n    skillMagnetAd: Node;\r\n    skillMagnetNum: Node;\r\n    skillLifeAd: Node;\r\n    skillLifeNum: Node;\r\n\r\n    monsterNumNode: Node;\r\n    showNumNode: Node;\r\n    playerPosNode: Node;\r\n    expNumNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.chooseDesignResolution();\r\n        this.getNodeByPath(\"bg\").active = false;\r\n        this.getNodeByPath(\"ui/btns\").active = playerModel.isRecordAd || playerModel.isInDevelopmentEnvironment();\r\n\r\n        this.fightCapNode = this.getNodeByPath(\"fightCap\");\r\n        this.fightCapNode.active = false;\r\n        this.gameCtrl = this.getNodeByPath(\"gameCtrl\").addComponent(GameCtrl);\r\n\r\n        this.mapSystem = mapModel.mapFightLayer.addComponent(MapSystem);\r\n        let mapLayer = find(\"map\", mapModel.mapFightLayer);\r\n\r\n        this.player = find(\"player\", mapLayer).addComponent(Player);\r\n        let monsterSystem = find(\"monsterLayer\", mapLayer).addComponent(MonsterSystem);\r\n        let bulletSystem = find(\"bulletLayer\", mapLayer).addComponent(BulletSystem);\r\n        let numSystem = find(\"numLayer\", mapLayer).addComponent(NumSystem);\r\n        let skillSystem = find(\"player/skillLayer\", mapLayer).addComponent(SkillSystem);\r\n        let weaponSystem = find(\"player/weaponLayer\", mapLayer).addComponent(WeaponSystem);\r\n        let hintSystem = find(\"hintLayer\", mapLayer).addComponent(HintSystem);\r\n        let propSystem = find(\"propLayer\", mapLayer).addComponent(PropSystem);\r\n\r\n        mapModel.setCompoments(this, this.player, this.mapSystem, monsterSystem, bulletSystem, numSystem, weaponSystem, skillSystem,\r\n            hintSystem, propSystem);\r\n\r\n        this.coinIconNode = this.getNodeByPath(\"ui/top/coinLayer/icon\");\r\n        this.coinNumNode = this.getNodeByPath(\"ui/top/coinLayer/num\");\r\n        this.diamondNumNode = this.getNodeByPath(\"ui/top/diamondLayer/num\");\r\n        this.killMonsterNumNode = this.getNodeByPath(\"ui/top/monsterLayer/num\");\r\n\r\n        this.expProgress = this.getNodeByPath(\"ui/expProgress\");\r\n        this.expLvNode = this.getNodeByPath(\"ui/expProgress/lv\")\r\n        this.expBarShineColor = this.getNodeByPath(\"ui/expProgress/bar\").addComponent(ShineColor);\r\n\r\n        this.bossHpLayer = this.getNodeByPath(\"ui/bossHpLayer\");\r\n        this.bossDamProgressBar = this.getNodeByPath(\"ui/bossHpLayer/damProgress\").getComponent(ProgressBar);\r\n        this.bossHpProgress = this.getNodeByPath(\"ui/bossHpLayer/hpProgress\");\r\n        this.bossHpLayer.active = false;\r\n\r\n        this.skillBombIcon = this.getNodeByPath(\"ui/skillBtns/btnSkillBomb/icon\");\r\n        this.skillBombAd = this.getNodeByPath(\"ui/skillBtns/btnSkillBomb/icon/ad\");\r\n        this.skillBombNum = this.getNodeByPath(\"ui/skillBtns/btnSkillBomb/icon/num\");\r\n        this.skillBombCd = this.getNodeByPath(\"ui/skillBtns/btnSkillBomb/cd\");\r\n\r\n        this.btnSkillHeal = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal\");\r\n        this.skillHealIcon = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal/icon\");\r\n        this.skillHealAd = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal/icon/ad\");\r\n        this.skillHealNum = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal/icon/num\");\r\n        this.skillHealCd = this.getNodeByPath(\"ui/skillBtns/btnSkillHeal/cd\");\r\n\r\n        this.skillMagnetAd = this.getNodeByPath(\"ui/skillBtns/btnSkillMagnet/icon/ad\");\r\n        this.skillMagnetNum = this.getNodeByPath(\"ui/skillBtns/btnSkillMagnet/icon/num\");\r\n        this.skillLifeAd = this.getNodeByPath(\"ui/skillBtns/btnSkillLife/icon/ad\");\r\n        this.skillLifeNum = this.getNodeByPath(\"ui/skillBtns/btnSkillLife/icon/num\");\r\n\r\n        this.timeNode = this.getNodeByPath(\"ui/top/time\");\r\n\r\n        this.getNodeByPath(\"ui/infoDev\").active = playerModel.isInDevelopmentEnvironment();\r\n        this.monsterNumNode = this.getNodeByPath(\"ui/infoDev/monsterNum\");\r\n        this.showNumNode = this.getNodeByPath(\"ui/infoDev/showNum\");\r\n        this.playerPosNode = this.getNodeByPath(\"ui/infoDev/playerPos\");\r\n        this.expNumNode = this.getNodeByPath(\"ui/infoDev/expNum\");\r\n\r\n        let mapData = UserData.getInstance().mapData;\r\n        if (mapData) {\r\n            // 战斗中断\r\n            this.loadSaveMapData(mapData);\r\n        } else {\r\n            // 新的开始\r\n            mapModel.player.initData(this.layerData);\r\n            mapModel.weaponSystem.initData(this.layerData);\r\n        }\r\n\r\n        this.openUpdateSecond = true;\r\n        audioManager.playMusic(constants.audioNames.map);\r\n\r\n        this.schedule(this.popBuyLifeLayer, this.getPopBuyLifeTime());\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.mapLeave,\r\n            msgac.saveDataBefore,\r\n            msgac.commonResRefresh,\r\n            msgac.mapRefreshSkill,\r\n        ]);\r\n\r\n        // test 武器\r\n        // this.scheduleOnce(() => {\r\n        //     mapModel.weaponSystem.addWeapon(4);\r\n        // }, 1);\r\n\r\n        // // test 技能\r\n        // this.scheduleOnce(() => {\r\n        //     for (let i = 0; i < 1; i++) {\r\n        //         mapModel.skillSystem.addSkill(10);\r\n        //     }\r\n        // }, 1);\r\n        // this.scheduleOnce(() => {\r\n        //     mapModel.skillSystem.addSkill(7);\r\n        // }, 5);\r\n        // this.scheduleOnce(() => {\r\n        //     mapModel.skillSystem.addSkill(7);\r\n        // }, 8);\r\n\r\n        // // test 被动技能\r\n        // this.scheduleOnce(() => {\r\n        //     for (let i = 0; i < 6; i++) {\r\n        //         mapModel.skillSystem.addSkill2(12);\r\n        //     }\r\n        //     myLog.i(\"被动技能添加了\");\r\n        // }, 10);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        if (!UserData.getInstance().mapHand) {\r\n            UserData.getInstance().mapHand = 1;\r\n            this.scheduleOnce(() => {\r\n                this.popLayer(constants.layers.HandLayer);\r\n            });\r\n        }\r\n        tyqSDK.eventSendCustomEvent(\"进入战斗场景\", \"玩家人数\")\r\n        //console.log(\"mapModel.mapId = \", mapModel.mapId)\r\n        tyqSDK.eventLevelStart(mapModel.mapId)\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshExpLayer();\r\n        this.refreshBossHpLayer();\r\n        this.refreshResLayer();\r\n        this.refreshSkillLayer();\r\n    }\r\n\r\n    popBuyLifeLayer() {\r\n        if (UserData.getInstance().baoshi < designManager.config.backLifeDiamond) {\r\n            return;\r\n        }\r\n        this.popLayer(constants.layers.BuyLifeLayer);\r\n    }\r\n\r\n    // 强弹复活购买界面间隔时间，单位：秒\r\n    getPopBuyLifeTime() {\r\n        return 60 * 3;\r\n    }\r\n\r\n    refreshSkillLayer() {\r\n        this.skillBombAd.active = false;\r\n        this.skillBombNum.active = false;\r\n        if (playerModel.skillBombNum > 0) {\r\n            this.skillBombNum.active = true;\r\n            this.setString(this.skillBombNum, playerModel.skillBombNum);\r\n        } else {\r\n            this.skillBombAd.active = true;\r\n        }\r\n\r\n        this.skillHealAd.active = false;\r\n        this.skillHealNum.active = false;\r\n        if (playerModel.skillHealNum > 0) {\r\n            this.skillHealNum.active = true;\r\n            this.setString(this.skillHealNum, playerModel.skillHealNum);\r\n        } else {\r\n            this.skillHealAd.active = true;\r\n        }\r\n\r\n        this.skillMagnetAd.active = false;\r\n        this.skillMagnetNum.active = false;\r\n        if (playerModel.skillMagnetNum > 0) {\r\n            this.skillMagnetNum.active = true;\r\n            this.setString(this.skillMagnetNum, playerModel.skillMagnetNum);\r\n        } else {\r\n            this.skillMagnetAd.active = true;\r\n        }\r\n\r\n        this.skillLifeAd.active = false;\r\n        this.skillLifeNum.active = false;\r\n        if (playerModel.skillLifeNum > 0) {\r\n            this.skillLifeNum.active = true;\r\n            this.setString(this.skillLifeNum, playerModel.skillLifeNum);\r\n        } else {\r\n            this.skillLifeAd.active = true;\r\n        }\r\n    }\r\n\r\n    mapRefreshSkillRet() {\r\n        this.refreshSkillLayer();\r\n    }\r\n\r\n    updateSecond() {\r\n        // if (mapModel.mapSystem.skillBombCd > 0) {\r\n        //     this.skillBombCd.active = true;\r\n        //     cocosUtil.setRenderableColor(this.skillBombIcon, constants.colors.yin.parseColor());\r\n        //     this.setString(this.skillBombCd, Math.ceil(mapModel.mapSystem.skillBombCd));\r\n        // } else {\r\n        //     this.skillBombCd.active = false;\r\n        //     cocosUtil.setRenderableColor(this.skillBombIcon, Color.WHITE);\r\n        // }\r\n        // if (mapModel.mapSystem.skillHealCd > 0) {\r\n        //     this.skillHealCd.active = true;\r\n        //     cocosUtil.setRenderableColor(this.skillHealIcon, constants.colors.yin.parseColor());\r\n        //     this.setString(this.skillHealCd, Math.ceil(mapModel.mapSystem.skillHealCd));\r\n        // } else {\r\n        //     this.skillHealCd.active = false;\r\n        //     cocosUtil.setRenderableColor(this.skillHealIcon, Color.WHITE);\r\n        // }\r\n        if (mapModel.player.hp / mapModel.player.hpMax < 0.25 && mapModel.player.hp > 0 && !mapModel.healAdCount) {\r\n            // 强制弹出激励视频，观看后，恢复血量\r\n            mapModel.healAdCount++;\r\n            myLog.i(\"==========血量小于0.25强弹广告治疗\");\r\n            sdkManager.openAd(\"血量小于0.25强弹广告治疗\", (st) => {\r\n                if (st == 1) {\r\n                    mapModel.player.useSkillHeal(0.25);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (mapModel.player.hp / mapModel.player.hpMax < 0.5 && !this.btnSkillHeal.isBreath) {\r\n            this.btnSkillHeal.isBreath = true;\r\n            cocosUtil.tweenBreath(this.btnSkillHeal);\r\n        }\r\n        if (mapModel.player.hp / mapModel.player.hpMax > 0.5 && this.btnSkillHeal.isBreath) {\r\n            this.btnSkillHeal.isBreath = false;\r\n            Tween.stopAllByTarget(this.btnSkillHeal);\r\n            this.btnSkillHeal.scale = v3(1, 1, 1);\r\n        }\r\n    }\r\n\r\n    refreshBossHpLayer() {\r\n        let bossMonster = mapModel.monsterSystem.bossMonster;\r\n        if (bossMonster) {\r\n            this.setProgressBar(this.bossHpProgress, bossMonster.hp / bossMonster.hpMax);\r\n            if (!this.bossHpLayer.active) {\r\n                this.bossHpLayer.active = true;\r\n                Tween.stopAllByTarget(this.bossDamProgressBar);\r\n                this.bossDamProgressBar.progress = this.bossHpProgress.getComponent(ProgressBar).progress;\r\n            }\r\n        } else {\r\n            this.bossHpLayer.active = false;\r\n        }\r\n    }\r\n\r\n    bossSubHp(dam: number) {\r\n        let pStart = this.bossHpProgress.getComponent(ProgressBar).progress;\r\n        this.bossDamProgressBar.progress = pStart;\r\n\r\n        mapModel.mapLayer.refreshBossHpLayer();\r\n        let pEnd = this.bossHpProgress.getComponent(ProgressBar).progress;\r\n\r\n        Tween.stopAllByTarget(this.bossDamProgressBar);\r\n        tween(this.bossDamProgressBar).to(0.5, { progress: pEnd }, { easing: \"quadOut\" }).start();\r\n    }\r\n\r\n    refreshResLayer() {\r\n        this.setString(this.coinNumNode, mapModel.coinNum);\r\n        this.setString(this.diamondNumNode, UserData.getInstance().baoshi);\r\n        this.setString(this.killMonsterNumNode, mapModel.killMonsterNum);\r\n    }\r\n\r\n    refreshExpLayer() {\r\n        let row = designManager.getRowById(constants.tableName.expLv, mapModel.expLv);\r\n        if (!row) {\r\n            return;\r\n        }\r\n        let total = row.exp;\r\n        let current = mapModel.expNum;\r\n        if (mapModel.expLv > 1) {\r\n            let lastRow = designManager.getRowById(constants.tableName.expLv, mapModel.expLv - 1);\r\n            total = row.exp - lastRow.exp;\r\n            current = mapModel.expNum - lastRow.exp;\r\n        }\r\n        this.setProgressBar(this.expProgress, current / total);\r\n        this.setString(this.expLvNode, mapModel.expLv);\r\n        // 闪白\r\n        this.expBarShineColor.startShine(constants.materials.shineColor, null, 0.2);\r\n\r\n        if (mapModel.expNum >= row.exp && mapModel.player.hp > 0) {\r\n            // 升级了\r\n            this.expLvUpCount++;\r\n            mapModel.expLv++;\r\n            if (mapModel.expLv % designManager.config.check == 0) {\r\n                mapModel.skillAllNum++;\r\n            }\r\n            this.expBarColorIndex++;\r\n            if (this.expBarColorIndex >= this.expBarColorArr.length) {\r\n                this.expBarColorIndex = 0;\r\n            }\r\n            cocosUtil.setRenderableColor(find(\"bar\", this.expProgress), this.expBarColorArr[this.expBarColorIndex]);\r\n            this.refreshExpLayer();\r\n            this.unschedule(this.onSkillSelect);\r\n            this.scheduleOnce(this.onSkillSelect, 0.5);\r\n        }\r\n    }\r\n\r\n    onSkillSelect() {\r\n        if (this.expLvUpCount <= 0) {\r\n            return;\r\n        }\r\n\r\n        if (mapModel.player.hp > 0 && !playerModel.isRecordAd) {\r\n            this.expProgress.active = false;\r\n            let obj: any = {};\r\n            obj.lvCount = this.expLvUpCount;\r\n            this.popLayer(constants.layers.SkillSelectLayer, obj, () => {\r\n                this.expProgress.active = true;\r\n            });\r\n        }\r\n\r\n        if (mapModel.player.hp > 0) {\r\n            this.expLvUpCount = 0;\r\n        }\r\n    }\r\n\r\n    popLayer(layerName: string, layerData?: any, layerCb?: Function) {\r\n        if (this.isShowingLayer(layerName)) {\r\n            return;\r\n        }\r\n        this.gameFightPause();\r\n        this.openLayer(layerName, layerData, () => {\r\n            this.gameFightResume();\r\n            if (layerCb) {\r\n                layerCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    refreshTimeNode() {\r\n        let timeStr = utilTools.getTimeStr(mapModel.time * 1000, true);\r\n        this.setString(this.timeNode, timeStr);\r\n    }\r\n\r\n    gameFightPause() {\r\n        this.mapSystem.fightPause();\r\n    }\r\n\r\n    gameFightResume() {\r\n        this.mapSystem.fightResume();\r\n    }\r\n\r\n    mapLeaveRet(data: any) {\r\n        UserData.getInstance().mapData = null;\r\n        this.closeLayer();\r\n        this.openLayer(constants.layers.HomeLayer, data);\r\n    }\r\n\r\n    commonResRefreshRet(data: any) {\r\n        this.refreshResLayer();\r\n    }\r\n\r\n    loadSaveMapData(mapData: any) {\r\n        mapModel.loadSaveData(mapData.mapModel);\r\n        mapModel.mapSystem.loadSaveData(mapData.mapData);\r\n        mapModel.propSystem.loadSaveData(mapData.propData);\r\n        mapModel.weaponSystem.loadSaveData(mapData.weaponData);\r\n        mapModel.skillSystem.loadSaveData(mapData.skillData);\r\n        mapModel.player.loadSaveData(mapData.player);\r\n        mapModel.monsterSystem.loadSaveData(mapData.monsterData);\r\n    }\r\n\r\n    saveDataBeforeRet(data: any) {\r\n        if (mapModel.player.hp <= 0) {\r\n            return;\r\n        }\r\n        mapModel.propSystem.saveDataBefore();\r\n\r\n        let mapData: any = {};\r\n        mapData.mapModel = mapModel.getSaveData();\r\n        mapData.mapData = mapModel.mapSystem.getSaveData();\r\n        mapData.propData = mapModel.propSystem.getSaveData();\r\n        mapData.weaponData = mapModel.weaponSystem.getSaveData();\r\n        mapData.skillData = mapModel.skillSystem.getSaveData();\r\n        mapData.player = mapModel.player.getSaveData();\r\n        mapData.monsterData = mapModel.monsterSystem.getSaveData();\r\n\r\n        UserData.getInstance().mapData = mapData;\r\n    }\r\n\r\n    onClickBtnSkillBomb() {\r\n        if (mapModel.mapSystem.skillBombCd > 0) {\r\n            this.createNotice(localText.cd);\r\n            return;\r\n        }\r\n        if (playerModel.skillBombNum > 0) {\r\n            mapModel.mapSystem.useSkillBomb();\r\n            this.refreshSkillLayer();\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"主动技能-炸弹\", (st: number) => {\r\n            if (st == 1) {\r\n                let num = utilTools.getFloatValue(1, 3, true);\r\n                playerModel.skillBombNum += num;\r\n                this.refreshSkillLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnSkillHeal() {\r\n        if (mapModel.mapSystem.skillHealCd > 0) {\r\n            this.createNotice(localText.cd);\r\n            return;\r\n        }\r\n        if (playerModel.skillHealNum > 0) {\r\n            mapModel.mapSystem.useSkillHeal();\r\n            this.refreshSkillLayer();\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"主动技能-治疗\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillHealNum += 4;\r\n                this.refreshSkillLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnSkillMagnet() {\r\n        if (playerModel.skillMagnetNum > 0) {\r\n            mapModel.mapSystem.useSkillMagnet();\r\n            this.refreshSkillLayer();\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"主动技能-磁铁\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillMagnetNum++;\r\n                this.refreshSkillLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnSkillLife() {\r\n        if (playerModel.skillLifeNum > 0) {\r\n            return;\r\n        }\r\n\r\n        sdkManager.openAd(\"主动技能-自动复活\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillLifeNum++;\r\n                this.refreshSkillLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnPause(node: Node) {\r\n        this.popLayer(constants.layers.PauseLayer);\r\n    }\r\n\r\n    onClickBtnClose(node: Node) {\r\n        serverMsg.send(msgac.mapLeave);\r\n    }\r\n\r\n    onClickBtnSkillSelectLayer() {\r\n        this.popLayer(constants.layers.SkillSelectLayer);\r\n    }\r\n\r\n    onClickBtnResume() {\r\n        this.gameFightResume();\r\n    }\r\n\r\n    onClickBtnBoss() {\r\n        if (mapModel.time < 300) {\r\n            mapModel.time = 295;\r\n        } else if (mapModel.time < 600 && mapModel.time > 305) {\r\n            mapModel.time = 595;\r\n        } else if (mapModel.time > 605) {\r\n            mapModel.time = 895;\r\n        }\r\n    }\r\n\r\n    onClickBtnLuckyDraw() {\r\n        // this.popLayer(constants.layers.LuckyDrawLayer);\r\n        this.popLayer(constants.layers.BoxMonsterLayer);\r\n    }\r\n\r\n    onClickBtnAccountClear() {\r\n        UserData.getInstance().clearAccountData();\r\n    }\r\n\r\n    onClickBtnMonsterAdd() {\r\n        if (!this.monsterAddFlag) {\r\n            this.monsterAddFlag = 0;\r\n        }\r\n        this.monsterAddFlag++;\r\n    }\r\n\r\n}\r\n\r\n","import { Camera, find, Node, Prefab, SpriteFrame, UITransform, view } from \"cc\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { utilTools } from \"../../utils/utilTools\";\r\nimport { Player } from \"../compoment/item/Player\";\r\nimport { MapLayer } from \"../compoment/layer/MapLayer\";\r\nimport { BulletSystem } from \"../compoment/sys/BulletSystem\";\r\nimport { HintSystem } from \"../compoment/sys/HintSystem\";\r\nimport { MapSystem } from \"../compoment/sys/MapSystem\";\r\nimport { MonsterSystem } from \"../compoment/sys/MonsterSystem\";\r\nimport { NumSystem } from \"../compoment/sys/NumSystem\";\r\nimport { PropSystem } from \"../compoment/sys/PropSystem\";\r\nimport { SkillSystem } from \"../compoment/sys/SkillSystem\";\r\nimport { WeaponSystem } from \"../compoment/sys/WeaponSystem\";\r\nimport { constants } from \"../data/constants\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { resManager } from \"../manager/resManager\";\r\nimport { serverMsg } from \"../other/serverMsg\";\r\nimport { playerModel } from \"./playerModel\";\r\nimport { PropItem, UserData } from \"./UserData\";\r\n\r\nclass MapModel {\r\n    private static _instance: MapModel;\r\n    private constructor() { }\r\n    public static get instance(): MapModel {\r\n        if (!this._instance) {\r\n            this._instance = new MapModel();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    // 半屏幕尺寸\r\n    visibleHalfSize: any;\r\n\r\n    mapFightLayer: Node;\r\n    mapFightCamera: Camera;\r\n    // 镜头初始视角\r\n    cameraOrthoHeight: number;\r\n\r\n    mapLayer: MapLayer;\r\n    player: Player;\r\n    mapSystem: MapSystem;\r\n    monsterSystem: MonsterSystem;\r\n    bulletSystem: BulletSystem;\r\n    numSystem: NumSystem;\r\n    skillSystem: SkillSystem;\r\n    weaponSystem: WeaponSystem;\r\n    hintSystem: HintSystem;\r\n    propSystem: PropSystem;\r\n\r\n    mapId: number;\r\n    floor: number;\r\n    // 战斗时长\r\n    time: number;\r\n\r\n    // 经验池数量\r\n    expPool: number;\r\n    // 经验增长模型\r\n    expTypeRow: any;\r\n    // 已获得的经验值\r\n    expNum: number;\r\n    // 经验等级\r\n    expLv: number;\r\n\r\n    // 装备数组\r\n    equipIdArr = [];\r\n\r\n    // 金币数量\r\n    coinNum: number;\r\n    // 击杀怪物数量\r\n    killMonsterNum: number;\r\n\r\n    // 出怪计划\r\n    mapLevelArr: any[];\r\n\r\n    // 3选1全都要次数\r\n    skillAllNum: number;\r\n\r\n    monsterPrefabObj: any = {};\r\n    bulletPrefabObj: any = {};\r\n\r\n    // 距离多远后隐藏节点，变成单纯的移动计算，不显示节点\r\n    dataRadius: number;\r\n    // 距离多远后，销毁节点数据\r\n    destroyRadius: number;\r\n\r\n    healAdCount: number = 0;\r\n\r\n    initData(data: any, now: Date) {\r\n        if (!data) {\r\n            data = {};\r\n        }\r\n\r\n        let visibleSize = view.getVisibleSize();\r\n        this.visibleHalfSize = {\r\n            width: visibleSize.width * 0.5,\r\n            height: visibleSize.height * 0.5\r\n        };\r\n        this.dataRadius = visibleSize.height * 0.6;\r\n        this.destroyRadius = visibleSize.height * 1.5;\r\n\r\n        this.mapFightCamera = find(\"CanvasMapFight/Camera\").getComponent(Camera);\r\n        this.cameraOrthoHeight = this.mapFightCamera.orthoHeight;\r\n    }\r\n\r\n    getSaveData() {\r\n        let data: any = {};\r\n        data.mapId = this.mapId;\r\n        data.floor = this.floor;\r\n        data.time = this.time;\r\n        data.expPool = this.expPool;\r\n        data.expTypeRow = this.expTypeRow;\r\n        data.expNum = this.expNum;\r\n        data.expLv = this.expLv;\r\n        data.coinNum = this.coinNum;\r\n        data.killMonsterNum = this.killMonsterNum;\r\n        data.mapLevelArr = this.mapLevelArr;\r\n        data.skillAllNum = this.skillAllNum;\r\n        data.equipIdArr = this.equipIdArr;\r\n        data.healAdCount = this.healAdCount;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        this.mapId = data.mapId;\r\n        this.floor = data.floor;\r\n        this.time = data.time;\r\n        this.expPool = data.expPool;\r\n        this.expTypeRow = data.expTypeRow;\r\n        this.expNum = data.expNum;\r\n        this.expLv = data.expLv;\r\n        this.coinNum = data.coinNum;\r\n        this.killMonsterNum = data.killMonsterNum;\r\n        this.mapLevelArr = data.mapLevelArr;\r\n        this.skillAllNum = data.skillAllNum;\r\n        this.equipIdArr = data.equipIdArr;\r\n        this.healAdCount = data.healAdCount;\r\n    }\r\n\r\n    enterMapWithMapId(mapId: number, floor: number = 0) {\r\n        let obj: any = {};\r\n        obj.mapId = mapId;\r\n        obj.floor = floor;\r\n\r\n        let row = designManager.getRowById(constants.tableName.map, mapId);\r\n\r\n        // hp atk weaponId\r\n        if (row.type == constants.mapTypes.main) {\r\n            obj.hp = UserData.getInstance().life;\r\n            obj.atk = UserData.getInstance().attack;\r\n            if (UserData.getInstance().wearProp[0] > 0) {\r\n                let curDrop = designManager.getRowById(constants.tableName.prop, UserData.getInstance().wearProp[0])\r\n                if (curDrop && curDrop.type == 11) {\r\n                    obj.weaponId = curDrop.weaponid\r\n                } else {\r\n                    obj.weaponId = 0\r\n                }\r\n            } else {\r\n                obj.weaponId = 0\r\n            }\r\n        } else if (row.type == constants.mapTypes.tower) {\r\n            let info = UserData.getInstance().getTowerRoleProInfo(true);\r\n            obj.hp = info.hp;\r\n            obj.atk = info.atk;\r\n            let propRow = designManager.getRowById(constants.tableName.prop, UserData.getInstance().$towerWeaponId);\r\n            obj.weaponId = propRow.weaponid;\r\n        }\r\n\r\n        serverMsg.send(msgac.mapEnter, obj);\r\n    }\r\n\r\n    loadMapFightLayer() {\r\n        return new Promise((resolve) => {\r\n            if (this.mapFightLayer) {\r\n                resolve();\r\n                return;\r\n            }\r\n            resManager.loadAsset(constants.bundles.layer, constants.layers.MapFightLayer, Prefab, () => { }, (err, prefab) => {\r\n                this.mapFightLayer = cocosUtil.instantiate(prefab);\r\n                this.mapFightLayer.parent = find(\"CanvasMapFight\");\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    setCompoments(mapLayer: MapLayer, player: Player, mapSystem: MapSystem, monsterSystem: MonsterSystem,\r\n        bulletSystem: BulletSystem, numSystem: NumSystem, weaponSystem: WeaponSystem, skillSystem: SkillSystem,\r\n        hintSystem: HintSystem, propSystem: PropSystem) {\r\n        this.mapLayer = mapLayer;\r\n        this.player = player;\r\n        this.mapSystem = mapSystem;\r\n        this.monsterSystem = monsterSystem;\r\n        this.bulletSystem = bulletSystem;\r\n        this.numSystem = numSystem;\r\n        this.weaponSystem = weaponSystem;\r\n        this.skillSystem = skillSystem;\r\n        this.hintSystem = hintSystem;\r\n        this.propSystem = propSystem;\r\n    }\r\n\r\n    isInScreenVisible(node: Node) {\r\n        if (!node || !node.parent) {\r\n            return false;\r\n        }\r\n        let pos = cocosUtil.convertToWorldSpace(node);\r\n        let playerPos = cocosUtil.convertToWorldSpace(this.player.node);\r\n        let tf = node.getComponent(UITransform);\r\n        let add = tf.width + tf.height;\r\n        if ((Math.abs(pos.x - playerPos.x) <= this.visibleHalfSize.width + add + 150)\r\n            && (Math.abs(pos.y - playerPos.y) <= this.visibleHalfSize.height + add)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    mapEnter(data: any) {\r\n        if (this.mapId) {\r\n            data.st = 2;\r\n            return;\r\n        }\r\n        this.mapFightCamera.orthoHeight = this.cameraOrthoHeight;\r\n\r\n        let mapId = data.mapId;\r\n\r\n        this.mapId = mapId;\r\n        this.floor = data.floor;\r\n\r\n        let mapRow = designManager.getRowById(constants.tableName.map, mapId);\r\n\r\n        // test\r\n        // arr = [arr[0]];\r\n\r\n        this.time = 0;\r\n\r\n        this.expPool = 0;\r\n        this.expTypeRow = designManager.getRowById(constants.tableName.expType, mapRow.expType * 100 + 1);\r\n        this.expNum = 0;\r\n        this.expLv = 1;\r\n\r\n        this.coinNum = 0;\r\n        this.killMonsterNum = 0;\r\n\r\n        this.healAdCount = 0;\r\n\r\n        this.skillAllNum = 0;\r\n        this.equipIdArr = [];\r\n\r\n        playerModel.skillBombNum = 1;\r\n        playerModel.skillHealNum = 1;\r\n        playerModel.skillMagnetNum = 0;\r\n        playerModel.skillLifeNum = 0;\r\n\r\n        this.createMapLevelArr();\r\n\r\n        data.st = 1;\r\n    }\r\n\r\n    createMapLevelArr() {\r\n        this.mapLevelArr = [];\r\n\r\n        let arr = designManager.getRowsByType(constants.tableName.level, this.mapId);\r\n        if (!arr) {\r\n            return;\r\n        }\r\n\r\n        arr.forEach((row: any) => {\r\n            if (row.startTime <= mapModel.time) {\r\n                return;\r\n            }\r\n            let mapLevel: any = {};\r\n            mapLevel.id = row.id;\r\n            mapLevel.row = row;\r\n            mapLevel.timeCount = 0;\r\n            mapLevel.createCount = 0;\r\n            this.mapLevelArr.push(mapLevel);\r\n        });\r\n    }\r\n\r\n    mapLeave(data: any) {\r\n        if (!this.mapId) {\r\n            data.st = 2;\r\n            return;\r\n        }\r\n\r\n        this.mapFightLayer.destroy();\r\n        this.mapFightLayer = null;\r\n\r\n        this.mapId = 0;\r\n        this.floor = 0;\r\n\r\n        data.st = 1;\r\n    }\r\n\r\n    // 进入地图之前，加载必要的资源\r\n    loadMapRes(progressCb: Function, endCb: Function) {\r\n        this.loadMonsterAndBulletRes((percent: number) => {\r\n            progressCb(percent);\r\n        }, () => {\r\n            this.loadMapFightLayer().then(() => {\r\n                endCb();\r\n            });\r\n        });\r\n    }\r\n\r\n    loadMonsterAndBulletRes(progressCb: Function, endCb: Function) {\r\n        let sum = 3;\r\n        let onePercent = 1 / sum;\r\n        let monsterPercent = 0;\r\n        let bulletPercent = 0;\r\n        let otherPercent = 0;\r\n\r\n        let tmpFunc = () => {\r\n            let p = monsterPercent * onePercent + bulletPercent * onePercent + otherPercent * onePercent;\r\n            progressCb(p);\r\n        };\r\n        let tmpFunc2 = () => {\r\n            if (monsterPercent + bulletPercent + otherPercent == sum) {\r\n                endCb();\r\n            }\r\n        };\r\n\r\n        this.loadMonsterPrefabArr((percent: number) => {\r\n            monsterPercent = percent;\r\n            tmpFunc();\r\n        }, () => {\r\n            monsterPercent = 1;\r\n            tmpFunc2();\r\n        });\r\n        this.loadBulletRes((percent: number) => {\r\n            bulletPercent = percent;\r\n            tmpFunc();\r\n        }, () => {\r\n            bulletPercent = 1;\r\n            tmpFunc2();\r\n        });\r\n        this.loadOtherRes((percent: number) => {\r\n            otherPercent = percent;\r\n            tmpFunc();\r\n        }, () => {\r\n            otherPercent = 1;\r\n            tmpFunc2();\r\n        });\r\n\r\n    }\r\n\r\n    // 其他碎片资源，比如：背景图，围栏等\r\n    loadOtherRes(progressCb: Function, endCb: Function) {\r\n        let mapRow = designManager.getRowById(constants.tableName.map, this.mapId);\r\n        let pathArr = [\r\n            \"map/\" + mapRow.bg,\r\n            \"wall/\" + mapRow.wall + \"_v\",\r\n            \"wall/\" + mapRow.wall + \"_h\",\r\n        ];\r\n        resManager.loadAssetByPathArr(constants.bundles.icon, pathArr, SpriteFrame, progressCb, endCb);\r\n    }\r\n\r\n    // 加载子弹的资源\r\n    loadBulletRes(progressCb: Function, endCb: Function) {\r\n        this.bulletPrefabObj = {};\r\n        let arr = [];\r\n        let pathArr = [];\r\n        arr.forEach((id: number) => {\r\n            let row = designManager.getRowById(constants.tableName.bullet, id);\r\n            let path = row.prefab;\r\n            pathArr.push(path);\r\n        });\r\n        resManager.loadAssetByPathArr(constants.bundles.bullet, pathArr, Prefab, progressCb, (assetArr: any) => {\r\n            assetArr.forEach((asset: any) => {\r\n                this.bulletPrefabObj[asset.name] = asset;\r\n            });\r\n            endCb();\r\n        });\r\n    }\r\n\r\n    // 加载怪物资源\r\n    loadMonsterPrefabArr(progressCb: Function, endCb: Function) {\r\n        this.monsterPrefabObj = {};\r\n        let idArr = [];\r\n        let arr = designManager.getRowsByType(constants.tableName.level, this.mapId);\r\n        utilTools.forArr(arr, (row: any) => {\r\n            if (idArr.indexOf(row.monsterId) == -1) {\r\n                idArr.push(row.monsterId);\r\n            }\r\n        });\r\n\r\n        // 召唤怪和通用怪目前较少，暂时直接在这里添加\r\n        idArr.push(14);\r\n\r\n        let pathArr = [];\r\n        idArr.forEach((id: number) => {\r\n            let row = designManager.getRowById(constants.tableName.monster, id);\r\n            let path = row.prefab + \"/monster\";\r\n            pathArr.push(path);\r\n        });\r\n        resManager.loadAssetByPathArr(constants.bundles.monster, pathArr, Prefab, progressCb, (assetArr: any) => {\r\n            assetArr.forEach((asset: any) => {\r\n                let path = asset.path;\r\n                let name = path.split(\"/\")[0];\r\n                this.monsterPrefabObj[name] = asset;\r\n            });\r\n            endCb();\r\n        });\r\n\r\n    }\r\n\r\n    parseDesignPropArr(reward: any) {\r\n        let arr = [];\r\n        reward.forEach((item: any) => {\r\n            let data: PropItem = {\r\n                Id: item[0],\r\n                Num: item[1]\r\n            };\r\n            arr.push(data);\r\n        });\r\n        return arr;\r\n    }\r\n\r\n}\r\n\r\nexport const mapModel = MapModel.instance;","import { BoxCollider2D, director, find, macro, Node, RenderTexture, Sprite, SpriteFrame, tween, Tween, UIOpacity, UITransform, v3, Vec2, Vec3, view, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { physicsWorld } from '../../engine/PhysicsWorld';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { Bullet } from '../item/bullet/Bullet';\r\nimport { Monster } from '../item/monsters/Monster';\r\nimport { Prop } from '../item/prop/Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MapSystem')\r\nexport class MapSystem extends BaseLayer {\r\n\r\n    mapFightBgLayer: Node;\r\n\r\n    staticNode: Node;\r\n    // 炸弹\r\n    bombAnimationCtrl: AnimationCtrl;\r\n    // 预警\r\n    warnAnimationCtrl: AnimationCtrl;\r\n    // 技能炸弹\r\n    skillBombAniCtrl: AnimationCtrl;\r\n\r\n    // boss出现位置提示\r\n    bossPosHintAnimationCtrl: AnimationCtrl;\r\n\r\n    // 宝箱提示\r\n    boxHintNode: Node;\r\n    boxArrowNode: Node;\r\n\r\n    mapRow: any;\r\n    pauseVal: number;\r\n\r\n    // 围栏\r\n    wallLayer: Node;\r\n    wallShineNode: Node;\r\n    wallTopNode: Node;\r\n    wallBottomNode: Node;\r\n    wallLeftNode: Node;\r\n    wallRightNode: Node;\r\n    wallTopVal: number;\r\n    wallBottomVal: number;\r\n    wallLeftVal: number;\r\n    wallRightVal: number;\r\n    wallCenterPos: Vec3;\r\n\r\n    // 是否停止时间统计\r\n    stopTimeCount: boolean;\r\n    // 经验池产出时间累计\r\n    expTimeCount: number;\r\n    // 击杀怪物数量累计，用于木箱的产生\r\n    killMonsterCount: number;\r\n    // 复活次数\r\n    backlifeCount: number = 0;\r\n\r\n    // 技能：炸弹cd\r\n    skillBombCd: number = 0;\r\n    // 技能：治疗cd\r\n    skillHealCd: number = 0;\r\n\r\n    nineForArr: any = [\r\n        { x: -1, y: 1 }, { x: 0, y: 1 }, { x: 1, y: 1 },\r\n        { x: -1, y: 0 }, { x: 0, y: 0 }, { x: 1, y: 0 },\r\n        { x: -1, y: -1 }, { x: 0, y: -1 }, { x: 1, y: -1 }\r\n    ];\r\n\r\n    // Vec3集中缓存\r\n    vec3Obj = {\r\n        nodePos: v3(0, 0, 0),\r\n    };\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.mapFightBgLayer = this.getNodeByPath(\"map/bg\");\r\n\r\n        this.wallLayer = this.getNodeByPath(\"map/wallLayer\");\r\n        this.wallTopNode = this.getNodeByPath(\"map/wallLayer/top\");\r\n        this.wallBottomNode = this.getNodeByPath(\"map/wallLayer/bottom\");\r\n        this.wallLeftNode = this.getNodeByPath(\"map/wallLayer/left\");\r\n        this.wallRightNode = this.getNodeByPath(\"map/wallLayer/right\");\r\n        this.wallShineNode = this.getNodeByPath(\"map/wallLayer/shine\");\r\n        this.wallLayer.active = false;\r\n\r\n        this.staticNode = this.getNodeByPath(\"static\");\r\n\r\n        this.bombAnimationCtrl = this.getNodeByPath(\"static/bomb\").addComponent(AnimationCtrl);\r\n        this.bombAnimationCtrl.node.active = false;\r\n\r\n        this.skillBombAniCtrl = this.getNodeByPath(\"static/skillBomb\").addComponent(AnimationCtrl);\r\n        this.skillBombAniCtrl.node.active = false;\r\n\r\n        this.warnAnimationCtrl = this.getNodeByPath(\"static/warn\").addComponent(AnimationCtrl);\r\n        this.warnAnimationCtrl.node.active = false;\r\n        this.screenAdapterBG(this.warnAnimationCtrl.node);\r\n\r\n        this.bossPosHintAnimationCtrl = this.getNodeByPath(\"map/bossPosHint\").addComponent(AnimationCtrl);\r\n        this.bossPosHintAnimationCtrl.node.active = false;\r\n\r\n        this.boxHintNode = this.getNodeByPath(\"static/boxHint\");\r\n        this.boxHintNode.active = false;\r\n        this.boxArrowNode = this.getNodeByPath(\"static/boxHint/arrow\");\r\n        cocosUtil.tweenBreath(this.getNodeByPath(\"static/boxHint/icon\"), 0.4, 1.2);\r\n        cocosUtil.tweenBreath(this.getNodeByPath(\"static/boxHint/arrow/icon\"), 0.2, 1.2);\r\n\r\n        // if (playerModel.isInDevelopmentEnvironment()) {\r\n        //     PhysicsSystem2D.instance.debugDrawFlags = EPhysics2DDrawFlags.Shape;\r\n        // }\r\n        // PhysicsSystem2D.instance.enable = false;\r\n\r\n        this.mapRow = designManager.getRowById(constants.tableName.map, mapModel.mapId);\r\n        this.expTimeCount = 0;\r\n        this.pauseVal = 0;\r\n        this.killMonsterCount = 0;\r\n        this.stopTimeCount = false;\r\n\r\n        // 镜头视角慢恢复\r\n        this.schedule(this.refreshCamera, 0.5, macro.REPEAT_FOREVER);\r\n\r\n        // 开启逻辑帧\r\n        this.schedule(this.updateLogic, 0.1, macro.REPEAT_FOREVER);\r\n\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n    }\r\n\r\n    start() {\r\n        this.scheduleOnce(() => {\r\n            if (UserData.getInstance().mapData) {\r\n                // 战斗中断恢复的\r\n                return;\r\n            }\r\n            // 初始经验\r\n            for (let i = 0; i < 20; i++) {\r\n                let pos = cocosUtil.getRectPos(mapModel.player.node, 400, 700, 600, 1000, true);\r\n                this.createExp(1, pos, true);\r\n            }\r\n        }, 0.5);\r\n\r\n        this.refreshMapFightWindow();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.initMapFightBg();\r\n        this.initWallLayer();\r\n    }\r\n\r\n    initWallLayer() {\r\n        let path = \"wall/\" + this.mapRow.wall + \"_h\";\r\n        this.setSpriteFrame2(this.wallTopNode, path);\r\n        this.setSpriteFrame2(this.wallBottomNode, path);\r\n\r\n        path = \"wall/\" + this.mapRow.wall + \"_v\";\r\n        this.setSpriteFrame2(this.wallLeftNode, path);\r\n        this.setSpriteFrame2(this.wallRightNode, path);\r\n    }\r\n\r\n    initMapFightBg() {\r\n        this.mapFightBgLayer.children.forEach((node: Node) => {\r\n            let path = \"map/\" + this.mapRow.bg;\r\n            this.setSpriteFrame2(node, path);\r\n        });\r\n    }\r\n\r\n    refreshMapFightWindow() {\r\n        // 相机跟随\r\n        let pos = mapModel.player.node.getPosition();\r\n        pos.z = mapModel.mapFightCamera.node.getPosition().z;\r\n        mapModel.mapFightCamera.node.setPosition(pos);\r\n\r\n        this.refreshMapBgLayer();\r\n    }\r\n    refreshMapBgLayer() {\r\n        // 计算出玩家当前位置是属于哪个格子\r\n        let x = Math.floor((mapModel.player.node.getPosition().x + 512) / 1024);\r\n        let y = Math.floor((mapModel.player.node.getPosition().y + 512) / 1024);\r\n        // 遍历九宫调整位置\r\n        this.nineForArr.forEach((info: any, index: number) => {\r\n            let bgNode = this.mapFightBgLayer.children[index];\r\n            if (!bgNode) {\r\n                return;\r\n            }\r\n            let posX = (x + info.x) * 1024;\r\n            let posY = (y + info.y) * 1024;\r\n            bgNode.setPosition(posX, posY);\r\n        });\r\n    }\r\n\r\n    getSaveData() {\r\n        let data: any = {};\r\n        data.expTimeCount = this.expTimeCount;\r\n        data.killMonsterCount = this.killMonsterCount;\r\n        data.backlifeCount = this.backlifeCount;\r\n        data.skillBombCd = this.skillBombCd;\r\n        data.skillHealCd = this.skillHealCd;\r\n        data.stopTimeCount = this.stopTimeCount;\r\n\r\n        // 镜头高度\r\n        data.orthoHeight = mapModel.mapFightCamera.orthoHeight;\r\n\r\n        // 围栏\r\n        let wall = null;\r\n        if (this.wallLayer.active) {\r\n            wall = {};\r\n            wall.centerPos = this.wallCenterPos;\r\n        }\r\n        data.wall = wall;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        this.expTimeCount = data.expTimeCount;\r\n        this.killMonsterCount = data.killMonsterCount;\r\n        this.backlifeCount = data.backlifeCount;\r\n        this.skillBombCd = data.skillBombCd;\r\n        this.skillHealCd = data.skillHealCd;\r\n        this.stopTimeCount = data.stopTimeCount;\r\n\r\n        mapModel.mapFightCamera.orthoHeight = data.orthoHeight;\r\n\r\n        // 围栏\r\n        if (data.wall) {\r\n            let wall = data.wall;\r\n            this.showWallLayer(wall.centerPos);\r\n        }\r\n    }\r\n\r\n    bossDead() {\r\n        this.stopTimeCount = false;\r\n        mapModel.mapSystem.hideWallLayer();\r\n        if (mapModel.monsterSystem.bossMonster.isBoss == 2) {\r\n            // 最后一个BOSS\r\n            mapModel.mapSystem.doSettlement(true);\r\n        } else {\r\n            mapModel.createMapLevelArr();\r\n        }\r\n        mapModel.monsterSystem.bossMonster = null;\r\n        mapModel.mapLayer.refreshBossHpLayer();\r\n    }\r\n\r\n    doSettlement(isWin: boolean = false) {\r\n        let row = designManager.getRowById(constants.tableName.map, mapModel.mapId);\r\n        let arr: PropItem[] = [];\r\n\r\n        // 金币\r\n        let coinNum = mapModel.coinNum + Math.floor(mapModel.time / 60 * 100) + Math.floor(mapModel.killMonsterNum / 5);\r\n        arr.push({ Id: constants.propIds.coin, Num: coinNum });\r\n\r\n        // 装备\r\n        for (let i in mapModel.equipIdArr) {\r\n            arr.push({ Id: mapModel.equipIdArr[i], Num: 1 });\r\n        }\r\n\r\n        // 必拿奖励\r\n        if (row.reward4) {\r\n            arr = arr.concat(mapModel.parseDesignPropArr(row.reward4));\r\n        }\r\n\r\n        // 通关奖励 \r\n        if (isWin && row.reward5) {\r\n            arr = arr.concat(mapModel.parseDesignPropArr(row.reward5));\r\n        }\r\n\r\n        // 按照品质排序\r\n        utilTools.sortArr(arr, (prop1, prop2) => {\r\n            let row1 = designManager.getRowById(constants.tableName.prop, prop1.Id);\r\n            let row2 = designManager.getRowById(constants.tableName.prop, prop2.Id);\r\n            if (row1.quality < row2.quality) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n\r\n        let obj: any = {};\r\n\r\n        let time = Math.floor(mapModel.time);\r\n        obj.time = time;\r\n        let levelData = UserData.getInstance().getLevelData(mapModel.mapId);\r\n        if (time >= levelData.Time) {\r\n            levelData.Time = time;\r\n            UserData.getInstance().setLevelData(levelData);\r\n            obj.isBest = true;\r\n        }\r\n        obj.bestTime = levelData.Time;\r\n\r\n        UserData.getInstance().getRewardProp(arr);\r\n\r\n        obj.isWin = isWin;\r\n        obj.award = arr;\r\n        mapModel.mapLayer.popLayer(constants.layers.SettlementLayer, obj);\r\n       \r\n        tyqSDK.eventLevelEnd(mapModel.mapId, isWin)\r\n        tyqSDK.showInterstitialAd()\r\n        if (time >= 15 * 60) {\r\n            //  myLog.i(\"第\" + mapModel.mapId +\"关-15分钟\")\r\n            tyqSDK.eventSendCustomEvent(\"第\" + mapModel.mapId + \"关-15分钟\")\r\n        } else if (time >= 10 * 60) {\r\n            // myLog.i(\"第\" + mapModel.mapId +\"关-10分钟\")\r\n            tyqSDK.eventSendCustomEvent(\"第\" + mapModel.mapId + \"关-10分钟\")\r\n        } else if (time >= 5 * 60) {\r\n            //  myLog.i(\"第\" + mapModel.mapId +\"关-5分钟\")\r\n            tyqSDK.eventSendCustomEvent(\"第\" + mapModel.mapId + \"关-5分钟\")\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获得距离参考点pos最近的怪物或者宝箱节点\r\n     * @param pos 参考点，默认是玩家位置\r\n     */\r\n    getMinDisTargetNode(pos?: Vec3): Node {\r\n        let minDis = 999999;\r\n        let minDisNode = null;\r\n        mapModel.monsterSystem.forVisibleMonster((monster: Monster) => {\r\n            if (!monster.node.activeInHierarchy) {\r\n                return;\r\n            }\r\n            let dis = monster.distancePlayer;\r\n            if (pos) {\r\n                dis = Vec2.distance(pos, monster.node.position);\r\n            }\r\n            if (dis < minDis) {\r\n                minDis = monster.distancePlayer;\r\n                minDisNode = monster.node;\r\n            }\r\n        });\r\n\r\n        mapModel.propSystem.forVisiblePropCollider((prop: Prop) => {\r\n            let propNode = prop.node;\r\n            let propPos = propNode.getPosition();\r\n            if (!pos) {\r\n                pos = mapModel.player.node.position;\r\n            }\r\n            let tmpDis = Vec2.distance(pos, propPos);\r\n            if (tmpDis > minDis) {\r\n                return;\r\n            }\r\n            minDis = tmpDis;\r\n            minDisNode = propNode;\r\n        });\r\n\r\n        return minDisNode;\r\n    }\r\n\r\n    // 开始播放预警动画\r\n    startWarning(aniName: string) {\r\n        if (!aniName) {\r\n            return;\r\n        }\r\n        this.warnAnimationCtrl.node.active = true;\r\n        this.warnAnimationCtrl.playAnimation(aniName, false, () => {\r\n            this.warnAnimationCtrl.node.active = false;\r\n            if (aniName == \"11\") {\r\n                // 镜头拉远\r\n                this.cameraMove(mapModel.cameraOrthoHeight + 200);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 镜头拉动\r\n    cameraMove(orthoHeight: number) {\r\n        if (orthoHeight == mapModel.mapFightCamera.orthoHeight) {\r\n            return;\r\n        }\r\n        tween(mapModel.mapFightCamera).to(3, { orthoHeight: orthoHeight }).start();\r\n    }\r\n\r\n    // 主动技能：治疗\r\n    useSkillHeal() {\r\n        // this.skillHealCd = designManager.config.hp_cd;\r\n        playerModel.skillHealNum--;\r\n        mapModel.player.useSkillHeal(0.25);\r\n    }\r\n\r\n    useSkillMagnet() {\r\n        playerModel.skillMagnetNum--;\r\n        mapModel.propSystem.getProp(constants.propIds.magnet);\r\n    }\r\n\r\n    // 主动技能：炸弹\r\n    async useSkillBomb() {\r\n        // this.skillBombCd = designManager.config.boom_cd;\r\n        playerModel.skillBombNum--;\r\n        this.skillBombAniCtrl.node.active = true;\r\n        this.skillBombAniCtrl.playAnimation(\"1\", false, () => {\r\n            this.skillBombAniCtrl.node.active = false;\r\n        });\r\n        await cocosUtil.waitTimeAsync(this, 0.8);\r\n        // 屏幕内的小怪全部阵亡\r\n        let hitArr = [];\r\n        mapModel.monsterSystem.forVisibleMonster((monster: Monster) => {\r\n            if (monster.row.type != constants.monsterTypes.common) {\r\n                return;\r\n            }\r\n            let dam = monster.hp;\r\n            monster.waitHit = true;\r\n            let hitInfo: any = {};\r\n            hitInfo.monster = monster;\r\n            hitInfo.dam = dam;\r\n            hitArr.push(hitInfo);\r\n        });\r\n        mapModel.monsterSystem.batchHitMonster(hitArr);\r\n\r\n        // 怪物子弹全部消失\r\n        mapModel.bulletSystem.forVisibleMonsterBullet((bullet: Bullet) => {\r\n            bullet.recycleSelf();\r\n        });\r\n    }\r\n\r\n    // 玩家吃到炸弹\r\n    bomb() {\r\n        // 屏幕闪白\r\n        this.bombAnimationCtrl.node.active = true;\r\n        this.bombAnimationCtrl.playAnimationOnce(\"bomb\", () => {\r\n            this.bombAnimationCtrl.node.active = false;\r\n        });\r\n\r\n        // 范围内的小怪全部阵亡\r\n        let hitArr = [];\r\n        mapModel.monsterSystem.forVisibleMonster((monster: Monster) => {\r\n            if (monster.row.type != constants.monsterTypes.common) {\r\n                return;\r\n            }\r\n            if (monster.distancePlayer > 300) {\r\n                return;\r\n            }\r\n            let dam = monster.hp;\r\n            monster.waitHit = true;\r\n            let hitInfo: any = {};\r\n            hitInfo.monster = monster;\r\n            hitInfo.dam = dam;\r\n            hitArr.push(hitInfo);\r\n        });\r\n        mapModel.monsterSystem.batchHitMonster(hitArr);\r\n\r\n        // 怪物子弹全部消失\r\n        mapModel.bulletSystem.forVisibleMonsterBullet((bullet: Bullet) => {\r\n            bullet.recycleSelf();\r\n        });\r\n    }\r\n\r\n    // 怪物阵亡\r\n    monsterDead(id: number, worldPos: Vec3) {\r\n        let row = designManager.getRowById(constants.tableName.monster, id);\r\n\r\n        // 经验产生\r\n        if (utilTools.isProb(row.expProb)) {\r\n            let exp = utilTools.getFloatValue(row.expMin, row.expMax, true);\r\n            this.createExp(exp, worldPos);\r\n        }\r\n\r\n        // 击杀数量统计\r\n        mapModel.killMonsterNum++;\r\n        mapModel.mapLayer.refreshResLayer();\r\n\r\n        // 木箱产生\r\n        this.killMonsterCount++;\r\n        if (this.killMonsterCount >= 10) {\r\n            this.killMonsterCount -= 10;\r\n            // 玩家周围随机位置\r\n            let pos = cocosUtil.getAroundPos(mapModel.player.node, 300, view.getVisibleSize().height * 2, true);\r\n            mapModel.propSystem.addProp(constants.propIds.box1, pos);\r\n        }\r\n\r\n        // 道具掉落\r\n        if (row.propProbArr) {\r\n            for (let i = 0; i < row.propProbArr.length; i++) {\r\n                let prob = row.propProbArr[i];\r\n                if (!utilTools.isProb(prob)) {\r\n                    continue;\r\n                }\r\n                let propId = row.propIdArr[i];\r\n                let propNum = row.propNumArr[i];\r\n                let direction: Vec3 = cocosUtil.getCircleDirectionArr(1)[0];\r\n                let pos = worldPos.clone().add(direction.multiplyScalar(80));\r\n                let extraObj: any = {};\r\n                extraObj.num = propNum;\r\n                mapModel.propSystem.addProp(propId, pos, extraObj);\r\n            }\r\n        }\r\n\r\n        // 每日任务\r\n        switch (row.type) {\r\n            case constants.monsterTypes.common:\r\n                playerModel.addDayTaskNum(4, 1);\r\n                break;\r\n            case constants.monsterTypes.elite:\r\n                playerModel.addDayTaskNum(5, 1);\r\n                break;\r\n            case constants.monsterTypes.boss:\r\n                playerModel.addDayTaskNum(6, 1);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // // test\r\n        // if (Math.random() > 0.5) {\r\n        //     // 炸弹\r\n        //     mapModel.propSystem.addProp(501, worldPos);\r\n        // } else {\r\n        //     // 磁铁\r\n        //     mapModel.propSystem.addProp(301, worldPos);\r\n        // }\r\n    }\r\n\r\n    // 经验产生\r\n    createExp(exp: number, worldPos: Vec3, force: boolean = false) {\r\n        if (!force) {\r\n            if (exp > mapModel.expPool) {\r\n                exp = mapModel.expPool;\r\n            }\r\n            if (exp <= 0) {\r\n                return;\r\n            }\r\n            mapModel.expPool -= exp;\r\n        }\r\n        let extraObj: any = {};\r\n        extraObj.num = exp;\r\n        mapModel.propSystem.addProp(constants.propIds.exp, worldPos, extraObj);\r\n    }\r\n\r\n    addExp(num: number) {\r\n        mapModel.expNum += num;\r\n        mapModel.mapLayer.refreshExpLayer();\r\n    }\r\n\r\n    addCoin(num: number) {\r\n        mapModel.coinNum += num;\r\n        mapModel.mapLayer.refreshResLayer();\r\n    }\r\n\r\n    adjustInWall(node: Node | Vec3, height: number = 0) {\r\n        if (!this.wallLayer.active) {\r\n            return;\r\n        }\r\n\r\n        let tf = null;\r\n        let pos = null;\r\n        if (node instanceof Node) {\r\n            tf = node.getComponent(UITransform);\r\n            pos = node.getPosition(this.vec3Obj.nodePos);\r\n        } else {\r\n            pos = node;\r\n        }\r\n        if (pos.x >= this.wallRightVal) {\r\n            pos.x = this.wallRightVal;\r\n        }\r\n        if (pos.x <= this.wallLeftVal) {\r\n            pos.x = this.wallLeftVal;\r\n        }\r\n        if (pos.y >= this.wallTopVal) {\r\n            pos.y = this.wallTopVal;\r\n        }\r\n        if (tf) {\r\n            height = tf.height;\r\n        }\r\n        if (pos.y <= this.wallBottomVal + height * 0.4) {\r\n            pos.y = this.wallBottomVal + height * 0.4;\r\n        }\r\n        if (node instanceof Node) {\r\n            node.position = pos;\r\n        }\r\n    }\r\n\r\n    showWallLayer(centerPos?: Vec3) {\r\n        this.wallLayer.active = true;\r\n        let hWidth = 33;\r\n        let hHeight = 51;\r\n        let vWidth = 32;\r\n        let vHeight = 27;\r\n        if (mapModel.mapId == 2) {\r\n            hWidth = 36;\r\n            hHeight = 32;\r\n            vWidth = 43;\r\n            vHeight = 55;\r\n        }\r\n\r\n        // 宽1200 高1500\r\n        let width = Math.ceil(1200 / hWidth) * hWidth;\r\n        let height = Math.ceil(1500 / vHeight) * vHeight;\r\n\r\n        if (!centerPos) {\r\n            centerPos = mapModel.player.node.getPosition().clone();\r\n            centerPos.y += 400;\r\n        }\r\n        this.wallCenterPos = centerPos;\r\n\r\n        let top = this.wallTopNode;\r\n        top.getComponent(UITransform).width = width;\r\n        top.getComponent(UITransform).height = hHeight;\r\n        top.getComponent(BoxCollider2D).size.width = width;\r\n        top.getComponent(BoxCollider2D).size.height = hHeight;\r\n        let pos = v3(centerPos.x, centerPos.y + height * 0.5, 0);\r\n        top.setPosition(pos);\r\n\r\n        let bottom = this.wallBottomNode;\r\n        bottom.getComponent(UITransform).width = top.getComponent(UITransform).width;\r\n        bottom.getComponent(UITransform).height = top.getComponent(UITransform).height;\r\n        bottom.getComponent(BoxCollider2D).size.width = top.getComponent(BoxCollider2D).size.width;\r\n        bottom.getComponent(BoxCollider2D).size.height = top.getComponent(BoxCollider2D).size.height;\r\n        pos = v3(centerPos.x, centerPos.y - height * 0.5, 0);\r\n        bottom.setPosition(pos);\r\n\r\n        let left = this.wallLeftNode;\r\n        left.getComponent(UITransform).width = vWidth;\r\n        left.getComponent(UITransform).height = height;\r\n        left.getComponent(BoxCollider2D).size.width = vWidth;\r\n        left.getComponent(BoxCollider2D).size.height = height;\r\n        pos = v3(centerPos.x - width * 0.5 + vWidth * 0.5, centerPos.y, 0);\r\n        left.setPosition(pos);\r\n\r\n        let right = this.wallRightNode;\r\n        right.getComponent(UITransform).width = left.getComponent(UITransform).width;\r\n        right.getComponent(UITransform).height = left.getComponent(UITransform).height;\r\n        right.getComponent(BoxCollider2D).size.width = left.getComponent(BoxCollider2D).size.width;\r\n        right.getComponent(BoxCollider2D).size.height = left.getComponent(BoxCollider2D).size.height;\r\n        pos = v3(centerPos.x + width * 0.5 - vWidth * 0.5, centerPos.y, 0);\r\n        right.setPosition(pos);\r\n\r\n        this.refreshWallSideVal();\r\n\r\n        this.wallTopNode.getComponent(UIOpacity).opacity = 0;\r\n        this.wallBottomNode.getComponent(UIOpacity).opacity = 0;\r\n        this.wallLeftNode.getComponent(UIOpacity).opacity = 0;\r\n        this.wallRightNode.getComponent(UIOpacity).opacity = 0;\r\n        this.wallShineNode.active = true;\r\n        this.wallShineNode.position = v3(centerPos.x, centerPos.y - 15);\r\n        this.wallShineNode.getComponent(UITransform).width = width * 0.5 + 10;\r\n        this.wallShineNode.getComponent(UITransform).height = height * 0.5 + 10;\r\n\r\n        let shineOpacity = this.wallShineNode.getComponent(UIOpacity);\r\n        Tween.stopAllByTarget(shineOpacity);\r\n        tween(shineOpacity).to(0.3, { opacity: 255 }).to(0.3, { opacity: 0 }).union().repeat(3).call(() => {\r\n            this.wallShineNode.active = false;\r\n            this.wallTopNode.getComponent(UIOpacity).opacity = 255;\r\n            this.wallBottomNode.getComponent(UIOpacity).opacity = 255;\r\n            this.wallLeftNode.getComponent(UIOpacity).opacity = 255;\r\n            this.wallRightNode.getComponent(UIOpacity).opacity = 255;\r\n        }).start();\r\n\r\n    }\r\n\r\n    refreshWallSideVal() {\r\n        this.wallTopVal = this.wallTopNode.position.y - 20;\r\n        this.wallBottomVal = this.wallBottomNode.position.y + 30;\r\n        this.wallLeftVal = this.wallLeftNode.position.x + 20;\r\n        this.wallRightVal = this.wallRightNode.position.x - 20;\r\n    }\r\n\r\n    hideWallLayer() {\r\n        this.wallLayer.active = false;\r\n    }\r\n\r\n    fightPause() {\r\n        this.pauseVal++;\r\n        if (this.pauseVal > 1) {\r\n            return;\r\n        }\r\n\r\n        let camera = mapModel.mapFightCamera;\r\n        let width = view.getVisibleSize().width;\r\n        let height = view.getVisibleSize().height;\r\n        let texture = new RenderTexture();\r\n        texture.reset({ width: width, height: height });\r\n\r\n        // 原生平台上会出现花屏（UI摄像机残留问题），因此暂时隐藏UI根节点，等待截屏完成后再恢复\r\n        find(\"Canvas/Camera\").active = false;\r\n\r\n        camera.targetTexture = texture;\r\n        // 执行渲染，单个渲染会报错，那就直接全部渲染一次吧（单个渲染：cc.director.root.pipeline.render([camera.camera]);）\r\n        director.root.frameMove(0);\r\n        camera.targetTexture = null;\r\n\r\n        find(\"Canvas/Camera\").active = true;\r\n\r\n        let sp = new SpriteFrame();\r\n        sp.texture = texture;\r\n\r\n        mapModel.mapLayer.fightCapNode.getComponent(Sprite).spriteFrame = sp;\r\n        mapModel.mapLayer.fightCapNode.active = true;\r\n\r\n        this.node.active = false;\r\n    }\r\n\r\n    fightResume() {\r\n        this.pauseVal--;\r\n        if (this.pauseVal > 0) {\r\n            return;\r\n        }\r\n        let camera = mapModel.mapFightCamera;\r\n        camera.targetTexture = null;\r\n\r\n        this.node.active = true;\r\n        mapModel.mapLayer.fightCapNode.active = false;\r\n        mapModel.player.stopMove();\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (!this.stopTimeCount) {\r\n            // 时间\r\n            mapModel.time += dt;\r\n\r\n            // 经验池\r\n            this.expTimeCount += dt;\r\n            while (this.expTimeCount >= 1) {\r\n                this.expTimeCount--;\r\n                if (mapModel.expTypeRow) {\r\n                    if (mapModel.time >= mapModel.expTypeRow.startTime && mapModel.time <= mapModel.expTypeRow.endTime) {\r\n                        mapModel.expPool += mapModel.expTypeRow.expSpeed;\r\n                    } else {\r\n                        mapModel.expTypeRow = designManager.getRowById(constants.tableName.expType, mapModel.expTypeRow.id + 1);\r\n                    }\r\n                    this.setString(mapModel.mapLayer.expNumNode, mapModel.expPool);\r\n                }\r\n            }\r\n        }\r\n        mapModel.mapLayer.refreshTimeNode();\r\n\r\n        if (this.skillBombCd > 0) {\r\n            this.skillBombCd -= dt;\r\n        } else {\r\n            this.skillBombCd = 0;\r\n        }\r\n        if (this.skillHealCd > 0) {\r\n            this.skillHealCd -= dt;\r\n        } else {\r\n            this.skillHealCd = 0;\r\n        }\r\n\r\n        // 各个子系统\r\n        mapModel.weaponSystem.updateLogic(dt);\r\n        mapModel.monsterSystem.updateLogic(dt);\r\n        mapModel.skillSystem.updateLogic(dt);\r\n        mapModel.propSystem.updateLogic(dt);\r\n        mapModel.bulletSystem.updateLogic(dt);\r\n    }\r\n\r\n    updatePhysicsWorld() {\r\n        physicsWorld.step(mapModel.mapFightLayer);\r\n    }\r\n\r\n    updateBoxHintLayer(dt: number) {\r\n        let minDis = 999999;\r\n        let minProp: Prop = null;\r\n        let playerPos = mapModel.player.node.position;\r\n        mapModel.propSystem.forAllPropById(constants.propIds.box2, (prop: Prop) => {\r\n            let node = prop.node;\r\n            let pos = node.position;\r\n            let tf = node.getComponent(UITransform);\r\n            let add = (tf.width + tf.height) * 0.5;\r\n            if ((Math.abs(pos.x - playerPos.x) <= mapModel.visibleHalfSize.width + add)\r\n                && (Math.abs(pos.y - playerPos.y) <= mapModel.visibleHalfSize.height + add)) {\r\n                return;\r\n            }\r\n            let dis = Vec2.distance(pos, playerPos);\r\n            if (dis < minDis) {\r\n                minDis = dis;\r\n                minProp = prop;\r\n            }\r\n        });\r\n        if (!minProp) {\r\n            this.boxHintNode.active = false;\r\n            return;\r\n        }\r\n        this.boxHintNode.active = true;\r\n\r\n        let direction = minProp.node.getPosition().subtract(playerPos);\r\n        let angle = utilTools.radianToAngle(Math.atan2(direction.y, direction.x));\r\n        this.boxArrowNode.angle = angle;\r\n\r\n        let propPos = minProp.node.position;\r\n        let gap = 80;\r\n\r\n        let x = propPos.x - playerPos.x;\r\n        let halfWidth = view.getVisibleSize().width * 0.5 - gap;\r\n        if (x > halfWidth) {\r\n            x = halfWidth;\r\n        } else if (x < -halfWidth) {\r\n            x = -halfWidth;\r\n        }\r\n\r\n        let y = propPos.y - playerPos.y;\r\n        let halfHeight = view.getVisibleSize().height * 0.5 - gap;\r\n        if (y > halfHeight - 320) {\r\n            y = halfHeight - 320;\r\n        } else if (y < -halfHeight) {\r\n            y = -halfHeight;\r\n        }\r\n\r\n        this.boxHintNode.position = v3(x, y);\r\n\r\n\r\n    }\r\n\r\n    // 获得3选1数组\r\n    getSelectItemArr() {\r\n        let arr = [];\r\n\r\n        // 武器\r\n        let hasFull = false;\r\n        if (mapModel.weaponSystem.weaponArr.length >= constants.design.weaponNum) {\r\n            hasFull = true;\r\n        }\r\n        let row = designManager.getLastRow(constants.tableName.weapon);\r\n        for (let i = 1; i <= row.type; i++) {\r\n            let info = mapModel.weaponSystem.getWeaponInfoByType(i);\r\n            if (info) {\r\n                let row = designManager.getRowById(constants.tableName.weapon, info.id);\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    continue;\r\n                }\r\n            } else if (hasFull) {\r\n                continue;\r\n            }\r\n            let item: any = {};\r\n            item.name = constants.tableName.weapon;\r\n            item.weight = 1;\r\n            item.type = i;\r\n            item.info = info;\r\n            arr.push(item);\r\n        }\r\n\r\n        // 主动技能\r\n        hasFull = false;\r\n        if (mapModel.skillSystem.skillArr.length >= constants.design.skillNum) {\r\n            hasFull = true;\r\n        }\r\n        row = designManager.getLastRow(constants.tableName.skill);\r\n        for (let i = 1; i <= row.type; i++) {\r\n            let info = mapModel.skillSystem.getSkillInfoByType(i);\r\n            if (info) {\r\n                let row = designManager.getRowById(constants.tableName.skill, info.id);\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    continue;\r\n                }\r\n            } else if (hasFull) {\r\n                continue;\r\n            }\r\n            let item: any = {};\r\n            item.name = constants.tableName.skill;\r\n            item.weight = 1;\r\n            item.type = i;\r\n            item.info = info;\r\n            arr.push(item);\r\n        }\r\n\r\n        // 被动技能\r\n        hasFull = false;\r\n        if (mapModel.skillSystem.skill2Arr.length >= constants.design.skillNum) {\r\n            hasFull = true;\r\n        }\r\n        row = designManager.getLastRow(constants.tableName.skill2);\r\n        for (let i = 1; i <= row.type; i++) {\r\n            let info = mapModel.skillSystem.getSkill2InfoByType(i);\r\n            if (info) {\r\n                let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n                if (row.lv >= constants.design.maxLv) {\r\n                    continue;\r\n                }\r\n            } else if (hasFull) {\r\n                continue;\r\n            }\r\n            let item: any = {};\r\n            item.name = constants.tableName.skill2;\r\n            item.weight = 1;\r\n            item.type = i;\r\n            item.info = info;\r\n            arr.push(item);\r\n        }\r\n\r\n\r\n        arr = utilTools.getRowsByWeightAndNum(arr, 3);\r\n        while (arr.length < 3) {\r\n            // 补充鸡腿\r\n            let item: any = {};\r\n            item.name = constants.tableName.prop;\r\n            item.id = constants.propIds.addHpPercent;\r\n            arr.push(item);\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    refreshCamera(dt: number) {\r\n        if (mapModel.mapFightCamera.orthoHeight <= mapModel.cameraOrthoHeight) {\r\n            return;\r\n        }\r\n        mapModel.mapFightCamera.orthoHeight--;\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.updateBoxHintLayer(dt);\r\n    }\r\n\r\n}\r\n\r\n","import { js } from \"cc\";\r\n\r\nexport class MapWrap<K extends string | number, V>{\r\n\tprotected _objects;\r\n\tprotected _size = 0;\r\n\r\n\tconstructor(array?: Array<[K, V]>) {\r\n\t\tthis._objects = js.createMap(true);\r\n\t\tthis._size = 0;\r\n\t\tif (array) {\r\n\t\t\tfor (let i = 0; i < array.length; i++) {\r\n\t\t\t\tthis.set(array[i][0], array[i][1]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic set size(size) {\r\n\t\tthis._size = size;\r\n\t}\r\n\r\n\tpublic set objects(objects) {\r\n\t\tthis._objects = objects\r\n\t}\r\n\r\n\tpublic get size(): number {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic clear(): void {\r\n\t\tthis._objects = js.createMap(true);\r\n\t\tthis._size = 0;\r\n\t}\r\n\r\n\tpublic has(key: K): boolean {\r\n\t\treturn key as any in this._objects;\r\n\t}\r\n\r\n\tpublic set(key: K, value: V): void {\r\n\t\tif (!this.has(key)) {\r\n\t\t\tthis._size++;\r\n\t\t}\r\n\t\tthis._objects[key] = value;\r\n\t}\r\n\r\n\tpublic get(key: K): V {\r\n\t\tif (!this.has(key)) return null;\r\n\t\treturn this._objects[key];\r\n\t}\r\n\r\n\tpublic delete(key: K): void {\r\n\t\tif (this.has(key)) {\r\n\t\t\tdelete this._objects[key];\r\n\t\t\tthis._size--;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic keys(): K[] {\r\n\t\tlet keys = Object.keys(this._objects);\r\n\t\treturn keys as any;\r\n\t}\r\n\r\n\tpublic values<V>(): V[] {\r\n\t\tlet keys = this.keys();\r\n\t\tlet values = [];\r\n\t\tkeys.forEach(key => {\r\n\t\t\tvalues.push(this.get(key));\r\n\t\t})\r\n\t\treturn values;\r\n\t}\r\n\r\n\tpublic toArray(isNumberKey?: boolean): Array<[K, V]> {\r\n\t\tlet rets = [];\r\n\t\tlet keys = this.keys();\r\n\t\tkeys.forEach(key => {\r\n\t\t\trets.push([!isNumberKey ? key : parseInt(key as any), this.get(key)]);\r\n\t\t})\r\n\t\treturn rets;\r\n\t}\r\n\r\n\tpublic forEach<T>(callBack: { (value: V, key: K): T }): T {\r\n\t\tlet keys = this.keys();\r\n\t\tfor (let i = 0; i < keys.length; i++) {\r\n\t\t\tlet result = callBack(this._objects[keys[i]], keys[i]);\r\n\t\t\tif (!!result) return result;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic rforEach<T>(callBack: { (value: V, key: K): T }): T {\r\n\t\tlet keys = this.keys();\r\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\r\n\t\t\tlet result = callBack(this._objects[keys[i]], keys[i]);\r\n\t\t\tif (!!result) return result;\r\n\t\t}\r\n\t}\r\n}","\r\n\r\nexport default function MD5(data){\r\n    // for test/debug\r\n    function fflog(msg) {\r\n        try {\r\n            //console.log(msg);\r\n        } catch(e) {}\r\n    }\r\n \r\n    // convert number to (unsigned) 32 bit hex, zero filled string\r\n    function to_zerofilled_hex(n) {\r\n        var t1 = (n >>> 24).toString(16);\r\n        var t2 = (n & 0x00FFFFFF).toString(16);\r\n        return \"00\".substr(0, 2 - t1.length) + t1 +\r\n            \"000000\".substr(0, 6 - t2.length) + t2;\r\n    }\r\n \r\n    // convert array of chars to array of bytes (note: Unicode not supported)\r\n    function chars_to_bytes(ac) {\r\n        var retval = [];\r\n        for (var i = 0; i < ac.length; i++) {\r\n            retval = retval.concat(str_to_bytes(ac[i]));\r\n        }\r\n        return retval;\r\n    }\r\n \r\n \r\n    // convert a 64 bit unsigned number to array of bytes. Little endian\r\n    function int64_to_bytes(num) {\r\n        var retval = [];\r\n        for (var i = 0; i < 8; i++) {\r\n            retval.push(num & 0xFF);\r\n            num = num >>> 8;\r\n        }\r\n        return retval;\r\n    }\r\n \r\n    //  32 bit left-rotation\r\n    function rol(num, places) {\r\n        return ((num << places) & 0xFFFFFFFF) | (num >>> (32 - places));\r\n    }\r\n \r\n    // The 4 MD5 functions\r\n    function fF(b, c, d) {\r\n        return (b & c) | (~b & d);\r\n    }\r\n \r\n    function fG(b, c, d) {\r\n        return (d & b) | (~d & c);\r\n    }\r\n \r\n    function fH(b, c, d) {\r\n        return b ^ c ^ d;\r\n    }\r\n \r\n    function fI(b, c, d) {\r\n        return c ^ (b | ~d);\r\n    }\r\n \r\n    // pick 4 bytes at specified offset. Little-endian is assumed\r\n    function bytes_to_int32(arr, off) {\r\n        return (arr[off + 3] << 24) | (arr[off + 2] << 16) | (arr[off + 1] << 8) | (arr[off]);\r\n    }\r\n \r\n    /*\r\n     Conver string to array of bytes in UTF-8 encoding\r\n     See:\r\n     http://www.dangrossman.info/2007/05/25/handling-utf-8-in-javascript-php-and-non-utf8-databases/\r\n     http://stackoverflow.com/questions/1240408/reading-bytes-from-a-javascript-string\r\n     How about a String.getBytes(<ENCODING>) for Javascript!? Isn't it time to add it?\r\n     */\r\n    function str_to_bytes(str) {\r\n        // alert(\"got \" + str.length + \" chars\")\r\n        var retval = [ ];\r\n        for (var i = 0; i < str.length; i++)\r\n            if (str.charCodeAt(i) <= 0x7F) {\r\n                retval.push(str.charCodeAt(i));\r\n            } else {\r\n                var tmp = encodeURIComponent(str.charAt(i)).substr(1).split('%');\r\n                for (var j = 0; j < tmp.length; j++) {\r\n                    retval.push(parseInt(tmp[j], 0x10));\r\n                }\r\n            }\r\n        return retval;\r\n    };\r\n \r\n \r\n    // convert the 4 32-bit buffers to a 128 bit hex string. (Little-endian is assumed)\r\n    function int128le_to_hex(a, b, c, d) {\r\n        var ra = \"\";\r\n        var t = 0;\r\n        var ta = 0;\r\n        for (var i = 3; i >= 0; i--) {\r\n            ta = arguments[i];\r\n            t = (ta & 0xFF);\r\n            ta = ta >>> 8;\r\n            t = t << 8;\r\n            t = t | (ta & 0xFF);\r\n            ta = ta >>> 8;\r\n            t = t << 8;\r\n            t = t | (ta & 0xFF);\r\n            ta = ta >>> 8;\r\n            t = t << 8;\r\n            t = t | ta;\r\n            ra = ra + to_zerofilled_hex(t);\r\n        }\r\n        return ra;\r\n    }\r\n \r\n    // check input data type and perform conversions if needed\r\n    var databytes = null;\r\n    // String\r\n    if (typeof data == 'string') {\r\n        // convert string to array bytes\r\n        databytes = str_to_bytes(data);\r\n    } else if (data.constructor == Array) {\r\n        if (data.length === 0) {\r\n            // if it's empty, just assume array of bytes\r\n            databytes = data;\r\n        } else if (typeof data[0] == 'string') {\r\n            databytes = chars_to_bytes(data);\r\n        } else if (typeof data[0] == 'number') {\r\n            databytes = data;\r\n        } else {\r\n            fflog(\"input data type mismatch\");\r\n            return null;\r\n        }\r\n    } else {\r\n        fflog(\"input data type mismatch\");\r\n        return null;\r\n    }\r\n \r\n    // save original length\r\n    var org_len = databytes.length;\r\n \r\n    // first append the \"1\" + 7x \"0\"\r\n    databytes.push(0x80);\r\n \r\n    // determine required amount of padding\r\n    var tail = databytes.length % 64;\r\n    // no room for msg length?\r\n    if (tail > 56) {\r\n        // pad to next 512 bit block\r\n        for (var i = 0; i < (64 - tail); i++) {\r\n            databytes.push(0x0);\r\n        }\r\n        tail = databytes.length % 64;\r\n    }\r\n    for (i = 0; i < (56 - tail); i++) {\r\n        databytes.push(0x0);\r\n    }\r\n    // message length in bits mod 512 should now be 448\r\n    // append 64 bit, little-endian original msg length (in *bits*!)\r\n    databytes = databytes.concat(int64_to_bytes(org_len * 8));\r\n \r\n    // initialize 4x32 bit state\r\n    var h0 = 0x67452301;\r\n    var h1 = 0xEFCDAB89;\r\n    var h2 = 0x98BADCFE;\r\n    var h3 = 0x10325476;\r\n \r\n    // temp buffers\r\n    var a = 0,\r\n        b = 0,\r\n        c = 0,\r\n        d = 0;\r\n \r\n \r\n    function _add(n1, n2) {\r\n        return 0x0FFFFFFFF & (n1 + n2)\r\n    }\r\n \r\n    // function update partial state for each run\r\n    var updateRun = function(nf, sin32, dw32, b32) {\r\n        var temp = d;\r\n        d = c;\r\n        c = b;\r\n        //b = b + rol(a + (nf + (sin32 + dw32)), b32);\r\n        b = _add(b,\r\n            rol(\r\n                _add(a,\r\n                    _add(nf, _add(sin32, dw32))\r\n                ), b32\r\n            )\r\n        );\r\n        a = temp;\r\n    };\r\n \r\n \r\n    // Digest message\r\n    for (i = 0; i < databytes.length / 64; i++) {\r\n        // initialize run\r\n        a = h0;\r\n        b = h1;\r\n        c = h2;\r\n        d = h3;\r\n \r\n        var ptr = i * 64;\r\n \r\n        // do 64 runs\r\n        updateRun(fF(b, c, d), 0xd76aa478, bytes_to_int32(databytes, ptr), 7);\r\n        updateRun(fF(b, c, d), 0xe8c7b756, bytes_to_int32(databytes, ptr + 4), 12);\r\n        updateRun(fF(b, c, d), 0x242070db, bytes_to_int32(databytes, ptr + 8), 17);\r\n        updateRun(fF(b, c, d), 0xc1bdceee, bytes_to_int32(databytes, ptr + 12), 22);\r\n        updateRun(fF(b, c, d), 0xf57c0faf, bytes_to_int32(databytes, ptr + 16), 7);\r\n        updateRun(fF(b, c, d), 0x4787c62a, bytes_to_int32(databytes, ptr + 20), 12);\r\n        updateRun(fF(b, c, d), 0xa8304613, bytes_to_int32(databytes, ptr + 24), 17);\r\n        updateRun(fF(b, c, d), 0xfd469501, bytes_to_int32(databytes, ptr + 28), 22);\r\n        updateRun(fF(b, c, d), 0x698098d8, bytes_to_int32(databytes, ptr + 32), 7);\r\n        updateRun(fF(b, c, d), 0x8b44f7af, bytes_to_int32(databytes, ptr + 36), 12);\r\n        updateRun(fF(b, c, d), 0xffff5bb1, bytes_to_int32(databytes, ptr + 40), 17);\r\n        updateRun(fF(b, c, d), 0x895cd7be, bytes_to_int32(databytes, ptr + 44), 22);\r\n        updateRun(fF(b, c, d), 0x6b901122, bytes_to_int32(databytes, ptr + 48), 7);\r\n        updateRun(fF(b, c, d), 0xfd987193, bytes_to_int32(databytes, ptr + 52), 12);\r\n        updateRun(fF(b, c, d), 0xa679438e, bytes_to_int32(databytes, ptr + 56), 17);\r\n        updateRun(fF(b, c, d), 0x49b40821, bytes_to_int32(databytes, ptr + 60), 22);\r\n        updateRun(fG(b, c, d), 0xf61e2562, bytes_to_int32(databytes, ptr + 4), 5);\r\n        updateRun(fG(b, c, d), 0xc040b340, bytes_to_int32(databytes, ptr + 24), 9);\r\n        updateRun(fG(b, c, d), 0x265e5a51, bytes_to_int32(databytes, ptr + 44), 14);\r\n        updateRun(fG(b, c, d), 0xe9b6c7aa, bytes_to_int32(databytes, ptr), 20);\r\n        updateRun(fG(b, c, d), 0xd62f105d, bytes_to_int32(databytes, ptr + 20), 5);\r\n        updateRun(fG(b, c, d), 0x2441453, bytes_to_int32(databytes, ptr + 40), 9);\r\n        updateRun(fG(b, c, d), 0xd8a1e681, bytes_to_int32(databytes, ptr + 60), 14);\r\n        updateRun(fG(b, c, d), 0xe7d3fbc8, bytes_to_int32(databytes, ptr + 16), 20);\r\n        updateRun(fG(b, c, d), 0x21e1cde6, bytes_to_int32(databytes, ptr + 36), 5);\r\n        updateRun(fG(b, c, d), 0xc33707d6, bytes_to_int32(databytes, ptr + 56), 9);\r\n        updateRun(fG(b, c, d), 0xf4d50d87, bytes_to_int32(databytes, ptr + 12), 14);\r\n        updateRun(fG(b, c, d), 0x455a14ed, bytes_to_int32(databytes, ptr + 32), 20);\r\n        updateRun(fG(b, c, d), 0xa9e3e905, bytes_to_int32(databytes, ptr + 52), 5);\r\n        updateRun(fG(b, c, d), 0xfcefa3f8, bytes_to_int32(databytes, ptr + 8), 9);\r\n        updateRun(fG(b, c, d), 0x676f02d9, bytes_to_int32(databytes, ptr + 28), 14);\r\n        updateRun(fG(b, c, d), 0x8d2a4c8a, bytes_to_int32(databytes, ptr + 48), 20);\r\n        updateRun(fH(b, c, d), 0xfffa3942, bytes_to_int32(databytes, ptr + 20), 4);\r\n        updateRun(fH(b, c, d), 0x8771f681, bytes_to_int32(databytes, ptr + 32), 11);\r\n        updateRun(fH(b, c, d), 0x6d9d6122, bytes_to_int32(databytes, ptr + 44), 16);\r\n        updateRun(fH(b, c, d), 0xfde5380c, bytes_to_int32(databytes, ptr + 56), 23);\r\n        updateRun(fH(b, c, d), 0xa4beea44, bytes_to_int32(databytes, ptr + 4), 4);\r\n        updateRun(fH(b, c, d), 0x4bdecfa9, bytes_to_int32(databytes, ptr + 16), 11);\r\n        updateRun(fH(b, c, d), 0xf6bb4b60, bytes_to_int32(databytes, ptr + 28), 16);\r\n        updateRun(fH(b, c, d), 0xbebfbc70, bytes_to_int32(databytes, ptr + 40), 23);\r\n        updateRun(fH(b, c, d), 0x289b7ec6, bytes_to_int32(databytes, ptr + 52), 4);\r\n        updateRun(fH(b, c, d), 0xeaa127fa, bytes_to_int32(databytes, ptr), 11);\r\n        updateRun(fH(b, c, d), 0xd4ef3085, bytes_to_int32(databytes, ptr + 12), 16);\r\n        updateRun(fH(b, c, d), 0x4881d05, bytes_to_int32(databytes, ptr + 24), 23);\r\n        updateRun(fH(b, c, d), 0xd9d4d039, bytes_to_int32(databytes, ptr + 36), 4);\r\n        updateRun(fH(b, c, d), 0xe6db99e5, bytes_to_int32(databytes, ptr + 48), 11);\r\n        updateRun(fH(b, c, d), 0x1fa27cf8, bytes_to_int32(databytes, ptr + 60), 16);\r\n        updateRun(fH(b, c, d), 0xc4ac5665, bytes_to_int32(databytes, ptr + 8), 23);\r\n        updateRun(fI(b, c, d), 0xf4292244, bytes_to_int32(databytes, ptr), 6);\r\n        updateRun(fI(b, c, d), 0x432aff97, bytes_to_int32(databytes, ptr + 28), 10);\r\n        updateRun(fI(b, c, d), 0xab9423a7, bytes_to_int32(databytes, ptr + 56), 15);\r\n        updateRun(fI(b, c, d), 0xfc93a039, bytes_to_int32(databytes, ptr + 20), 21);\r\n        updateRun(fI(b, c, d), 0x655b59c3, bytes_to_int32(databytes, ptr + 48), 6);\r\n        updateRun(fI(b, c, d), 0x8f0ccc92, bytes_to_int32(databytes, ptr + 12), 10);\r\n        updateRun(fI(b, c, d), 0xffeff47d, bytes_to_int32(databytes, ptr + 40), 15);\r\n        updateRun(fI(b, c, d), 0x85845dd1, bytes_to_int32(databytes, ptr + 4), 21);\r\n        updateRun(fI(b, c, d), 0x6fa87e4f, bytes_to_int32(databytes, ptr + 32), 6);\r\n        updateRun(fI(b, c, d), 0xfe2ce6e0, bytes_to_int32(databytes, ptr + 60), 10);\r\n        updateRun(fI(b, c, d), 0xa3014314, bytes_to_int32(databytes, ptr + 24), 15);\r\n        updateRun(fI(b, c, d), 0x4e0811a1, bytes_to_int32(databytes, ptr + 52), 21);\r\n        updateRun(fI(b, c, d), 0xf7537e82, bytes_to_int32(databytes, ptr + 16), 6);\r\n        updateRun(fI(b, c, d), 0xbd3af235, bytes_to_int32(databytes, ptr + 44), 10);\r\n        updateRun(fI(b, c, d), 0x2ad7d2bb, bytes_to_int32(databytes, ptr + 8), 15);\r\n        updateRun(fI(b, c, d), 0xeb86d391, bytes_to_int32(databytes, ptr + 36), 21);\r\n \r\n        // update buffers\r\n        h0 = _add(h0, a);\r\n        h1 = _add(h1, b);\r\n        h2 = _add(h2, c);\r\n        h3 = _add(h3, d);\r\n    }\r\n    // Done! Convert buffers to 128 bit (LE)\r\n    return int128le_to_hex(h3, h2, h1, h0);//.toUpperCase();\r\n}","import { BoxCollider2D, Color, Component, find, macro, Node, PhysicsSystem2D, ProgressBar, sp, Tween, v2, v3, Vec2, Vec3, view, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { ShineColor } from '../../shader/ShineColor';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Monster')\r\nexport class Monster extends Component {\r\n\r\n    id: number;\r\n    hp: number = 0;\r\n    hpMax: number;\r\n    atk: number = 0;\r\n    speed: number = 0;\r\n    row: any;\r\n    isBoss: number = 0;\r\n\r\n    isPauseMove: boolean;\r\n    canFace: boolean = true;\r\n    distancePlayer: number;\r\n\r\n    bodyNode: Node;\r\n    collider: BoxCollider2D;\r\n    hpProgress: ProgressBar;\r\n\r\n    isSpine: boolean;\r\n    shineColor: ShineColor;\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    direction: Vec3;\r\n    touchPlayerTimeCount: number = 0;\r\n    targetDirection: Vec3;\r\n\r\n    // Vec3集中缓存\r\n    vec3Obj = {\r\n        playerPos: v3(0, 0, 0),\r\n        nodePos: v3(0, 0, 0),\r\n        nodeScale: v3(0, 0, 0),\r\n        hpScale: v3(0, 0, 0),\r\n        bodyNodeScale: v3(0, 0, 0),\r\n\r\n        outVec3: v3(0, 0, 0),\r\n        vec3Temp: v3(0, 0, 0),\r\n    };\r\n\r\n    // 射线检测距离\r\n    raycastDis: number = 0;\r\n    sideRadian: number = 0;\r\n\r\n    waitHit: boolean;\r\n\r\n    monsterUtil: any;\r\n\r\n    onLoad() {\r\n        this.bodyNode = find(\"body\", this.node);\r\n        this.collider = this.node.getComponent(BoxCollider2D);\r\n\r\n        let hpProgressNode = find(\"hpProgress\", this.node);\r\n        if (hpProgressNode) {\r\n            this.hpProgress = hpProgressNode.getComponent(ProgressBar);\r\n        }\r\n\r\n        if (this.bodyNode.getComponent(sp.Skeleton)) {\r\n            this.isSpine = true;\r\n        } else {\r\n            this.isSpine = false;\r\n        }\r\n        this.shineColor = this.bodyNode.addComponent(ShineColor);\r\n        this.animationCtrl = this.bodyNode.addComponent(AnimationCtrl);\r\n\r\n        this.vec3Obj.bodyNodeScale = this.bodyNode.getScale().clone();\r\n\r\n    }\r\n\r\n    onEnable() {\r\n\r\n    }\r\n\r\n    onDisable() {\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n\r\n    setBodySkin() {\r\n        let sk = this.bodyNode.getComponent(sp.Skeleton);\r\n        if (!sk) {\r\n            return;\r\n        }\r\n        if (this.row.type != constants.monsterTypes.boss) {\r\n            return;\r\n        }\r\n        let flag = 1;\r\n        if (mapModel.mapId == 3 || mapModel.mapId == 4) {\r\n            flag = 2;\r\n        }\r\n        sk.setSkin(\"skin\" + flag);\r\n    }\r\n\r\n    init(id: number) {\r\n        if (!this.bodyNode) {\r\n            this.onLoad();\r\n        }\r\n\r\n        this.node.setScale(v3(1, 1, 1));\r\n\r\n        this.unscheduleAllCallbacks();\r\n        Tween.stopAllByTarget(this.node);\r\n        if (this.shineColor) {\r\n            this.shineColor.removeShineColorMaterial();\r\n        }\r\n\r\n        this.canFace = true;\r\n        this.isPauseMove = false;\r\n        this.distancePlayer = 0;\r\n        this.touchPlayerTimeCount = 0;\r\n        this.targetDirection = null;\r\n\r\n        this.collider.enabled = true;\r\n        this.animationCtrl.playAnimation(constants.animations.walk);\r\n\r\n        let row = designManager.getRowById(constants.tableName.monster, id);\r\n        this.row = row;\r\n\r\n        this.waitHit = false;\r\n\r\n        this.raycastDis = this.collider.size.width / 2;\r\n        this.sideRadian = Math.random() > 0.5 ? Math.PI / 2 : -Math.PI / 2;\r\n\r\n        // 初始位置生成规则：屏幕边缘的随机一个位置\r\n        let size = view.getVisibleSize();\r\n        let pos = cocosUtil.getRectPos(mapModel.player.node, size.width + 100, size.height + 100);\r\n        this.node.position = pos;\r\n\r\n        this.id = id;\r\n        this.atk = row.atk;\r\n        this.hp = row.hp;\r\n        this.speed = row.speed;\r\n        if (mapModel.floor > 0) {\r\n            let floorRow = designManager.getRowById(constants.tableName.towerFloor, mapModel.floor);\r\n            let hp = this.hp * (1 + floorRow.hp / 100);\r\n            this.hp = Math.ceil(hp);\r\n            this.atk = Math.ceil(this.atk * (1 + floorRow.atk / 100));\r\n        }\r\n\r\n        if (row.type != constants.monsterTypes.boss) {\r\n            // 额外加强\r\n            let mapRow = designManager.getRowById(constants.tableName.map, mapModel.mapId);\r\n            let atkP = 1;\r\n            if (mapRow && mapRow.atk > 0) {\r\n                atkP = mapRow.atk;\r\n            }\r\n            let hpP = 1;\r\n            if (mapRow && mapRow.hp > 0) {\r\n                hpP = mapRow.hp;\r\n            }\r\n            this.atk = this.atk * atkP;\r\n            this.hp = this.hp * hpP;\r\n\r\n\r\n            // 怪物随着时间加强\r\n            let arr = designManager.getTable(constants.tableName.monsterTimeAdd);\r\n            let addRow = null;\r\n            for (let i = 0; i < arr.length; i++) {\r\n                let row = arr[i];\r\n                if (mapModel.time <= row.time) {\r\n                    addRow = row;\r\n                    break;\r\n                }\r\n            }\r\n            if (!addRow) {\r\n                addRow = designManager.getLastRow(constants.tableName.monsterTimeAdd);\r\n            }\r\n            this.speed = Math.ceil(this.speed * addRow.speed);\r\n            this.hp = Math.ceil(this.hp * addRow.hp);\r\n            this.atk = Math.ceil(this.atk * addRow.atk);\r\n        }\r\n\r\n        this.hpMax = this.hp;\r\n        this.isBoss = 0;\r\n\r\n        this.refreshHpLayer();\r\n        this.setBodySkin();\r\n\r\n        try {\r\n            let monsterStr = \"Monster\" + id;\r\n            switch (id) {\r\n                case 13:\r\n                case 16:\r\n                case 17:\r\n                    monsterStr = \"Monster13\";\r\n                    break;\r\n                case 12:\r\n                case 18:\r\n                    monsterStr = \"Monster12\";\r\n                    break;\r\n                case 25:\r\n                    monsterStr = \"Monster4\";\r\n                    break;\r\n                case 26:\r\n                    monsterStr = \"Monster5\";\r\n                    break;\r\n                case 27:\r\n                    monsterStr = \"Monster6\";\r\n                    break;\r\n                case 28:\r\n                    monsterStr = \"Monster23\";\r\n                    break;\r\n                case 29:\r\n                    monsterStr = \"Monster22\";\r\n                    break;\r\n                case 30:\r\n                    monsterStr = \"Monster21\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            let monsterUtil = cocosUtil.addComponentOnce(this, monsterStr);\r\n            monsterUtil.unscheduleAllCallbacks();\r\n            this.monsterUtil = monsterUtil;\r\n            // @ts-ignore\r\n            monsterUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getSaveData() {\r\n        let data: any = {};\r\n        data.id = this.id;\r\n        data.hp = this.hp;\r\n        data.atk = this.atk;\r\n        data.pos = this.node.position;\r\n        data.isBoss = this.isBoss;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        this.hp = data.hp;\r\n        this.atk = data.atk;\r\n        this.node.position = data.pos;\r\n        this.isBoss = data.isBoss;\r\n\r\n        this.refreshHpLayer();\r\n        if (this.isBoss) {\r\n            // 缓存boss对象\r\n            mapModel.monsterSystem.bossMonster = this;\r\n            mapModel.mapLayer.refreshBossHpLayer();\r\n        }\r\n    }\r\n\r\n    animationEndCallback(aniName: string) {\r\n        this.recycleSelf();\r\n    }\r\n\r\n    recycleSelf() {\r\n        mapModel.monsterSystem.recycleMonsterNode(this.node);\r\n    }\r\n\r\n    // 蹭到玩家\r\n    contactBeginPlayer() {\r\n        this.touchPlayer();\r\n        this.unschedule(this.touchPlayer);\r\n        this.schedule(this.touchPlayer, this.row.touchTime, macro.REPEAT_FOREVER);\r\n    }\r\n    // 结束蹭玩家\r\n    contactEndPlayer() {\r\n        this.unschedule(this.touchPlayer);\r\n    }\r\n    touchPlayer() {\r\n        if (this.touchPlayerTimeCount < this.row.touchTime) {\r\n            return;\r\n        }\r\n        this.touchPlayerTimeCount = 0;\r\n        mapModel.player.hitWithDam(this.atk);\r\n    }\r\n\r\n    // 来自玩家的挤压\r\n    playerForceMove(movePos: Vec3) {\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        let pos = this.node.getPosition();\r\n\r\n        playerPos.subtract(pos).negative();\r\n        // 只有挡在玩家前进方向的怪物才需要推开\r\n        let radian = Vec2.angle(playerPos, movePos);\r\n        if (radian > Math.PI * 0.7) {\r\n            return;\r\n        }\r\n        playerPos.normalize().multiplyScalar(movePos.length());\r\n        pos.add(playerPos);\r\n        this.node.setPosition(pos);\r\n    }\r\n\r\n    // 来自其他怪物的挤压\r\n    monsterForceMove(monster: Monster, movePos: Vec3) {\r\n        if (this.isPauseMove) {\r\n            return;\r\n        }\r\n\r\n        let monsterPos = monster.node.getPosition();\r\n        let pos = this.node.getPosition();\r\n\r\n        monsterPos.subtract(pos).negative();\r\n        // 只有挡在怪物前进方向的怪物才需要推开\r\n        let radian = Vec2.angle(monsterPos, movePos);\r\n        if (radian > Math.PI * 0.7) {\r\n            return;\r\n        }\r\n        monsterPos.normalize().multiplyScalar(movePos.length());\r\n        pos.add(monsterPos);\r\n        this.node.setPosition(pos);\r\n    }\r\n\r\n    // 受到伤害\r\n    hitWithDam(dam: number, shineColor?: Color) {\r\n        if (this.hp <= 0 || dam <= 0) {\r\n            return;\r\n        }\r\n\r\n        // 再加上玩家局外的攻击力\r\n        dam = dam + mapModel.player.atk;\r\n\r\n        // 缩放\r\n        this.bodyNode.scale = this.vec3Obj.bodyNodeScale;\r\n        cocosUtil.tweenHitScale(this.bodyNode, 0.05);\r\n\r\n        if (this.shineColor && this.row.type != constants.monsterTypes.boss) {\r\n            // 闪白\r\n            let materialPath = constants.materials.shineColor;\r\n            if (this.isSpine) {\r\n                materialPath = constants.materials.shineColorSpine;\r\n            }\r\n            this.shineColor.startShine(materialPath, shineColor);\r\n        }\r\n\r\n        this.hp -= dam;\r\n        if (this.hp < 0) {\r\n            this.hp = 0;\r\n        }\r\n        this.refreshHpLayer();\r\n        if (this.isBoss) {\r\n            mapModel.mapLayer.bossSubHp(dam);\r\n        }\r\n        if (this.id == constants.monsterIds.boxMonster) {\r\n            // 宝箱怪掉金币\r\n            mapModel.propSystem.addProp(constants.propIds.boxMonsterCoin, cocosUtil.convertToWorldSpace(this.node));\r\n        }\r\n\r\n        if (this.hp <= 0) {\r\n            // 怪物阵亡\r\n            mapModel.mapSystem.monsterDead(this.id, cocosUtil.convertToWorldSpace(this.node));\r\n            this.unschedule(this.touchPlayer);\r\n            this.collider.enabled = false;\r\n            this.animationCtrl.playAnimation(constants.animations.die, false, (aniName: string) => {\r\n                mapModel.monsterSystem.monsterDead(this.id);\r\n                this.animationEndCallback(aniName);\r\n                if (this.monsterUtil && this.monsterUtil.selfDead) {\r\n                    this.monsterUtil.selfDead();\r\n                }\r\n            });\r\n            if (this.monsterUtil) {\r\n                this.monsterUtil.unscheduleAllCallbacks();\r\n            }\r\n        }\r\n        // 伤害数字\r\n        let color = null;\r\n        if (dam >= designManager.config.damColor2) {\r\n            color = \"#f56d0a\";\r\n        } else if (dam >= designManager.config.damColor1) {\r\n            color = \"#e1b600\";\r\n        }\r\n        mapModel.numSystem.addNum(dam, cocosUtil.convertToWorldSpace(this.node), color);\r\n    }\r\n\r\n    refreshHpLayer() {\r\n        if (!this.hpProgress) {\r\n            return;\r\n        }\r\n        this.hpProgress.progress = this.hp / this.hpMax;\r\n    }\r\n\r\n    setDirection(direction: Vec3) {\r\n        this.direction = direction.normalize();\r\n    }\r\n\r\n    getBulletDirection() {\r\n        let direction = null;\r\n        if (this.node.getScale().x > 0) {\r\n            // 向左\r\n            direction = v3(-1, 0, 0);\r\n        } else {\r\n            // 向右\r\n            direction = v3(1, 0, 0);\r\n        }\r\n        return direction;\r\n    }\r\n\r\n    getInfoPosition(index?: number, isWorld?: boolean) {\r\n        let p = this.node.getPosition();\r\n        let infoNode = find(\"info\", this.node);\r\n        if (index > 0) {\r\n            infoNode = find(\"info\" + index, this.node);\r\n        }\r\n        if (infoNode) {\r\n            infoNode.active = false;\r\n            // 位置修正\r\n            let infoPos = infoNode.getPosition();\r\n            if (this.node.scale.x < 0) {\r\n                infoPos.x = -infoPos.x;\r\n            }\r\n            p.x += infoPos.x;\r\n            p.y += infoPos.y;\r\n        }\r\n        if (isWorld) {\r\n            p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        }\r\n\r\n        return p;\r\n    }\r\n\r\n    getMoveSpeed() {\r\n        return this.speed;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        // 向目标点移动，默认是玩家\r\n        mapModel.player.node.getPosition(this.vec3Obj.playerPos);\r\n        this.node.getPosition(this.vec3Obj.nodePos);\r\n        let direction = null;\r\n        if (this.monsterUtil && this.monsterUtil.getDirection) {\r\n            direction = this.monsterUtil.getDirection();\r\n        } else {\r\n            direction = this.vec3Obj.playerPos.subtract(this.vec3Obj.nodePos).normalize();\r\n        }\r\n\r\n        let targetDirection = null;\r\n        for (let i = 0; i < 2; i++) {\r\n            let dir = direction;\r\n            if (i == 1) {\r\n                dir = Vec3.rotateZ(this.vec3Obj.outVec3, direction, Vec3.ZERO, this.sideRadian);\r\n                dir = dir.normalize();\r\n            }\r\n            let mp = dir.multiplyScalar(this.raycastDis);\r\n            cocosUtil.vec3CopyVal(this.vec3Obj.vec3Temp, this.vec3Obj.nodePos);\r\n            let endPos = this.vec3Obj.vec3Temp.add(mp);\r\n            endPos = cocosUtil.convertToWorldSpaceWithPos(this.node, endPos);\r\n            let colliderArr = PhysicsSystem2D.instance.testPoint(v2(endPos.x, endPos.y));\r\n            let has = false;\r\n            for (let k = 0; k < colliderArr.length; k++) {\r\n                let collider = colliderArr[k];\r\n                if (collider != this.collider && (collider.node != this.node)\r\n                    && collider.group == physicsGroup.MONSTER) {\r\n                    has = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!has) {\r\n                targetDirection = dir;\r\n                break;\r\n            }\r\n        }\r\n        this.targetDirection = targetDirection;\r\n\r\n        if (!this.targetDirection) {\r\n            return;\r\n        }\r\n\r\n        this.targetDirection = this.targetDirection.clone();\r\n    }\r\n\r\n    move(dt: number) {\r\n        this.touchPlayerTimeCount += dt;\r\n\r\n        if (this.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        mapModel.player.node.getPosition(this.vec3Obj.playerPos);\r\n        this.node.getPosition(this.vec3Obj.nodePos);\r\n        this.distancePlayer = Vec2.distance(this.vec3Obj.nodePos, this.vec3Obj.playerPos);\r\n\r\n        // 朝向玩家\r\n        if (mapModel.player.hp > 0 && this.canFace) {\r\n            this.node.getScale(this.vec3Obj.nodeScale);\r\n            if (this.hpProgress) {\r\n                this.hpProgress.node.getScale(this.vec3Obj.hpScale);\r\n            }\r\n            if (this.vec3Obj.nodePos.x >= this.vec3Obj.playerPos.x) {\r\n                this.vec3Obj.nodeScale.x = Math.abs(this.vec3Obj.nodeScale.x);\r\n                if (this.hpProgress) {\r\n                    this.vec3Obj.hpScale.x = 1;\r\n                }\r\n            } else {\r\n                this.vec3Obj.nodeScale.x = -Math.abs(this.vec3Obj.nodeScale.x);\r\n                if (this.hpProgress) {\r\n                    this.vec3Obj.hpScale.x = -1;\r\n                }\r\n            }\r\n            this.node.scale = this.vec3Obj.nodeScale;\r\n            if (this.hpProgress) {\r\n                this.hpProgress.node.scale = this.vec3Obj.hpScale;\r\n            }\r\n        }\r\n\r\n        let speed = this.getMoveSpeed();\r\n        if (speed <= 0 || this.isPauseMove) {\r\n            return;\r\n        }\r\n\r\n        if (this.monsterUtil && this.monsterUtil.moveStop) {\r\n            return;\r\n        }\r\n\r\n        if (this.monsterUtil && this.monsterUtil.minDisPlayer > 0 && this.distancePlayer <= this.monsterUtil.minDisPlayer) {\r\n            return;\r\n        }\r\n\r\n        if (!this.targetDirection) {\r\n            return;\r\n        }\r\n\r\n        let dis = speed * dt;\r\n        let movePos = this.targetDirection.normalize().multiplyScalar(dis);\r\n        this.direction = movePos;\r\n\r\n        this.node.position = this.vec3Obj.nodePos.add(movePos);\r\n        if (this.row.type == constants.monsterTypes.boss) {\r\n            mapModel.mapSystem.adjustInWall(this.node);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 小雷达\r\n@ccclass('Monster12')\r\nexport class Monster12 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1012;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        if (this.monster.id == 18) {\r\n            this.bulletId = 1016;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 4);\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 3 + Math.random() * 2;\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 精英机器人\r\n@ccclass('Monster13')\r\nexport class Monster13 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1013;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        if (this.monster.id == 16) {\r\n            this.bulletId = 1014;\r\n        } else if (this.monster.id == 17) {\r\n            this.bulletId = 1015;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 2);\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 2 + Math.random();\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, find, tween, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 炸弹巨人\r\n@ccclass('Monster21')\r\nexport class Monster21 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1017;\r\n\r\n    otherCollider1: BoxCollider2D;\r\n    otherCollider2: BoxCollider2D;\r\n    otherCollider3: BoxCollider2D;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.otherCollider1 = find(\"collider1\", this.node).getComponent(BoxCollider2D);\r\n        this.otherCollider2 = find(\"collider2\", this.node).getComponent(BoxCollider2D);\r\n        this.otherCollider3 = find(\"collider3\", this.node).getComponent(BoxCollider2D);\r\n\r\n        this.resetColliders();\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    resetColliders() {\r\n        this.otherCollider1.enabled = false;\r\n        this.otherCollider2.enabled = false;\r\n        this.otherCollider3.enabled = false;\r\n    }\r\n\r\n    startSkillLogic() {\r\n        this.scheduleOnce(() => {\r\n            let arr: any = [\r\n                { id: 2, weight: 10 },\r\n                { id: 3, weight: 10 },\r\n            ];\r\n\r\n            let skill1Tag = this.getSkill1Tag();\r\n            if (skill1Tag > 0) {\r\n                arr.push({ id: 1, weight: 100, tag: skill1Tag });\r\n            }\r\n\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            if (ret) {\r\n                this[\"useSkill\" + ret.id](ret);\r\n            } else {\r\n                this.startSkillLogic();\r\n            }\r\n        }, 1.5 + Math.random());\r\n    }\r\n\r\n    getSkill1Tag() {\r\n        if (this.monster.distancePlayer >= 560) {\r\n            return 0;\r\n        }\r\n        let pos = mapModel.player.node.position.clone().subtract(this.node.position);\r\n        let angle = cocosUtil.vec2XAngle(pos);\r\n        if ((angle >= 345 || angle <= 15) || (angle >= 165 && angle <= 195)) {\r\n            // 中间\r\n            return 1;\r\n        }\r\n        if ((angle >= 30 && angle <= 60) || (angle >= 120 && angle <= 150)) {\r\n            // 上面\r\n            return 2;\r\n        }\r\n        if ((angle >= 300 && angle <= 330) || (angle >= 210 && angle <= 240)) {\r\n            // 下面\r\n            return 3;\r\n        }\r\n        return 0;\r\n\r\n    }\r\n    useSkill1(info: any) {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n\r\n        let otherCollider = this[\"otherCollider\" + info.tag];\r\n        otherCollider.enabled = true;\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attackHand\" + info.tag, () => {\r\n            otherCollider.enabled = false;\r\n            this.monster.canFace = true;\r\n            this.moveStop = false;\r\n            this.startSkillLogic();\r\n        });\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        let dis = 500 + Math.random() * 100;\r\n\r\n        let time = 1;\r\n        let extraObj: any = {};\r\n        extraObj.duration = time;\r\n        extraObj.monster = this.monster;\r\n        extraObj.dis = dis;\r\n        mapModel.hintSystem.addHint(HintNames.blockArrow, cocosUtil.convertToWorldSpace(this.node), 0, extraObj);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.moveStop = true;\r\n            this.monster.canFace = false;\r\n            let pos = mapModel.player.node.position.clone();\r\n            pos.subtract(this.node.position).normalize().multiplyScalar(dis);\r\n            let targetPos = this.node.position.clone().add(pos);\r\n\r\n            tween(this.node).to(1, { position: targetPos }, {\r\n                easing: \"smooth\", onUpdate: () => {\r\n                    mapModel.mapSystem.adjustInWall(this.node);\r\n                }\r\n            }).start();\r\n\r\n            this.monster.animationCtrl.playAnimationOnce(\"attack2\", () => {\r\n                this.monster.canFace = true;\r\n                this.moveStop = false;\r\n                this.startSkillLogic();\r\n            });\r\n        }, time);\r\n\r\n    }\r\n\r\n    useSkill3() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n\r\n        // 发射4个跟踪子弹\r\n        let direction = this.monster.getBulletDirection();\r\n        this.scheduleOnce(() => {\r\n            for (let i = 0; i < 4; i++) {\r\n                this.scheduleOnce(() => {\r\n                    let pos = this.monster.getInfoPosition(i, true);\r\n                    mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, pos, direction);\r\n                }, i * 0.2);\r\n            }\r\n        }, 0.45);\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack3\", () => {\r\n            this.moveStop = false;\r\n            this.monster.canFace = true;\r\n            this.startSkillLogic();\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪\r\n@ccclass('Monster22')\r\nexport class Monster22 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    // 光波\r\n    bulletId: number = 1018;\r\n    // 水滴\r\n    bulletId2: number = 1019;\r\n    // 泥浆\r\n    bulletId3: number = 1020;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    startSkillLogic() {\r\n        this.scheduleOnce(() => {\r\n            let arr: any = [\r\n                { id: 1, weight: 10 },\r\n                { id: 2, weight: 10 },\r\n            ];\r\n\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            if (ret) {\r\n                this[\"useSkill\" + ret.id]();\r\n            } else {\r\n                this.startSkillLogic();\r\n            }\r\n        }, 1.5 + Math.random());\r\n    }\r\n\r\n    useSkill1() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack1\", () => {\r\n            this.monster.canFace = true;\r\n            this.moveStop = false;\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.5);\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        // 一圈水滴\r\n        let arr = cocosUtil.getCircleDirectionArr(8);\r\n        utilTools.forArr(arr, (direction: any) => {\r\n            mapModel.bulletSystem.addBullet(this.bulletId2, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node), direction, this.bulletId3);\r\n        });\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    selfDead() {\r\n        mapModel.bulletSystem.addBullet(this.bulletId3, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node), null, 2);\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 盾兵\r\n@ccclass('Monster23')\r\nexport class Monster23 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    otherCollider: BoxCollider2D;\r\n\r\n    isFollow: boolean;\r\n\r\n    monsterId: number = 14;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n        this.isFollow = false;\r\n\r\n        this.otherCollider = this.getComponents(BoxCollider2D)[1];\r\n        this.resetCollider();\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    resetCollider() {\r\n        this.otherCollider.enabled = false;\r\n    }\r\n\r\n    startSkillLogic() {\r\n        this.scheduleOnce(() => {\r\n            let arr: any = [\r\n                { id: 1, weight: 10 },\r\n                { id: 2, weight: 10 },\r\n            ];\r\n\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            if (ret) {\r\n                this[\"useSkill\" + ret.id]();\r\n            } else {\r\n                this.startSkillLogic();\r\n            }\r\n        }, 1.5 + Math.random());\r\n    }\r\n\r\n    useSkill1() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n        this.isFollow = true;\r\n        this.monster.collider.enabled = false;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.isFollow = false;\r\n        }, 1);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.otherCollider.enabled = true;\r\n            this.monster.collider.enabled = true;\r\n        }, 1.5);\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack1\", () => {\r\n            this.monster.canFace = true;\r\n            this.moveStop = false;\r\n            this.resetCollider();\r\n            this.startSkillLogic();\r\n        });\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        // 召唤小怪\r\n        for (let i = 0; i < 3; i++) {\r\n            this.scheduleOnce(() => {\r\n                let pos = cocosUtil.getAroundPos(this.node, 150 + 50 * Math.random(), 300);\r\n                mapModel.mapSystem.adjustInWall(pos, 160);\r\n                let worldPos = cocosUtil.convertToWorldSpaceWithPos(this.node, pos);\r\n\r\n                let extraObj: any = {};\r\n                extraObj.monsterId = this.monsterId;\r\n                mapModel.hintSystem.addHint(HintNames.targetPos3, worldPos, 0, extraObj);\r\n            }, i * 0.6);\r\n        }\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this.isFollow) {\r\n            this.node.position = mapModel.player.node.getPosition();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 章鱼\r\n@ccclass('Monster3')\r\nexport class Monster3 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1001;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 5);\r\n\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 4 + Math.random() * 2;\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 狙击手\r\n@ccclass('Monster4')\r\nexport class Monster4 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    // 跟踪导弹\r\n    bulletId1: number = 1002;\r\n    // 一颗大子弹\r\n    bulletId2: number = 1003;\r\n\r\n    // 距离玩家最小距离\r\n    minDisPlayer: number = 300;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 2;\r\n        this.scheduleOnce(() => {\r\n            let ret = Math.random();\r\n            if (ret < 0.4) {\r\n                this.useSkill1();\r\n            } else if (ret < 0.7) {\r\n                this.useSkill1(3);\r\n            } else {\r\n                this.useSkill2();\r\n            }\r\n        }, time);\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack\", () => {\r\n            this.startSkillLogic();\r\n            this.moveStop = false;\r\n        });\r\n        this.scheduleOnce(() => {\r\n            // 发射一颗大子弹\r\n            let pos = this.monster.getInfoPosition(0, true);\r\n            let direction = this.monster.getBulletDirection();\r\n            mapModel.bulletSystem.addBullet(this.bulletId2, physicsGroup.MONSTER_BULLET, pos, direction);\r\n        }, 0.5);\r\n    }\r\n\r\n    useSkill1(num: number = 1) {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack\", () => {\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            // 发射三颗跟踪子弹\r\n            let pos = this.monster.getInfoPosition(0, true);\r\n            let direction = this.monster.getBulletDirection();\r\n\r\n            mapModel.bulletSystem.addBullet(this.bulletId1, physicsGroup.MONSTER_BULLET, pos, direction);\r\n\r\n            if (num == 3) {\r\n                let radian = utilTools.angleToRadian(50);\r\n                let direction2 = Vec3.rotateZ(this.outVec3, direction, Vec3.ZERO, radian);\r\n                mapModel.bulletSystem.addBullet(this.bulletId1, physicsGroup.MONSTER_BULLET, pos, direction2);\r\n\r\n                let direction3 = Vec3.rotateZ(this.outVec3, direction, Vec3.ZERO, -radian);\r\n                mapModel.bulletSystem.addBullet(this.bulletId1, physicsGroup.MONSTER_BULLET, pos, direction3);\r\n            }\r\n\r\n        }, 0.5);\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, tween, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 电锯人\r\n@ccclass('Monster5')\r\nexport class Monster5 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    otherCollider1: BoxCollider2D;\r\n    otherCollider2: BoxCollider2D;\r\n\r\n    // 齿轮子弹\r\n    bulletId: number = 1004;\r\n\r\n    otherColliderOffset: any;\r\n    otherColliderSize: any;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.otherCollider1 = monster.getComponents(BoxCollider2D)[1];\r\n        this.otherCollider2 = monster.getComponents(BoxCollider2D)[2];\r\n        this.resetOtherCollider();\r\n\r\n        this.startSkillLogic();\r\n\r\n    }\r\n\r\n    resetOtherCollider() {\r\n        this.otherCollider1.enabled = true;\r\n        this.otherCollider2.enabled = false;\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 2 + Math.random() * 2;\r\n        this.scheduleOnce(() => {\r\n            if (this.monster.hp <= 0) {\r\n                return;\r\n            }\r\n            if (Math.random() < 0.6) {\r\n                this.attackWithSkill1();\r\n                return;\r\n            }\r\n            this.attackWithSkill2();\r\n        }, time);\r\n    }\r\n\r\n    attackWithSkill1() {\r\n        this.otherCollider1.enabled = false;\r\n        this.otherCollider2.enabled = true;\r\n        this.monster.animationCtrl.playAnimation(\"attack1\", true);\r\n        let speed = this.monster.speed;\r\n        this.monster.speed += speed * 2;\r\n        this.scheduleOnce(() => {\r\n            this.resetOtherCollider();\r\n            this.monster.animationCtrl.playAnimation(constants.animations.walk, true);\r\n            this.monster.speed = speed;\r\n            this.startSkillLogic();\r\n        }, 3);\r\n    }\r\n\r\n    attackWithSkill2() {\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack2\", () => {\r\n            this.startSkillLogic();\r\n        });\r\n\r\n        let pos = this.monster.node.getPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(pos).normalize();\r\n        direction.multiplyScalar(200);\r\n        pos.add(direction);\r\n\r\n        tween(this.monster.node).to(0.5, { position: pos }, { easing: \"quadOut\" }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            // 一圈子弹\r\n            let p = this.monster.getInfoPosition();\r\n            let arr = cocosUtil.getCircleDirectionArr(10);\r\n            p = cocosUtil.convertToWorldSpaceWithPos(this.monster.node, p);\r\n            utilTools.forArr(arr, (direction: any) => {\r\n                mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n            });\r\n        }, 0.5);\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Component, macro, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子\r\n@ccclass('Monster6')\r\nexport class Monster6 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    // 闪电\r\n    bulletId1: number = 1006;\r\n    // 大电球\r\n    bulletId2: number = 1007;\r\n    // 静态扳手\r\n    bulletId3: number = 1009;\r\n\r\n    numCount: number = 0;\r\n\r\n    otherCollider1: BoxCollider2D;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.otherCollider1 = monster.getComponents(BoxCollider2D)[1];\r\n        this.otherCollider1.enabled = false;\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    // 向指定目标方向移动\r\n    getDirection() {\r\n        let pos = this.monster.node.getPosition();\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        if (pos.x < playerPos.x) {\r\n            playerPos.x -= 150;\r\n        } else {\r\n            playerPos.x += 150;\r\n        }\r\n        playerPos.subtract(pos).normalize();\r\n\r\n        return playerPos;\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 1 + Math.random();\r\n        this.scheduleOnce(() => {\r\n            let arr = [\r\n                { id: 3, weight: 10 },\r\n                { id: 4, weight: 20 }\r\n            ];\r\n            if (this.monster.distancePlayer <= 260) {\r\n                arr.push({ id: 1, weight: 20 });\r\n            }\r\n            if (this.monster.distancePlayer <= 460) {\r\n                arr.push({ id: 2, weight: 10 });\r\n            }\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            this[\"useSkill\" + ret.id]();\r\n        }, time);\r\n    }\r\n\r\n    useSkill4() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.animationCtrl.playAnimation(\"attack4\", true);\r\n        this.numCount = 0;\r\n\r\n        this.schedule(() => {\r\n            this.numCount++;\r\n            let pos = this.monster.getInfoPosition(3, true);\r\n\r\n            let arr = cocosUtil.getCircleDirectionArr(6, 150);\r\n\r\n            for (let i = 0; i < 1; i++) {\r\n                let index = Math.floor(Math.random() * arr.length);\r\n                let targetPos = mapModel.player.node.getPosition().add(arr[index]);\r\n                arr.splice(index, 1);\r\n                mapModel.bulletSystem.addBullet(this.bulletId3, physicsGroup.MONSTER_BULLET, pos, null, targetPos);\r\n            }\r\n\r\n            if (this.numCount >= 3) {\r\n                this.moveStop = false;\r\n                this.monster.animationCtrl.playAnimation(\"walk\", true);\r\n                this.unscheduleAllCallbacks();\r\n                this.startSkillLogic();\r\n            }\r\n        }, 2, macro.REPEAT_FOREVER, 0);\r\n    }\r\n\r\n\r\n    useSkill3() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack3\", () => {\r\n            this.moveStop = false;\r\n            this.startSkillLogic();\r\n        });\r\n\r\n        let pos = this.monster.getInfoPosition(2, true);\r\n        mapModel.bulletSystem.addBullet(this.bulletId2, physicsGroup.MONSTER_BULLET, pos, null);\r\n    }\r\n\r\n    // 与玩家的距离<=460才会触发\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack2\", () => {\r\n            this.moveStop = false;\r\n            this.monster.canFace = true;\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            let pos = this.monster.getInfoPosition(0, true);\r\n            mapModel.bulletSystem.addBullet(this.bulletId1, physicsGroup.MONSTER_BULLET, pos);\r\n        }, 1);\r\n    }\r\n\r\n    // 与玩家的距离<=260才会触发\r\n    useSkill1() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack1\", () => {\r\n            this.moveStop = false;\r\n            this.otherCollider1.enabled = false;\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            this.otherCollider1.enabled = true;\r\n        }, 0.05);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 雷球\r\n@ccclass('Monster9')\r\nexport class Monster9 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1011;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 3);\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 3 + Math.random() * 1;\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n","import { macro, Node, UITransform, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nimport { Bullet } from '../item/bullet/Bullet';\r\nimport { Monster } from '../item/monsters/Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MonsterSystem')\r\nexport class MonsterSystem extends BaseLayer {\r\n\r\n    // 按照怪物id进行UI分层\r\n    idMonsterLayerObj: any = {};\r\n\r\n    monsterCreateArr: any = [];\r\n\r\n    bossMonster: Monster;\r\n    bossCreateInfo: any;\r\n\r\n    // 一共产生的怪物数量\r\n    monsterNum: number = 0;\r\n    // 当前在显示的怪物数量\r\n    showMonsterNum: number = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.schedule(this.refreshMonsterShow, 0.5, macro.REPEAT_FOREVER);\r\n        this.schedule(this.createMonsterLogic, 0.1, macro.REPEAT_FOREVER);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n    }\r\n\r\n    getSaveData() {\r\n        let monsterData: any = {};\r\n        monsterData.arr = [];\r\n        monsterData.bossCreateInfo = this.bossCreateInfo;\r\n\r\n        this.forAliveMonster((monster: Monster) => {\r\n            let info = monster.getSaveData();\r\n            monsterData.arr.push(info);\r\n        });\r\n\r\n        return monsterData;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        utilTools.forArr(data.arr, (info: any) => {\r\n            let monster = this.createMonster(info.id);\r\n            monster.loadSaveData(info);\r\n        });\r\n\r\n        this.bossCreateInfo = data.bossCreateInfo;\r\n        if (this.bossCreateInfo) {\r\n            this.createMonsterWithInfo(this.bossCreateInfo.id, this.bossCreateInfo.isBoss, this.bossCreateInfo.warn);\r\n        }\r\n    }\r\n\r\n    // 怪物显示优化\r\n    refreshMonsterShow(dt: number) {\r\n        let destroyCount = 1;\r\n        let showCount = 3;\r\n        let hideCount = 1;\r\n        let showNum = 0;\r\n        let tmpArr = [];\r\n        this.forAliveMonster((monster: Monster, monsterNode: Node) => {\r\n            let row = designManager.getRowById(constants.tableName.monster, monster.id);\r\n            if (monster.distancePlayer < mapModel.dataRadius || !row.isData) {\r\n                // 显示怪物\r\n                showNum++;\r\n                if (!monsterNode.active && showCount > 0) {\r\n                    monsterNode.active = true;\r\n                    showCount--;\r\n                }\r\n            } else if (monster.distancePlayer < mapModel.destroyRadius) {\r\n                // 隐藏怪物\r\n                if (monsterNode.active && hideCount > 0) {\r\n                    hideCount--;\r\n                    monsterNode.active = false;\r\n                }\r\n            } else {\r\n                if (row.type == constants.monsterTypes.common && destroyCount > 0) {\r\n                    // 销毁怪物\r\n                    destroyCount--;\r\n                    tmpArr.push(monsterNode);\r\n                }\r\n            }\r\n        });\r\n        utilTools.forArr(tmpArr, (monsterNode: Node) => {\r\n            monsterNode.getComponent(Monster).recycleSelf();\r\n        });\r\n        this.setString(mapModel.mapLayer.showNumNode, showNum);\r\n        this.showMonsterNum = showNum;\r\n    }\r\n\r\n    // 怪物生成逻辑\r\n    updateMapLevel(dt: number) {\r\n        let removeIdArr = [];\r\n        utilTools.forArr(mapModel.mapLevelArr, (mapLevel: any) => {\r\n            // test\r\n            // mapLevel.row.maxNum = 100;\r\n            // mapLevel.row.createTime = 0.1;\r\n\r\n            if (mapLevel.row.maxNum > 0 && mapLevel.createCount >= mapLevel.row.maxNum) {\r\n                removeIdArr.push(mapLevel.id);\r\n                return;\r\n            }\r\n            if (mapLevel.row.endTime > 0 && mapModel.time > mapLevel.row.endTime + 0.5) {\r\n                removeIdArr.push(mapLevel.id);\r\n                return;\r\n            }\r\n\r\n            // 预警动画\r\n            if (mapLevel.row.warn && !mapLevel.hasWarn && mapModel.time >= mapLevel.row.startTime && !mapLevel.row.isBoss) {\r\n                mapLevel.hasWarn = true;\r\n                mapModel.mapSystem.startWarning(mapLevel.row.warn);\r\n            }\r\n\r\n            // 还没到达生成时间点\r\n            if (mapModel.time < mapLevel.row.startTime) {\r\n                return;\r\n            }\r\n\r\n            mapLevel.timeCount += dt;\r\n            if (mapLevel.timeCount >= mapLevel.row.createTime || mapLevel.createCount == 0) {\r\n                // 生成怪物\r\n                mapLevel.timeCount -= mapLevel.row.createTime;\r\n                mapLevel.createCount++;\r\n                if (mapLevel.row.isBoss) {\r\n                    this.createMonsterWithInfo(mapLevel.row.monsterId, mapLevel.row.isBoss, mapLevel.row.warn);\r\n                    return true;\r\n                }\r\n                this.monsterCreateArr.push({ monsterId: mapLevel.row.monsterId, isBoss: mapLevel.row.isBoss });\r\n                if (playerModel.isRecordAd && mapModel.mapLayer.monsterAddFlag > 0) {\r\n                    for (let i = 0; i < mapModel.mapLayer.monsterAddFlag; i++) {\r\n                        this.monsterCreateArr.push({ monsterId: mapLevel.row.monsterId, isBoss: mapLevel.row.isBoss });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        let tmpArr = [];\r\n        utilTools.forArr(mapModel.mapLevelArr, (mapLevel: any) => {\r\n            if (removeIdArr.indexOf(mapLevel.id) != -1) {\r\n                return;\r\n            }\r\n            tmpArr.push(mapLevel);\r\n        });\r\n        mapModel.mapLevelArr = tmpArr;\r\n    }\r\n\r\n    createMonsterLogic(dt: number) {\r\n        if (!playerModel.isRecordAd && this.showMonsterNum >= 200) {\r\n            return;\r\n        }\r\n        let count = Math.ceil(this.monsterCreateArr.length / 10);\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            let info = this.monsterCreateArr.shift();\r\n            if (!info) {\r\n                return;\r\n            }\r\n            this.createMonsterWithInfo(info.monsterId, info.isBoss);\r\n        }\r\n    }\r\n\r\n    getMonsterLayerNameById(id: number) {\r\n        return \"monsterLayer\" + id;\r\n    }\r\n\r\n    getMonsterLayerById(monsterId: number) {\r\n        let monsterLayer = this.idMonsterLayerObj[monsterId];\r\n        if (!monsterLayer) {\r\n            monsterLayer = new Node(this.getMonsterLayerNameById(monsterId));\r\n            monsterLayer.addComponent(UITransform);\r\n            monsterLayer.setPosition(0, 0);\r\n            monsterLayer.parent = this.node;\r\n            this.idMonsterLayerObj[monsterId] = monsterLayer;\r\n\r\n            let row = designManager.getRowById(constants.tableName.monster, monsterId);\r\n            let nodePoolUtil = monsterLayer.addComponent(NodePoolUtil);\r\n            nodePoolUtil.init(mapModel.monsterPrefabObj[row.prefab]);\r\n        }\r\n        return monsterLayer;\r\n    }\r\n\r\n    createMonster(monsterId: number, worldPos?: Vec3) {\r\n        let nodePoolUtil: NodePoolUtil = this.getMonsterLayerById(monsterId).getComponent(NodePoolUtil);\r\n        let monsterNode = nodePoolUtil.getNode();\r\n        let monster: Monster = cocosUtil.addComponentOnce(monsterNode, Monster);\r\n        monster.init(monsterId);\r\n        if (worldPos) {\r\n            monster.node.position = cocosUtil.convertToNodeSpace(monster.node, worldPos);\r\n        }\r\n\r\n        this.monsterNum++;\r\n        this.setString(mapModel.mapLayer.monsterNumNode, this.monsterNum);\r\n\r\n        return monster;\r\n    }\r\n\r\n    async createMonsterWithInfo(monsterId: number, isBoss: number, warn?: string) {\r\n        // // test\r\n        // if (isBoss) {\r\n        //     monsterId = 23;\r\n        // }\r\n\r\n        if (isBoss) {\r\n            // 停止计时\r\n            mapModel.mapSystem.stopTimeCount = true;\r\n            // 移除所有怪物计划\r\n            mapModel.mapLevelArr = [];\r\n            this.monsterCreateArr = [];\r\n\r\n            this.bossCreateInfo = {\r\n                id: monsterId,\r\n                isBoss: isBoss,\r\n                warn: warn\r\n            };\r\n            if (this.getMonsterNumByType(constants.monsterTypes.elite) > 0) {\r\n                // 如果有精英怪，就要等精英怪打死后才能出现\r\n                return;\r\n            }\r\n\r\n            mapModel.mapSystem.startWarning(warn);\r\n            await cocosUtil.waitTimeAsync(this, 2);\r\n            this.bossCreateInfo = undefined;\r\n        }\r\n\r\n        let monster = this.createMonster(monsterId);\r\n\r\n        if (isBoss) {\r\n            monster.isBoss = isBoss;\r\n\r\n            // BOSS产生位置和预警\r\n            let pos = mapModel.player.node.getPosition();\r\n            pos.y += 400;\r\n            monster.node.position = pos;\r\n            monster.monsterUtil.moveStop = true;\r\n            monster.canFace = false;\r\n            monster.node.parent.active = false;\r\n            monster.collider.enabled = false;\r\n            this.scheduleOnce(() => {\r\n                monster.node.parent.active = true;\r\n                cocosUtil.tweenScaleIn(monster.node, 0.5, () => {\r\n                    monster.monsterUtil.moveStop = false;\r\n                    monster.canFace = true;\r\n                    monster.collider.enabled = true;\r\n                });\r\n\r\n                // let time = 0.5;\r\n                // monster.node.setScale(0, 0, 1);\r\n                // tween(monster.node).to(time, {\r\n                //     scale: v3(1.2, 1.2, 1)\r\n                // }).to(time / 2, {\r\n                //     scale: v3(1, 1, 1)\r\n                // }).call(() => {\r\n                //     monster.monsterUtil.moveStop = false;\r\n                //     monster.canFace = true;\r\n                // }).start();\r\n\r\n            }, 0.8);\r\n            mapModel.mapSystem.bossPosHintAnimationCtrl.node.active = true;\r\n            mapModel.mapSystem.bossPosHintAnimationCtrl.node.position = pos;\r\n            mapModel.mapSystem.bossPosHintAnimationCtrl.playAnimation(\"aa\", false, () => {\r\n                mapModel.mapSystem.bossPosHintAnimationCtrl.node.active = false;\r\n            });\r\n\r\n            // 销毁所有普通怪物\r\n            let hitArr = [];\r\n            this.forAliveMonster((monster: Monster) => {\r\n                if (monster.row.type != constants.monsterTypes.common) {\r\n                    return;\r\n                }\r\n                monster.waitHit = true;\r\n                let info: any = {};\r\n                info.monster = monster;\r\n                hitArr.push(info);\r\n            });\r\n            this.batchHitMonster(hitArr);\r\n\r\n            // 怪物子弹全部消失\r\n            mapModel.bulletSystem.forVisibleMonsterBullet((bullet: Bullet) => {\r\n                bullet.recycleSelf();\r\n            });\r\n\r\n            // 显示围栏\r\n            mapModel.mapSystem.showWallLayer();\r\n\r\n            // 缓存boss对象\r\n            this.bossMonster = monster;\r\n\r\n            mapModel.mapLayer.refreshBossHpLayer();\r\n        }\r\n\r\n        return monster;\r\n    }\r\n\r\n    getMonsterNumByType(type: number = 0) {\r\n        let num = 0;\r\n        this.forAliveMonster((monster: Monster) => {\r\n            if (!type) {\r\n                num++;\r\n                return;\r\n            }\r\n            if (monster.row.type == type) {\r\n                num++;\r\n            }\r\n        });\r\n\r\n        return num;\r\n    }\r\n\r\n    monsterDead(id: number) {\r\n        let row = designManager.getRowById(constants.tableName.monster, id);\r\n        if (row.type == constants.monsterTypes.boss) {\r\n            mapModel.mapSystem.bossDead();\r\n        }\r\n        if (id == constants.monsterIds.boxMonster) {\r\n            // 宝箱怪阵亡弹窗\r\n            mapModel.mapLayer.popLayer(constants.layers.BoxMonsterLayer);\r\n        }\r\n\r\n        if (row.type == constants.monsterTypes.elite && this.bossCreateInfo) {\r\n            this.createMonsterWithInfo(this.bossCreateInfo.id, this.bossCreateInfo.isBoss, this.bossCreateInfo.warn);\r\n        }\r\n    }\r\n\r\n    // 分批怪物受击\r\n    batchHitMonster(hitArr: any, num: number = 2) {\r\n        let killMonsterFunc = () => {\r\n            for (let i = 0; i < num; i++) {\r\n                let hitInfo = hitArr.shift();\r\n                if (!hitInfo) {\r\n                    return;\r\n                }\r\n                let monster: Monster = hitInfo.monster;\r\n                if (monster.waitHit) {\r\n                    let dam = monster.hp;\r\n                    if (hitInfo.dam) {\r\n                        dam = hitInfo.dam;\r\n                    }\r\n                    monster.hitWithDam(dam);\r\n                    monster.waitHit = false;\r\n                }\r\n            }\r\n            this.scheduleOnce(() => {\r\n                killMonsterFunc();\r\n            });\r\n        };\r\n        killMonsterFunc();\r\n    }\r\n\r\n    recycleMonsterNode(monsterNode: Node) {\r\n        let monster = monsterNode.getComponent(Monster);\r\n        monster.hp = 0;\r\n        let monsterId = monster.id;\r\n        let nodePoolUtil = this.getMonsterLayerById(monsterId).getComponent(NodePoolUtil);\r\n        nodePoolUtil.recycleNode(monsterNode);\r\n    }\r\n\r\n    // 遍历屏幕范围内的存活怪物\r\n    forVisibleMonster(cb: (monster: Monster) => void) {\r\n        utilTools.forArr(this.node.children, (monsterLayer: Node) => {\r\n            utilTools.forArr(monsterLayer.children, (monsterNode: Node) => {\r\n                if (!monsterNode.active) {\r\n                    return;\r\n                }\r\n                if (!mapModel.isInScreenVisible(monsterNode)) {\r\n                    return;\r\n                }\r\n                let monster = monsterNode.getComponent(Monster);\r\n                if (monster.hp <= 0) {\r\n                    return;\r\n                }\r\n                cb(monster);\r\n            });\r\n        });\r\n    }\r\n\r\n    // 遍历所有的存活怪物\r\n    forAliveMonster(cb: (monster: Monster, monsterNode: Node) => void) {\r\n        utilTools.forArr(this.node.children, (monsterLayer: Node) => {\r\n            utilTools.forArr(monsterLayer.children, (monsterNode: Node) => {\r\n                let monster = monsterNode.getComponent(Monster);\r\n                if (monster.hp <= 0) {\r\n                    return;\r\n                }\r\n                cb(monster, monsterNode);\r\n            });\r\n        });\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.updateMapLevel(dt);\r\n        this.forAliveMonster((monster: Monster) => {\r\n            monster.updateLogic(dt);\r\n        });\r\n    }\r\n\r\n    update(dt: number) {\r\n        // 怪物移动\r\n        this.forAliveMonster((monster: Monster) => {\r\n            monster.move(dt);\r\n        });\r\n    }\r\n}\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MoreGameLayer')\r\nexport class MoreGameLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property({ type: Node }) audioIconOpen: Node = null;\r\n    @property({ type: Node }) audioIconClose: Node = null;\r\n\r\n    onLoad() {\r\n        // this.fitNodeWidget(this.btnClose, 100)\r\n\r\n    }\r\n\r\n    onEnable() {\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.refreshAudioLayer();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n        tyqSDK.hideCustomRectCenterAd()\r\n    }\r\n\r\n    start() {\r\n        ///   console.log(\"tyqSDK.showCustomRectCenterAd\")\r\n        let self = this\r\n        tyqSDK.showCustomRectCenterAd(function () {\r\n            self.closeBless()\r\n        })\r\n    }\r\n\r\n    closeBless() {\r\n        this.closeLayer()\r\n    }\r\n\r\n    refreshAudioLayer() {\r\n        if (audioManager.musicVolume > 0) {\r\n            this.audioIconOpen.active = true;\r\n            this.audioIconClose.active = false;\r\n        } else {\r\n            this.audioIconOpen.active = false;\r\n            this.audioIconClose.active = true;\r\n        }\r\n    }\r\n\r\n\r\n    onClickBtnHome() {\r\n        tyqSDK.hideCustomRectCenterAd()\r\n        serverMsg.send(msgac.mapLeave);\r\n    }\r\n\r\n    onClickBtnAudio() {\r\n        if (audioManager.musicVolume > 0) {\r\n            audioManager.setMusicVolume(0);\r\n            audioManager.setEffectVolume(0);\r\n        } else {\r\n            audioManager.setMusicVolume(1);\r\n            audioManager.setEffectVolume(1);\r\n        }\r\n        this.refreshAudioLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { Color, IAssembler, RenderData, v3, Vec2 } from \"cc\";\r\nimport { JSB } from \"cc/env\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { MotionStreakUtil } from \"./MotionStreakUtil\";\r\n\r\nconst _tangent = new Vec2();\r\n// const _miter = new Vec2();\r\nconst _normal = new Vec2();\r\nconst _vec2 = new Vec2();\r\nlet QUAD_INDICES;\r\n\r\nfunction normal(out: Vec2, dir: Vec2) {\r\n    // get perpendicular\r\n    out.x = -dir.y;\r\n    out.y = dir.x;\r\n    return out;\r\n}\r\n\r\nfunction computeMiter(miter, lineA, lineB, halfThick, maxMultiple) {\r\n    // get tangent line\r\n    lineA.add(lineB, _tangent);\r\n    _tangent.normalize();\r\n\r\n    // get miter as a unit vector\r\n    miter.x = -_tangent.y;\r\n    miter.y = _tangent.x;\r\n    _vec2.x = -lineA.y;\r\n    _vec2.y = lineA.x;\r\n\r\n    // get the necessary length of our miter\r\n    let multiple = 1 / miter.dot(_vec2);\r\n    if (maxMultiple) {\r\n        multiple = Math.min(multiple, maxMultiple);\r\n    }\r\n    return halfThick * multiple;\r\n}\r\n\r\nexport const MotionStreakAssemblerUtil: IAssembler = {\r\n    createData(comp: MotionStreakUtil) {\r\n        const renderData = comp.requestRenderData();\r\n        renderData.dataLength = 4;\r\n        renderData.resize(16, (16 - 2) * 3);\r\n        return renderData;\r\n    },\r\n\r\n    tmpVec3: v3(0, 0, 0),\r\n    update(comp: MotionStreakUtil, dt: number) {\r\n        const stroke = comp.stroke / 2;\r\n\r\n        const node = comp.node;\r\n        const tx = node.getPosition().x;\r\n        const ty = node.getPosition().y;\r\n\r\n        const points = comp.points;\r\n\r\n        let cur;\r\n        if (points.length > 1) {\r\n            const point = points[0];\r\n            const difx = point.point.x - tx;\r\n            const dify = point.point.y - ty;\r\n            if ((difx * difx + dify * dify) < comp.minSeg) {\r\n                cur = point;\r\n            }\r\n        }\r\n\r\n        if (!cur) {\r\n            cur = new MotionStreakUtil.Point();\r\n            points.unshift(cur);\r\n        }\r\n\r\n        cur.setPoint(tx, ty);\r\n        cur.time = comp.fadeTime + dt;\r\n\r\n        let vertexCount = 0;\r\n        let indexCount = 0;\r\n\r\n        if (points.length < 2) {\r\n            return;\r\n        }\r\n\r\n        const renderData = comp.renderData!;\r\n        this.updateRenderDataCache(comp, renderData);\r\n        const color = comp.color;\r\n        const cr = color.r;\r\n        const cg = color.g;\r\n        const cb = color.b;\r\n        const ca = color.a;\r\n\r\n        const prev = points[1];\r\n        prev.distance = Vec2.subtract(_vec2, cur.point, prev.point).length();\r\n        _vec2.normalize();\r\n        prev.setDir(_vec2.x, _vec2.y);\r\n        cur.setDir(_vec2.x, _vec2.y);\r\n\r\n        renderData.dataLength = points.length * 2;\r\n\r\n        const data = renderData.data;\r\n        const fadeTime = comp.fadeTime;\r\n        let findLast = false;\r\n        for (let i = points.length - 1; i >= 0; i--) {\r\n            const p = points[i];\r\n            const point = p.point;\r\n            const dir = p.dir;\r\n            p.time -= dt;\r\n\r\n            if (p.time < 0) {\r\n                points.splice(i, 1);\r\n                continue;\r\n            }\r\n\r\n            const progress = p.time / fadeTime;\r\n\r\n            const next = points[i - 1];\r\n            if (!findLast) {\r\n                if (!next) {\r\n                    points.splice(i, 1);\r\n                    continue;\r\n                }\r\n\r\n                point.x = next.point.x - dir.x * progress;\r\n                point.y = next.point.y - dir.y * progress;\r\n            }\r\n            findLast = true;\r\n\r\n            normal(_normal, dir);\r\n\r\n            const da = progress * ca;\r\n            const c = ((da << 24) >>> 0) + (cb << 16) + (cg << 8) + cr;\r\n\r\n            let offset = vertexCount;\r\n\r\n            let tmpX = point.x + _normal.x * stroke;\r\n            let tmpY = point.y + _normal.y * stroke;\r\n            this.tmpVec3.x = tmpX;\r\n            this.tmpVec3.y = tmpY;\r\n            let pos = cocosUtil.convertToWorldSpaceWithPos(node, this.tmpVec3);\r\n            data[offset].x = pos.x;\r\n            data[offset].y = pos.y;\r\n\r\n            data[offset].u = 1;\r\n            data[offset].v = progress;\r\n            data[offset].color._val = c;\r\n\r\n            offset += 1;\r\n\r\n            // data[offset].x = point.x - _normal.x * stroke;\r\n            // data[offset].y = point.y - _normal.y * stroke;\r\n            tmpX = point.x - _normal.x * stroke;\r\n            tmpY = point.y - _normal.y * stroke;\r\n            this.tmpVec3.x = tmpX;\r\n            this.tmpVec3.y = tmpY;\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(node, this.tmpVec3);\r\n            data[offset].x = pos.x;\r\n            data[offset].y = pos.y;\r\n\r\n            data[offset].u = 0;\r\n            data[offset].v = progress;\r\n            data[offset].color._val = c;\r\n\r\n            vertexCount += 2;\r\n        }\r\n\r\n        indexCount = vertexCount <= 2 ? 0 : (vertexCount - 2) * 3;\r\n\r\n        renderData.resize(vertexCount, indexCount); // resize\r\n\r\n        if (JSB) {\r\n            const indexCount = renderData.indexCount;\r\n            this.createQuadIndices(comp, indexCount);\r\n            renderData.chunk.setIndexBuffer(QUAD_INDICES);\r\n\r\n            //  Fill all dataList to vData\r\n            this.updateWorldVertexAllData(comp);\r\n\r\n            renderData.updateRenderData(comp, comp.texture!);\r\n            // No need update WorldMatrix, so change dirty flag\r\n            // A dirty hack\r\n            renderData.renderDrawInfo.setVertDirty(false);\r\n            comp.node.hasChangedFlags = 0;\r\n        }\r\n    },\r\n\r\n    updateWorldVertexAllData(comp: MotionStreakUtil) {\r\n        const renderData = comp.renderData!;\r\n        const stride = renderData.floatStride;\r\n        const dataList = renderData.data;\r\n        const vData = renderData.chunk.vb;\r\n        for (let i = 0; i < dataList.length; i++) {\r\n            const offset = i * stride;\r\n            vData[offset + 0] = dataList[i].x;\r\n            vData[offset + 1] = dataList[i].y;\r\n            vData[offset + 2] = dataList[i].z;\r\n            vData[offset + 3] = dataList[i].u;\r\n            vData[offset + 4] = dataList[i].v;\r\n            Color.toArray(vData, dataList[i].color, offset + 5);\r\n        }\r\n    },\r\n\r\n    createQuadIndices(comp, indexCount) {\r\n        const renderData = comp.renderData!;\r\n        const chunk = renderData.chunk;\r\n        const vid = 0;\r\n        const meshBuffer = chunk.meshBuffer;\r\n        let indexOffset = meshBuffer.indexOffset;\r\n        QUAD_INDICES = null;\r\n        QUAD_INDICES = new Uint16Array(indexCount);\r\n        for (let i = 0, l = indexCount; i < l; i += 2) {\r\n            const start = vid + i;\r\n            QUAD_INDICES[indexOffset++] = start;\r\n            QUAD_INDICES[indexOffset++] = start + 2;\r\n            QUAD_INDICES[indexOffset++] = start + 1;\r\n            QUAD_INDICES[indexOffset++] = start + 1;\r\n            QUAD_INDICES[indexOffset++] = start + 2;\r\n            QUAD_INDICES[indexOffset++] = start + 3;\r\n        }\r\n    },\r\n\r\n    updateRenderDataCache(comp: MotionStreakUtil, renderData: RenderData) {\r\n        if (renderData.passDirty) {\r\n            renderData.updatePass(comp);\r\n        }\r\n        if (renderData.nodeDirty) {\r\n            renderData.updateNode(comp);\r\n        }\r\n        if (renderData.textureDirty && comp.texture) {\r\n            renderData.updateTexture(comp.texture);\r\n            renderData.material = comp.getRenderMaterial(0);\r\n        }\r\n        if (renderData.hashDirty) {\r\n            renderData.updateHash();\r\n        }\r\n    },\r\n\r\n    updateRenderData(comp: MotionStreakUtil) {\r\n    },\r\n\r\n    updateColor(comp: MotionStreakUtil) {\r\n    },\r\n\r\n    fillBuffers(comp: MotionStreakUtil, renderer: any) {\r\n        const renderData = comp.renderData!;\r\n        const chunk = renderData.chunk;\r\n        const dataList = renderData.data;\r\n\r\n        const vertexCount = renderData.vertexCount;\r\n        const indexCount = renderData.indexCount;\r\n\r\n        const vData = chunk.vb;\r\n        let vertexOffset = 0;\r\n        for (let i = 0; i < vertexCount; i++) {\r\n            const vert = dataList[i];\r\n            vData[vertexOffset++] = vert.x;\r\n            vData[vertexOffset++] = vert.y;\r\n            vData[vertexOffset++] = vert.z;\r\n            vData[vertexOffset++] = vert.u;\r\n            vData[vertexOffset++] = vert.v;\r\n            Color.toArray(vData, vert.color, vertexOffset);\r\n            vertexOffset += 4;\r\n        }\r\n\r\n        // fill index data\r\n        const bid = chunk.bufferId;\r\n        const vid = chunk.vertexOffset;\r\n        const meshBuffer = chunk.meshBuffer;\r\n        const ib = chunk.meshBuffer.iData;\r\n        let indexOffset = meshBuffer.indexOffset;\r\n        for (let i = 0, l = indexCount; i < l; i += 2) {\r\n            const start = vid + i;\r\n            ib[indexOffset++] = start;\r\n            ib[indexOffset++] = start + 2;\r\n            ib[indexOffset++] = start + 1;\r\n            ib[indexOffset++] = start + 1;\r\n            ib[indexOffset++] = start + 2;\r\n            ib[indexOffset++] = start + 3;\r\n        }\r\n\r\n        meshBuffer.indexOffset += renderData.indexCount;\r\n        meshBuffer.setDirty();\r\n    },\r\n};\r\n\r\nexport const MotionStreakAssemblerManager = {\r\n    getAssembler(comp: MotionStreakUtil) {\r\n        return MotionStreakAssemblerUtil;\r\n    },\r\n};\r\n\r\nMotionStreakUtil.Assembler = MotionStreakAssemblerManager;\r\n","import { Texture2D, UIRenderer, Vec2, _decorator } from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nclass Point {\r\n    public point = new Vec2();\r\n    public dir = new Vec2();\r\n    public distance = 0;\r\n    public time = 0;\r\n\r\n    constructor(point?: Vec2, dir?: Vec2) {\r\n        if (point) this.point.set(point);\r\n        if (dir) this.dir.set(dir);\r\n    }\r\n\r\n    public setPoint(x, y) {\r\n        this.point.x = x;\r\n        this.point.y = y;\r\n    }\r\n\r\n    public setDir(x, y) {\r\n        this.dir.x = x;\r\n        this.dir.y = y;\r\n    }\r\n}\r\n\r\n@ccclass('MotionStreakUtil')\r\nexport class MotionStreakUtil extends UIRenderer {\r\n    public static Point = Point;\r\n\r\n    /**\r\n     * @en The fade time to fade.\r\n     * @zh 拖尾的渐隐时间，以秒为单位。\r\n     * @example\r\n     * motionStreak.fadeTime = 3;\r\n     */\r\n    @property\r\n    fadeTime = 1;\r\n\r\n    /**\r\n     * @en The minimum segment size.\r\n     * @zh 拖尾之间最小距离。\r\n     * @example\r\n     * motionStreak.minSeg = 3;\r\n     */\r\n    @property\r\n    minSeg = 10;\r\n\r\n    /**\r\n     * @en The stroke's width.\r\n     * @zh 拖尾的宽度。\r\n     * @example\r\n     * motionStreak.stroke = 64;\r\n     */\r\n    @property\r\n    stroke = 10;\r\n\r\n    /**\r\n     * @en The texture of the MotionStreak.\r\n     * @zh 拖尾的贴图。\r\n     * @example\r\n     * motionStreak.texture = newTexture;\r\n     */\r\n    @property(Texture2D)\r\n    texture: Texture2D;\r\n\r\n    /**\r\n     * @en The fast Mode.\r\n     * @zh 是否启用了快速模式。当启用快速模式，新的点会被更快地添加，但精度较低。\r\n     * @example\r\n     * motionStreak.fastMode = true;\r\n     */\r\n    @property\r\n    fastMode: boolean = true;\r\n\r\n    public get points() {\r\n        return this._points;\r\n    }\r\n\r\n\r\n    private _points: Point[] = [];\r\n\r\n    onLoad() {\r\n        if (!this.texture) {\r\n            // 动态加载拖尾纹理\r\n        }\r\n    }\r\n\r\n    public onEnable() {\r\n        super.onEnable();\r\n        this.reset();\r\n    }\r\n\r\n    protected _flushAssembler() {\r\n        const assembler = MotionStreakUtil.Assembler.getAssembler(this);\r\n\r\n        if (this._assembler !== assembler) {\r\n            this._assembler = assembler;\r\n        }\r\n\r\n        if (!this.renderData) {\r\n            if (this._assembler && this._assembler.createData) {\r\n                this._renderData = this._assembler.createData(this);\r\n                this.renderData!.material = this.material;\r\n                this._updateColor();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @en Remove all living segments of the ribbon.\r\n     * @zh 删除当前所有的拖尾片段。\r\n     * @example\r\n     * // Remove all living segments of the ribbon.\r\n     * myMotionStreak.reset();\r\n     */\r\n    public reset() {\r\n        this._points.length = 0;\r\n        if (this.renderData) this.renderData.clear();\r\n    }\r\n\r\n    public lateUpdate(dt) {\r\n        if (this._assembler) this._assembler.update(this, dt);\r\n    }\r\n\r\n    /**\r\n     * @deprecated since v3.5.0, this is an engine private interface that will be removed in the future.\r\n     */\r\n    public _render(render: any) {\r\n        if (this.texture) {\r\n            render.commitComp(this, this.renderData, this.texture, this._assembler, null);\r\n        }\r\n    }\r\n}\r\n","\r\nexport const msgac = {\r\n\r\n    openLayer: 101,\r\n    showNotice: 102,\r\n    overDay: 103,\r\n    joystick: 104,\r\n    commonResRefresh: 105,\r\n    globalTouchStart: 121,\r\n    globalTouchMove: 122,\r\n    globalTouchEnd: 123,\r\n    jumpLayer: 124,\r\n    refreshRedPoint: 125,\r\n\r\n    saveDataBefore: 201,\r\n    saveDataAfter: 202,\r\n\r\n    updateDropData: 301,\r\n    wearDrop: 302,\r\n\r\n    playerMsgStart: 1000,\r\n    energyObjRefresh: 1001,\r\n    playerMsgEnd: 1999,\r\n\r\n    mapMsgStart: 2000,\r\n    mapEnter: 2001,\r\n    mapLeave: 2002,\r\n    mapRefreshSkill : 2003,\r\n    mapMsgEnd: 2999,\r\n\r\n    redPointEvent: 30001,\r\n    homeHideMenu: 30002,\r\n\r\n    ac2KeyObj: {},\r\n    init: () => {\r\n        for (let key in msgac) {\r\n            let ac = msgac[key];\r\n            if (typeof (ac) != 'number') {\r\n                continue;\r\n            }\r\n            msgac.ac2KeyObj[ac] = key;\r\n        }\r\n    }\r\n};\r\n\r\n\r\n","import { _decorator } from 'cc';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"MsgBoxLayer\")\r\nexport class MsgBoxLayer extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let hint = this.layerData.hint;\r\n        this.setString(this.getNodeByPath(\"ui/hint\"), hint);\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","\r\nclass MyLog {\r\n\r\n    private static _instance: MyLog;\r\n    private constructor() { }\r\n    public static get instance(): MyLog {\r\n        if (!this._instance) {\r\n            this._instance = new MyLog();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    isOpen: boolean = true;\r\n\r\n    public i(...params: any[]) {\r\n        if (!this.isOpen) {\r\n            return;\r\n        }\r\n        params.unshift(new Date().toLocaleTimeString());\r\n        console.info.apply(console, params);\r\n    }\r\n\r\n    public w(...params: any[]) {\r\n        if (!this.isOpen) {\r\n            return;\r\n        }\r\n        params.unshift(new Date().toLocaleTimeString());\r\n        console.warn.apply(console, params);\r\n    }\r\n\r\n    public e(...params: any[]) {\r\n        params.unshift(new Date().toLocaleTimeString());\r\n        console.error.apply(console, params);\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const myLog = MyLog.instance;","import { Component, Node, Prefab, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('NodePoolUtil')\r\nexport class NodePoolUtil extends Component {\r\n\r\n    itemNode: any;\r\n\r\n    freeNodeArr: any = [];\r\n    itemNodeArr: any = [];\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    init(itemNode: Node | Prefab) {\r\n        if (itemNode instanceof Prefab) {\r\n            itemNode = cocosUtil.instantiate(itemNode);\r\n        }\r\n        this.itemNode = itemNode;\r\n    }\r\n\r\n    getNode() {\r\n        let node = this.freeNodeArr.shift();\r\n        if (!node) {\r\n            if (!this.itemNode) {\r\n                myLog.e(this.node);\r\n            }\r\n            node = cocosUtil.instantiate(this.itemNode);\r\n            node.parent = this.node;\r\n        }\r\n        if (!node.active) {\r\n            node.active = true;\r\n        }\r\n        node.use = true;\r\n\r\n        return node;\r\n    }\r\n\r\n    recycleNode(node: Node) {\r\n        if (!this.itemNode) {\r\n            this.itemNode = node;\r\n        }\r\n        node.active = false;\r\n        if (this.freeNodeArr.indexOf(node) == -1) {\r\n            this.freeNodeArr.push(node);\r\n        }\r\n        // @ts-ignore\r\n        node.use = false;\r\n    }\r\n\r\n    recycleAllNode() {\r\n        utilTools.forArr(this.node.children, (node: Node) => {\r\n            this.recycleNode(node);\r\n        });\r\n    }\r\n\r\n    forEachUseNode(cb: Function) {\r\n        utilTools.forArr(this.node.children, (node: any, index: number) => {\r\n            if (!node.use) {\r\n                return;\r\n            }\r\n            cb(node, index);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","// @ts-nocheck\r\n\r\nimport { Component, find, instantiate, Label, Node, NodePool, UIOpacity, UITransform, v3, _decorator } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('NoticeLayer')\r\nexport class NoticeLayer extends Component {\r\n\r\n    contentLayer: Node;\r\n    textPool: NodePool;\r\n    textItem: Node;\r\n\r\n    maxContentWidth: number = 580;\r\n    minContentWidth: number = 150;\r\n    contentBGAdd: number = 150;\r\n\r\n    orignHeight: number = 0;\r\n\r\n    // 多条飘字之间的y间隔\r\n    spaceY: number = 5;\r\n\r\n    status: any = {\r\n        fadeIn: 1,\r\n        delay: 2,\r\n        fadeOut: 3\r\n    };\r\n\r\n    // 移动速度，像素/每秒\r\n    speedY: number = 300;\r\n    // 透明度变化速度，透明度/每秒\r\n    speedOpacity: number = 255 / 0.3;\r\n    // 展示不动的时间。单位：秒\r\n    delayTime: number = 0.5;\r\n    // 渐显和渐隐移动的距离\r\n    moveDy: number = 150;\r\n\r\n    // 要保证只能有一个处于fadeOut状态，其他的要处于队列等待\r\n    fadeOutNode: Node = null;\r\n\r\n    onLoad() {\r\n        this.contentLayer = find(\"contentLayer\", this.node);\r\n        this.textItem = find(\"contentLayer/textItem\", this.node);\r\n\r\n        this.textPool = new NodePool();\r\n        this.textPool.put(this.textItem);\r\n        this.textItem = instantiate(this.textItem);\r\n\r\n        this.orignHeight = find(\"content\", this.textItem).getComponent(UITransform).height;\r\n\r\n    }\r\n\r\n    noticeShow(content) {\r\n        var node = this.textPool.get();\r\n        if (!node) {\r\n            node = instantiate(this.textItem);\r\n        }\r\n        node.active = true;\r\n\r\n        let contentNode = find(\"content\", node);\r\n        contentNode.getComponent(UITransform).height = this.orignHeight;\r\n        contentNode.getComponent(Label).overflow = Label.Overflow.NONE;\r\n        contentNode.getComponent(Label).string = content + \"\";\r\n        // 调用这个方法之后，才能在本帧获得准确宽度\r\n        contentNode.getComponent(Label).updateRenderData(true);\r\n\r\n        let width = contentNode.getComponent(UITransform).width;\r\n        if (width > this.maxContentWidth) {\r\n            contentNode.getComponent(Label).overflow = Label.Overflow.SHRINK;\r\n            contentNode.getComponent(UITransform).width = this.maxContentWidth;\r\n            contentNode.getComponent(UITransform).height = this.orignHeight * 2 + 10;\r\n            width = this.maxContentWidth;\r\n        } else if (width < this.minContentWidth) {\r\n            width = this.minContentWidth;\r\n        }\r\n\r\n        // 设置背景图片宽度和高度\r\n        node.getComponent(UITransform).width = width + this.contentBGAdd;\r\n        node.getComponent(UITransform).height = contentNode.getComponent(UITransform).height + 10;\r\n\r\n        node.setPosition(0, -this.moveDy);\r\n        node.moveY = this.moveDy;\r\n        node.moveDy = 0;\r\n        node.setScale(v3(1, 1, 1));\r\n        node.getComponent(UIOpacity).opacity = 0;\r\n        node.status = this.status.fadeIn;\r\n        node.parent = this.contentLayer;\r\n\r\n    }\r\n\r\n    createNotice(content) {\r\n        this.noticeShow(content + \"\");\r\n    }\r\n\r\n    update(dt: number) {\r\n        let chs = this.contentLayer.children;\r\n        let backArr = [];\r\n        for (let i in chs) {\r\n            let node = chs[i];\r\n            switch (node.status) {\r\n                case this.status.fadeIn:\r\n                    var dy = dt * this.speedY;\r\n\r\n                    var pos = node.getPosition();\r\n                    pos.y += dy;\r\n                    node.setPosition(pos);\r\n\r\n                    node.moveDy += dy;\r\n                    var opacity = node.getComponent(UIOpacity).opacity + this.speedOpacity * dt;\r\n                    if (opacity > 255) {\r\n                        opacity = 255;\r\n                    }\r\n                    node.getComponent(UIOpacity).opacity = opacity;\r\n                    if (node.moveDy >= node.moveY) {\r\n                        node.moveDy = 0;\r\n                        node.getComponent(UIOpacity).opacity = 255;\r\n                        node.status = this.status.delay;\r\n                        node.time = 0;\r\n                        node.delayTime = this.delayTime;\r\n                    }\r\n                    break;\r\n                case this.status.delay:\r\n                    node.delayTime -= dt;\r\n                    if (node.delayTime <= 0) {\r\n                        node.delayTime = 0;\r\n                        node.status = this.status.fadeOut;\r\n                    }\r\n                    break;\r\n                case this.status.fadeOut:\r\n                    if (this.fadeOutNode && this.fadeOutNode != node) {\r\n                        break;\r\n                    }\r\n                    this.fadeOutNode = node;\r\n                    var dy = dt * this.speedY;\r\n\r\n                    var pos = node.getPosition();\r\n                    pos.y += dy;\r\n                    node.setPosition(pos);\r\n\r\n                    var opacity = node.getComponent(UIOpacity).opacity - this.speedOpacity * dt;\r\n                    if (opacity < 0) {\r\n                        opacity = 0;\r\n                    }\r\n                    node.getComponent(UIOpacity).opacity = opacity;\r\n                    if (opacity <= 0) {\r\n                        backArr.push(node);\r\n                        this.fadeOutNode = null;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        for (let i in backArr) {\r\n            let node = backArr[i];\r\n            node.parent = null;\r\n            this.textPool.put(node);\r\n        }\r\n\r\n        // 修正位置，保证不重叠\r\n        chs = this.contentLayer.children;\r\n        if (chs.length >= 2) {\r\n            let lastNode = chs[chs.length - 1];\r\n            for (let i = chs.length - 2; i >= 0; i--) {\r\n                let node = chs[i];\r\n\r\n                let dy = (node.getComponent(UITransform).height + lastNode.getComponent(UITransform).height) * 0.5 + this.spaceY;\r\n                if (node.position.y - lastNode.position.y < dy) {\r\n                    let pos = node.getPosition();\r\n                    pos.y = lastNode.position.y + dy;\r\n                    node.setPosition(pos);\r\n                }\r\n                lastNode = node;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { Color, Component, find, Label, Node, tween, UIOpacity, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('NumSystem')\r\nexport class NumSystem extends Component {\r\n\r\n    numNode: Node;\r\n\r\n    nodePoolUtil: NodePoolUtil;\r\n\r\n    onLoad() {\r\n        this.numNode = find(\"num\", this.node);\r\n        this.nodePoolUtil = this.addComponent(NodePoolUtil);\r\n        this.nodePoolUtil.recycleNode(this.numNode);\r\n    }\r\n\r\n    addNum(num: number | string, worldPos: Vec3, color?: any) {\r\n        let numNode = this.nodePoolUtil.getNode();\r\n\r\n        let pos = cocosUtil.convertToNodeSpace(numNode, worldPos);\r\n        let dx = Math.random() * 20;\r\n        dx = Math.random() > 0.5 ? dx : -dx;\r\n        pos.x += dx;\r\n        numNode.setPosition(pos);\r\n\r\n        numNode.setScale(v3(1, 1, 1));\r\n        numNode.getComponent(UIOpacity).opacity = 255;\r\n        numNode.getComponent(Label).string = \"\" + num;\r\n        if (!color) {\r\n            color = Color.WHITE;\r\n        }\r\n        cocosUtil.setRenderableColor(numNode, color);\r\n\r\n        let dy = 20 + Math.random() * 10;\r\n        tween(numNode).by(0.3, {\r\n            position: v3(0, dy, 0),\r\n            scale: v3(0.5, 0.5, 0)\r\n        }).by(0.3, {\r\n            scale: v3(-0.3, -0.3, 0),\r\n        }, {\r\n            onUpdate(node: Node, ratio: number) {\r\n                numNode.getComponent(UIOpacity).opacity = (1 - ratio) * 255;\r\n            }\r\n        }).call(() => {\r\n            this.nodePoolUtil.recycleNode(numNode);\r\n        }).start();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, Node, Prefab, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PatrolFastLayer')\r\nexport class PatrolFastLayer extends BaseUILayer {\r\n\r\n\r\n    // @property({ type: Node }) musicToggle: Node = null;\r\n\r\n    @property({ type: Prefab }) propIten: Prefab = null;\r\n    @property({ type: Node }) addPropLayer: Node = null;\r\n\r\n\r\n    _rewardArr = []\r\n\r\n    onLoad() {\r\n        super.onLoad()\r\n    }\r\n\r\n\r\n    start() {\r\n        let rewardArr = UserData.getInstance().getPatrolRewardByTime(designManager.config.towerPressTime * 60)\r\n        this._rewardArr = rewardArr\r\n        for (let index = 0; index < rewardArr.length && index < 2; index++) {\r\n            let element = rewardArr[index];\r\n            let item = instantiate(this.propIten)\r\n            item.getComponent(PropItemPrefab).setView(element.Id, element.Num, PropItemPrefab.Type_UnWear)\r\n            item.getComponent(PropItemPrefab).setScale(100)\r\n            this.addPropLayer.addChild(item)\r\n        }\r\n        let item = instantiate(this.propIten)\r\n        item.getComponent(PropItemPrefab).setView(0, 0, PropItemPrefab.Type_UnKnow)\r\n        item.getComponent(PropItemPrefab).setScale(100)\r\n        this.addPropLayer.addChild(item)\r\n    }\r\n\r\n    onGetRewardTili() {\r\n        //  UserData.getInstance().getCurPatrolData()\r\n        //  this.playCoinFlyAnim(10, v3(0,0,0), v3(0,600,0),null,0)\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (UserData.getInstance().power < designManager.config.quickEarn) {\r\n            this.toast(\"体力不足\")\r\n            return\r\n        }\r\n\r\n        UserData.getInstance().usePower(0 - designManager.config.quickEarn)\r\n        UserData.getInstance().getRewardProp(this._rewardArr)\r\n\r\n        playerModel.addDayTaskNum(7, designManager.config.quickEarn);\r\n        playerModel.addDayTaskNum(8);\r\n\r\n        this.openLayer(constants.layers.RewardLayer, { propArr: this._rewardArr })\r\n        this.closeLayer()\r\n    }\r\n\r\n    onGetRewardVideo() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        sdkManager.openAd(\"快速巡逻\", (state: number) => {\r\n            if (state == 1) {\r\n                UserData.getInstance().getRewardProp(this._rewardArr)\r\n                this.closeLayer()\r\n                this.openLayer(constants.layers.RewardLayer, { propArr: this._rewardArr })\r\n                playerModel.addDayTaskNum(8);\r\n            }\r\n        })\r\n        // cc.find('Canvas').addChild(coin);\r\n        //   this.playCoinFlyAnim(10, v3(0,0,0), v3(0,600,0),null,0)\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { Button, instantiate, Label, Node, Prefab, sp, Sprite, tween, v3, _decorator } from 'cc';\r\nimport { CountTimeUtil } from '../../../utils/CountTimeUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { RedPointLogicMgr } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PatrolLayer')\r\nexport class PatrolLayer extends BaseUILayer {\r\n\r\n\r\n    // @property({ type: Node }) musicToggle: Node = null;\r\n    @property({ type: Node }) btnPatrol: Node = null;\r\n    @property({ type: Label }) patrolTimelabel: Label = null;\r\n    @property({ type: Label }) addCoinlabel: Label = null;\r\n    @property({ type: Label }) addExplabel: Label = null;\r\n    @property({ type: Node }) addPropLayer: Node = null;\r\n    @property({ type: Label }) maxPatrolTimelabel: Label = null;\r\n    @property({ type: Label }) curPatrolTimelabel: Label = null;\r\n\r\n    @property({ type: Prefab }) propIten: Prefab = null;\r\n\r\n    @property({ type: Node }) monster: Node = null;\r\n\r\n\r\n    @property({ type: Node }) handNode: Node = null;\r\n\r\n    _rewardArr = []\r\n\r\n    onLoad() {\r\n        super.onLoad()\r\n        this.handNode.active = false;\r\n    }\r\n\r\n\r\n\r\n    start() {\r\n        this.initBtnPatrol()\r\n        this.addCoinlabel.string = (designManager.config.towerCoin * 60) + \"/小时\"\r\n        this.addExplabel.string = (designManager.config.towerExp * 60) + \"/小时\"\r\n        this.maxPatrolTimelabel.string = \"最长巡逻时间\" + (designManager.config.towerTop / 60) + \"小时\"\r\n\r\n        this.curPatrolTimelabel.string = \"巡逻时间：\" + utilTools.getTimeStrChinese(UserData.getInstance().getPatrolTime() * 1000, false)\r\n\r\n        let rewardArr = UserData.getInstance().getPatrolReward()\r\n        this._rewardArr = rewardArr\r\n        rewardArr.forEach(element => {\r\n            let item = instantiate(this.propIten)\r\n            item.getComponent(PropItemPrefab).setView(element.Id, element.Num, PropItemPrefab.Type_UnWear)\r\n            item.getComponent(PropItemPrefab).setScale(100)\r\n            this.addPropLayer.addChild(item)\r\n        });\r\n        let monster = this.monster\r\n        tween(this.monster).show().set({ position: v3(222, -95, 0) }).call(function () {\r\n            monster.getComponent(sp.Skeleton).animation = \"walk\"\r\n            monster.getComponent(sp.Skeleton).loop = true\r\n        }).to(1, { position: v3(50, -95, 0) }).call(function () {\r\n            monster.getComponent(sp.Skeleton).animation = \"die\"\r\n            monster.getComponent(sp.Skeleton).loop = false\r\n        }).delay(0.3).hide().delay(0.8).union().repeatForever().start()\r\n    }\r\n\r\n    initBtnPatrol() {\r\n        let curTime = UserData.getInstance().getPatrolState()\r\n        if (curTime > 0) {\r\n            this.btnPatrol.getComponent(Button).interactable = false\r\n            this.btnPatrol.getComponent(Sprite).grayscale = true\r\n            let self = this\r\n            this.btnPatrol.getChildByName(\"Label\").getComponent(CountTimeUtil).setTime(curTime, function () {\r\n                self.btnPatrol.getComponent(Button).interactable = true\r\n                self.btnPatrol.getComponent(Sprite).grayscale = false\r\n                self.btnPatrol.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n            })\r\n            RedPointLogicMgr.ins().setRPointView(this.btnPatrol, null, false)\r\n        } else {\r\n            RedPointLogicMgr.ins().setRPointView(this.btnPatrol, null, true)\r\n            this.btnPatrol.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n            this.handNode.active = true;\r\n        }\r\n    }\r\n\r\n    onGetRewardNormal() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.handNode.active = false;\r\n\r\n        UserData.getInstance().getCurPatrolData()\r\n        this.showGetReward(this._rewardArr)\r\n        this.initBtnPatrol()\r\n        this.curPatrolTimelabel.string = \"巡逻时间：\" + utilTools.getTimeStrChinese(UserData.getInstance().getPatrolTime() * 1000, false)\r\n\r\n        //   this.playCoinFlyAnim(10, v3(0,0,0), v3(0,600,0),null,0)\r\n    }\r\n\r\n    onGetRewardVideo() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (this.handNode.active) {\r\n            return;\r\n        }\r\n\r\n        this.openLayer(constants.layers.PatrolFastLayer)\r\n        // sdkManager.openAd(\"快速巡逻\", (state: number) => {\r\n        //     if (state == 1) {\r\n        //         UserData.getInstance().getPatrolRewardByTime(designManager.config.towerPressTime * 60)\r\n        //         this.showGetReward(this._rewardArr)\r\n        //     }\r\n        // })\r\n        //   cc.find('Canvas').addChild(coin);\r\n        //   this.playCoinFlyAnim(10, v3(0,0,0), v3(0,600,0),null,0)\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (this.handNode.active) {\r\n            return;\r\n        }\r\n\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { tyqSDKConfig } from '../../../tyqSDK/tyqSDKConfig';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ItemLayer } from '../base/ItemLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PauseLayer')\r\nexport class PauseLayer extends BaseLayer {\r\n\r\n    weaponItemLayer: ItemLayer;\r\n    skill1ItemLayer: ItemLayer;\r\n    skill2ItemLayer: ItemLayer;\r\n\r\n    audioIconOpen: Node;\r\n    audioIconClose: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.weaponItemLayer = this.getNodeByPath(\"ui/weaponLayer/bg/itemLayer\").addComponent(ItemLayer);\r\n        this.skill1ItemLayer = this.getNodeByPath(\"ui/skill1Layer/itemLayer\").addComponent(ItemLayer);\r\n        this.skill2ItemLayer = this.getNodeByPath(\"ui/skill2Layer/itemLayer\").addComponent(ItemLayer);\r\n\r\n        this.audioIconOpen = this.getNodeByPath(\"btnAudio/open\");\r\n        this.audioIconClose = this.getNodeByPath(\"btnAudio/close\");\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        if (tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level) > 0 && tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level) > UserData.getInstance().openLevel) {\r\n            if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n                this.openLayer(constants.layers.MoreGameLayer)\r\n            }\r\n        }\r\n        tyqAdManager.showDelayFullVideo()\r\n        this.addEventArr([\r\n            msgac.mapLeave\r\n        ]);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.removeEventArr([\r\n            msgac.mapLeave\r\n        ]);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshWeaponLayer();\r\n        this.refreshSkill1Layer();\r\n        this.refreshSkill2Layer();\r\n\r\n        this.refreshAudioLayer();\r\n    }\r\n\r\n    refreshAudioLayer() {\r\n        if (audioManager.musicVolume > 0) {\r\n            this.audioIconOpen.active = true;\r\n            this.audioIconClose.active = false;\r\n        } else {\r\n            this.audioIconOpen.active = false;\r\n            this.audioIconClose.active = true;\r\n        }\r\n    }\r\n\r\n    refreshSkill2Layer() {\r\n        this.setNumItemLayer(this.skill2ItemLayer.node, constants.design.skillNum, (itemUI: Node, num: number) => {\r\n            this.refreshItem(itemUI, num, constants.tableName.skill2);\r\n        });\r\n    }\r\n\r\n    refreshSkill1Layer() {\r\n        this.setNumItemLayer(this.skill1ItemLayer.node, constants.design.skillNum, (itemUI: Node, num: number) => {\r\n            this.refreshItem(itemUI, num, constants.tableName.skill);\r\n        });\r\n    }\r\n\r\n    refreshWeaponLayer() {\r\n        this.setNumItemLayer(this.weaponItemLayer.node, constants.design.weaponNum, (itemUI: Node, num: number) => {\r\n            this.refreshItem(itemUI, num, constants.tableName.weapon);\r\n        });\r\n    }\r\n\r\n    refreshItem(itemUI: Node, num: number, name: string) {\r\n        let info = null;\r\n        switch (name) {\r\n            case constants.tableName.weapon:\r\n                info = mapModel.weaponSystem.weaponArr[num - 1];\r\n                break;\r\n            case constants.tableName.skill:\r\n                info = mapModel.skillSystem.skillArr[num - 1];\r\n                break;\r\n            case constants.tableName.skill2:\r\n                info = mapModel.skillSystem.skill2Arr[num - 1];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        let iconNode = find(\"icon\", itemUI);\r\n        let starLayer = find(\"starLayer\", itemUI);\r\n        if (!info) {\r\n            iconNode.active = false;\r\n            starLayer.active = false;\r\n            return;\r\n        }\r\n\r\n        iconNode.active = true;\r\n        starLayer.active = true;\r\n        let row = designManager.getRowById(name, info.id);\r\n        this.setSpriteFrame(iconNode, row.icon);\r\n        this.setNumItemLayer(starLayer, row.lv, (node: Node) => {\r\n            let icon = find(\"icon\", node);\r\n            let icon2 = find(\"icon2\", node);\r\n            if (row.lv >= constants.design.maxLv) {\r\n                icon.active = false;\r\n                icon2.active = true;\r\n            } else {\r\n                icon.active = true;\r\n                icon2.active = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    mapLeaveRet(data: any) {\r\n        this.closeLayer();\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    onClickBtnGoOn(node: Node) {\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnHome() {\r\n        serverMsg.send(msgac.mapLeave);\r\n        return;\r\n        this.openLayer(constants.layers.BackHomeLayer);\r\n    }\r\n\r\n    onClickBtnAudio() {\r\n        if (audioManager.musicVolume > 0) {\r\n            audioManager.setMusicVolume(0);\r\n            audioManager.setEffectVolume(0);\r\n        } else {\r\n            audioManager.setMusicVolume(1);\r\n            audioManager.setEffectVolume(1);\r\n        }\r\n        this.refreshAudioLayer();\r\n    }\r\n\r\n}\r\n\r\n","\r\n\r\nexport enum physicsGroup {\r\n    DEFAULT = 1 << 0,\r\n    PLAYER = 1 << 1,\r\n    MONSTER = 1 << 2,\r\n    PLAYER_BULLET = 1 << 3,\r\n    MONSTER_BULLET = 1 << 4,\r\n    PROP = 1 << 5,\r\n    WALL = 1 << 6,\r\n    PLAYER_BULLET2 = 1 << 7,\r\n}\r\n","import { Intersection2D, Node, PhysicsSystem2D, _decorator } from 'cc';\r\nimport { myLog } from '../../common/myLog';\r\nimport { utilTools } from '../../utils/utilTools';\r\nimport { BoxColliderUtil } from './BoxColliderUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nclass PhysicsWorld {\r\n\r\n    private static _instance: PhysicsWorld = null;\r\n    private cellSize = 100;\r\n\r\n    private colliderArr: any[];\r\n    private posToColliderArr: any = {};\r\n\r\n    public static getInstance() {\r\n        if (this._instance == null) {\r\n            this._instance = new PhysicsWorld();\r\n\r\n            // myLog.i(PhysicsSystem2D.instance.collisionMatrix);\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    private getPosKey(x: number, y: number): string {\r\n        return \"\" + x + \"_\" + y;\r\n    }\r\n\r\n    private forColliderRectKeyArr(collider: BoxColliderUtil, cb: Function) {\r\n        const rect = collider.worldAabb;\r\n\r\n        let minX = Math.floor(rect.x / this.cellSize);\r\n        let maxX = Math.ceil((rect.x + rect.width) / this.cellSize);\r\n\r\n        let minY = Math.floor(rect.y / this.cellSize);\r\n        let maxY = Math.ceil((rect.y + rect.height) / this.cellSize);\r\n\r\n        for (let i = minX; i <= maxX; i++) {\r\n            for (let j = minY; j <= maxY; j++) {\r\n                let key = this.getPosKey(i, j);\r\n                cb(key);\r\n            }\r\n        }\r\n    }\r\n\r\n    private addIntoPosToColliderArr(collider: BoxColliderUtil) {\r\n        this.forColliderRectKeyArr(collider, (key: string) => {\r\n            let arr = this.posToColliderArr[key];\r\n            if (!arr) {\r\n                arr = [];\r\n                this.posToColliderArr[key] = arr;\r\n            }\r\n            arr.push(collider);\r\n        });\r\n    }\r\n\r\n    private collectCollider(node: Node) {\r\n        if (!node.active || !node.activeInHierarchy) {\r\n            return;\r\n        }\r\n        let arr = node.getComponents(BoxColliderUtil);\r\n        utilTools.forArr(arr, (collider: BoxColliderUtil) => {\r\n            if (!collider.enabled) {\r\n                return;\r\n            }\r\n            collider.updateCollider();\r\n            this.colliderArr.push(collider);\r\n            this.addIntoPosToColliderArr(collider);\r\n        });\r\n        utilTools.forArr(node.children, (ch: Node) => {\r\n            this.collectCollider(ch);\r\n        });\r\n    }\r\n\r\n    public step(node: Node) {\r\n        this.colliderArr = [];\r\n        this.posToColliderArr = {};\r\n\r\n        // 收集所有碰撞器信息\r\n        this.collectCollider(node);\r\n\r\n        // 开始碰撞检测\r\n        utilTools.forArr(this.colliderArr, (collider: BoxColliderUtil) => {\r\n            this.forColliderRectKeyArr(collider, (key: string) => {\r\n                let arr = this.posToColliderArr[key];\r\n                if (!arr) {\r\n                    return;\r\n                }\r\n                utilTools.forArr(arr, (otherCollider: BoxColliderUtil) => {\r\n                    this.doIntersection(collider, otherCollider);\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    private doIntersection(collider1: BoxColliderUtil, collider2: BoxColliderUtil) {\r\n        if (collider1 == collider2 || collider1.node == collider2.node) {\r\n            return;\r\n        }\r\n        const collisionMatrix = PhysicsSystem2D.instance.collisionMatrix;\r\n        if ((collisionMatrix[collider1.group] & collider2.group) && (collisionMatrix[collider2.group] & collider1.group)) {\r\n            let ret = Intersection2D.polygonPolygon(collider1.worldPoints, collider2.worldPoints);\r\n            if (ret) {\r\n                // 开始碰撞\r\n                collider1.contactBegin(collider2);\r\n                // myLog.i(collider1.group, collider2.group, ret);\r\n            } else {\r\n                // 结束碰撞\r\n                collider1.contactEnd(collider2);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport const physicsWorld = PhysicsWorld.getInstance();\r\n\r\n\r\n\r\n","import { Collider2D, Color, Contact2DType, macro, Node, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { physicsGroup } from '../../other/physicsGroup';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ShineColor } from '../shader/ShineColor';\r\nimport { JoystickData } from './GameCtrl';\r\nimport { Monster } from './monsters/Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Player')\r\nexport class Player extends BaseLayer {\r\n\r\n    moveSpeed: number = 350;\r\n    hp: number = 100;\r\n    hpMax: number = 100;\r\n    hpMaxOrign: number = 100;\r\n    atk: number = 0;\r\n\r\n    bodyNode: Node;\r\n    effectAnimationCtrl: AnimationCtrl;\r\n    lightShine: boolean = false;\r\n    collider: Collider2D;\r\n    animationCtrl: AnimationCtrl;\r\n    shineColor: ShineColor;\r\n    hpProgress: Node;\r\n\r\n    movePos: Vec3;\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    // 存储碰撞中的怪物对象数组\r\n    monsterArr: any[] = [];\r\n\r\n    // 围栏碰撞器\r\n    wallCollider: any;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.collider = this.getComponent(Collider2D);\r\n\r\n        this.bodyNode = this.getNodeByPath(\"body\");\r\n        this.hpProgress = this.getNodeByPath(\"hpProgress\");\r\n        this.animationCtrl = this.bodyNode.addComponent(AnimationCtrl);\r\n        this.shineColor = this.bodyNode.addComponent(ShineColor);\r\n        this.effectAnimationCtrl = this.getNodeByPath(\"body/effect\").addComponent(AnimationCtrl);\r\n        this.effectAnimationCtrl.node.active = false;\r\n\r\n        this.collider.on(Contact2DType.BEGIN_CONTACT, this.contactBegin, this);\r\n        this.collider.on(Contact2DType.END_CONTACT, this.contactEnd, this);\r\n\r\n        this.moveSpeed = designManager.config.roleSpeed;\r\n\r\n        this.setRoleSkin(this.bodyNode);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.joystick,\r\n        ]);\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n\r\n    initData(data: any) {\r\n        this.hp = data.hp;\r\n        this.hpMax = this.hp;\r\n        this.hpMaxOrign = this.hp;\r\n        this.atk = data.atk;\r\n\r\n        this.initUI();\r\n    }\r\n\r\n    initUI() {\r\n        this.collider.enabled = true;\r\n        this.refreshHpLayer();\r\n    }\r\n\r\n    getSaveData() {\r\n        let data: any = {};\r\n        data.moveSpeed = this.moveSpeed;\r\n        data.hp = this.hp;\r\n        data.hpMax = this.hpMax;\r\n        data.hpMaxOrign = this.hpMaxOrign;\r\n        data.atk = this.atk;\r\n        data.pos = this.node.position;\r\n\r\n        return data;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        this.moveSpeed = data.moveSpeed;\r\n        this.hp = data.hp;\r\n        this.hpMax = data.hpMax;\r\n        this.hpMaxOrign = data.hpMaxOrign;\r\n        this.atk = data.atk;\r\n        this.node.position = data.pos;\r\n\r\n        this.refreshHpLayer();\r\n    }\r\n\r\n    // 提高生命上限百分比\r\n    addHpMaxPercent(p: number) {\r\n        let lastHpMax = this.hpMax;\r\n        let nowHpMax = this.hpMaxOrign * (1 + p);\r\n        nowHpMax = Math.round(nowHpMax);\r\n        let addHp = nowHpMax - lastHpMax;\r\n        this.hpMax = nowHpMax;\r\n        this.addHp(addHp);\r\n    }\r\n\r\n    // 增加血量百分比\r\n    addHpPercent(p: number) {\r\n        this.effectAnimationCtrl.node.active = true;\r\n        this.effectAnimationCtrl.playAnimation(\"zhiliao\", false, () => {\r\n            this.effectAnimationCtrl.node.active = false;\r\n        });\r\n        let val = this.hpMax * p;\r\n        this.addHp(val);\r\n    }\r\n    addHp(num: number) {\r\n        if (this.hp <= 0) {\r\n            // 已阵亡\r\n            return;\r\n        }\r\n        num = Math.ceil(num);\r\n\r\n        this.hp += num;\r\n\r\n        if (num > 0) {\r\n            // 回复血量\r\n            mapModel.numSystem.addNum(num, cocosUtil.convertToWorldSpace(this.node), Color.GREEN);\r\n        } else {\r\n            // 伤害数字\r\n            mapModel.numSystem.addNum(num, cocosUtil.convertToWorldSpace(this.node), Color.RED);\r\n        }\r\n        if (this.hp > this.hpMax) {\r\n            this.hp = this.hpMax;\r\n        }\r\n        if (this.hp < 0) {\r\n            this.hp = 0;\r\n        }\r\n        this.refreshHpLayer();\r\n    }\r\n\r\n    refreshHpLayer() {\r\n        this.setProgressBar(this.hpProgress, this.hp / this.hpMax);\r\n    }\r\n\r\n    useSkillHeal(percent: number) {\r\n        this.addHpPercent(percent);\r\n    }\r\n\r\n    backLife() {\r\n        this.hp = this.hpMax;\r\n        this.animationCtrl.playAnimation(constants.animations.walk, true);\r\n        this.effectAnimationCtrl.node.active = true;\r\n        this.effectAnimationCtrl.playAnimation(\"hudun\", true);\r\n        this.lightShine = true;\r\n        this.scheduleOnce(() => {\r\n            this.effectAnimationCtrl.node.active = false;\r\n            this.lightShine = false;\r\n        }, 3);\r\n        this.refreshHpLayer();\r\n        mapModel.mapLayer.gameFightResume();\r\n        mapModel.mapLayer.onSkillSelect();\r\n    }\r\n\r\n    hitWithDam(dam: number, shineColor?: Color) {\r\n        if (dam <= 0 || this.hp <= 0) {\r\n            return;\r\n        }\r\n        if (this.lightShine) {\r\n            // 无敌状态\r\n            return;\r\n        }\r\n\r\n        dam = dam * (1 - mapModel.skillSystem.getSkill2DamSubPercent());\r\n        dam = Math.ceil(dam);\r\n        this.addHp(-dam);\r\n        // 闪白\r\n        this.shineColor.startShine(constants.materials.shineColorSpine, shineColor);\r\n\r\n        if (this.hp <= 0) {\r\n            if (playerModel.skillLifeNum > 0) {\r\n                // 自动复活\r\n                playerModel.skillLifeNum--;\r\n                this.backLife();\r\n                eventManager.send(msgac.mapRefreshSkill);\r\n                return;\r\n            }\r\n            this.collider.enabled = false;\r\n            this.animationCtrl.playAnimation(constants.animations.die, false, () => {\r\n                // 弹出复活界面\r\n                mapModel.mapLayer.popLayer(constants.layers.BackLifeLayer);\r\n            });\r\n        }\r\n    }\r\n\r\n    addMonster(collider: Collider2D) {\r\n        if (collider.tag != 0) {\r\n            return;\r\n        }\r\n        let monster = collider.getComponent(Monster);\r\n        let index = this.monsterArr.indexOf(monster);\r\n        if (index == -1) {\r\n            monster.isPauseMove = true;\r\n            this.monsterArr.push(monster);\r\n        }\r\n    }\r\n\r\n    removeMonster(collider: Collider2D) {\r\n        if (collider.tag != 0) {\r\n            return;\r\n        }\r\n        let monster = collider.getComponent(Monster);\r\n        let index = this.monsterArr.indexOf(monster);\r\n        if (index != -1) {\r\n            monster.isPauseMove = false;\r\n            this.monsterArr.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    contactBegin(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (otherCollider.group == physicsGroup.MONSTER) {\r\n            let monster = otherCollider.getComponent(Monster);\r\n            if (!monster) {\r\n                monster = otherCollider.node.parent.getComponent(Monster);\r\n            }\r\n            this.addMonster(otherCollider);\r\n            monster.contactBeginPlayer();\r\n            return;\r\n        }\r\n        if (otherCollider.group == physicsGroup.WALL) {\r\n            this.touchWall();\r\n            this.unschedule(this.touchWall);\r\n            this.wallCollider = otherCollider;\r\n            this.schedule(this.touchWall, 0.5, macro.REPEAT_FOREVER, 0);\r\n            return;\r\n        }\r\n    }\r\n\r\n    contactEnd(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (!cocosUtil.isValid(otherCollider)) {\r\n            return;\r\n        }\r\n        if (otherCollider.group == physicsGroup.MONSTER) {\r\n            let monster = otherCollider.getComponent(Monster);\r\n            if (!monster) {\r\n                monster = otherCollider.node.parent.getComponent(Monster);\r\n            }\r\n            this.removeMonster(otherCollider);\r\n            monster.contactEndPlayer();\r\n            return;\r\n        }\r\n        if (otherCollider.group == physicsGroup.WALL) {\r\n            if (this.wallCollider == otherCollider) {\r\n                this.unschedule(this.touchWall);\r\n            }\r\n            return;\r\n        }\r\n    }\r\n\r\n    touchWall() {\r\n        let dam = this.hpMax * 0.05;\r\n        dam = Math.ceil(dam);\r\n        this.hitWithDam(dam);\r\n    }\r\n\r\n    joystickRet(data: JoystickData) {\r\n        if (data.type == \"start\") {\r\n            if (this.hp <= 0) {\r\n                return;\r\n            }\r\n            this.animationCtrl.playAnimation(constants.animations.walk, true);\r\n            return;\r\n        }\r\n        if (data.type == \"move\") {\r\n            this.movePos = data.pos;\r\n            return;\r\n        }\r\n\r\n        if (data.type == \"end\") {\r\n            this.stopMove();\r\n        }\r\n    }\r\n\r\n    stopMove() {\r\n        this.movePos = null;\r\n        if (this.hp > 0) {\r\n            this.animationCtrl.playAnimation(constants.animations.standBy, true);\r\n        }\r\n    }\r\n\r\n    getMoveSpeed() {\r\n        return this.moveSpeed * (1 + mapModel.skillSystem.getSkill2PlayerSpeedAddPercent());\r\n    }\r\n\r\n    move(dt: number) {\r\n        if (!this.movePos || this.hp <= 0) {\r\n            return;\r\n        }\r\n        let nowPos = this.node.getPosition(this.outVec3);\r\n        let dis = this.getMoveSpeed() * dt;\r\n        let movePos = this.movePos.clone().multiplyScalar(dis);\r\n        nowPos.add(movePos);\r\n        this.node.setPosition(nowPos);\r\n        mapModel.mapSystem.adjustInWall(this.node);\r\n\r\n        let scale = this.bodyNode.getScale();\r\n        if (movePos.x >= 0) {\r\n            // 向右\r\n            this.bodyNode.setScale(-Math.abs(scale.x), scale.y);\r\n        } else {\r\n            // 向左\r\n            this.bodyNode.setScale(Math.abs(scale.x), scale.y);\r\n        }\r\n\r\n        mapModel.mapSystem.refreshMapFightWindow();\r\n\r\n        if (this.monsterArr.length > 0) {\r\n            // 模拟推开怪物\r\n            utilTools.forArr(this.monsterArr, (monster: Monster) => {\r\n                monster.playerForceMove(movePos.clone());\r\n            });\r\n        }\r\n\r\n        this.setString(mapModel.mapLayer.playerPosNode, Math.floor(nowPos.x) + \",\" + Math.floor(nowPos.y));\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.move(dt);\r\n    }\r\n\r\n}\r\n\r\n","import { utilTools } from \"../../utils/utilTools\";\r\nimport { constants } from \"../data/constants\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { audioManager } from \"../manager/audioManager\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { eventManager } from \"../manager/eventManager\";\r\nimport { localStorageManager } from \"../manager/localStorageManager\";\r\nimport { mapModel } from \"./mapModel\";\r\nimport { UserData } from \"./UserData\";\r\n\r\nclass PlayerModel {\r\n    private static _instance: PlayerModel;\r\n    private constructor() { }\r\n    public static get instance(): PlayerModel {\r\n        if (!this._instance) {\r\n            this._instance = new PlayerModel();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    now: Date = new Date();\r\n    secondInterval: any;\r\n    saveTime: Date;\r\n    skillFreeRefreshCount = 0;\r\n\r\n    // 是否强制打开开发环境\r\n    isOpenDev: boolean = false;\r\n    // 运营录制视频版本\r\n    isRecordAd: boolean = false;\r\n\r\n    dayTaskObj: any = {};\r\n    energyObj: any = {};\r\n    daySignObj: any = {};\r\n    vipObj: any = {};\r\n    shareObj: any = {};\r\n\r\n    isLetterAward = 0;\r\n\r\n    skillBombNum = 1;\r\n    skillHealNum = 1;\r\n    skillMagnetNum = 0;\r\n    skillLifeNum = 0;\r\n\r\n    init() {\r\n        let now = new Date();\r\n        let data: any = UserData.getInstance().playerData;\r\n        utilTools.timeStrToDate(data);\r\n\r\n        audioManager.initData(data.audio);\r\n        this.initData(data.player, now);\r\n        mapModel.initData(data.fight, now);\r\n\r\n        this.openSecondInterval();\r\n        eventManager.on(msgac.saveDataBefore, this.onSaveData, this);\r\n    }\r\n\r\n    initData(data: any, now: Date) {\r\n        if (!data) {\r\n            data = {};\r\n        }\r\n        if (data.saveTime) {\r\n            this.saveTime = data.saveTime;\r\n        } else {\r\n            this.saveTime = now;\r\n        }\r\n\r\n        if (data.skillFreeRefreshCount) {\r\n            this.skillFreeRefreshCount = data.skillFreeRefreshCount\r\n        } else {\r\n            this.skillFreeRefreshCount = 0;\r\n        }\r\n\r\n        if (data.dayTaskObj) {\r\n            this.dayTaskObj = data.dayTaskObj;\r\n        } else {\r\n            this.dayTaskObj = {\r\n                awardFlagArr: [],\r\n                taskObj: {},\r\n            };\r\n        }\r\n\r\n        if (data.energyObj) {\r\n            this.energyObj = data.energyObj;\r\n        } else {\r\n            this.energyObj = {\r\n                num: 0,\r\n                awardObj: {}\r\n            };\r\n        }\r\n        if (!this.energyObj.endTime) {\r\n            this.energyObj.endTime = new Date(now.getTime() + 7 * constants.times.day);\r\n        }\r\n\r\n        if (data.daySignObj) {\r\n            this.daySignObj = data.daySignObj;\r\n        } else {\r\n            let startTime = new Date(now.getTime());\r\n            startTime.setHours(0);\r\n            startTime.setMinutes(0);\r\n            startTime.setSeconds(0);\r\n            startTime.setMilliseconds(0);\r\n            this.daySignObj = {\r\n                startTime: startTime,\r\n                awardDayArr: [],\r\n                finalAward: 0\r\n            };\r\n        }\r\n\r\n        if (data.isLetterAward) {\r\n            this.isLetterAward = data.isLetterAward;\r\n        } else {\r\n            this.isLetterAward = 0;\r\n        }\r\n\r\n        if (data.vipObj) {\r\n            this.vipObj = data.vipObj;\r\n        } else {\r\n            this.vipObj = {\r\n                vip: 1,\r\n                adNum: 0,\r\n                dayAward: 0,\r\n                onceObj: {}\r\n            };\r\n        }\r\n\r\n        if (data.shareObj) {\r\n            this.shareObj = data.shareObj;\r\n        } else {\r\n            this.shareObj = {\r\n                dayNum: 0,\r\n                idAwardObj: {},\r\n                friendNum: 0,\r\n                friendAdNum: 0,\r\n                friendPassNum: 0\r\n            };\r\n        }\r\n\r\n        if (data.skillBombNum == undefined) {\r\n            this.skillBombNum = 1;\r\n        } else {\r\n            this.skillBombNum = data.skillBombNum;\r\n        }\r\n        if (data.skillHealNum == undefined) {\r\n            this.skillHealNum = 1;\r\n        } else {\r\n            this.skillHealNum = data.skillHealNum;\r\n        }\r\n        if (data.skillMagnetNum == undefined) {\r\n            this.skillMagnetNum = 0;\r\n        } else {\r\n            this.skillMagnetNum = data.skillMagnetNum;\r\n        }\r\n        if (data.skillLifeNum == undefined) {\r\n            this.skillLifeNum = 1;\r\n        } else {\r\n            this.skillLifeNum = data.skillLifeNum;\r\n        }\r\n\r\n        this.addDayTaskNum(1);\r\n    }\r\n\r\n    getSaveData(now: Date) {\r\n        let data: any = {};\r\n        data.saveTime = this.saveTime;\r\n        data.skillFreeRefreshCount = this.skillFreeRefreshCount;\r\n        data.dayTaskObj = this.dayTaskObj;\r\n        data.energyObj = this.energyObj;\r\n        data.daySignObj = this.daySignObj;\r\n        data.isLetterAward = this.isLetterAward;\r\n        data.vipObj = this.vipObj;\r\n        data.shareObj = this.shareObj;\r\n        data.skillBombNum = this.skillBombNum;\r\n        data.skillHealNum = this.skillHealNum;\r\n        data.skillMagnetNum = this.skillMagnetNum;\r\n        data.skillLifeNum = this.skillLifeNum;\r\n\r\n        return data;\r\n    }\r\n\r\n    onSaveData() {\r\n        let now = new Date();\r\n        let data: any = {};\r\n        data.player = this.getSaveData(now);\r\n        data.audio = audioManager.getSaveData(now);\r\n\r\n        UserData.getInstance().playerData = data;\r\n    }\r\n\r\n    openSecondInterval() {\r\n        if (this.secondInterval) {\r\n            clearInterval(this.secondInterval);\r\n        }\r\n        this.secondInterval = setInterval(this.updateSecond.bind(this), 1000);\r\n        this.updateSecond();\r\n    }\r\n\r\n    updateSecond() {\r\n        let now = new Date();\r\n        this.now = now;\r\n\r\n        if (utilTools.overDay(this.saveTime, now)) {\r\n            // 跨天了\r\n            this.saveTime = now;\r\n            this.overDay(now);\r\n            // 通知UI层\r\n            eventManager.send(msgac.overDay);\r\n        }\r\n\r\n        if (now.getTime() >= this.energyObj.endTime) {\r\n            this.energyObj = {\r\n                num: 0,\r\n                awardObj: {},\r\n                endTime: new Date(now.getTime() + 7 * constants.times.day)\r\n            };\r\n            eventManager.send(msgac.energyObjRefresh);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 是否处于开发环境\r\n     */\r\n    isInDevelopmentEnvironment(): boolean {\r\n        return this.isOpenDev;\r\n    }\r\n\r\n    overDay(now: Date) {\r\n        this.skillFreeRefreshCount = 0;\r\n        this.dayTaskObj = {\r\n            awardFlagArr: [],\r\n            taskObj: {},\r\n        };\r\n        this.vipObj.dayAward = 0;\r\n        this.shareObj.dayNum = 0;\r\n        UserData.getInstance().dayAct = 0;\r\n    }\r\n\r\n    // 清楚存档，方便开发测试用\r\n    clearGameData() {\r\n        localStorageManager.setGameData({});\r\n        this.init();\r\n    }\r\n\r\n    sendToUINotice(info: any) {\r\n        eventManager.send(msgac.showNotice, info);\r\n    }\r\n\r\n    getTaskInfoById(id: number) {\r\n        let info = this.dayTaskObj.taskObj[id];\r\n        if (!info) {\r\n            info = {\r\n                num: 0,\r\n                getAward: 0\r\n            };\r\n            this.dayTaskObj.taskObj[id] = info;\r\n        }\r\n        return info;\r\n    }\r\n\r\n    addDayTaskNum(id: number, num: number = 1) {\r\n        let info = this.getTaskInfoById(id);\r\n        info.num += num;\r\n        let row = designManager.getRowById(constants.tableName.dayTask, id);\r\n        if (info.num >= row.needNum && !info.getAward) {\r\n            switch (id) {\r\n                case 4:\r\n                case 5:\r\n                case 6:\r\n                    break;\r\n                default:\r\n                    eventManager.send(msgac.refreshRedPoint);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    getEnergyAwardInfoById(id: number) {\r\n        let info = this.energyObj.awardObj[id];\r\n        if (!info) {\r\n            info = {};\r\n            this.energyObj.awardObj[id] = info;\r\n        }\r\n        return info;\r\n    }\r\n\r\n    hasLetterAward() {\r\n        if (playerModel.isLetterAward) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    hasDaySignAward() {\r\n        let now = new Date();\r\n        let day = Math.floor((now.getTime() - playerModel.daySignObj.startTime) / constants.times.day);\r\n\r\n        let row = designManager.getRowById(constants.tableName.daySign, day + 1);\r\n        if (!row) {\r\n            return false;\r\n        }\r\n\r\n        if (playerModel.daySignObj.awardDayArr.indexOf(day) == -1) {\r\n            return true;;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    hasDayTaskAward() {\r\n        let tb = designManager.getTable(constants.tableName.dayTask);\r\n        for (let i in tb) {\r\n            let row = tb[i];\r\n            let info = playerModel.getTaskInfoById(row.id);\r\n            if (info.num >= row.needNum && !info.getAward) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    hasEnergyAward() {\r\n        let tb = designManager.getTable(constants.tableName.energyAward);\r\n        for (let i in tb) {\r\n            let row = tb[i];\r\n            if (UserData.getInstance().energy < row.num) {\r\n                break;\r\n            }\r\n            let info = playerModel.getEnergyAwardInfoById(row.id);\r\n            if (!info.award1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    addVipAdNum() {\r\n        this.vipObj.adNum++;\r\n        let row = designManager.getRowById(constants.tableName.vip, this.vipObj.vip);\r\n        if (this.vipObj.adNum >= row.adNum) {\r\n            let nextRow = designManager.getRowById(constants.tableName.vip, this.vipObj.vip + 1);\r\n            if (nextRow) {\r\n                // 提升VIP等级\r\n                this.vipObj.vip++;\r\n                this.vipObj.adNum = 0;\r\n                this.vipObj.dayAward = 0;\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    hasVipAward() {\r\n        if (!this.vipObj.dayAward || !this.vipObj.onceObj[this.vipObj.vip]) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\nexport const playerModel = PlayerModel.instance;\r\n\r\n","import { Component, ProgressBar, _decorator } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ProgressCtrl')\r\nexport class ProgressCtrl extends Component {\r\n\r\n    private progressBar: ProgressBar;\r\n    // 时间，单位：秒\r\n    private time: number;\r\n    private timeCount: number;\r\n    private endCb: Function;\r\n\r\n    onLoad() {\r\n        this.progressBar = this.getComponent(ProgressBar);\r\n        if (!this.progressBar) {\r\n            this.progressBar = this.getComponentInChildren(ProgressBar);\r\n        }\r\n    }\r\n\r\n    startLoadProgress(time: number, endCb?: Function) {\r\n        if (this.timeCount != undefined) {\r\n            // 重复调用了\r\n            return;\r\n        }\r\n        this.time = time;\r\n        this.endCb = endCb;\r\n        this.timeCount = 0;\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this.timeCount == undefined || !this.progressBar) {\r\n            return;\r\n        }\r\n        this.timeCount += dt;\r\n        let p = this.timeCount / this.time;\r\n        this.progressBar.progress = p;\r\n        if (p >= 1) {\r\n            this.timeCount = undefined;\r\n            if (this.endCb) {\r\n                this.endCb();\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { BoxCollider2D, Collider2D, Contact2DType, find, Node, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { BaseLayer } from '../../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n@ccclass('Prop')\r\nexport class Prop extends BaseLayer {\r\n\r\n    id: number;\r\n    row: any;\r\n    extraObj: any;\r\n\r\n    bodyNode: Node;\r\n    aniNode: Node;\r\n    collider: BoxCollider2D;\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    propUtil: any;\r\n\r\n    isFollowPlayer: boolean;\r\n    followSpeed: number;\r\n\r\n    onLoad() {\r\n        this.collider = this.getComponent(BoxCollider2D);\r\n        this.animationCtrl = this.addComponent(AnimationCtrl);\r\n        this.bodyNode = find(\"body\", this.node);\r\n        this.aniNode = find(\"ani\", this.node);\r\n\r\n        if (this.collider) {\r\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.contactBegin, this);\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n\r\n    }\r\n\r\n    init(id: number, worldPos: Vec3, extraObj?: any) {\r\n        if (!this.bodyNode) {\r\n            this.onLoad();\r\n        }\r\n        this.id = id;\r\n        this.row = designManager.getRowById(constants.tableName.prop, id);\r\n        this.extraObj = extraObj;\r\n        this.unscheduleAllCallbacks();\r\n        if (this.collider) {\r\n            this.collider.enabled = true;\r\n        }\r\n\r\n        this.isFollowPlayer = false;\r\n        this.followSpeed = -1000;\r\n\r\n        let pos = cocosUtil.convertToNodeSpace(this.node, worldPos);\r\n        this.node.setPosition(pos);\r\n\r\n        if (this.aniNode) {\r\n            this.aniNode.active = true;\r\n        }\r\n        this.setSpriteFrame(this.bodyNode, this.row.icon);\r\n\r\n        try {\r\n            this.propUtil = cocosUtil.addComponentOnce(this, \"Prop\" + id);\r\n            this.propUtil.unscheduleAllCallbacks();\r\n            this.propUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n    }\r\n\r\n    contactBegin(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (otherCollider.group == physicsGroup.PLAYER_BULLET) {\r\n            if (this.id == constants.propIds.box1) {\r\n                // 打到木箱\r\n                this.collider.enabled = false;\r\n                this.animationCtrl.playAnimationOnce(\"ani\", () => {\r\n                    this.recycleSelf();\r\n                    // 按照权重，产生道具\r\n                    let tb = designManager.getTable(constants.tableName.box1);\r\n                    let arr = [];\r\n                    for (let i in tb) {\r\n                        let row = tb[i];\r\n                        if (row.mapId == 0 || row.mapId == mapModel.mapId) {\r\n                            arr.push(row);\r\n                        }\r\n                    }\r\n                    let ret = utilTools.getRowByWeight(arr);\r\n                    let num = utilTools.getFloatValue(ret.minNum, ret.maxNum, true);\r\n                    let extraObj: any = {};\r\n                    extraObj.num = num;\r\n                    extraObj.propId = ret.propId;\r\n                    let propId = ret.propId;\r\n                    let row = designManager.getRowById(constants.tableName.prop, propId);\r\n                    if (row.type == 8 || row.type == 11) {\r\n                        propId = constants.propIds.equip;\r\n                    }\r\n                    mapModel.propSystem.addProp(propId, cocosUtil.convertToWorldSpace(this.node), extraObj);\r\n                });\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    contactPlayer() {\r\n        if (this.propUtil && this.propUtil.notContact) {\r\n            return;\r\n        }\r\n        if (this.propUtil && this.propUtil.autoGet) {\r\n            // 自动获得\r\n            return;\r\n        }\r\n        this.node.active = true;\r\n        if (this.collider) {\r\n            this.collider.enabled = false;\r\n        }\r\n        this.isFollowPlayer = true;\r\n        if (this.aniNode) {\r\n            this.aniNode.active = false;\r\n        }\r\n        if (this.propUtil && this.propUtil.contactStart) {\r\n            this.propUtil.contactStart();\r\n        }\r\n    }\r\n\r\n    doDisPlayerGet(dis: number) {\r\n        if (this.collider) {\r\n            // 碰撞体来管理的\r\n            return;\r\n        }\r\n        if (dis > 100 + mapModel.skillSystem.getSkill2PropGetAddDis()) {\r\n            return;\r\n        }\r\n        this.contactPlayer();\r\n    }\r\n\r\n    // 玩家吃到道具\r\n    playerGetProp() {\r\n        this.recycleSelf();\r\n        this.isFollowPlayer = false;\r\n        let num = 1;\r\n        if (this.extraObj && this.extraObj.num > 0) {\r\n            num = this.extraObj.num;\r\n        }\r\n        let propId = this.id;\r\n        if (this.id == constants.propIds.equip) {\r\n            propId = this.extraObj.propId;\r\n        }\r\n        mapModel.propSystem.getProp(propId, num);\r\n    }\r\n\r\n    recycleSelf() {\r\n        mapModel.propSystem.recyclePropNode(this.node);\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (!this.isFollowPlayer) {\r\n            return;\r\n        }\r\n        let playerPos = mapModel.player.node.getPosition();\r\n        let pos = this.node.getPosition();\r\n        this.followSpeed += 50;\r\n        let moveDis = this.followSpeed * dt;\r\n        let direction = playerPos.subtract(pos).normalize().multiplyScalar(moveDis);\r\n        pos.add(direction);\r\n        this.node.setPosition(pos);\r\n\r\n        if (moveDis > 0) {\r\n            playerPos = mapModel.player.node.getPosition();\r\n            let afterDirection = playerPos.subtract(pos);\r\n            let afterAngle = utilTools.radianToAngle(Vec2.angle(direction, afterDirection));\r\n            if (afterAngle > 90) {\r\n                this.playerGetProp();\r\n                return;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationTrack } from '../../base/AnimationTrack';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 宝箱怪金币\r\n@ccclass('Prop1001')\r\nexport class Prop1001 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    autoGet: boolean = true;\r\n    animationTrack: AnimationTrack;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        this.animationTrack = cocosUtil.addComponentOnce(this.node, AnimationTrack);\r\n        this.animationTrack.startShowThrow(() => {\r\n            this.prop.playerGetProp();\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 装备\r\n@ccclass('Prop1002')\r\nexport class Prop1002 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        let row = designManager.getRowById(constants.tableName.prop, this.prop.extraObj.propId);\r\n        this.prop.setSpriteFrame2(this.prop.bodyNode, \"prop/\" + row.icon);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { myLog } from '../../../../common/myLog';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 金币\r\n@ccclass('Prop101')\r\nexport class Prop101 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        let num = this.prop.extraObj.num;\r\n        let arr = designManager.getRowsByType(constants.tableName.prop, constants.propTypes.coin);\r\n        let propRow = null;\r\n        utilTools.forArr(arr, (row: any) => {\r\n            if (num >= row.p1 && num <= row.p2) {\r\n                propRow = row;\r\n                return true;\r\n            }\r\n        });\r\n        if (!propRow) {\r\n            myLog.e(\"coin num:\" + num + \" not in prop table\");\r\n            return;\r\n        }\r\n\r\n        this.prop.setSpriteFrame(this.prop.bodyNode, propRow.icon);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../../common/myLog';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 经验\r\n@ccclass('Prop201')\r\nexport class Prop201 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        let num = this.prop.extraObj.num;\r\n        let arr = designManager.getRowsByType(constants.tableName.prop, constants.propTypes.exp);\r\n        let propRow = null;\r\n        utilTools.forArr(arr, (row: any) => {\r\n            if (num >= row.p1 && num <= row.p2) {\r\n                propRow = row;\r\n                return true;\r\n            }\r\n        });\r\n        if (!propRow) {\r\n            myLog.e(\"exp num:\" + num + \" not in prop table\");\r\n            return;\r\n        }\r\n\r\n        // 根据经验值大小显示缩放比\r\n        let d = (propRow.p2 - propRow.p1) * 0.8;\r\n        let scale = 1;\r\n        if (num - propRow.p1 > d) {\r\n            scale = 1.3;\r\n        }\r\n        this.prop.bodyNode.setScale(v3(scale, scale, 1));\r\n\r\n        this.prop.setSpriteFrame(this.prop.bodyNode, propRow.icon);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Animation, Component, find, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 宝箱\r\n@ccclass('Prop701')\r\nexport class Prop701 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    notContact: boolean;\r\n    animationCtrl: AnimationCtrl;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        this.notContact = true;\r\n\r\n        this.animationCtrl = cocosUtil.addComponentOnce(find(\"ani\", this.node), AnimationCtrl);\r\n        this.animationCtrl.node.active = true;\r\n        this.animationCtrl.playAnimationOnce(\"1\", () => {\r\n            this.animationCtrl.playAnimation(\"2\", true);\r\n            this.notContact = false;\r\n        });\r\n\r\n        this.prop.bodyNode.scale = v3(0, 0, 1);\r\n        this.prop.bodyNode.getComponent(Animation).play(\"boxAni\");\r\n    }\r\n\r\n    contactStart() {\r\n        this.animationCtrl.node.active = false;\r\n    }\r\n\r\n}\r\n\r\n","import { Label, Node, RichText, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PropInfoLayer')\r\nexport class PropInfoLayer extends BaseUILayer {\r\n\r\n\r\n    @property({ type: Node, tooltip: \"道具节点\" }) propItem: Node = null;\r\n    @property({ type: Node, tooltip: \"按钮\" }) btnWear: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"属性图标\" }) attrIcon: Node = null;\r\n    @property({ type: Label, tooltip: \"属性\" }) attrlabel: Label = null;\r\n    @property({ type: Label, tooltip: \"属性值\" }) attrNumLab: Label = null;\r\n\r\n    @property({ type: Label, tooltip: \"装备详情\" }) propInfoLab: Label = null;\r\n    @property({ type: Label, tooltip: \"装备名字\" }) propNameLab: Label = null;\r\n\r\n    @property({ type: Label, tooltip: \"套装名字\" }) suitNameLab: Label = null;\r\n\r\n    @property({ type: RichText, tooltip: \"3套属性\" }) suitAttr3: RichText = null;\r\n    @property({ type: RichText, tooltip: \"5套属性\" }) suitAttr5: RichText = null;\r\n    @property({ type: Label, tooltip: \"套装数量\" }) suitNum: Label = null;\r\n\r\n    @property({ type: Node, tooltip: \"套装节点\" }) suitNode: Node = null;\r\n\r\n\r\n    _propId = 0\r\n    _propFlag = 0\r\n    _weaponLv = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this._propId = this.layerData.propId\r\n        this._propFlag = this.layerData.flag\r\n        this._weaponLv = this.layerData.weaponLv;\r\n\r\n        let propData = designManager.getRowById(constants.tableName.prop, this._propId)\r\n\r\n        if (propData.atk > 0) {\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_gj\", null, constants.bundles.wwqVec)\r\n            let atk = propData.atk;\r\n            if (this._weaponLv > 0) {\r\n                atk = UserData.getInstance().weaponOptLvEffect(atk, this._weaponLv);\r\n            }\r\n            this.attrNumLab.string = \"+\" + atk\r\n            this.attrNumLab.color = constants.colors.blue.parseColor()\r\n            this.attrlabel.string = \"攻击\"\r\n        } else if (propData.hp > 0) {\r\n            this.attrNumLab.string = \"+\" + propData.hp\r\n            this.setSpriteFrame2(this.attrIcon, \"heroLayer/ui_sm\", null, constants.bundles.wwqVec)\r\n            this.attrlabel.string = \"生命\"\r\n            this.attrNumLab.color = constants.colors.green.parseColor()\r\n        }\r\n\r\n        this.propInfoLab.string = \"\" + propData.info\r\n        this.propNameLab.string = \"\" + propData.name\r\n\r\n        this.propItem.getComponent(PropItemPrefab).setView(this._propId, 0, PropItemPrefab.Type_HideNum | PropItemPrefab.Type_ShowType)\r\n        this.btnWear.off(Node.EventType.TOUCH_END, this.unWearProp, this);\r\n        this.btnWear.off(Node.EventType.TOUCH_END, this.wearProp, this);\r\n        if (this._propFlag & PropItemPrefab.Type_ToWear) {\r\n            this.btnWear.getChildByName(\"Label\").getComponent(Label).string = \"穿戴\"\r\n            this.setSpriteFrame2(this.btnWear, \"btnres/ui_yellow\", null, constants.bundles.common)\r\n            this.btnWear.on(Node.EventType.TOUCH_END, this.wearProp, this);\r\n        } else if (this._propFlag & PropItemPrefab.Type_UnWear) {\r\n            this.btnWear.getChildByName(\"Label\").getComponent(Label).string = \"卸下\"\r\n            this.btnWear.on(Node.EventType.TOUCH_END, this.unWearProp, this);\r\n            this.setSpriteFrame2(this.btnWear, \"btnres/btn_purple\", null, constants.bundles.common)\r\n        } else {\r\n            this.btnWear.active = false\r\n        }\r\n\r\n        let suitId = propData.suit_id\r\n        if (suitId) {\r\n            this.suitNode.active = true\r\n            let suitData = designManager.getRowById(constants.tableName.suit, suitId)\r\n            this.suitNameLab.string = suitData.name\r\n\r\n            let suitNum = UserData.getInstance().getSuitNum(propData)\r\n            this.suitNum.string = \"(\" + suitNum + \"/5)\"\r\n\r\n            let getColor = function (num, color1, color2, str) {\r\n                let color = suitNum >= num ? color1 : color2\r\n                return \"<color=\" + color + \">\" + str + \"</color>\"\r\n            }\r\n\r\n            let atkStr3 = \"\"\r\n            if (suitData.effectAtk_3 > 0) {\r\n                atkStr3 += getColor(3, \"#ffffff\", \"#4c5061\", \"攻击\") + getColor(3, \"#1096fd\", \"#4c5061\", \" +\" + suitData.effectAtk_3 + \"%\")\r\n            }\r\n            \r\n            if (suitData.effectHP_3 > 0) {\r\n                if (atkStr3 != \"\") {\r\n                    atkStr3 += \" \"\r\n                }\r\n                atkStr3 += getColor(3, \"#ffffff\", \"#4c5061\", \"血量\") + getColor(3, \"#38ff38\", \"#4c5061\", \" +\" + suitData.effectHP_3 + \"%\")\r\n            }\r\n\r\n            this.suitAttr3.string = atkStr3\r\n\r\n            let atkStr5 = \"\"\r\n            if (suitData.effectAtk_5 > 0) {\r\n                atkStr5 += getColor(5, \"#ffffff\", \"#4c5061\", \"攻击\") + getColor(5, \"#1096fd\", \"#4c5061\", \" +\" + suitData.effectAtk_5 + \"%\")\r\n            }\r\n\r\n            if (suitData.effectHP_5 > 0) {\r\n                if (atkStr5 != \"\") {\r\n                    atkStr5 += \" \"\r\n                }\r\n                atkStr5 += getColor(5, \"#ffffff\", \"#4c5061\", \"血量\") + getColor(5, \"#38ff38\", \"#4c5061\", \" +\" + suitData.effectHP_5 + \"%\")\r\n            }\r\n            this.suitAttr5.string = atkStr5\r\n        } else {\r\n            this.suitNode.active = false\r\n        }\r\n    }\r\n\r\n    initBtnInfo() {\r\n\r\n    }\r\n\r\n    wearProp() {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, this._propId)\r\n        UserData.getInstance().setWearProp(propdata)\r\n        eventManager.send(msgac.wearDrop)\r\n        this.onClose()\r\n    }\r\n\r\n    unWearProp() {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, this._propId)\r\n        UserData.getInstance().unWearProp(propdata)\r\n        eventManager.send(msgac.wearDrop)\r\n        this.onClose()\r\n    }\r\n\r\n    onClose() {\r\n        this.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { find, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PropInfoLayer2')\r\nexport class PropInfoLayer2 extends BaseLayer {\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let row = designManager.getRowById(constants.tableName.prop, this.layerData.id);\r\n        this.setString(this.getNodeByPath(\"ui/info\"), row.info);\r\n        this.setString(this.getNodeByPath(\"ui/name/text\"), row.name);\r\n\r\n        this.setPropItem(row.id, this.getNodeByPath(\"ui/propItem/icon\"), 0, this.getNodeByPath(\"ui/propItem/bg\"));\r\n\r\n        let numNode = this.getNodeByPath(\"ui/propItem/num\");\r\n        if (this.layerData.num != undefined) {\r\n            numNode.active = true;\r\n            this.setString(find(\"val\", numNode), this.layerData.num);\r\n        } else {\r\n            numNode.active = false;\r\n        }\r\n\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBg() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n","import { Node, Label, Sprite, UITransform, v3, _decorator } from \"cc\";\r\nimport { myLog } from \"../../../common/myLog\";\r\nimport { constants } from \"../../data/constants\";\r\nimport { audioManager } from \"../../manager/audioManager\";\r\nimport { designManager } from \"../../manager/designManager\";\r\nimport { BaseUILayer } from \"../layer/BaseUILayer\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PropItemPrefab')\r\nexport class PropItemPrefab extends BaseUILayer {\r\n\r\n    @property({ type: Sprite, tooltip: \"图标\" }) icon: Sprite = null;\r\n    @property({ type: Sprite, tooltip: \"图标背景\" }) bg: Sprite = null;\r\n    @property({ type: Node, tooltip: \"灰色遮罩\" }) greybg: Node = null;\r\n    @property({ type: Sprite, tooltip: \"图标背景\" }) typeIcon: Sprite = null;\r\n\r\n\r\n    @property({ type: Label, tooltip: \"数量\" }) numLabel: Label = null;\r\n\r\n    private _propId: number = 0\r\n    private _propFlag = 0\r\n\r\n    public static Type_HideNum = 1\r\n    public static Type_UnWear = 1 << 1 // 详情可以穿戴按钮\r\n    public static Type_ToWear = 1 << 2 // 详情可以卸下按钮\r\n    public static Type_Bless = 1 << 3   // 点击选择合成 \r\n    public static Type_UnTouch = 1 << 4  // 不能点击\r\n    public static Type_Grey = 1 << 5  // 灰色遮罩\r\n    public static Type_ShowType = 1 << 6  // 展示类型图标\r\n    public static Type_UnKnow = 1 << 7  // 展示类型图标\r\n    public static Type_BigIcon = 1 << 8  // 展示类型图标\r\n    public static Type_OnlyIcon = 1 << 9  // 展示类型图标\r\n\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    public get propId() {\r\n        return this._propId\r\n    }\r\n\r\n    setView(id, num, flag = 0) {\r\n        this._propId = id\r\n        let propdata = designManager.getRowById(constants.tableName.prop, id)\r\n        let self = this\r\n\r\n        let fun = function (sprite) {\r\n            self.setImageCustomSize(sprite, 95)\r\n        }\r\n        this.node.off(Node.EventType.TOUCH_END, this.openInfo, this);\r\n\r\n\r\n\r\n        if (flag & PropItemPrefab.Type_UnKnow) {\r\n            this.numLabel.string = \"x??\"\r\n            this.setSpriteFrame2(this.icon.node, \"prop/prop_unknow\", fun, constants.bundles.icon)\r\n            this.greybg.active = false\r\n            this.typeIcon.node.active = false\r\n            return\r\n        }\r\n\r\n\r\n        if (propdata) {\r\n            let icon = \"prop/\" + propdata.icon\r\n            if (propdata.type == 11) {\r\n                let weaponData = designManager.getRowById(constants.tableName.weapon, propdata.weaponid)\r\n                icon = \"weapon/\" + weaponData.icon\r\n            }\r\n            this.setSpriteFrame2(this.bg.node, \"prop/propbg\" + propdata.quality, null, constants.bundles.icon)\r\n            this.setSpriteFrame2(this.typeIcon.node, \"prop/propType\" + propdata.quality, null, constants.bundles.icon)\r\n            this.setSpriteFrame2(this.icon.node, icon, fun, constants.bundles.icon)\r\n\r\n            if (!(flag & PropItemPrefab.Type_UnTouch) && (propdata.type == 8 || propdata.type == 11)) {\r\n                this.node.on(Node.EventType.TOUCH_END, this.openInfo, this);\r\n            }\r\n        } else {\r\n            this.setSpriteFrame2(this.bg.node, \"heroLayer/propbg\", null, constants.bundles.wwqVec)\r\n            this.setSpriteFrame2(this.icon.node, \"prop/prop_seat_\" + num, fun, constants.bundles.icon)\r\n            this.numLabel.node.active = false\r\n            this.greybg.active = false\r\n            this.typeIcon.node.active = false\r\n            return\r\n        }\r\n\r\n        if (flag & PropItemPrefab.Type_OnlyIcon) {\r\n            this.bg.node.active = false\r\n            this.greybg.active = false\r\n            this.typeIcon.node.active = false\r\n            this.numLabel.node.active = false\r\n\r\n            return\r\n        }\r\n\r\n\r\n        if (flag & PropItemPrefab.Type_BigIcon) {\r\n            this.greybg.active = false\r\n            this.typeIcon.node.active = false\r\n            this.bg.node.active = false\r\n            this.node.scale = v3(3, 3, 3)\r\n            this.numLabel.node.active = false\r\n            return\r\n        }\r\n\r\n\r\n        this.numLabel.string = \"X\" + num\r\n        this._propFlag = flag\r\n\r\n        //  myLog.i(\"prop : \", this._propId, flag)\r\n        if (flag & PropItemPrefab.Type_HideNum) {\r\n            this.numLabel.node.active = false\r\n        }\r\n\r\n        if (flag & PropItemPrefab.Type_Grey) {\r\n            this.greybg.active = true\r\n        } else {\r\n            this.greybg.active = false\r\n        }\r\n\r\n        if (flag & PropItemPrefab.Type_ShowType) {\r\n            this.typeIcon.node.active = true\r\n        } else {\r\n            this.typeIcon.node.active = false\r\n        }\r\n    }\r\n\r\n    openInfo() {\r\n        myLog.i(\"点击装备\")\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.openLayer(constants.layers.PropInfoLayer, { propId: this._propId, flag: this._propFlag })\r\n    }\r\n\r\n    setScale(width) {\r\n        let bgWidth = this.bg.getComponent(UITransform).width\r\n        let bgHeight = this.bg.getComponent(UITransform).height\r\n        let scale = width / bgWidth\r\n        this.node.scale = v3(scale, scale, 1)\r\n\r\n        this.node.getComponent(UITransform).width = bgWidth * scale\r\n        this.node.getComponent(UITransform).height = bgHeight * scale\r\n    }\r\n\r\n    changeBg(resPath, bundleName) {\r\n        this.setSpriteFrame2(this.bg.node, resPath, null, bundleName)\r\n        \r\n    }\r\n\r\n}","import { Node, Prefab, UITransform, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { NodePoolUtil } from '../base/NodePoolUtil';\r\nimport { Prop } from '../item/prop/Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PropSystem')\r\nexport class PropSystem extends BaseLayer {\r\n\r\n    // 按照道具id进行UI分层\r\n    idPropLayerObj: any = {};\r\n    idPrefabObj: any = {};\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    getPropLayerNameById(id: number) {\r\n        return \"propLayer\" + id;\r\n    }\r\n\r\n    getPropLayerById(id: number) {\r\n        let propLayer = this.idPropLayerObj[id];\r\n        if (!propLayer) {\r\n            propLayer = new Node(this.getPropLayerNameById(id));\r\n            propLayer.addComponent(UITransform);\r\n            propLayer.setPosition(0, 0);\r\n            propLayer.parent = this.node;\r\n            this.idPropLayerObj[id] = propLayer;\r\n\r\n            let nodePoolUtil = propLayer.addComponent(NodePoolUtil);\r\n            nodePoolUtil.init(this.idPrefabObj[id]);\r\n        }\r\n        return propLayer;\r\n    }\r\n\r\n    saveDataBefore() {\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            let nodePoolUtil = propLayer.getComponent(NodePoolUtil);\r\n            nodePoolUtil.forEachUseNode((node: Node) => {\r\n                let prop = node.getComponent(Prop);\r\n                if (prop.id == constants.propIds.boxMonsterCoin) {\r\n                    prop.playerGetProp();\r\n                    return;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    getSaveData() {\r\n        let propData: any = {};\r\n        propData.arr = [];\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            let nodePoolUtil = propLayer.getComponent(NodePoolUtil);\r\n            nodePoolUtil.forEachUseNode((node: Node) => {\r\n                let prop = node.getComponent(Prop);\r\n                if (prop.id == constants.propIds.boxMonsterCoin) {\r\n                    prop.playerGetProp();\r\n                    return;\r\n                }\r\n                let info: any = {};\r\n                info.id = prop.id;\r\n                info.worldPos = cocosUtil.convertToWorldSpace(node);\r\n                info.extraObj = prop.extraObj;\r\n                propData.arr.push(info);\r\n            });\r\n        });\r\n        return propData;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        utilTools.forArr(data.arr, (prop: any) => {\r\n            this.addProp(prop.id, prop.worldPos, prop.extraObj);\r\n        });\r\n    }\r\n\r\n    addProp(id: number, worldPos: Vec3, extraObj?: any) {\r\n        let nodePoolUtil = this.getPropLayerById(id).getComponent(NodePoolUtil);\r\n\r\n        let tmpFunc = () => {\r\n            let propNode = nodePoolUtil.getNode();\r\n            let prop = cocosUtil.addComponentOnce(propNode, Prop);\r\n            prop.init(id, worldPos, extraObj);\r\n        };\r\n\r\n        if (!this.idPrefabObj[id]) {\r\n            let name = \"prop\" + id;\r\n            resManager.loadAsset(constants.bundles.prefab, \"prop/\" + name + \"/\" + name, Prefab, null, (err, prefab) => {\r\n                if (!cocosUtil.isValid(this)) {\r\n                    return;\r\n                }\r\n                this.idPrefabObj[id] = prefab;\r\n                nodePoolUtil.init(prefab);\r\n                tmpFunc();\r\n            });\r\n            return;\r\n        }\r\n        tmpFunc();\r\n    }\r\n\r\n    // 玩家获得道具\r\n    getProp(id: number, num: number = 1, extraObj?: any) {\r\n        if (mapModel.player.hp <= 0) {\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        switch (id) {\r\n            case constants.propIds.exp:\r\n                mapModel.mapSystem.addExp(num + mapModel.skillSystem.getSkill2AddExp());\r\n                break;\r\n            case constants.propIds.coin:\r\n                mapModel.mapSystem.addCoin(num + mapModel.skillSystem.getSkill2AddCoin());\r\n                break;\r\n            case constants.propIds.magnet:\r\n                // 磁铁-只吸经验\r\n                mapModel.propSystem.forAllPropById(constants.propIds.exp, (prop: Prop) => {\r\n                    prop.contactPlayer();\r\n                });\r\n                break;\r\n            case constants.propIds.addHpPercent:\r\n                // 回血\r\n                mapModel.player.addHpPercent(row.p1);\r\n                break;\r\n            case constants.propIds.bomb:\r\n                // 炸弹\r\n                mapModel.mapSystem.bomb();\r\n                break;\r\n            case constants.propIds.box2:\r\n                // 水果机\r\n                if (mapModel.player.hp > 0) {\r\n                    mapModel.mapLayer.popLayer(constants.layers.LuckyDrawLayer);\r\n                }\r\n                break;\r\n            case constants.propIds.boxMonsterCoin:\r\n                // 宝箱怪金币\r\n                mapModel.mapSystem.addCoin(1);\r\n                break;\r\n            case constants.propIds.diamond:\r\n                // 钻石，直接塞给玩家\r\n                UserData.getInstance().useBaoShi(num, true);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (row.type == 8 || row.type == 11) {\r\n            // 装备\r\n            mapModel.equipIdArr.push(id);\r\n        }\r\n    }\r\n\r\n    // 遍历所有存在的指定道具id\r\n    forAllPropById(propId: number, cb: (prop: Prop) => void) {\r\n        let layer = this.getPropLayerById(propId);\r\n        let nodePoolUtil = layer.getComponent(NodePoolUtil);\r\n        nodePoolUtil.forEachUseNode((node: Node) => {\r\n            let prop = node.getComponent(Prop);\r\n            if (prop.isFollowPlayer) {\r\n                return;\r\n            }\r\n            cb(prop);\r\n        });\r\n    }\r\n\r\n    // 遍历屏幕范围内的碰撞道具\r\n    forVisiblePropCollider(cb: (prop: Prop) => void) {\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            utilTools.forArr(propLayer.children, (propNode: Node) => {\r\n                if (!propNode.active) {\r\n                    return;\r\n                }\r\n                if (!mapModel.isInScreenVisible(propNode)) {\r\n                    return;\r\n                }\r\n                let prop = propNode.getComponent(Prop);\r\n                if (!prop.collider) {\r\n                    return;\r\n                }\r\n                cb(prop);\r\n            });\r\n        });\r\n    }\r\n\r\n    // 遍历屏幕范围内的所有可直接吃的道具\r\n    forVisiblePropContact(cb: (prop: Prop) => void) {\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            utilTools.forArr(propLayer.children, (propNode: Node) => {\r\n                if (!propNode.active) {\r\n                    return;\r\n                }\r\n                if (!mapModel.isInScreenVisible(propNode)) {\r\n                    return;\r\n                }\r\n                let prop = propNode.getComponent(Prop);\r\n                if (prop.collider) {\r\n                    return;\r\n                }\r\n                cb(prop);\r\n            });\r\n        });\r\n    }\r\n\r\n    // 遍历所有可直接吃的道具\r\n    forAllPropContact(cb: (prop: Prop) => void) {\r\n        utilTools.forArr(this.node.children, (propLayer: Node) => {\r\n            utilTools.forArr(propLayer.children, (propNode: Node) => {\r\n                // @ts-ignore\r\n                if (!propNode.use) {\r\n                    return;\r\n                }\r\n                let prop = propNode.getComponent(Prop);\r\n                if (prop.collider) {\r\n                    return;\r\n                }\r\n                cb(prop);\r\n            });\r\n        });\r\n    }\r\n\r\n    recyclePropNode(propNode: Node) {\r\n        let prop = propNode.getComponent(Prop);\r\n        let nodePoolUtil = this.getPropLayerById(prop.id).getComponent(NodePoolUtil);\r\n        nodePoolUtil.recycleNode(propNode);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        // 显示优化\r\n        for (let i in this.idPropLayerObj) {\r\n            let nodePoolUtil: NodePoolUtil = this.getPropLayerById(parseFloat(i)).getComponent(NodePoolUtil);\r\n            nodePoolUtil.forEachUseNode((node: Node) => {\r\n                let dis = Vec2.distance(node.getPosition(), mapModel.player.node.getPosition());\r\n                let prop = node.getComponent(Prop);\r\n                if (dis <= mapModel.dataRadius || (prop.propUtil && prop.propUtil.autoGet)) {\r\n                    node.active = true;\r\n                    prop.doDisPlayerGet(dis);\r\n                    return;\r\n                }\r\n                if (prop.isFollowPlayer) {\r\n                    return;\r\n                }\r\n                node.active = false;\r\n            });\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, Label, Node, Prefab, sp, Sprite, SpriteFrame, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PyramidDrawLayer')\r\nexport class PyramidDrawLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property({ type: Node }) propItem: Node = null;\r\n\r\n    @property({ type: Node }) itemLayer: Node = null;\r\n\r\n    @property({ type: Label }) coinLabel: Label = null;\r\n\r\n\r\n    private items = []\r\n\r\n    _index = 0\r\n    _dtTime = 0\r\n    _isStartRun = false\r\n    _endIndex = 0\r\n    _drawItemArr = []\r\n\r\n    _isDoubleDraw = false\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n\r\n        this.initItems()\r\n    }\r\n\r\n    closeBless() {\r\n        this.closeLayer()\r\n    }\r\n\r\n    initItems() {\r\n        let data = designManager.getRowsByType(constants.tableName.CNTM, 3)\r\n        for (let index = 0; index < data.length; index++) {\r\n            this._drawItemArr.push(data[index].award)\r\n            let propItem = instantiate(this.propItem)\r\n            this.itemLayer.getChildByName(\"node\" + (index + 1)).addChild(propItem)\r\n            this.items[index] = propItem\r\n            propItem.position = v3(0, 0, 0)\r\n            propItem.getComponent(PropItemPrefab).setView(data[index].award[0][0], data[index].award[0][1], PropItemPrefab.Type_UnTouch)\r\n            propItem.getComponent(PropItemPrefab).setScale(109)\r\n            propItem.getChildByName(\"xuanzhong\").active = false\r\n        }\r\n        this.initItemState()\r\n    }\r\n\r\n    initItemState() {\r\n        for (let index = 0; index < 10 && index < this.items.length; index++) {\r\n            let drawItem = this.items[index]\r\n            drawItem.getChildByName(\"grayMask\").active = UserData.getInstance().$pyramidState[index] == 1\r\n            drawItem.getChildByName(\"xuanzhong\").active = false\r\n        }\r\n        let drawItem = designManager.config[\"jinzita\"]\r\n        this.coinLabel.string = drawItem[UserData.getInstance().$pyramidDrawTime]\r\n\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (!this._isStartRun) {\r\n            return\r\n        }\r\n        this._dtTime += dt\r\n        if (this._dtTime > 0.1) {\r\n            this._dtTime = 0\r\n            this._index++\r\n            for (let index = 0; index < 10; index++) {\r\n                this.items[index].getChildByName(\"xuanzhong\").active = false\r\n            }\r\n            let itemsIndex = this.getDrawIndex(this._index, this._index >= this._endIndex)\r\n            this.items[itemsIndex].getChildByName(\"xuanzhong\").active = true\r\n            if (this._index >= this._endIndex) {\r\n                this._isStartRun = false\r\n                let curBet = this._drawItemArr[itemsIndex][0]\r\n                let propItem: PropItem = {\r\n                    Id: curBet[0],\r\n                    Num: this._isDoubleDraw ? curBet[1] * 2 : curBet[1]\r\n                };\r\n                UserData.getInstance().getRewardProp([propItem])\r\n                this.openLayer(constants.layers.RewardLayer, { propArr: [propItem] });\r\n\r\n                UserData.getInstance().setPyramidState(itemsIndex)\r\n                UserData.getInstance().$pyramidDrawTime++\r\n                if (UserData.getInstance().$pyramidDrawTime >= 10) {\r\n                    UserData.getInstance().$pyramidDrawTime = 0\r\n                    UserData.getInstance().$pyramidState = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n                }\r\n\r\n                this.initItemState()\r\n            }\r\n        }\r\n    }\r\n\r\n    getDrawIndex(index, isHero) {\r\n        if (UserData.getInstance().$pyramidDrawTime == 9) {\r\n            return 0\r\n        }\r\n        let arr = []\r\n        for (let i = isHero ? 1 : 0; i < UserData.getInstance().$pyramidState.length; i++) {\r\n            if (UserData.getInstance().$pyramidState[i] == 0) {\r\n                arr.push(i)\r\n            }\r\n        }\r\n        return arr[index % arr.length]\r\n    }\r\n\r\n    startDraw() {\r\n        if (this._isStartRun) {\r\n            return\r\n        }\r\n        let drawItem = designManager.config[\"jinzita\"]\r\n        if (UserData.getInstance().checkAndUseBaoshi(drawItem[UserData.getInstance().$pyramidDrawTime])) {\r\n            tyqSDK.eventSendCustomEvent(\"庆典消耗钻石——\"+drawItem[UserData.getInstance().$pyramidDrawTime])\r\n            this._isStartRun = true\r\n            this._isDoubleDraw = false\r\n            if (UserData.getInstance().$pyramidDrawTime == 9) {\r\n                this._endIndex = 10\r\n            } else {\r\n                this._endIndex = Math.floor(Math.random() * 10) + 20 - UserData.getInstance().$pyramidDrawTime\r\n            }\r\n            this._index = 0\r\n        }\r\n        else {\r\n            this.toast(\"钻石不足\")\r\n            this.openLayer(constants.layers.RewardItemLayer, { propId: 801, num: designManager.config.adDiamond })\r\n        }\r\n    }\r\n\r\n    doubleDraw() {\r\n        let self = this\r\n        sdkManager.openAd(\"参与庆典\", function (st) {\r\n            if (st == 1) {\r\n                if (self._isStartRun) {\r\n                    return\r\n                }\r\n                self._isStartRun = true\r\n                if (UserData.getInstance().$pyramidDrawTime == 9) {\r\n                    self._endIndex = 10\r\n                } else {\r\n                    self._endIndex = Math.floor(Math.random() * 10) + 20 - UserData.getInstance().$pyramidDrawTime\r\n                }\r\n                self._index = 0\r\n              //  self._isDoubleDraw = true\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n","import { _decorator, Node, find, isValid, AnimationClip, js, v3, sp, Vec3, UITransform, Prefab, instantiate } from 'cc';\r\nimport { constants } from '../data/constants';\r\nimport { msgac } from '../data/msgac';\r\nimport { UserData } from '../model/UserData';\r\nimport { eventManager } from './eventManager';\r\nimport GParam from './GParam';\r\nimport { MapWrap } from './MapWrap';\r\nimport { resManager } from './resManager';\r\n\r\nconst reg = /^[0-9]+.?[0-9]*$/;\r\n\r\nexport const RED_POINT_NAME = \"red_point\";\r\nexport const RED_POINT_LABEL_NAME = \"label\";\r\n\r\n\r\nexport enum RPointMask {\r\n\t/**客户端红点起始*/\r\n\tRPM_Client = 300,\r\n\tRPM_PropWear,\r\n\tRPM_BlessProp,\r\n\r\n}\r\n\r\n/**\r\n * 红点位置类型\r\n */\r\nexport enum RedpointPos {\r\n\tMain,\r\n\tright,\r\n}\r\n\r\n/** 无效值 */\r\nexport const INVALID_VALUE_ZERO = 0;\r\nexport const INVALID_VALUE = -1;\r\nexport const INVALID_STRING_VALUE = \"-1\";\r\n\r\nexport class RedPointLogicMgr {\r\n\tprotected static _instance: RedPointLogicMgr = null;\r\n\tpublic static ins(): RedPointLogicMgr {\r\n\t\tif (this._instance == null) {\r\n\t\t\tthis._instance = new RedPointLogicMgr();\r\n\t\t\tthis._instance.initGame()\r\n\t\t}\r\n\t\treturn this._instance;\r\n\t}\r\n\r\n\t/** 红点数值 */\r\n\tprotected _redPointMask: MapWrap<number, boolean>;\r\n\t/** 缓存更新 */\r\n\tprotected _waitSends: number[];\r\n\t/** 缓存计算 */\r\n\tprotected _waitChecks: number[];\r\n\t/** 定时器句柄 */\r\n\tprotected _updateHandler: number = INVALID_VALUE;\r\n\t/** 待解锁mask */\r\n\tprotected _unlockMasks: number[];\r\n\r\n\t/** 红点注册表 通过uuid进行注册 */\r\n\tprotected _targets: MapWrap<string, RPointNode[]>;\r\n\tprotected _targetWraps: MapWrap<string, Node>;\r\n\tprotected _masks: MapWrap<number, Node[]>;\r\n\r\n\t/** 更新 */\r\n\tprotected update() {\r\n\t\tthis.updateCheck();\r\n\t\tthis.updateVisit();\r\n\t\tthis.checkState();\r\n\t}\r\n\r\n\tpublic initGame() {\r\n\t\tthis.initEvent();\r\n\t\tthis._redPointMask = new MapWrap<number, boolean>();\r\n\t\tthis._waitSends = [];\r\n\t\tthis._waitChecks = [];\r\n\t\tthis._unlockMasks = [];\r\n\t\tthis._targets = new MapWrap<string, RPointNode[]>();\r\n\t\tthis._targetWraps = new MapWrap<string, Node>();\r\n\t\tthis._masks = new MapWrap<number, Node[]>();\r\n\t\tthis.stopUpdate();\r\n\t\t// 本地红点检测\r\n\t\tlet keys = Object.keys(RPointMask);\r\n\t\tfor (let key of keys) {\r\n\t\t\tif (!reg.test(key)) continue;\r\n\t\t\tthis._waitChecks.push(parseInt(key));\r\n\t\t}\r\n\t\tthis.checkState();\r\n\t\t// this.onCMSUserChange$tip();\r\n\t}\r\n\r\n\tprotected initEvent() {\r\n\t\teventManager.on(msgac.redPointEvent, this.onCMSGRPValueSetting, this)\r\n\t\t//eventManager.off(this)\r\n\t\t// GCtrl.ES.on(CMsg.rPoint.valueSetting, this, this.onCMSGRPValueSetting.bind(this), PRIORITY_VIEW);\r\n\t\t// GCtrl.ES.on(CMsg.client.bag.onBagItemChange, this, this.updateState.bind(this), PRIORITY_VIEW);\r\n\t\t// GCtrl.ES.on(CMsg.client.hero.onAddHero, this, this.updateState.bind(this), PRIORITY_VIEW);\r\n\t}\r\n\r\n\tprotected updateState() {\r\n\t\tlet keys = Object.keys(RPointMask);\r\n\t\tfor (let key of keys) {\r\n\t\t\tif (!reg.test(key)) continue;\r\n\t\t\tlet checkIndex = this._waitChecks.indexOf(parseInt(key));\r\n\t\t\tif (checkIndex === INVALID_VALUE) {\r\n\t\t\t\tthis._waitChecks.push(parseInt(key));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.checkState();\r\n\t}\r\n\r\n\t//在需要红点的地方用该方法进行注册\r\n\tpublic on(target: Node, nodes: RPointNode[]) {\r\n\t\tlet targetIt = this._targets.get(target.uuid);\r\n\t\tif (!targetIt) {\r\n\t\t\ttargetIt = [];\r\n\t\t\tthis._targets.set(target.uuid, targetIt);\r\n\t\t\tthis._targetWraps.set(target.uuid, target);\r\n\t\t}\r\n\t\ttargetIt.push(...nodes);\r\n\r\n\t\tfor (let node of nodes) {\r\n\t\t\tlet value = false;\r\n\t\t\tfor (let cMask of node.mask) {\r\n\t\t\t\tlet maskIt = this._masks.get(cMask);\r\n\t\t\t\tif (!maskIt) {\r\n\t\t\t\t\tmaskIt = [];\r\n\t\t\t\t\tthis._masks.set(cMask, maskIt);\r\n\t\t\t\t}\r\n\t\t\t\tif (maskIt.indexOf(target) == INVALID_VALUE) {\r\n\t\t\t\t\tmaskIt.push(target);\r\n\t\t\t\t}\r\n\t\t\t\tvalue = value || this._redPointMask.get(cMask);\r\n\t\t\t}\r\n\t\t\tthis.setRPointView(target, node.subPath, value, node.effectType, node.posType, node.cb);\r\n\t\t}\r\n\t}\r\n\r\n\t/**注销红点 */\r\n\tpublic off(target: Node) {\r\n\t\tlet targetIt = this._targets.get(target.uuid);\r\n\t\tif (!targetIt) return;\r\n\t\tfor (let node of targetIt) {\r\n\t\t\tfor (let cMask of node.mask) {\r\n\t\t\t\tlet maskIt = this._masks.get(cMask);\r\n\t\t\t\tif (maskIt) {\r\n\t\t\t\t\tlet index = maskIt.indexOf(target);\r\n\t\t\t\t\tif (index != INVALID_VALUE)\r\n\t\t\t\t\t\tmaskIt.splice(index, 1);\r\n\t\t\t\t\tif (maskIt.length == 0) this._masks.delete(cMask);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._targets.delete(target.uuid);\r\n\t\tthis._targetWraps.delete(target.uuid);\r\n\t}\r\n\r\n\tpublic loginOut() {\r\n\t\tthis.stopUpdate();\r\n\t\teventManager.offWithSender(this)\r\n\t\t//\tGCtrl.ES.off(this); \r\n\t\tthis._waitChecks = [];\r\n\t\tthis._waitSends = [];\r\n\t\tthis._targets.clear();\r\n\t\tthis._targetWraps.clear();\r\n\t\tthis._masks.clear();\r\n\t}\r\n\r\n\tpublic sendValueSettingMsg(mask: number, value: boolean, forceStop?: boolean) {\r\n\t\tlet target: RPointValue = { mask: mask, value: value, forceStop: forceStop }\r\n\t\t//eventManager.send(mask)\r\n\t\tthis.onCMSGRPValueSetting(this, new GParam(target))\r\n\t\t//GCtrl.ES.emit(CMsg.rPoint.valueSetting, GCtrl.param(target));\r\n\t}\r\n\r\n\tpublic sendValuesSettingMsgs(mask: number[], value: boolean, forceStop?: boolean) {\r\n\t\tfor (let i = 0; i < mask.length; i++) {\r\n\t\t\tthis.sendValueSettingMsg(mask[i], value, forceStop);\r\n\t\t}\r\n\t}\r\n\r\n\t/**定时检测红点 */\r\n\tpublic timingCheck() {\r\n\t\t//需要定时检测的红点\r\n\t\t//GameMgr.redMgr.sendValueSettingMsg(RPointMask.RPM_DrawFree, false);\r\n\t}\r\n\r\n\t/**\r\n\t  * 红点值变更\r\n\t  * @param _ \r\n\t  * @param param \r\n\t  */\r\n\tprotected onCMSGRPValueSetting(_, param: GParam) {\r\n\t\tlet rp = param.get<RPointValue>();\r\n\t\t// 如果传过来的红点为True，则表示必定红点；如果为false,则需要重新计算\r\n\t\tif (rp.value == true) {\r\n\t\t\t// 如果等待计算项中存在该红点，则删除\r\n\t\t\tlet checkIndex = this._waitChecks.indexOf(rp.mask);\r\n\t\t\tif (checkIndex != INVALID_VALUE) {\r\n\t\t\t\tthis._waitChecks.splice(checkIndex, 1);\r\n\t\t\t}\r\n\t\t\t// 如果当前的值为true，则不需要更新\r\n\t\t\tif (this._redPointMask.get(rp.mask)) return;\r\n\t\t\tthis._redPointMask.set(rp.mask, rp.value);\r\n\t\t\t// 更新更新待推送的红点\r\n\t\t\tif (this._waitSends.indexOf(rp.mask) != INVALID_VALUE) return;\r\n\t\t\tthis._waitSends.push(rp.mask);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (rp.forceStop == true) {\r\n\t\t\t\tlet checkIndex = this._waitChecks.indexOf(rp.mask);\r\n\t\t\t\tif (checkIndex != INVALID_VALUE) {\r\n\t\t\t\t\tthis._waitChecks.splice(checkIndex, 1);\r\n\t\t\t\t}\r\n\t\t\t\tthis._redPointMask.set(rp.mask, rp.value);\r\n\t\t\t\t// 更新更新待推送的红点\r\n\t\t\t\tif (this._waitSends.indexOf(rp.mask) != INVALID_VALUE) return;\r\n\t\t\t\tthis._waitSends.push(rp.mask);\r\n\t\t\t}\r\n\t\t\t// 重新检测红点的值\r\n\t\t\t// 如果当前待检测列表中存在该枚举，等待检测，否则加入待检测列表\r\n\t\t\telse if (this._waitChecks.indexOf(rp.mask) == INVALID_VALUE) {\r\n\t\t\t\tthis._waitChecks.push(rp.mask);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.checkState();\r\n\t}\r\n\r\n\r\n\tprotected startUpdate() {\r\n\t\tif (this._updateHandler != INVALID_VALUE) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._updateHandler = setInterval(this.update.bind(this), 100) as any;\r\n\t}\r\n\r\n\tprotected stopUpdate() {\r\n\t\tif (INVALID_VALUE == this._updateHandler) return;\r\n\t\tclearInterval(this._updateHandler);\r\n\t\tthis._updateHandler = INVALID_VALUE;\r\n\t}\r\n\r\n\tprotected checkState() {\r\n\t\tif (this._waitChecks.length > 0 || this._waitSends.length > 0) {\r\n\t\t\tif (this._updateHandler == INVALID_VALUE) this.startUpdate();\r\n\t\t}\r\n\t\telse if (this._waitChecks.length == 0 && this._waitSends.length == 0) {\r\n\t\t\tif (this._updateHandler != INVALID_VALUE) this.stopUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**更新状态 */\r\n\tprotected updateCheck() {\r\n\t\tif (this._waitChecks.length == 0) return;\r\n\t\tlet mask = this._waitChecks.shift();\r\n\t\tlet value = true;\r\n\t\tif (value) {\r\n\t\t\tvalue = false;\r\n\t\t\tswitch (mask) {\r\n\t\t\t\tcase RPointMask.RPM_Client: {\r\n\t\t\t\t\t//\tvalue = GameMgr.userMgr.checkVipRedPoint(mask === RPointMask.RPM_Vip_Frist);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase RPointMask.RPM_PropWear: {\r\n\t\t\t\t\tvalue = UserData.getInstance().checkBestPropToWear()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase RPointMask.RPM_BlessProp: {\r\n\t\t\t\t\tvalue = UserData.getInstance().checkPropCanBless()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvalue = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._redPointMask.get(mask) == value) return;\r\n\t\tthis._redPointMask.set(mask, value);\r\n\t\t// 更新更新待推送的红点\r\n\t\tif (this._waitSends.indexOf(mask) != INVALID_VALUE) return;\r\n\t\tthis._waitSends.push(mask);\r\n\t}\r\n\r\n\t/**表现更新 */\r\n\tprotected updateVisit() {\r\n\t\tif (this._waitSends.length == 0) return;\r\n\t\tlet mask = this._waitSends.shift();\r\n\t\tlet mask_value = this._redPointMask.get(mask);\r\n\r\n\t\t// 取出所有需要变更的节点\r\n\t\tlet maskIter = this._masks.get(mask);\r\n\t\tif (!maskIter || maskIter.length == 0) return;\r\n\t\tfor (let obj of maskIter) {\r\n\t\t\tlet targetIt = this._targets.get(obj.uuid);\r\n\t\t\tif (!targetIt) return;\r\n\t\t\tfor (let node of targetIt) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (node.mask.indexOf(mask) == INVALID_VALUE) continue;\r\n\t\t\t\tif (mask_value == true)\r\n\t\t\t\t\tthis.setRPointView(obj, node.subPath, mask_value, node.effectType, node.posType, node.cb);\r\n\t\t\t\telse {\r\n\t\t\t\t\t// 如果为false则需要取组合值\r\n\t\t\t\t\tlet value = false;\r\n\t\t\t\t\tfor (let cMask of node.mask) {\r\n\t\t\t\t\t\tif (this._redPointMask.get(cMask)) {\r\n\t\t\t\t\t\t\tvalue = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setRPointView(obj, node.subPath, value, node.effectType, node.posType, node.cb);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setRPointView(parent: Node, subPath: string | Node, value: boolean, effectType?: number, posType?: number, cb?: any) {\r\n\t\tlet node = parent;\r\n\t\tif (subPath) {\r\n\t\t\tif (typeof (subPath) == 'string') {\r\n\t\t\t\tnode = find(subPath, parent);\r\n\t\t\t} else {\r\n\t\t\t\tnode = subPath\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!node) return;\r\n\t\t//switch (effectType) {\r\n\t\t//\tcase RedpointEffect.REDPOINT: {\r\n\r\n\t\tlet aniNode = node.getChildByName(RED_POINT_NAME);\r\n\t\tif (!value) {\r\n\t\t\tif (aniNode)\r\n\t\t\t\taniNode.active = false;\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tif (aniNode) {\r\n\t\t\t\taniNode.active = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresManager.loadAsset(constants.bundles.prefab, \"redpoint/gth\", Prefab, () => { }, (err, prefab) => {\r\n\t\t\tlet red = instantiate(prefab)\r\n\t\t\tlet uiTransform = node.getComponent(UITransform) || node.addComponent(UITransform)\r\n\t\t\tswitch (posType) {\r\n\t\t\t\tcase RedpointPos.Main: {\r\n\t\t\t\t\tred.position = v3(uiTransform.width * (1 - uiTransform.anchorX), uiTransform.height * (1 - uiTransform.anchorY) - 20, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase RedpointPos.right:\r\n\t\t\t\t\tred.position = v3(uiTransform.width * (1 - uiTransform.anchorX) - 30, uiTransform.height * (1 - uiTransform.anchorY) - 0, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\tred.position = v3(uiTransform.width * (1 - uiTransform.anchorX) - 25, uiTransform.height * (1 - uiTransform.anchorY) - 10, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//\tred.getComponent(UITransform).setSiblingIndex(8888)\r\n\t\t\tred.name = RED_POINT_NAME\r\n\t\t\tnode.addChild(red);\r\n\t\t\t// let sk = red.addComponent(sp.Skeleton);\r\n\t\t\t// sk.setAnimation(0, 'gth', false);\r\n\t\t\t// sk.setCompleteListener(function () {\r\n\t\t\t// \tsk.addAnimation(0, 'gth', false, 1.5);\r\n\t\t\t// })\r\n\t\t\t//sk.timeScale = 0.7\r\n\t\t})\r\n\r\n\t\t//break;\r\n\t\t//}\r\n\t\t//}\r\n\t\tcb && cb(node);\r\n\t}\r\n\r\n\t/**获取该节点红点应处于的状态 */\r\n\tpublic getMaskRedpointState(masks: number[]) {\r\n\t\tfor (let i = 0; i < masks.length; i++) {\r\n\t\t\tlet value = this._redPointMask.get(masks[i]);\r\n\t\t\tif (value) return value\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n\r\nexport interface RPointNode {\r\n\tmask: number[];\r\n\tsubPath: string;\r\n\tposType?: number;\r\n\teffectType?: number;\r\n\tcb?: Function;\r\n}\r\ninterface RPointValue {\r\n\tmask: number;\r\n\tvalue: boolean;\r\n\tforceStop?: boolean;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import { sys } from \"cc\";\r\nimport { constants } from \"../game/data/constants\";\r\nimport { msgac } from \"../game/data/msgac\";\r\nimport { eventManager } from \"../game/manager/eventManager\";\r\nimport { SingleInstance } from \"./SingleInstance\";\r\n\r\nclass RedPointManager extends SingleInstance {\r\n\r\n    key: string = constants.gameName + \"_redPoint\";\r\n\r\n    getRedPointByLayer(layer: string) {\r\n        let obj: any = sys.localStorage.getItem(this.key);\r\n        let needSave = false;\r\n        if (!obj) {\r\n            obj = {};\r\n            needSave = true;\r\n        } else {\r\n            obj = JSON.parse(obj);\r\n        }\r\n\r\n        let layerObj = obj[layer];\r\n        if (!layerObj) {\r\n            layerObj = {};\r\n            obj[layer] = layerObj;\r\n            needSave = true;\r\n        }\r\n\r\n        if (needSave) {\r\n            sys.localStorage.setItem(this.key, JSON.stringify(obj));\r\n        }\r\n\r\n        return layerObj;\r\n    }\r\n\r\n    setRedPointByLayer(layer: string, layerObj: any) {\r\n        let obj: any = sys.localStorage.getItem(this.key);\r\n        if (!obj) {\r\n            obj = {};\r\n        } else {\r\n            obj = JSON.parse(obj);\r\n        }\r\n        obj[layer] = layerObj;\r\n        sys.localStorage.setItem(this.key, JSON.stringify(obj));\r\n\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    hasRedPointValue(layerName: string, key: string, value?: any) {\r\n        let obj = this.getRedPointByLayer(layerName);\r\n\r\n        if (value != undefined) {\r\n            if (Array.isArray(obj[key])) {\r\n                let rpIndex = obj[key].indexOf(value);\r\n                if (rpIndex != -1) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (Array.isArray(obj[key])) {\r\n            if (obj[key].length > 0) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (obj[key]) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    addRedPointValue(layerName: string, key: string, value?: any) {\r\n        let obj = this.getRedPointByLayer(layerName);\r\n        if (value) {\r\n            if (!Array.isArray(obj[key])) {\r\n                obj[key] = [];\r\n            }\r\n            let rpIndex = obj[key].indexOf(value);\r\n            if (rpIndex == -1) {\r\n                obj[key].push(value);\r\n                this.setRedPointByLayer(layerName, obj);\r\n            }\r\n        } else {\r\n            obj[key] = 1;\r\n            this.setRedPointByLayer(layerName, obj);\r\n        }\r\n    }\r\n\r\n    removeRedPointValue(layerName: string, key: string, value?: any) {\r\n        let obj = this.getRedPointByLayer(layerName);\r\n        let info = obj[key];\r\n\r\n        if (value != undefined) {\r\n            if (Array.isArray(info)) {\r\n                let rpIndex = info.indexOf(value);\r\n                if (rpIndex != -1) {\r\n                    obj[key].splice(rpIndex, 1);\r\n                    this.setRedPointByLayer(layerName, obj);\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (info) {\r\n            delete obj[key];\r\n            this.setRedPointByLayer(layerName, obj);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    clearRedPointLayer(layerName: string, key?: string) {\r\n        let obj = this.getRedPointByLayer(layerName);\r\n        if (key == undefined) {\r\n            // 清空所有\r\n            this.setRedPointByLayer(layerName, undefined);\r\n        } else {\r\n            delete obj[key];\r\n            this.setRedPointByLayer(layerName, obj);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst redPointManager = RedPointManager.getInstance<RedPointManager>();\r\n\r\nexport { redPointManager };\r\n\r\n","import { Node, UIRenderer, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RenderChildBatch')\r\nexport class RenderChildBatch extends UIRenderer {\r\n\r\n    private pathArr: string[] = [];\r\n    private path2RenderArr: Map<string, UIRenderer[]> = new Map();\r\n\r\n    private rootNodeArr: Node[] = [];\r\n\r\n    // 添加根子节点\r\n    public addRootItemNode(node: Node) {\r\n        if (this.rootNodeArr.indexOf(node) == -1) {\r\n            this.pauseRender(node, \"\");\r\n            this.rootNodeArr.push(node);\r\n        }\r\n    }\r\n    // 架空节点提交渲染的方法\r\n    private pauseRender(node: Node, rootPath: string) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let path = rootPath + node.name;\r\n        let renderable = node.getComponent(UIRenderer);\r\n        if (renderable) {\r\n            if (this.pathArr.indexOf(path) == -1) {\r\n                this.pathArr.push(path);\r\n            }\r\n            let renderArr = this.path2RenderArr.get(path);\r\n            if (!renderArr) {\r\n                renderArr = [];\r\n                this.path2RenderArr.set(path, renderArr);\r\n            }\r\n            if (renderArr.indexOf(renderable) == -1) {\r\n                if (!renderable._realRender) {\r\n                    renderable._realRender = renderable._render;\r\n                    renderable._render = function () { };\r\n                }\r\n                renderArr.push(renderable);\r\n            }\r\n        }\r\n\r\n        node.children.forEach((child: Node) => {\r\n            this.pauseRender(child, path + \"/\");\r\n        });\r\n    }\r\n\r\n    // 移除根子节点\r\n    public removeRootItemNode(node: Node) {\r\n        this.removeRender(node, \"\");\r\n        let index = this.rootNodeArr.indexOf(node);\r\n        if (index >= 0) {\r\n            this.rootNodeArr.splice(index, 1);\r\n        }\r\n    }\r\n    // 还原架空的方法\r\n    private removeRender(node: Node, rootPath: string) {\r\n        if (!cocosUtil.isValid(node)) {\r\n            return;\r\n        }\r\n        let path = rootPath + node.name;\r\n        let arr = this.path2RenderArr.get(path);\r\n        if (arr) {\r\n            let renderable = node.getComponent(UIRenderer);\r\n            if (renderable) {\r\n                if (renderable._realRender) {\r\n                    renderable._render = renderable._realRender;\r\n                    delete renderable._realRender;\r\n                }\r\n                let index = arr.indexOf(renderable);\r\n                if (index != -1) {\r\n                    arr.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n        node.children.forEach((child: Node) => {\r\n            this.removeRender(child, path + \"/\");\r\n        });\r\n    }\r\n\r\n    // 所有子节点渲染前调用\r\n    updateAssembler(batch: any) {\r\n\r\n    }\r\n\r\n    // 所有子节点渲染后调用\r\n    postUpdateAssembler(batch: any) {\r\n        this.pathArr.forEach((path: string) => {\r\n            let arr = this.path2RenderArr.get(path);\r\n            let tmpArr = [];\r\n            arr.forEach((renderable: UIRenderer) => {\r\n                if (!cocosUtil.isValid(renderable) || !cocosUtil.isValid(renderable.node)) {\r\n                    return;\r\n                }\r\n                tmpArr.push(renderable);\r\n                if (!renderable.node.activeInHierarchy) {\r\n                    return;\r\n                }\r\n                if (renderable._renderFlag && renderable._assembler) {\r\n                    renderable._realRender(batch);\r\n                }\r\n            });\r\n            this.path2RenderArr.set(path, tmpArr);\r\n        });\r\n    }\r\n\r\n    // 还原现场\r\n    onDestroy() {\r\n        this.pathArr.forEach((path: string) => {\r\n            let arr = this.path2RenderArr.get(path);\r\n            arr.forEach((renderable: UIRenderer) => {\r\n                if (!cocosUtil.isValid(renderable)) {\r\n                    return;\r\n                }\r\n                if (renderable._realRender) {\r\n                    renderable._render = renderable._realRender;\r\n                    delete renderable._realRender;\r\n                }\r\n            });\r\n        });\r\n        this.path2RenderArr = undefined;\r\n        this.pathArr = undefined;\r\n        this.rootNodeArr = undefined;\r\n    }\r\n\r\n}\r\n\r\n","import { Asset, assetManager, AssetManager, sp, SpriteFrame, Texture2D } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\n\r\nclass ResManager {\r\n\r\n    private static _instance: ResManager;\r\n    private constructor() { }\r\n    public static get instance(): ResManager {\r\n        if (!this._instance) {\r\n            this._instance = new ResManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    /**\r\n     * 从bundle中加载某个资源，优先使用缓存中的\r\n     * @param bundleName bundle名称\r\n     * @param path 资源路径\r\n     * @param assetType 资源类型\r\n     * @param onProgress 加载进度回调\r\n     * @param onComplete 加载完成回调\r\n     */\r\n    loadAsset(bundleName: string, path: string, assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        if (assetType == SpriteFrame) {\r\n            path += \"/spriteFrame\";\r\n        } else if (assetType == Texture2D) {\r\n            path += \"/texture\";\r\n        }\r\n        let bundle = assetManager.getBundle(bundleName);\r\n        if (bundle && bundle.get(path, assetType)) {\r\n            if (onComplete) {\r\n                onComplete(null, bundle.get(path, assetType));\r\n            }\r\n            return;\r\n        }\r\n\r\n        let loadAssetFunc = () => {\r\n            bundle.load(path, assetType, (finish: number, total: number) => {\r\n                if (onProgress) {\r\n                    onProgress(finish / total);\r\n                }\r\n            }, (err, asset) => {\r\n                if (err) {\r\n                    myLog.e(\"ResManager.loadAsset error:\" + err.message, \"bundleName:\" + bundleName, \"path:\" + path, err);\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                if (onComplete) {\r\n                    onComplete(null, asset);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (!bundle) {\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                if (err) {\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                bundle = retBundle;\r\n                loadAssetFunc();\r\n            });\r\n            return;\r\n        }\r\n\r\n        loadAssetFunc();\r\n    }\r\n\r\n    /**\r\n     * 加载某个bundle中的批量同类型资源\r\n     * @param bundleName bundle名称\r\n     * @param pathArr 资源路径数组\r\n     * @param assetType 资源类型\r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadAssetByPathArr(bundleName: string, pathArr: string[], assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        let total = pathArr.length;\r\n        if (total <= 0) {\r\n            if (onComplete) {\r\n                onComplete([]);\r\n            }\r\n            return;\r\n        }\r\n        let lastPercent = 0;\r\n        let onePercent = 1 / total;\r\n        let assetPercents: Map<string, number> = new Map();\r\n        let count = 0;\r\n        let arr = [];\r\n        for (let i = 0; i < total; i++) {\r\n            let path = pathArr[i];\r\n            this.loadAsset(bundleName, path, assetType, (p: number) => {\r\n                assetPercents.set(path, p);\r\n                if (onProgress) {\r\n                    let percent = 0;\r\n                    assetPercents.forEach((p: number) => {\r\n                        percent = percent + onePercent * p;\r\n                    });\r\n                    if (percent >= lastPercent) {\r\n                        lastPercent = percent;\r\n                        onProgress(percent);\r\n                    }\r\n                }\r\n            }, (err, asset) => {\r\n                count++;\r\n                if (!err && asset) {\r\n                    asset.path = path;\r\n                    arr.push(asset);\r\n                }\r\n                if (count >= total) {\r\n                    if (onComplete) {\r\n                        onComplete(arr);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 加载bundle某个目录下的所有同类型资源\r\n     * @param bundleName bundle名称\r\n     * @param dir 目录\r\n     * @param assetType 资源类型\r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadAssetByBundleDir(bundleName: string, dir: string, assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        let bundle = assetManager.getBundle(bundleName);\r\n\r\n        let loadAssetFunc = () => {\r\n            bundle.loadDir(dir, assetType, (finish: number, total: number, item: AssetManager.RequestItem) => {\r\n                if (onProgress) {\r\n                    onProgress(finish / total, item);\r\n                }\r\n            }, (err, assetArr) => {\r\n                if (err) {\r\n                    myLog.e(\"ResManager.loadAssetByBundleDir loadDir error:\" + err.message, err);\r\n                }\r\n                if (onComplete) {\r\n                    onComplete(assetArr);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (!bundle) {\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                if (err) {\r\n                    myLog.e(\"ResManager.loadAssetByBundleDir loadBundle error:\" + err.message, err);\r\n                    return;\r\n                }\r\n                bundle = retBundle;\r\n                loadAssetFunc();\r\n            });\r\n            return;\r\n        }\r\n\r\n        loadAssetFunc();\r\n    }\r\n\r\n    /**\r\n     * 单纯加载一批bundle\r\n     * @param nameArr bundle名称数组 \r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadBundleArr(nameArr: string[], onProgress?: Function, onComplete?: Function) {\r\n        let total = nameArr.length;\r\n        if (total <= 0) {\r\n            if (onComplete) {\r\n                onComplete();\r\n            }\r\n            return;\r\n        }\r\n        let count = 0;\r\n        let arr = [];\r\n        for (let i = 0; i < total; i++) {\r\n            let bundleName = nameArr[i];\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                count++;\r\n                if (!err) {\r\n                    arr.push(retBundle);\r\n                }\r\n                if (count >= total) {\r\n                    if (onComplete) {\r\n                        onComplete(arr);\r\n                    }\r\n                }\r\n                if (onProgress) {\r\n                    onProgress(count / total);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // 强制释放某资源\r\n    releaseAsset(asset: Asset) {\r\n        assetManager.releaseAsset(asset);\r\n    }\r\n\r\n    /**\r\n     * 加载资源清单数组\r\n     * @param assetConfigArr 资源清单数组\r\n        [\r\n            {\r\n                bundle : \"common\",\r\n                path : \"\",\r\n                type : Prefab\r\n            }\r\n        ]\r\n     * @param isAddRef 是否增加引用计数\r\n     * @param onProgress 进度回调\r\n     * @param onComplete 完成回调\r\n     */\r\n    loadAssetConfigArr(assetConfigArr: [AssetConfig], isAddRef: boolean = false, onProgress?: Function, onComplete?: Function) {\r\n        let total = 0;\r\n        if (assetConfigArr && assetConfigArr.length > 0) {\r\n            total = assetConfigArr.length;\r\n        }\r\n        if (total <= 0) {\r\n            if (onComplete) {\r\n                onComplete();\r\n            }\r\n            return;\r\n        }\r\n\r\n        let index = 0;\r\n        let loadedAssetArr = [];\r\n        let tmpFunc = () => {\r\n            let asset = assetConfigArr[index];\r\n            if (!asset) {\r\n                // 全部加载完成\r\n                if (onComplete) {\r\n                    onComplete(loadedAssetArr);\r\n                }\r\n                return;\r\n            }\r\n            this.loadAsset(asset.bundle, asset.path, asset.type, null, (error, loadedAsset) => {\r\n                if (!error && loadedAsset) {\r\n                    loadedAssetArr.push(loadedAsset);\r\n                    if (isAddRef) {\r\n                        loadedAsset.addRef();\r\n                    }\r\n                    asset.asset = loadedAsset;\r\n                }\r\n                index++;\r\n                tmpFunc();\r\n                if (onProgress) {\r\n                    onProgress(index / total);\r\n                }\r\n            });\r\n        };\r\n        tmpFunc();\r\n    }\r\n\r\n\r\n    loadSpriteFrame(bundleName: string, path: string, cb?: Function) {\r\n        this.loadAsset(bundleName, path, SpriteFrame, null, (err, sp: SpriteFrame) => {\r\n            if (cb) {\r\n                cb(err, sp);\r\n            }\r\n        });\r\n    }\r\n\r\n    loadSpineData(bundleName: string, path: string, cb?: Function) {\r\n        this.loadAsset(bundleName, path, sp.SkeletonData, null, (err, sp: sp.SkeletonData) => {\r\n            if (cb) {\r\n                cb(err, sp);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\nconst resManager = ResManager.instance;\r\n\r\nclass ResLoader {\r\n\r\n    public loadedAssetArr: Asset[] = [];\r\n\r\n    public addAsset(asset: Asset) {\r\n        if (!asset) {\r\n            return;\r\n        }\r\n        if (this.loadedAssetArr.indexOf(asset) == -1) {\r\n            asset.addRef();\r\n            this.loadedAssetArr.push(asset);\r\n        }\r\n    }\r\n\r\n    public releaseAllAsset() {\r\n        this.loadedAssetArr.forEach((asset: Asset) => {\r\n            asset.decRef();\r\n        });\r\n        this.loadedAssetArr = [];\r\n    }\r\n\r\n}\r\n\r\nclass AssetConfig {\r\n    bundle: string;\r\n    path: string;\r\n    type: any;\r\n    // 加载成功后，得到的资源对象\r\n    asset?: any;\r\n}\r\n\r\nexport { resManager, ResLoader, AssetConfig };\r\n\r\n","import { Node, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardItemLayer')\r\nexport class RewardItemLayer extends BaseUILayer {\r\n\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property({ type: Node }) propItem: Node = null;\r\n\r\n\r\n    onLoad() {\r\n        super.onLoad()\r\n    }\r\n\r\n    onEnable() {\r\n        let id = this.layerData.propId\r\n        let num = this.layerData.num\r\n\r\n        this.propItem.getComponent(PropItemPrefab).setView(id, num, PropItemPrefab.Type_UnTouch)\r\n    }\r\n\r\n    getRewardProp() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let prop: PropItem = {\r\n            Id: this.layerData.propId,\r\n            Num: this.layerData.num,\r\n        }\r\n        let self = this\r\n        let propdata = designManager.getRowById(constants.tableName.prop, this.layerData.propId)\r\n\r\n        sdkManager.openAd(\"获得道具\" + propdata.name, (st: number) => {\r\n            if (st == 1) {\r\n                UserData.getInstance().getRewardProp([prop])\r\n                self.closeLayer()\r\n            }\r\n        });\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { instantiate, macro, Node, Prefab, sp, UITransform, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardLayer')\r\nexport class RewardLayer extends BaseUILayer {\r\n\r\n    @property({ type: Prefab }) propItem: Prefab = null;\r\n    @property({ type: Node }) listLayer: Node = null;\r\n\r\n    @property({ type: Node }) yanhua: Node = null;\r\n    onLoad() {\r\n        super.onLoad()\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable()\r\n        this.showReward()\r\n        this.showYanhua()\r\n    }\r\n\r\n    showReward() {\r\n        let arr = this.layerData.propArr\r\n\r\n        let self = this\r\n        if (!this.layerData.notMoveAni) {\r\n            this.scheduleOnce(function () {\r\n                self.showGetReward(arr)\r\n            }, 0.5)\r\n        }\r\n\r\n        this.listLayer.getComponent(UITransform).width = Math.min(135 * arr.length, 675)\r\n        for (let index = 0; index < arr.length; index++) {\r\n            let element = arr[index];\r\n            //  UserData.getInstance().getRewardProp([propdata])\r\n            let propItem = instantiate(this.propItem)\r\n            this.listLayer.addChild(propItem)\r\n            propItem.getComponent(PropItemPrefab).setView(element.Id, element.Num, PropItemPrefab.Type_UnTouch)\r\n            propItem.getComponent(PropItemPrefab).setScale(120)\r\n        }\r\n    }\r\n\r\n    showYanhua() {\r\n        // 放烟花\r\n        let posArr = [\r\n            v3(-100, 200, 0),\r\n            v3(0, -100, 0),\r\n            v3(150, -250, 0),\r\n            v3(300, -500, 0),\r\n            v3(100, -450, 0),\r\n        ];\r\n\r\n        cocosUtil.schedule(this, () => {\r\n            if (posArr.length <= 0) {\r\n                return;\r\n            }\r\n            let skinName = Math.random() > 0.5 ? \"huang\" : \"lan\";\r\n            let scale = 0.8 + Math.random() * 0.2;\r\n            let pos = utilTools.getRandomItemByArr(posArr, true);\r\n            let fireNode = cocosUtil.instantiate(this.yanhua);\r\n            fireNode.parent = this.node;\r\n            fireNode.active = true;\r\n            fireNode.position = pos;\r\n            fireNode.scale = v3(scale, scale, 1);\r\n            fireNode.getComponent(sp.Skeleton).setSkin(skinName);\r\n            let aniCtrl: AnimationCtrl = cocosUtil.addComponentOnce(fireNode, AnimationCtrl);\r\n            aniCtrl.playAnimationOnce(\"animation\", () => {\r\n                fireNode.parent = null;\r\n            });\r\n        }, 1.5, macro.REPEAT_FOREVER, 0, true);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { Button, instantiate, Node, Prefab, Sprite, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardRedBoxLayer')\r\nexport class RewardRedBoxLayer extends BaseUILayer {\r\n\r\n    @property(Node) itemProp: Node = null;\r\n    @property(Node) proplayer: Node = null;\r\n\r\n    @property({ type: Prefab }) propItem: Prefab = null;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n  \r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.initList()\r\n        this.itemProp.active = false\r\n    }\r\n\r\n    initList(){\r\n        let propArr = designManager.getRowsByType(constants.tableName.CNTM, 1)\r\n        this.proplayer.removeAllChildren()\r\n        for (let i = 0; i < propArr.length; i++) {\r\n            let data = propArr[i].award[0]\r\n            let item = instantiate(this.itemProp)\r\n            item.position = v3(0, 0, 0)\r\n            item.active = true\r\n            this.proplayer.addChild(item)\r\n            let propItem = instantiate(this.propItem)\r\n            propItem.getComponent(PropItemPrefab).setView(data[0], 0, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n            propItem.getComponent(PropItemPrefab).changeBg(\"activityRes/itembg\", constants.bundles.wwqVec)\r\n            propItem.getComponent(PropItemPrefab).setScale(99)\r\n            item.addChild(propItem)\r\n            propItem.position = v3(0, -20, 0)\r\n            this.addButtonHander(item.getChildByName(\"btnGet\"), this.node, \"RewardRedBoxLayer\", \"onClickVideoGet\", data[0])\r\n\r\n            if (UserData.getInstance().isHaveProp(data[0])) {\r\n                item.getChildByName(\"btnGet\").getComponent(Sprite).grayscale = true\r\n                item.getChildByName(\"btnGet\").getComponent(Button).interactable = false\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickVideoGet(event, data) {\r\n        console.log(\"onClickVideoGet = \", data)\r\n        let self = this\r\n        sdkManager.openAd(\"领取皮肤\", function (st) {\r\n            if (st == 1) {\r\n                let propItem: PropItem = {\r\n                    Id: data,\r\n                    Num: 1\r\n                };\r\n                UserData.getInstance().getRewardProp([propItem])\r\n                self.openLayer(constants.layers.RewardLayer, { propArr: [propItem] });\r\n                self.initList()\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Button, instantiate, Node, Prefab, Sprite, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardSkinLayer')\r\nexport class RewardSkinLayer extends BaseUILayer {\r\n\r\n\r\n    @property(Node) itemProp: Node = null;\r\n    @property(Node) proplayer: Node = null;\r\n\r\n    @property({ type: Prefab }) propItem: Prefab = null;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n  \r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.initList()\r\n        this.itemProp.active = false\r\n    }\r\n\r\n    initList() {\r\n        this.proplayer.removeAllChildren()\r\n        let propArr = designManager.getRowsByType(constants.tableName.prop, 17)\r\n        for (let i = 0; i < propArr.length; i++) {\r\n            let data = propArr[i]\r\n            if (data.p1 == 2) {\r\n                let item = instantiate(this.itemProp)\r\n                item.active = true\r\n                item.position = v3(0, 0, 0)\r\n                this.proplayer.addChild(item)\r\n                let propItem = instantiate(this.propItem)\r\n                propItem.getComponent(PropItemPrefab).setView(data.id, 0, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n                propItem.getComponent(PropItemPrefab).changeBg(\"activityRes/itembg\", constants.bundles.wwqVec)\r\n                propItem.getComponent(PropItemPrefab).setScale(99)\r\n                item.addChild(propItem)\r\n                propItem.position = v3(0, -20, 0)\r\n                this.addButtonHander(item.getChildByName(\"btnGet\"), this.node, \"RewardSkinLayer\", \"onClickVideoGet\", data.id)\r\n                if (UserData.getInstance().isHaveProp(data.id)) {\r\n                    item.getChildByName(\"btnGet\").getComponent(Sprite).grayscale = true\r\n                    item.getChildByName(\"btnGet\").getComponent(Button).interactable = false\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickVideoGet(event, data) {\r\n        console.log(\"onClickVideoGet = \", data)\r\n        let self = this\r\n        sdkManager.openAd(\"获取皮肤\", function (st) {\r\n            if (st == 1) {\r\n                let propItem: PropItem = {\r\n                    Id: data,\r\n                    Num: 1\r\n                };\r\n                UserData.getInstance().getRewardProp([propItem])\r\n                self.openLayer(constants.layers.RewardLayer, { propArr: [propItem] });\r\n                self.initList()\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","import { Component, find, game, instantiate, isValid, Layout, Node, ScrollView, sys, tween, UITransform, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { RenderChildBatch } from './RenderChildBatch';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ScrollViewUtil')\r\nexport class ScrollViewUtil extends Component {\r\n\r\n    scrollView: ScrollView;\r\n    vertical: boolean = true;\r\n    gapX: number = 0;\r\n    gapY: number = 0;\r\n    paddingLeft: number = 0;\r\n    paddingRight: number = 0;\r\n    paddingTop: number = 0;\r\n    paddingBottom: number = 0;\r\n    contentNode: Node;\r\n    contentTransform: UITransform;\r\n\r\n    viewNode: Node;\r\n    viewWidth: number;\r\n    viewHeight: number;\r\n    viewTransform: UITransform;\r\n\r\n    itemUI: Node;\r\n    itemUITransform: UITransform;\r\n    itemUIWidth: number = 0;\r\n    itemUIHeight: number = 0;\r\n    // 缓存还未被使用的itemUI\r\n    itemUIFreeArr: any = [];\r\n    // 首个itemUI的坐标\r\n    startPosX: number = 0;\r\n    startPosY: number = 0;\r\n\r\n    // 一屏最多可以显示几行或者几列itemUI\r\n    viewNum: number = 0;\r\n    // 一行或者一列要显示几个\r\n    changeNum: number = 1;\r\n    // 最大行数或列数\r\n    maxLines: number = 1;\r\n\r\n    // 记录每帧需要刷新的数据\r\n    frameUpdateArr: any = [];\r\n    // 每帧最多能处理的时间间隔\r\n    frameTime: number = Math.floor(1000 / (game.getFrameRate() + 10));\r\n\r\n    itemArr: any = [];\r\n    refreshItemFunc: Function;\r\n\r\n    itemTween: boolean = false;\r\n    setDataFlag: boolean = false;\r\n\r\n    // 只会刷新行数或者列数索引区间内的节点\r\n    // 开始索引\r\n    startIndex: number = 0;\r\n    // 结束索引\r\n    stopIndex: number = 0;\r\n\r\n    private renderChildBatch: RenderChildBatch = null;\r\n\r\n    onLoad() {\r\n        this.scrollView = this.node.getComponent(ScrollView);\r\n        this.contentNode = this.scrollView.content;\r\n\r\n        this.itemUI = this.contentNode.children[0];\r\n        if (!this.itemUI) {\r\n            myLog.e(\"=============ScrollViewUtil itemUI is null:\" + this.node.name);\r\n        }\r\n        this.itemUITransform = this.itemUI.getComponent(UITransform);\r\n        this.itemUIWidth = this.itemUITransform.width;\r\n        this.itemUIHeight = this.itemUITransform.height;\r\n\r\n        // 获取排列间距参数\r\n        this.vertical = this.scrollView.vertical;\r\n        let contentLayout = this.contentNode.getComponent(Layout);\r\n        this.gapX = contentLayout.spacingX;\r\n        this.gapY = contentLayout.spacingY;\r\n        this.paddingLeft = contentLayout.paddingLeft;\r\n        this.paddingRight = contentLayout.paddingRight;\r\n        this.paddingTop = contentLayout.paddingTop;\r\n        this.paddingBottom = contentLayout.paddingBottom;\r\n        contentLayout.enabled = false;\r\n        this.contentTransform = this.contentNode.getComponent(UITransform);\r\n\r\n        let contentWidth = this.contentTransform.width;\r\n        let contentHeight = this.contentTransform.height;\r\n\r\n        this.viewNode = find(\"view\", this.node);\r\n        this.viewTransform = this.viewNode.getComponent(UITransform);\r\n        this.viewWidth = this.viewTransform.width;\r\n        this.viewHeight = this.viewTransform.height;\r\n\r\n        this.itemUIFreeArr = [];\r\n        this.contentNode.children.forEach((node: Node) => {\r\n            node.active = false;\r\n            this.itemUIFreeArr.push(node);\r\n        });\r\n\r\n        if (this.vertical) {\r\n            this.viewTransform.anchorX = 0.5;\r\n            this.viewTransform.anchorY = 1;\r\n            this.contentTransform.anchorX = 0.5;\r\n            this.contentTransform.anchorY = 1;\r\n            this.viewNum = Math.ceil(this.viewHeight / (this.itemUIHeight + this.gapY)) + 1;\r\n            this.changeNum = Math.floor((contentWidth + this.gapX - this.paddingLeft - this.paddingRight) / (this.itemUIWidth + this.gapX));\r\n        } else {\r\n            this.viewTransform.anchorX = 0;\r\n            this.viewTransform.anchorY = 0.5;\r\n            this.contentTransform.anchorX = 0;\r\n            this.contentTransform.anchorY = 0.5;\r\n            this.viewNum = Math.ceil(this.viewWidth / (this.itemUIWidth + this.gapX)) + 1;\r\n            this.changeNum = Math.floor((contentHeight + this.gapY - this.paddingTop - this.paddingBottom) / (this.itemUIHeight + this.gapY));\r\n        }\r\n        if (this.changeNum < 1) {\r\n            this.changeNum = 1;\r\n        }\r\n\r\n        // 首个itemUI的坐标\r\n        this.startPosX = this.itemUIWidth * this.itemUITransform.anchorX - this.contentTransform.width * this.contentTransform.anchorX + this.paddingLeft;\r\n        this.startPosY = contentHeight * (1 - this.contentTransform.anchorY) - this.itemUIHeight * (1 - this.itemUITransform.anchorY) - this.paddingTop;\r\n\r\n        // scrollView监听事件\r\n        this.node.on('scrolling', this.onScrolling, this);\r\n\r\n        // 记录每帧需要刷新的数据\r\n        this.frameUpdateArr = [];\r\n\r\n        this.addRenderChildBatch();\r\n    }\r\n\r\n    public addRenderChildBatch() {\r\n        if (sys.isNative) {\r\n            return;\r\n        }\r\n        if (this.renderChildBatch) {\r\n            return;\r\n        }\r\n        this.renderChildBatch = this.contentNode.addComponent(RenderChildBatch);\r\n    }\r\n\r\n    // 滑动中回调\r\n    onScrolling() {\r\n        if (this.itemArr.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        let start = 0;\r\n        // 垂直滚动\r\n        if (this.vertical) {\r\n            let posY = this.contentNode.getPosition().y;\r\n            if (posY > this.contentTransform.height - this.viewHeight) {\r\n                posY = this.contentTransform.height - this.viewHeight;\r\n            }\r\n            if (posY < 0) {\r\n                posY = 0;\r\n            }\r\n            // 开始行\r\n            start = Math.floor((posY + this.gapY - this.paddingTop) / (this.itemUIHeight + this.gapY));\r\n        } else {\r\n            // 水平滚动\r\n            let posX = this.contentNode.getPosition().x;\r\n            if (posX < this.viewWidth - this.contentTransform.width) {\r\n                posX = this.viewWidth - this.contentTransform.width;\r\n            }\r\n            if (posX > 0) {\r\n                posX = 0;\r\n            }\r\n            posX = Math.abs(posX);\r\n            // 开始列\r\n            start = Math.floor((posX + this.gapX - this.paddingLeft) / (this.itemUIWidth + this.gapX));\r\n        }\r\n\r\n        if (start < 0) {\r\n            start = 0;\r\n        }\r\n        if (start > this.maxLines - 1) {\r\n            start = this.maxLines - 1;\r\n        }\r\n\r\n        // 结束行\r\n        let stop = start + this.viewNum;\r\n        if (stop > this.maxLines - 1) {\r\n            stop = this.maxLines - 1;\r\n        }\r\n\r\n        // 跟上屏显示范围不一样，才会进行刷新\r\n\r\n        if (start != this.startIndex || stop != this.stopIndex) {\r\n            this.startIndex = start;\r\n            this.stopIndex = stop;\r\n            this.renderItemArr();\r\n        }\r\n    }\r\n\r\n    // 渲染屏幕范围内的itemArr\r\n    renderItemArr() {\r\n        let item = null;\r\n        // 先回收屏幕范围外的item\r\n        let hideIndex = this.startIndex * this.changeNum;\r\n        for (let i = 0; i < hideIndex; i++) {\r\n            item = this.itemArr[i];\r\n            this.recycleItem(item);\r\n        }\r\n\r\n        hideIndex = (this.stopIndex + 1) * this.changeNum;\r\n        for (let i = hideIndex; i < this.itemArr.length; i++) {\r\n            item = this.itemArr[i];\r\n            this.recycleItem(item);\r\n        }\r\n\r\n        // 再显示屏幕范围内的\r\n        for (let i = this.startIndex; i <= this.stopIndex; i++) {\r\n            let startIndex = i * this.changeNum;\r\n            let stopIndex = startIndex + this.changeNum;\r\n            for (let k = startIndex; k < stopIndex; k++) {\r\n                if (!this.itemArr[k]) {\r\n                    continue;\r\n                }\r\n                item = this.itemArr[k];\r\n                if (item.node) {\r\n                    // 已经刷新过了，就不再刷新，节省CPU开销\r\n                    continue;\r\n                }\r\n                // 更换到每帧去刷新\r\n                item.needUpdate = true;\r\n                this.frameUpdateArr.push(item);\r\n            }\r\n        }\r\n        this.startFrameUpdate();\r\n    }\r\n\r\n    // 生成node\r\n    createNode() {\r\n        let node = null;\r\n        if (this.itemUIFreeArr.length > 0) {\r\n            node = this.itemUIFreeArr.shift();\r\n        } else {\r\n            node = instantiate(this.itemUI);\r\n        }\r\n        node.parent = this.contentNode;\r\n\r\n        if (this.renderChildBatch) {\r\n            this.renderChildBatch.addRootItemNode(node);\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    startFrameUpdate() {\r\n        let startTime = new Date().getTime();\r\n        while (true) {\r\n            if (!this.frameUpdateArr || this.frameUpdateArr.length <= 0) {\r\n                this.setDataFlag = false;\r\n                break;\r\n            }\r\n\r\n            let item = this.frameUpdateArr.shift();\r\n            if (!item.needUpdate) {\r\n                continue;\r\n            }\r\n\r\n            if (!item.node) {\r\n                item.node = this.createNode();\r\n            }\r\n            if (!item.node.active) {\r\n                item.node.active = true;\r\n            }\r\n            item.node.setPosition(item.x, item.y);\r\n\r\n            item.node.item = item.data;\r\n            item.node.index = item.index;\r\n            item.node.scale = v3(1, 1, 1);\r\n            if (item.node.showTween) {\r\n                item.node.showTween.stop();\r\n                item.node.showTween = undefined;\r\n            }\r\n            this.refreshItemFunc(item.node, item.data, item.index);\r\n\r\n            if (this.itemTween && this.setDataFlag) {\r\n                item.node.setScale(0, 0, 1);\r\n                let tn = tween(item.node).to(0.2, { scale: v3(1.2, 1.2, 1) }).to(0.1, { scale: v3(1, 1, 1) }).call(() => {\r\n                    item.node.showTween = undefined;\r\n                }).start();\r\n                item.node.showTween = tn;\r\n                this.scheduleOnce(() => {\r\n                    this.startFrameUpdate();\r\n                }, 0.05);\r\n                break;\r\n            } else {\r\n                if (new Date().getTime() - startTime >= this.frameTime) {\r\n                    // 本帧跑满了，下一帧继续\r\n                    this.scheduleOnce(this.startFrameUpdate.bind(this));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 回收item.node\r\n    recycleItem(item: any) {\r\n        if (item.node && isValid(item.node)) {\r\n            if (this.itemUIFreeArr.indexOf(item.node) == -1) {\r\n                this.itemUIFreeArr.push(item.node);\r\n            }\r\n            item.node.active = false;\r\n            item.node.showTween = undefined;\r\n            item.node = null;\r\n            item.needUpdate = undefined;\r\n        }\r\n    }\r\n\r\n    // 清除所有items\r\n    clearAllItems() {\r\n        for (let item of this.itemArr) {\r\n            this.recycleItem(item);\r\n        }\r\n    }\r\n\r\n    // 初始化item\r\n    initItem(data: any, index: number) {\r\n        let item = {\r\n            node: null,\r\n            data: data,\r\n            index: index,\r\n            x: 0,\r\n            y: 0\r\n        };\r\n\r\n        return item;\r\n    }\r\n\r\n    refreshItemIndex(item: any, index: number) {\r\n        item.index = index;\r\n        if (item.node) {\r\n            item.node.index = index;\r\n        }\r\n    }\r\n\r\n    setData(dataArr: any, refreshItemFunc: Function, resetPos: boolean = true, itemTween: boolean = false) {\r\n        if (!this.scrollView) {\r\n            return;\r\n        }\r\n        this.itemTween = itemTween;\r\n        this.setDataFlag = true;\r\n\r\n        this.frameUpdateArr = [];\r\n        this.unscheduleAllCallbacks();\r\n\r\n        this.clearAllItems();\r\n        this.itemArr = [];\r\n\r\n        if (!dataArr) {\r\n            dataArr = [];\r\n        }\r\n\r\n        this.refreshItemFunc = refreshItemFunc;\r\n        for (let i = 0; i < dataArr.length; i++) {\r\n            let data = dataArr[i];\r\n            let item = this.initItem(data, i);\r\n            this.itemArr.push(item);\r\n        }\r\n\r\n        this.maxLines = Math.ceil(this.itemArr.length / this.changeNum);\r\n        if (this.maxLines < 1) {\r\n            this.maxLines = 1;\r\n        }\r\n\r\n        this.refreshItemArr(0, resetPos);\r\n    }\r\n\r\n    // 布局itemArr，计算出每个item摆放的坐标信息\r\n    layoutItemArr(start: number) {\r\n        if (this.itemArr.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        for (let index = start; index < this.itemArr.length; index++) {\r\n            let line = Math.floor(index / this.changeNum);\r\n            let line2 = index % this.changeNum;\r\n            let item = this.itemArr[index];\r\n            if (this.vertical) {\r\n                item.x = this.startPosX + line2 * (this.itemUIWidth + this.gapX);\r\n                item.y = this.startPosY - line * (this.itemUIHeight + this.gapY);\r\n            } else {\r\n                item.x = this.startPosX + line * (this.itemUIWidth + this.gapX);\r\n                item.y = this.startPosY - line2 * (this.itemUIHeight + this.gapY);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 调整content节点大小\r\n    resizeContentNode() {\r\n        if (!this.contentNode || !this.itemUI) {\r\n            return;\r\n        }\r\n        if (this.itemArr.length <= 0) {\r\n            this.contentTransform.width = 0;\r\n            this.contentTransform.height = 0;\r\n            return;\r\n        }\r\n        let lastItem = this.itemArr[this.itemArr.length - 1];\r\n        if (this.vertical) {\r\n            let height = -lastItem.y + this.itemUIHeight * this.itemUITransform.anchorY;\r\n            this.contentTransform.height = height + this.paddingBottom;\r\n        } else {\r\n            let width = lastItem.x + this.itemUIWidth * (1 - this.itemUITransform.anchorX);\r\n            this.contentTransform.width = width + this.paddingRight;\r\n        }\r\n    }\r\n\r\n    // 计算每个item的坐标位置和contentNode大小\r\n    refreshItemArr(start: number, resetPos: boolean = true) {\r\n        if (!this.scrollView) {\r\n            return;\r\n        }\r\n\r\n        this.layoutItemArr(start);\r\n        this.resizeContentNode();\r\n\r\n        this.startIndex = -1;\r\n        this.stopIndex = -1;\r\n\r\n        this.scrollView.stopAutoScroll();\r\n        let maxOffset = this.scrollView.getMaxScrollOffset();\r\n        let offset = this.scrollView.getScrollOffset();\r\n        if (this.vertical) {\r\n            let posY = 0;\r\n            if (!resetPos) {\r\n                posY = this.contentNode.getPosition().y;\r\n                if (posY > maxOffset.y) {\r\n                    posY = maxOffset.y;\r\n                }\r\n                if (posY < 0) {\r\n                    posY = 0;\r\n                }\r\n            }\r\n            offset.y = posY;\r\n            this.scrollView.scrollToOffset(offset, 0);\r\n        } else {\r\n            let posX = 0;\r\n            if (!resetPos) {\r\n                posX = Math.abs(this.contentNode.getPosition().x);\r\n                if (posX > Math.abs(maxOffset.x)) {\r\n                    posX = Math.abs(maxOffset.x);\r\n                }\r\n                if (posX < 0) {\r\n                    posX = 0;\r\n                }\r\n            }\r\n            offset.x = posX;\r\n            this.scrollView.scrollToOffset(offset, 0);\r\n        }\r\n\r\n        this.onScrolling();\r\n    }\r\n\r\n    // 刷新整个列表\r\n    refreshList() {\r\n        if (!this.refreshItemFunc) {\r\n            return;\r\n        }\r\n        this.itemArr.forEach((item: any) => {\r\n            if (!item.node) {\r\n                return;\r\n            }\r\n            this.refreshItemFunc(item.node, item.data, item.index);\r\n        });\r\n    }\r\n\r\n    // 移除某个索引item，会重新排列索引\r\n    removeByIndex(index: number, resetPos: boolean = false) {\r\n        if (index < 0 || index >= this.itemArr.length) {\r\n            console.log(\"无效的index\", index);\r\n            return;\r\n        }\r\n        let item = this.itemArr[index];\r\n        if (!item || !this.refreshItemFunc) {\r\n            return;\r\n        }\r\n\r\n        this.itemArr.splice(index, 1);\r\n        this.recycleItem(item);\r\n\r\n        // 重新排列索引\r\n        for (let i = index; i < this.itemArr.length; i++) {\r\n            let item = this.itemArr[i];\r\n            this.refreshItemIndex(item, i);\r\n        }\r\n        this.maxLines = Math.ceil(this.itemArr.length / this.changeNum);\r\n        if (this.maxLines < 1) {\r\n            this.maxLines = 1;\r\n        }\r\n        this.refreshItemArr(index, resetPos);\r\n    }\r\n\r\n    // 刷新指定索引的itemUI\r\n    refreshIndex(index: number, data?: any) {\r\n        if (index == undefined || index < 0 || index >= this.itemArr.length) {\r\n            console.log(\"无效的index\", index);\r\n            return;\r\n        }\r\n        let item = this.itemArr[index];\r\n        if (!item) {\r\n            return;\r\n        }\r\n        if (data != undefined) {\r\n            item.data = data;\r\n        }\r\n        if (item.node) {\r\n            item.node.item = item.data;\r\n            if (this.refreshItemFunc) {\r\n                this.refreshItemFunc(item.node, item.data, index);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 插入数据\r\n    insertData(index: number, arr: any, resetPos: boolean = false) {\r\n        if (!arr || arr.length == 0) {\r\n            console.log(\"没有要添加的数据\");\r\n            return;\r\n        }\r\n        if (index < 0 || index > this.itemArr.length) {\r\n            console.log(\"无效的index\", index);\r\n            return;\r\n        }\r\n        if (!this.refreshItemFunc) {\r\n            console.log(\"首次请调用setData方法\");\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let pIndex = index + i;\r\n            let item = this.initItem(arr[i], pIndex);\r\n            this.itemArr.splice(pIndex, 0, item);\r\n        }\r\n        for (let i = index + arr.length; i < this.itemArr.length; i++) {\r\n            let item = this.itemArr[i];\r\n            this.refreshItemIndex(item, i);\r\n        }\r\n\r\n        this.maxLines = Math.ceil(this.itemArr.length / this.changeNum);\r\n        if (this.maxLines < 1) {\r\n            this.maxLines = 1;\r\n        }\r\n\r\n        this.refreshItemArr(index, resetPos);\r\n\r\n    }\r\n\r\n    // 追加数据\r\n    pushData(arr: any, resetPos: boolean = false) {\r\n        this.insertData(this.itemArr.length, arr, resetPos);\r\n    }\r\n\r\n    // 是否滑动到尽头了\r\n    isScrollEnd() {\r\n        let maxOffset = this.scrollView.getMaxScrollOffset();\r\n        let offset = this.scrollView.getScrollOffset();\r\n        if (Math.abs(maxOffset.x) - Math.abs(offset.x) <= 10 && Math.abs(maxOffset.y) - Math.abs(offset.y) <= 10) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // 滑动到尽头\r\n    scrollToEnd(time?: number) {\r\n        this.scrollView.stopAutoScroll();\r\n        if (time == undefined || time < 0) {\r\n            time = 0.5;\r\n        }\r\n        if (this.vertical) {\r\n            this.scrollView.scrollToBottom(time);\r\n        } else {\r\n            this.scrollView.scrollToRight(time);\r\n        }\r\n    }\r\n\r\n    // 滑动到指定索引位置，该位置将定位到最底下(垂直滚动)或者最右边(水平滚动)\r\n    scrollToIndex(index: number, time?: number) {\r\n        if (time == undefined || time < 0) {\r\n            time = 0;\r\n        }\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        let item = this.itemArr[index];\r\n        if (!item) {\r\n            return;\r\n        }\r\n\r\n        this.scrollView.stopAutoScroll();\r\n        let maxOffset = this.scrollView.getMaxScrollOffset();\r\n        let offset = this.scrollView.getScrollOffset();\r\n        if (this.vertical) {\r\n            let dy = Math.abs(item.y) + this.itemUIHeight - this.viewHeight;\r\n            if (dy < 0) {\r\n                dy = 0;\r\n            }\r\n            if (dy > maxOffset.y) {\r\n                dy = maxOffset.y;\r\n            }\r\n            offset.y = dy;\r\n            this.scrollView.scrollToOffset(offset, time);\r\n        } else {\r\n            let dx = Math.abs(item.x) + this.itemUIWidth - this.viewWidth;\r\n            if (dx < 0) {\r\n                dx = 0;\r\n            }\r\n            if (dx > Math.abs(maxOffset.x)) {\r\n                dx = Math.abs(maxOffset.x);\r\n            }\r\n            offset.x = dx;\r\n            this.scrollView.scrollToOffset(offset, time);\r\n        }\r\n        this.onScrolling();\r\n    }\r\n\r\n    onDestroy() {\r\n        this.itemUIFreeArr = [];\r\n        this.itemArr = [];\r\n        this.frameUpdateArr = [];\r\n        this.refreshItemFunc = null;\r\n        this.node.off(\"scrolling\", this.onScrolling, this);\r\n        this.unscheduleAllCallbacks();\r\n    }\r\n}\r\n\r\n","\r\nimport { localText } from \"../game/data/localText\";\r\nimport { msgac } from \"../game/data/msgac\";\r\nimport { audioManager } from \"../game/manager/audioManager\";\r\nimport { eventManager } from \"../game/manager/eventManager\";\r\nimport { mapModel } from \"../game/model/mapModel\";\r\nimport { playerModel } from \"../game/model/playerModel\";\r\nimport { UserData } from \"../game/model/UserData\";\r\nimport { H5AdSdk4399 } from \"../tyqSDK/H5AdSdk4399\";\r\nimport CronCtr from \"../tyqSDK/network/CronCtr\";\r\nimport { Channel, tyqAdManager } from \"../tyqSDK/tyqAdManager\";\r\nimport { tyqSDK } from \"../tyqSDK/tyqSDK\";\r\n\r\n\r\nclass SdkManager {\r\n\r\n    private static _instance: SdkManager;\r\n    private constructor() {\r\n\r\n    }\r\n\r\n    public static get instance(): SdkManager {\r\n        if (!this._instance) {\r\n            this._instance = new SdkManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    // 注意!!!每次打包前，要检查该变量值是否为对应的渠道，git上的版本默认为：WECHAT_MRTGD\r\n    // public channel: ChannelFlag = ChannelFlag.WECHAT_JJWS;\r\n\r\n    initSDK() {\r\n        if (tyqAdManager.getChannel() == Channel.H5_4399) {\r\n            H5AdSdk4399.instance.checkDownUrl()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 激励视频广告统一播放接口\r\n     * 完整观看广告后，获得奖励，调用：tmpFunc(1)\r\n     * 中途退出或者观看失败，调用：tmpFunc(0)\r\n     * @param cb \r\n     */\r\n    openAd(info: string, cb: Function) {\r\n        let tmpFunc = (st: number) => {\r\n            if (st == 0) {\r\n                eventManager.send(msgac.showNotice, localText.adAwardHint);\r\n            } else if (st == -1) {\r\n                eventManager.send(msgac.showNotice, localText.noRewardAd);\r\n            } else if (st == 2) {\r\n                eventManager.send(msgac.showNotice, localText.noAd);\r\n            }\r\n            cb(st);\r\n            if (st == 1) {\r\n                playerModel.addDayTaskNum(11);\r\n                // 好友观看视频广告累计数量\r\n                UserData.getInstance().$videoCalCnt++;\r\n                CronCtr.getInstance().saveDataToCloud(\"videoCalCnt\", UserData.getInstance().$videoCalCnt);\r\n            }\r\n            audioManager.gameOnShow(true);\r\n        };\r\n\r\n        // // test\r\n        // tmpFunc(1);\r\n        // return;\r\n\r\n        if (playerModel.isInDevelopmentEnvironment() || playerModel.isRecordAd) {\r\n            // 开发环境，默认直接成功\r\n            tmpFunc(1);\r\n            return;\r\n        }\r\n\r\n        if (tyqAdManager.getChannel() == Channel.DEFAULT) {\r\n            // 电脑测试直接返回观看成功\r\n            tmpFunc(1);\r\n            return;\r\n        }\r\n\r\n        if (mapModel.mapId > 0) {\r\n            mapModel.mapSystem.fightPause();\r\n        }\r\n\r\n        if (tyqAdManager.getChannel() == Channel.H5_4399) {\r\n            H5AdSdk4399.instance.showRewardedAd((state) => {\r\n                if (mapModel.mapId > 0) {\r\n                    mapModel.mapSystem.fightResume();\r\n                }\r\n                tmpFunc(state);\r\n            })\r\n        } else {\r\n            tyqSDK.showRewardedAd(info, (state) => {\r\n                if (mapModel.mapId > 0) {\r\n                    mapModel.mapSystem.fightResume();\r\n                }\r\n                tmpFunc(state);\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    getShareUid() {\r\n        let query = tyqAdManager.getEnterUrlQuery();\r\n        if (query && query.uid) {\r\n            return query.uid;\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n}\r\n\r\nexport const sdkManager = SdkManager.instance;\r\n\r\n","\r\n//normal， new，hot，maintain\r\nexport const ServerState = {\r\n    Normal: 'normal',\r\n    New: 'new',\r\n    Hot: 'hot',\r\n    Maintain: 'maintain'\r\n}\r\n\r\nimport { Component, director, _decorator } from 'cc';\r\nimport { Wechat } from '../platform/wechat/wechat';\r\nimport { GLoginState, GNetCmd, GNetConst } from './conf';\r\nimport { GameStorage } from './gameStorage';\r\nimport { WmSocket } from './wmsocket';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ServerCtr')\r\nexport default class ServerCtr extends Component {\r\n\r\n    private static instance: ServerCtr = null!;\r\n\r\n    public static GetInstance() {\r\n        if (!this.instance) {\r\n            this.instance = new ServerCtr();\r\n            this.instance.InitServerCtr();\r\n        }\r\n        return this.instance;\r\n    }\r\n    serverId: number = 1;\r\n    account: string = '';\r\n    password: string = 'hsmnq2021';\r\n    authCode: string = \"\";\r\n    token: string = '';\r\n    regionDataList: any[] = [];\r\n    uid: string = '';\r\n    regionId: string = '';\r\n    nickName: string = '测试账号';\r\n    isLogin: boolean = false;\r\n    avatar: string = '';\r\n    loginState: GLoginState = GLoginState.noYet; //服务端是否加载完成,有账号登录，无账号登录\r\n    serverDataVersion: number = 0  //服务端的版本号\r\n    serverData: any = {} //服务端数据\r\n\r\n    // regions\":{\"1\":\"{\\\"id\\\":\\\"1\\\",\\\"name\\\":\\\"先行服\\\"}\",\"2\":\"{\\\"id\\\":\\\"2\\\",\\\"name\\\":\\\"圣魂村\\\"}\"},\r\n    // \"servers\":{\"1\":\"{\\\"id\\\":\\\"1\\\",\\\"name\\\":\\\"先行服1\\\",\\\"region\\\":\\\"1\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 08:00:00\\\"}\",\r\n    // \"2\":\"{\\\"id\\\":\\\"2\\\",\\\"name\\\":\\\"先行服2\\\",\\\"region\\\":\\\"1\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 09:00:00\\\"}\",\r\n    // \"3\":\"{\\\"id\\\":\\\"3\\\",\\\"name\\\":\\\"圣魂村1\\\",\\\"region\\\":\\\"2\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 10:00:00\\\"}\",\r\n    // \"4\":\"{\\\"id\\\":\\\"4\\\",\\\"name\\\":\\\"圣魂村2\\\",\\\"region\\\":\\\"2\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 11:00:00\\\"}\",\r\n    // \"5\":\"{\\\"id\\\":\\\"5\\\",\\\"name\\\":\\\"圣魂村3\\\",\\\"region\\\":\\\"2\\\",\\\"status\\\":\\\"normal\\\",\\\"years\\\":\\\"2021-07-21 12:00:00\\\"}\",\"isUpdated\":\"0\"}\r\n    regionList: any = {};\r\n    serverList: any = {};\r\n\r\n    InitServerCtr() {\r\n        this.account = GameStorage.getStringDisk('login_account', '');\r\n        this.password = GameStorage.getStringDisk('login_password', this.password);\r\n        this.authCode = GameStorage.getStringDisk('login_authCode', this.authCode);\r\n        this.serverId = parseInt(GameStorage.getStringDisk('login_serverId', \"\"));\r\n\r\n        director.on(GNetCmd.GetInviteCode.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n    //数据版本设置\r\n    get dataVersion() {\r\n        return GameStorage.getInt(\"dataVersion\", 0)\r\n    }\r\n    set dataVersion(val: number) {\r\n        if (val > this.dataVersion) {\r\n            GameStorage.setInt(\"dataVersion\", val)\r\n        }\r\n    }\r\n    addDataVersion(val: number = 1) {\r\n        GameStorage.setInt(\"dataVersion\", GameStorage.getInt(\"dataVersion\", 0) + val)\r\n    }\r\n\r\n    CheckIsHaveAccount() {\r\n        if (!this.account || this.account == '') {\r\n            // 没有账号\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    CheckHaveDataById(regionId: number) {\r\n        for (let i = 0; i < this.regionDataList.length; i++) {\r\n            const data = this.regionDataList[i];\r\n            if (data.regionId == regionId) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    get Account() {\r\n        return this.account;\r\n    }\r\n\r\n    set Account(str: string) {\r\n        this.account = str;\r\n        GameStorage.setStringDisk('login_account', this.account);\r\n    }\r\n\r\n    get PassWord() {\r\n        return this.password;\r\n    }\r\n\r\n    set PassWord(str: string) {\r\n        this.password = str;\r\n        GameStorage.setStringDisk('login_password', this.password);\r\n    }\r\n    get AuthCode() {\r\n        return this.authCode;\r\n    }\r\n\r\n    set AuthCode(str: string) {\r\n        this.authCode = str;\r\n        GameStorage.setStringDisk('login_authCode', this.authCode);\r\n    }\r\n\r\n    get ServerId() {\r\n        return this.serverId;\r\n    }\r\n    set ServerId(id: number) {\r\n        this.serverId = id;\r\n        GameStorage.setStringDisk('login_serverId', this.serverId + \"\");\r\n    }\r\n\r\n    UpdateRegions(regions: any) {\r\n        for (const key in regions) {\r\n            const data = regions[key];\r\n            this.regionList[key] = JSON.parse(data);\r\n        }\r\n    }\r\n\r\n    UpdateServers(servers: any) {\r\n        for (const key in servers) {\r\n            const data = servers[key];\r\n\r\n            this.serverList[key] = JSON.parse(data);\r\n            // if (gl.debug) {\r\n            //     switch (Number(this.serverList[key].id)) {\r\n            //         case 1:\r\n            //             this.serverList[key].status ='maintain'; \r\n            //             break;\r\n            //         case 2:\r\n            //             this.serverList[key].status = 'hot';\r\n            //             break;\r\n            //         case 5:\r\n            //             this.serverList[key].status = 'new';\r\n            //             break;\r\n            //         default:\r\n\r\n            //             break;\r\n            //     }\r\n            // }\r\n\r\n        }\r\n    }\r\n\r\n    public GetServerData(serverId: number) {\r\n        for (const key in this.serverList) {\r\n            const data = this.serverList[key];\r\n            if (data.id == serverId) {\r\n                return data;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    public GetStateIcon(status: string) {\r\n        switch (status) {\r\n            case ServerState.Normal:\r\n                return;\r\n            case ServerState.New:\r\n                return 'fm_tb_xin';\r\n            case ServerState.Hot:\r\n                return 'fm_tb_bao';\r\n            case ServerState.Maintain:\r\n                return 'fm_tb_wei';\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 获取最新的不在维护中服务器\r\n    public GetLastNewServer() {\r\n        let id = 1;\r\n        for (const key in this.serverList) {\r\n            const data = this.serverList[key];\r\n            let did = Number(data.id)\r\n            if (did > id && data.status != ServerState.Maintain) {\r\n                id = did;\r\n            }\r\n        }\r\n        return id;\r\n    }\r\n\r\n    public reqConnect() {\r\n        WmSocket.getInstance().connect();\r\n    }\r\n\r\n    public reqRegister(account: any, password: any) {\r\n        let data = {\r\n            \"cmd\": GNetCmd.UserRegister,\r\n            \"lang\": \"zh\",\r\n            \"account\": account,\r\n            \"password\": password,\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public reqLogin() {\r\n        let data = {\r\n            \"cmd\": GNetCmd.UserLogin,\r\n            \"lang\": \"zh\",\r\n            \"account\": this.account,\r\n            \"password\": this.password,\r\n            'nickName': this.nickName + this.account\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public reqLoginByAccount(account: string, password: string, authCode: string) {\r\n        let data = {\r\n            \"cmd\": GNetCmd.UserLogin,\r\n            \"lang\": \"zh\",\r\n            \"account\": account,\r\n            \"password\": password,\r\n            \"authCode\": authCode,\r\n            'nickName': this.nickName + this.account\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public reqRegionList() {\r\n        let data = {\r\n            \"cmd\": GNetCmd.GetRegionList,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public reqRegionData() {\r\n        // if (!this.ServerId || this.ServerId == 0) {\r\n        //     // Notifications.emit(GDef.wdEvent.showTip, {msg:'请选择区服'})\r\n        //     return;\r\n        // }\r\n        this.ServerId = 1 //默认选一个区服\r\n        let data = {\r\n            \"cmd\": GNetCmd.GetRegionData,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n            \"version\": ServerCtr.GetInstance().dataVersion,\r\n            \"regionId\": this.ServerId.toString()\r\n        }\r\n        console.log(\"发送服务端数据请求---11\", data)\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    //好友链接登录后，调用此接口建立关联关系\r\n    public reqSetFriendCode(shareUserId: string) {\r\n        if (ServerCtr.GetInstance().loginState != GLoginState.loginWithAccount) {\r\n            return\r\n        }\r\n        let data = {\r\n            \"cmd\": GNetCmd.SetFriendCode,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n            \"InviteCode\": shareUserId,\r\n        }\r\n        console.log(\"发送服务端数据请求 -- 设置好友邀请码---11\", data)\r\n        // var m = map[string]interface{}{ //不需要处理返回\r\n        //     \"cmd\":    proto.SetFriendCode,\r\n        //     \"status\": util.RES_MSG_SUCCESS,\r\n        // }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    //获得好友功能相关数据\r\n    public reqGetFriendVal() {\r\n        if (ServerCtr.GetInstance().loginState != GLoginState.loginWithAccount) {\r\n            return\r\n        }\r\n        let data = {\r\n            \"cmd\": GNetCmd.GetFriendVal,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n            \"keys\": \"friendPassCnt,videoCalCnt\", //相关参数\r\n            \"rules\": \"total,total\", //相关规则\r\n        }\r\n        console.log(\"发送服务端数据请求 -- 获得好友功能相关数据---11\", data)\r\n        // { 返回值参考\r\n        //     \"cmd\":        proto.SetFriendCode,\r\n        //     \"friendCnt\":  cnt,\r\n        //     \"friendData\": util.MapToJSONF(dataMap),\r\n        //     \"status\":     util.RES_MSG_SUCCESS,\r\n        // }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n\r\n    public onMessageEvent(value) {\r\n        if (value) {\r\n            console.log(\"处理分享的消息:\", value);\r\n            if (value.status != GNetConst.ResSuccess) {\r\n                console.error(\"服务端响应失败~!\")\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // public reqUploadOldPlayerData(isFirst:boolean = true){\r\n    //     if(Const.isActiveMemoryTmp) return\r\n    //     let datas = GameStorage.getAll(isFirst);\r\n    //     // 大数据拆分\r\n    //     console.log(\"大数据要拆分开....:\",datas);\r\n\r\n    //     // 全部发送上传\r\n    //     for (const key in datas) {\r\n    //         const value = datas[key];\r\n    //         // cc.sys.localStorage.setItem(key,value);\r\n    //         this.reqCloudSaveManual(key,value,true);\r\n    //     }\r\n    // }\r\n\r\n    public reqCloudSaveManual(key: string, val: any) {\r\n        // CronCtr.getInstance().cloudSaveManual(key,val);\r\n    }\r\n\r\n    public wxLoginBegin(failCb?: Function) {\r\n        wx.login({\r\n            success(loginResult) {\r\n                console.warn(\"-----微信登录--\", loginResult);\r\n                let data = {\r\n                    \"cmd\": GNetCmd.ReqWxSession,\r\n                    \"lang\": \"zh\",\r\n                    \"channel\": \"wx\",\r\n                    jscode: loginResult.code,\r\n                };\r\n                console.warn('发送登录数据：', data);\r\n                WmSocket.getInstance().send({ \"data\": data });\r\n            },\r\n            fail(res) {\r\n                let msg = \"登录失败：\" + res.errMsg;\r\n                if (failCb) failCb(msg);\r\n            }\r\n        });\r\n        return;\r\n\r\n        Wechat.wxGetSetting().then((res: any) => {\r\n            //授权登录，走流程\r\n            console.warn(\"微信授权结果12---\", res, res['userInfo'])\r\n            if (res.hasOwnProperty(\"userInfo\")) {\r\n                ServerCtr.GetInstance().wxLogin() //第一次授权\r\n            }\r\n            if (res.hasOwnProperty(\"authSetting\")) {\r\n                let authSetting = res.authSetting;\r\n                if (authSetting['scope.userInfo']) {//第二次授权\r\n                    ServerCtr.GetInstance().wxLogin()\r\n                }\r\n            }\r\n\r\n        }).catch((res) => {\r\n            //没有授权，直接登录\r\n            console.warn(\"没有账号登录---\",)\r\n            this.loginState = GLoginState.loginWithoutAccount\r\n        })\r\n    }\r\n\r\n    public wxLogin() {\r\n        //新方案\r\n        Wechat.getWxLoginResult((err: any, loginResult: any) => {\r\n            if (err) {\r\n                // EventMgr.getInstance().event('tipshow', '获取用户信息失败');\r\n                // App.ui.ShowPanel(\"WxScopeTipsPanel\");\r\n                console.error('登录数据err：', loginResult);\r\n                return;\r\n            }\r\n            console.log('登录数据info：', loginResult);\r\n            this.nickName = loginResult.userInfo.nickName;\r\n            this.avatar = loginResult.userInfo.avatarUrl;\r\n            // let wxEncrypted = loginResult.encryptedData;\r\n            // let wxIv = loginResult.iv;\r\n            // let wxCode = loginResult.code;\r\n            // let wxUserInfo = loginResult.userInfo;\r\n            let data = {\r\n                \"cmd\": GNetCmd.ReqWxSession,\r\n                \"lang\": \"zh\",\r\n                \"channel\": \"wx\",\r\n                jscode: loginResult.code,\r\n                nickName: this.nickName,\r\n                // wcencrypted: loginResult.encryptedData,\r\n                // wciv: loginResult.iv\r\n            };\r\n            console.warn('发送登录数据：', data);\r\n            WmSocket.getInstance().send({ \"data\": data });\r\n        });\r\n    }\r\n\r\n    public UnloadAvatarUrl() {\r\n        let data = {\r\n            \"cmd\": GNetCmd.UploadAvatar,\r\n            \"lang\": \"zh\",\r\n            \"token\": this.token,\r\n            \"avatar\": this.avatar,\r\n        }\r\n        WmSocket.getInstance().send({ \"data\": data });\r\n    }\r\n}\r\n","import { myLog } from \"../../common/myLog\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { eventManager } from \"../manager/eventManager\";\r\nimport { mapModel } from \"../model/mapModel\";\r\nimport { playerModel } from \"../model/playerModel\";\r\n\r\nclass ServerMsg {\r\n    private static _instance: ServerMsg;\r\n    private constructor() { }\r\n    public static get instance(): ServerMsg {\r\n        if (!this._instance) {\r\n            this._instance = new ServerMsg();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n\r\n    // 模拟客户端与服务端的通信，为以后接入服务端做预留\r\n    public send(ac: number, data?: any) {\r\n        let key = msgac.ac2KeyObj[ac];\r\n        if (!data) {\r\n            data = {};\r\n        }\r\n\r\n        // myLog.i(key, data);\r\n\r\n        if (ac > msgac.playerMsgStart && ac < msgac.playerMsgEnd) {\r\n            if (playerModel[key]) {\r\n                playerModel[key](data);\r\n            }\r\n        }\r\n        if (ac > msgac.mapMsgStart && ac < msgac.mapMsgEnd) {\r\n            if (mapModel[key]) {\r\n                mapModel[key](data);\r\n            }\r\n        }\r\n\r\n        myLog.i(key + \"Ret\", data);\r\n        data.notMyLog = true;\r\n\r\n        // // 公共消息处理\r\n        // switch (data.st) {\r\n        //     case -1:\r\n        //         // 缺少道具\r\n        //         eventManager.send(msgac.playerLackItemHint, data);\r\n        //         return;\r\n        // }\r\n\r\n        if (data.st == 1) {\r\n            eventManager.send(ac, data);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const serverMsg = ServerMsg.instance;","import { _decorator, Node, Toggle } from 'cc';\r\nimport { audioManager } from '../../manager/audioManager';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SettingLayer')\r\nexport class SettingLayer extends BaseUILayer {\r\n\r\n\r\n    @property({ type: Node }) musicToggle: Node = null;\r\n    @property({ type: Node }) effectToggle: Node = null;\r\n\r\n\r\n    onLoad() {\r\n        super.onLoad()\r\n    }\r\n\r\n   \r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        let isMusic = audioManager.getMusiceVolume()\r\n        let isEffect = audioManager.getEffectVolume()\r\n\r\n        // this.musicToggle.getComponent(Toggle).isChecked = isMusic > 0\r\n        //  this.effectToggle.getComponent(Toggle).isChecked = isEffect > 0\r\n        //this.musicToggle.getChildByName(\"Toggle1\").getComponent(Toggle).isChecked == isMusic > 0\r\n    }\r\n\r\n    onMusicCheck() {\r\n        console.log(\"onMusicCheck\", this.musicToggle.getComponent(Toggle).isChecked)\r\n        // let isMusic = audioManager.getMusiceVolume()\r\n        // if (isMusic <= 0) {\r\n        //     isMusic = 1\r\n        // } else {\r\n        //     isMusic = 0\r\n        // }\r\n        audioManager.setMusicVolume(this.musicToggle.getComponent(Toggle).isChecked ? 1 : 0)\r\n        //  this.musicToggle.getComponent(Toggle).isChecked = isMusic > 0\r\n    }\r\n\r\n    onSoundCheck() {\r\n        audioManager.setEffectVolume(this.musicToggle.getComponent(Toggle).isChecked ? 1 : 0)\r\n  \r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, tween, UITransform, v3, Vec3, view, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport CronCtr from '../../../tyqSDK/network/CronCtr';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { tyqSDKConfig } from '../../../tyqSDK/tyqSDKConfig';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { serverMsg } from '../../other/serverMsg';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SettlementLayer')\r\nexport class SettlementLayer extends BaseLayer {\r\n\r\n    winAniCtrl: AnimationCtrl;\r\n    winMapNameNode: Node;\r\n    failAniCtrl: AnimationCtrl;\r\n    failMapNameNode: Node;\r\n\r\n    winTitleNode: Node;\r\n    timeNode: Node;\r\n    bestTimeNode: Node;\r\n\r\n    monsterNode: Node;\r\n    lineNode: Node;\r\n\r\n    itemLayerBg: Node;\r\n    itemLayerNode: Node;\r\n\r\n    btnDouble: Node;\r\n    btnDoublePos: Vec3;\r\n    btnSure: Node;\r\n    btnSurePos: Vec3;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.winAniCtrl = this.getNodeByPath(\"bg2/win\").addComponent(AnimationCtrl);\r\n        this.winMapNameNode = this.getNodeByPath(\"bg2/win/mapName\");\r\n        this.failAniCtrl = this.getNodeByPath(\"bg2/fail\").addComponent(AnimationCtrl);\r\n        this.failMapNameNode = this.getNodeByPath(\"bg2/fail/mapName\");\r\n\r\n        this.winTitleNode = this.getNodeByPath(\"ui/winTitle\");\r\n        this.timeNode = this.getNodeByPath(\"ui/time\");\r\n        this.bestTimeNode = this.getNodeByPath(\"ui/bestTime\");\r\n\r\n        this.monsterNode = this.getNodeByPath(\"ui/monster\");\r\n        this.lineNode = this.getNodeByPath(\"ui/line\");\r\n        this.itemLayerBg = this.getNodeByPath(\"ui/itemLayer/bg\");\r\n        this.itemLayerNode = this.getNodeByPath(\"ui/itemLayer/itemLayer\");\r\n\r\n        this.btnDouble = this.getNodeByPath(\"ui/btns/btnDouble\");\r\n        this.btnDoublePos = this.btnDouble.position.clone();\r\n        this.btnSure = this.getNodeByPath(\"ui/btns/btnSure\");\r\n        this.btnSurePos = this.btnSure.position.clone();\r\n\r\n        this.isShowBannerAd = true;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        UserData.getInstance().mapData = null;\r\n        if (this.layerData.isWin) {\r\n            audioManager.playEffect(constants.audioNames.win);\r\n            // 好友通关次数\r\n            UserData.getInstance().$friendPassCnt++;\r\n            CronCtr.getInstance().saveDataToCloud(\"friendPassCnt\", UserData.getInstance().$friendPassCnt);\r\n        }\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        if (this.layerData.isWin) {\r\n            playerModel.addDayTaskNum(10);\r\n        }\r\n\r\n        this.winAniCtrl.node.active = false;\r\n        this.winMapNameNode.active = false;\r\n        this.failAniCtrl.node.active = false;\r\n        this.failMapNameNode.active = false;\r\n\r\n        this.winTitleNode.active = false;\r\n        this.timeNode.active = false;\r\n        this.bestTimeNode.active = false;\r\n\r\n        this.monsterNode.active = false;\r\n        this.lineNode.active = false;\r\n        this.itemLayerBg.active = false;\r\n\r\n        this.itemLayerNode.active = false;\r\n\r\n        this.btnDouble.active = false;\r\n        this.btnSure.active = false;\r\n        utilTools.waterfall([\r\n            (result: any, cb: Function) => {\r\n                if (this.layerData.isWin) {\r\n                    this.winAniCtrl.node.active = true;\r\n                    this.winAniCtrl.playAnimation(\"a\", false, () => {\r\n                        this.winAniCtrl.playAnimation(\"b\", true);\r\n                        cb();\r\n                    });\r\n                    return;\r\n                }\r\n                this.failAniCtrl.node.active = true;\r\n                this.failAniCtrl.playAnimation(\"a\", false, () => {\r\n                    this.failAniCtrl.playAnimation(\"b\", true);\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                let row = designManager.getRowById(constants.tableName.map, mapModel.mapId);\r\n                if (this.layerData.isWin) {\r\n                    this.winMapNameNode.active = true;\r\n                    this.setString(find(\"text\", this.winMapNameNode), row.name);\r\n                    cocosUtil.tweenScaleIn2(this.winMapNameNode, 0.2, () => {\r\n                        cb();\r\n                    });\r\n                    return;\r\n                }\r\n                this.failMapNameNode.active = true;\r\n                this.setString(find(\"text\", this.failMapNameNode), row.name);\r\n                cocosUtil.tweenScaleIn2(this.failMapNameNode, 0.2, () => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                if (this.layerData.isWin) {\r\n                    this.winTitleNode.active = true;\r\n                    cocosUtil.tweenScaleIn2(this.winTitleNode, 0.2, () => {\r\n                        cb();\r\n                    });\r\n                    return;\r\n                }\r\n                this.timeNode.active = true;\r\n                this.setString(find(\"time\", this.timeNode), utilTools.getTimeStr(this.layerData.time * 1000, true));\r\n                let newNode = find(\"new\", this.timeNode);\r\n                if (this.layerData.isBest) {\r\n                    newNode.active = true;\r\n                    cocosUtil.tweenBlink(newNode);\r\n                } else {\r\n                    newNode.active = false;\r\n                }\r\n                cocosUtil.tweenScaleIn2(this.timeNode, 0.2, () => {\r\n                    this.bestTimeNode.active = true;\r\n                    cocosUtil.tweenScaleIn2(this.bestTimeNode, 0.2, () => {\r\n                        this.setString(find(\"info/time\", this.bestTimeNode), utilTools.getTimeStr(this.layerData.bestTime * 1000, true));\r\n                        cb();\r\n                    });\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.monsterNode.active = true;\r\n                this.setString(find(\"info/num\", this.monsterNode), mapModel.killMonsterNum);\r\n                cocosUtil.tweenScaleIn2(this.monsterNode, 0.2, () => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.lineNode.active = true;\r\n                cocosUtil.tweenFadeIn(this.lineNode, 0.2, () => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.itemLayerBg.active = true;\r\n                cocosUtil.tweenFadeIn(this.itemLayerBg, 0.2, () => {\r\n                    cb();\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.itemLayerNode.active = true;\r\n                this.setItemLayer(this.itemLayerNode, this.layerData.award, this.refreshPropItem.bind(this));\r\n                let num = this.itemLayerNode.children.length;\r\n                utilTools.forArr(this.itemLayerNode.children, (itemUI: Node, index: number) => {\r\n                    itemUI.scale = v3(0, 0, 0);\r\n                    this.scheduleOnce(() => {\r\n                        tween(itemUI)\r\n                            .set({ scale: v3(2, 2, 1) })\r\n                            .to(0.2, { scale: v3(1, 1, 1) })\r\n                            .to(0.05, { scale: v3(1.1, 1.1, 1) })\r\n                            .to(0.05, { scale: v3(1, 1) })\r\n                            .call(() => {\r\n                                if (index >= num - 1) {\r\n                                    cb();\r\n                                }\r\n                            })\r\n                            .start();\r\n                    }, index * 0.2);\r\n                });\r\n            },\r\n            (result: any, cb: Function) => {\r\n                this.btnDouble.active = true;\r\n                let pos = this.btnDoublePos.clone();\r\n                pos.x += (view.getVisibleSize().width * 0.5 + this.btnDouble.getComponent(UITransform).width);\r\n                this.btnDouble.position = pos;\r\n\r\n                this.btnSure.active = true;\r\n                pos = this.btnSurePos.clone();\r\n                pos.x -= (view.getVisibleSize().width * 0.5 + this.btnSure.getComponent(UITransform).width);\r\n                this.btnSure.position = pos;\r\n\r\n                tween(this.btnDouble).to(0.5, { position: this.btnDoublePos }).start();\r\n                tween(this.btnSure).to(0.5, { position: this.btnSurePos }).start();\r\n            },\r\n        ]);\r\n    }\r\n\r\n    refreshPropItem(itemUI: Node, data: PropItem) {\r\n        let row = designManager.getRowById(constants.tableName.prop, data.Id);\r\n        this.setSpriteFrame2(find(\"bg\", itemUI), \"prop/propbg\" + row.quality);\r\n        this.setSpriteFrame2(find(\"icon\", itemUI), \"prop/\" + row.icon);\r\n\r\n        let numNode = find(\"num\", itemUI);\r\n        if (row.type == 8 || row.type == 11) {\r\n            numNode.active = false;\r\n        } else {\r\n            numNode.active = true;\r\n            this.setNumString(find(\"num/num\", itemUI), data.Num);\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n        let obj: any = {};\r\n        obj.mapId = mapModel.mapId;\r\n        obj.floor = mapModel.floor;\r\n        obj.isWin = this.layerData.isWin;\r\n        serverMsg.send(msgac.mapLeave, obj);\r\n        if (tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level) > 0 && tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level) > UserData.getInstance().openLevel) {\r\n            if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n                this.openLayer(constants.layers.MoreGameLayer)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onClickBtnSure(node: Node) {\r\n        this.closeLayer();\r\n    }\r\n\r\n    onClickBtnDouble() {\r\n        sdkManager.openAd(\"结算奖励双倍\", (st: number) => {\r\n            if (st == 1) {\r\n                UserData.getInstance().getRewardProp(this.layerData.award);\r\n                this.closeLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { director, find, Node, UITransform, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { GNetCmd, GNetConst } from '../../../tyqSDK/network/conf';\r\nimport ServerCtr from '../../../tyqSDK/network/ServerCtr';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { localStorageManager } from '../../manager/localStorageManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ShareLayer')\r\nexport class ShareLayer extends BaseLayer {\r\n\r\n    tabLayer: Node;\r\n    tabArr = [\r\n        { id: 1, name: \"邀请好友\" },\r\n        { id: 2, name: \"通关奖励\" },\r\n        { id: 3, name: \"视频好友\" },\r\n    ];\r\n    choseTabIndex = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        let tabLayer = this.getNodeByPath(\"ui/tabLayer\");\r\n        this.tabLayer = tabLayer;\r\n        let tabItem = tabLayer.children[0];\r\n        cocosUtil.instantiate(tabItem).parent = tabLayer;\r\n        cocosUtil.instantiate(tabItem).parent = tabLayer;\r\n        let chs = tabLayer.children;\r\n        chs.forEach((itemUI, index) => {\r\n            let info = this.tabArr[index];\r\n            this.setString(find(\"text\", itemUI), info.name);\r\n            // @ts-ignore\r\n            itemUI.index = index;\r\n        });\r\n        this.refreshTabLayer();\r\n\r\n        ServerCtr.GetInstance().reqGetFriendVal();\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        director.on(GNetCmd.GetFriendVal.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        director.on(GNetCmd.GetFriendVal.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshTopLayer();\r\n        this.refreshTabLayer();\r\n        this.refreshListLayer();\r\n    }\r\n\r\n    onMessageEvent(value) {\r\n        if (value.status != GNetConst.ResSuccess) {\r\n            return;\r\n        }\r\n        switch (value.cmd) {\r\n            case GNetCmd.GetFriendVal:\r\n                this.initUI();\r\n                break;\r\n        }\r\n    }\r\n\r\n    refreshTopLayer() {\r\n        let remainNum = designManager.config.shareDayNum - playerModel.shareObj.dayNum;\r\n        if (remainNum < 0) {\r\n            remainNum = 0;\r\n        }\r\n        this.setString(this.getNodeByPath(\"ui/top/hintLayer/day/num\"), remainNum);\r\n        this.setString(this.getNodeByPath(\"ui/top/shareAwardItem/num/val\"), \"x\" + designManager.config.shareDayDiamond);\r\n    }\r\n\r\n    refreshListLayer() {\r\n        let arr = designManager.getRowsByType(constants.tableName.share, this.choseTabIndex + 1);\r\n        this.scrollViewSetData(this.getNodeByPath(\"ui/listbg/list\"), arr, this.refreshShareItem.bind(this));\r\n    }\r\n\r\n    refreshShareItem(itemUI: any, row: any) {\r\n        find(\"awardLayer\", itemUI).children.forEach((awardItem: any, index: number) => {\r\n            let propId = row.award[index][0];\r\n            let propNum = row.award[index][1];\r\n            this.setPropItem(propId, find(\"icon\", awardItem), propNum, find(\"bg\", awardItem), find(\"num/val\", awardItem));\r\n            awardItem.award = row.award[index];\r\n        });\r\n        let infoLayer1 = find(\"infoLayer1\", itemUI);\r\n        let infoLayer2 = find(\"infoLayer2\", itemUI);\r\n        let infoLayer3 = find(\"infoLayer3\", itemUI);\r\n        infoLayer1.active = false;\r\n        infoLayer2.active = false;\r\n        infoLayer3.active = false;\r\n        let nowNum = 0;\r\n        switch (this.choseTabIndex + 1) {\r\n            case 1:\r\n                nowNum = playerModel.shareObj.friendNum;\r\n                infoLayer1.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer1), row.num + localText.wei);\r\n                break;\r\n            case 2:\r\n                nowNum = playerModel.shareObj.friendPassNum;\r\n                infoLayer2.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer2), row.num + localText.ci);\r\n                break;\r\n            case 3:\r\n                nowNum = playerModel.shareObj.friendAdNum;\r\n                infoLayer3.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer3), row.num + localText.ge);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        let btnGet = find(\"btnGet\", itemUI);\r\n        let doneNode = find(\"done\", itemUI);\r\n        btnGet.active = false;\r\n        doneNode.active = false;\r\n        if (playerModel.shareObj.idAwardObj[row.id]) {\r\n            doneNode.active = true;\r\n        } else {\r\n            btnGet.active = true;\r\n            // @ts-ignore\r\n            btnGet.row = row;\r\n            if (nowNum >= row.num) {\r\n                // 可领取奖励\r\n                cocosUtil.setRenderableColor(btnGet, constants.colors.white, true);\r\n            } else {\r\n                // 还未满足条件\r\n                cocosUtil.setRenderableColor(btnGet, constants.colors.yin, true);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    refreshTabLayer() {\r\n        let chs = this.tabLayer.children;\r\n        chs.forEach((itemUI, index) => {\r\n            let normalNode = find(\"normal\", itemUI);\r\n            let choseNode = find(\"chose\", itemUI);\r\n            let textNode = find(\"text\", itemUI);\r\n            normalNode.active = false;\r\n            choseNode.active = false;\r\n            if (this.choseTabIndex == index) {\r\n                choseNode.active = true;\r\n                itemUI.getComponent(UITransform).width = choseNode.getComponent(UITransform).width;\r\n                textNode.scale = v3(1.3, 1.3, 1);\r\n            } else {\r\n                normalNode.active = true;\r\n                itemUI.getComponent(UITransform).width = normalNode.getComponent(UITransform).width;\r\n                textNode.scale = v3(1, 1, 1);\r\n            }\r\n        });\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickTabItem(node) {\r\n        this.choseTabIndex = node.index;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnShare() {\r\n        let uid = localStorageManager.uid;\r\n        if (!uid) {\r\n            uid = \"\";\r\n        }\r\n        let urlParmas = \"uid=\" + uid;\r\n        myLog.i(\"开始分享：\" + urlParmas);\r\n        tyqSDK.share(urlParmas, () => {\r\n            // 分享成功\r\n            myLog.i(\"分享结果回调\");\r\n            let remain = designManager.config.shareDayNum - playerModel.shareObj.dayNum;\r\n            if (remain > 0) {\r\n                let propItem = UserData.getInstance().addPropNum(constants.propIds.diamond, designManager.config.shareDayDiamond);\r\n                playerModel.shareObj.dayNum++;\r\n                this.openAwardGetLayer([propItem]);\r\n                this.refreshTopLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnGet(node: any) {\r\n        let row = node.row;\r\n        if (playerModel.shareObj.idAwardObj[row.id]) {\r\n            this.createNotice(localText.hasGet);\r\n            return;\r\n        }\r\n        let nowNum = 0;\r\n        switch (this.choseTabIndex + 1) {\r\n            case 1:\r\n                nowNum = playerModel.shareObj.friendNum;\r\n                break;\r\n            case 2:\r\n                nowNum = playerModel.shareObj.friendPassNum;\r\n                break;\r\n            case 3:\r\n                nowNum = playerModel.shareObj.friendAdNum;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (nowNum < row.num) {\r\n            this.createNotice(localText.notGet.format(nowNum));\r\n            return;\r\n        }\r\n\r\n        playerModel.shareObj.idAwardObj[row.id] = 1;\r\n        let arr = UserData.getInstance().addPropArrByDesign(row.award);\r\n        this.openAwardGetLayer(arr);\r\n        this.initUI();\r\n    }\r\n\r\n}\r\n\r\n","import { Color, Component, Material, sp, UIRenderer, v4, Vec4, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { resManager } from '../../manager/resManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ShineColor')\r\nexport class ShineColor extends Component {\r\n    duration: number = 0.3;\r\n    _median: number = 0;\r\n    _time: number = 0;\r\n\r\n    isSpine: boolean = false;\r\n\r\n    uiRenderer: UIRenderer;\r\n    orignMaterial: Material;\r\n    vColor: Vec4;\r\n\r\n    onLoad() {\r\n        this.uiRenderer = this.node.getComponent(UIRenderer);\r\n        this.orignMaterial = this.uiRenderer.customMaterial;\r\n\r\n        if (this.node.getComponent(sp.Skeleton)) {\r\n            this.isSpine = true;\r\n        }\r\n    }\r\n\r\n    setMaterialProperty(val: number) {\r\n        if (this.isSpine) {\r\n            // @ts-ignore \r\n            let cache: any = this.uiRenderer._materialCache;\r\n            for (let i in cache) {\r\n                let material = cache[i];\r\n                material.setProperty(\"u_rate\", val);\r\n                if (this.vColor) {\r\n                    material.setProperty(\"u_color\", this.vColor);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        let material = this.uiRenderer.getMaterialInstance(0);\r\n        let uRate = material.passes[0].getHandle(\"u_rate\");\r\n        material.passes[0].setUniform(uRate, val);\r\n        if (this.vColor) {\r\n            let vColor = v4(1, 0, 0, 1);\r\n            let uColor = material.passes[0].getHandle(\"u_color\");\r\n            material.passes[0].setUniform(uColor, this.vColor);\r\n        }\r\n        this.uiRenderer.setMaterialInstance(material, 0);\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this._time > 0) {\r\n            this._time -= dt;\r\n            this._time = this._time < 0 ? 0 : this._time;\r\n            let rate = Math.abs(this._time - this._median) * 2 / this.duration;\r\n            this.setMaterialProperty(rate);\r\n        } else {\r\n            this.removeShineColorMaterial();\r\n        }\r\n    }\r\n\r\n    removeShineColorMaterial() {\r\n        this.uiRenderer.customMaterial = this.orignMaterial;\r\n        if (this.isSpine) {\r\n            // spine动画，需要重新激活，否则替换材质后会不显示\r\n            this.uiRenderer.enabled = false;\r\n            this.uiRenderer.enabled = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 闪颜色\r\n     * @param materialPath 材质路径 \r\n     * @param color 闪的颜色\r\n     * @param duration 闪的时间\r\n     */\r\n    startShine(materialPath: string, color?: Color, duration: number = 0.3) {\r\n        this.duration = duration;\r\n        this._median = this.duration / 2;\r\n\r\n        if (color) {\r\n            this.vColor = v4(color.r / 255, color.g / 255, color.b / 255, color.a / 255);\r\n        } else {\r\n            // 默认闪白\r\n            this.vColor = v4(1, 1, 1, 1);\r\n        }\r\n        resManager.loadAsset(constants.bundles.common, materialPath, Material, null, (err, material) => {\r\n            this._time = this.duration;\r\n            this.uiRenderer.customMaterial = material;\r\n            this.setMaterialProperty(1);\r\n        });\r\n    }\r\n}\r\n","import { Button, instantiate, Label, Node, PageView, sp, UITransform, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { RedPointLogicMgr } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { playerModel } from '../../model/playerModel';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ShopLayer')\r\nexport class ShopLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具节点\" }) mangItem: Node = null;\r\n    @property({ type: Node, tooltip: \"宣传页\" }) pageView: Node = null;\r\n\r\n    @property({ type: sp.Skeleton, tooltip: \"\" }) mangheSpine: sp.Skeleton = null;\r\n\r\n    @property({ type: Node }) btnManghe: Node = null;\r\n\r\n    @property({ type: Node }) uiNode: Node = null;\r\n    @property({ type: Node }) btnSure: Node = null;\r\n\r\n    @property({ type: Node }) propItem: Node = null;\r\n\r\n    @property({ type: Node }) btnVideo: Node = null;\r\n    @property({ type: Node }) btnSingle: Node = null;\r\n\r\n\r\n    @property({ type: Label }) num1: Label = null;\r\n    @property({ type: Label }) num2: Label = null;\r\n\r\n    @property({ type: Node }) layer1: Node = null;\r\n    @property({ type: Node }) layer2: Node = null;\r\n\r\n\r\n    _mangheType = 0\r\n    _curState = 0\r\n\r\n    _isDrawIng = false\r\n\r\n    gaojiProp = []\r\n    _rewardArr = []\r\n\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        // for (let index = 0; index < 12; index++) {\r\n        //     let item = instantiate(this.mangItem)\r\n        //     this.listLayer.addChild(item)\r\n        // }\r\n\r\n\r\n        this.mangItem.active = false\r\n        this.num1.string = (designManager.config.extra2 - UserData.getInstance().$drawNormalNum) + \"\"\r\n        this.num2.string = (designManager.config.extra1 - UserData.getInstance().$drawGradeNum) + \"\"\r\n\r\n        RedPointLogicMgr.ins().setRPointView(this.btnManghe, null, true)\r\n        this.setSpriteFrame2(this.btnManghe, \"shopLayer/mangheNormal\", null, constants.bundles.wwqVec)\r\n        this.pageView.getComponent(PageView).scrollToPage(0, 0)\r\n        this._mangheType = 0\r\n        this.mangheSpine.animation = \"purple1\"\r\n        this.mangheSpine.timeScale = 1\r\n        this.btnSure.active = false\r\n        let self = this\r\n        let callfun = function () {\r\n            self.animalFinish()\r\n        }\r\n        this.mangheSpine.setCompleteListener(callfun)\r\n\r\n        let arr = [10082, 10113, 10010]\r\n        let arr1 = [10066, 10155, 10118]\r\n\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let propItem = instantiate(self.propItem)\r\n            this.layer1.addChild(propItem)\r\n            propItem.position = v3(0, 0, 0)\r\n            propItem.getComponent(PropItemPrefab).setView(arr[i], 1, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n            propItem.getComponent(PropItemPrefab).setScale(100)\r\n        }\r\n\r\n        for (let i = 0; i < arr1.length; i++) {\r\n            let propItem = instantiate(self.propItem)\r\n            this.layer2.addChild(propItem)\r\n            propItem.position = v3(0, 0, 0)\r\n            propItem.getComponent(PropItemPrefab).setView(arr1[i], 1, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n            propItem.getComponent(PropItemPrefab).setScale(100)\r\n        }\r\n\r\n        this.onClickChangeManghe()\r\n\r\n    }\r\n\r\n    start() {\r\n        console.log(\"layerData = \", this.layerData)\r\n        this.initVideoBtn()\r\n\r\n    }\r\n\r\n    initVideoBtn() {\r\n        if (this.layerData.taskGo && UserData.getInstance().$freeDraw < designManager.config.taskDoge) {\r\n            this.btnVideo.getChildByName(\"ui_video\").active = false\r\n            this.btnVideo.getChildByName(\"Layout\").active = false\r\n            this.btnVideo.getChildByName(\"videoLabel\").position = v3(0, 0, 0)\r\n            return\r\n        }\r\n\r\n        if (this._mangheType == 1) {\r\n            this.btnVideo.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.tenCard + \"\"\r\n            this.btnSingle.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.onceCard + \"\"\r\n            this.setSpriteFrame2(this.btnSingle.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_diamond2\")\r\n            this.setSpriteFrame2(this.btnVideo.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_diamond2\")\r\n\r\n            if (UserData.getInstance().baoshi >= designManager.config.tenCard) {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(0, -10, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = false\r\n                this.btnVideo.getChildByName(\"Layout\").active = true\r\n            } else {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(20, 0, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = true\r\n                this.btnVideo.getChildByName(\"Layout\").active = false\r\n            }\r\n        } else {\r\n            this.btnVideo.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.tenCard2 + \"\"\r\n            this.btnSingle.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.onceCard2 + \"\"\r\n            this.setSpriteFrame2(this.btnSingle.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_coin1\")\r\n            this.setSpriteFrame2(this.btnVideo.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_coin1\")\r\n\r\n            if (UserData.getInstance().coin >= designManager.config.tenCard2) {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(0, -10, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = false\r\n                this.btnVideo.getChildByName(\"Layout\").active = true\r\n            } else {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(20, 0, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = true\r\n                this.btnVideo.getChildByName(\"Layout\").active = false\r\n            }\r\n        }\r\n    }\r\n\r\n    onOnceCard() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.mangItem.active = false\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        let isEnougth = false\r\n        if (this._mangheType == 1) {\r\n            isEnougth = UserData.getInstance().checkAndUseBaoshi(designManager.config.onceCard, true)\r\n        } else {\r\n            isEnougth = UserData.getInstance().cheackAndUseCoin(designManager.config.onceCard2, true)\r\n        }\r\n\r\n        if (isEnougth) {\r\n            let obj: any = {};\r\n            obj.hide = true;\r\n            eventManager.send(msgac.homeHideMenu, obj);\r\n            this.showChouAnimale()\r\n            this.cancelButtonTouch(false)\r\n            this._isDrawIng = true\r\n            this.gaojiProp = []\r\n            this._rewardArr = []\r\n            let item = UserData.getInstance().getDrawItem(this._mangheType)\r\n\r\n            let propData = designManager.getRowById(constants.tableName.prop, item.award[0])\r\n            if (propData.quality >= 4) {\r\n                this.gaojiProp.push(propData)\r\n            }\r\n            this._rewardArr.push({ Id: item.award[0], Num: 1 })\r\n            this.initVideoBtn()\r\n            // if (item) {\r\n            //     arr.push(item)\r\n            //     this.openLayer(constants.layers.RewardLayer, { propArr: arr })\r\n            // }\r\n        } else {\r\n            this.toast(this._mangheType == 1 ? \"钻石不足\" : \"金币不足\")\r\n        }\r\n    }\r\n\r\n    onTenCard() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        this.mangItem.active = false\r\n\r\n        let self = this\r\n        this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).width = 540\r\n        this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).height = 200\r\n        let getReward = function () {\r\n            self.showChouAnimale()\r\n            let obj: any = {};\r\n            obj.hide = true;\r\n\r\n            self.cancelButtonTouch(false)\r\n            self._isDrawIng = true\r\n            self.gaojiProp = []\r\n            self._rewardArr = []\r\n            eventManager.send(msgac.homeHideMenu, obj);\r\n            for (let i = 0; i < 10; i++) {\r\n                let item = UserData.getInstance().getDrawItem(self._mangheType)\r\n                if (item) {\r\n                    // let propItem = instantiate(self.propItem)\r\n                    // self.mangItem.getChildByName(\"Layout\").addChild(propItem)\r\n                    // propItem.getComponent(PropItemPrefab).setView(item.award[0], item.award[2], PropItemPrefab.Type_UnTouch)\r\n                    // propItem.getComponent(PropItemPrefab).setScale(100)\r\n\r\n                    let propData = designManager.getRowById(constants.tableName.prop, item.award[0])\r\n                    if (propData.quality >= 4) {\r\n                        self.gaojiProp.push(propData)\r\n                    }\r\n                    self._rewardArr.push({ Id: item.award[0], Num: 1 })\r\n                }\r\n            }\r\n            self.initVideoBtn()\r\n            //    self.openLayer(constants.layers.RewardLayer, { propArr: arr })\r\n        }\r\n        let isEnougth = false\r\n\r\n        if (this.layerData.taskGo && UserData.getInstance().$freeDraw < designManager.config.taskDoge) {\r\n            isEnougth = true\r\n            UserData.getInstance().$freeDraw  ++\r\n        }else{\r\n            if (this._mangheType == 1) {\r\n                isEnougth = UserData.getInstance().checkAndUseBaoshi(designManager.config.tenCard, true)\r\n            } else {\r\n                isEnougth = UserData.getInstance().cheackAndUseCoin(designManager.config.tenCard2, true)\r\n            }\r\n        }\r\n        if (isEnougth) {\r\n            getReward && getReward()\r\n\r\n        } else {\r\n            sdkManager.openAd(this._mangheType == 1 ? \"盲盒高级抽奖\" : \"盲盒普通抽奖\", (state) => {\r\n                if (state == 1) {\r\n                    getReward && getReward()\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onClickChangeManghe() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (this.pageView.getComponent(PageView).getCurrentPageIndex() == 0) {\r\n            this.pageView.getComponent(PageView).scrollToPage(1, 0.2)\r\n        } else {\r\n            this.pageView.getComponent(PageView).scrollToPage(0, 0.2)\r\n        }\r\n        this.updatebtnState()\r\n    }\r\n\r\n    updatebtnState() {\r\n        if (this._isDrawIng) {\r\n            return\r\n        }\r\n        if (this.pageView.getComponent(PageView).getCurrentPageIndex() == 1) {\r\n            this._mangheType = 1\r\n            this.setSpriteFrame2(this.btnManghe, \"shopLayer/manggaoji\", null, constants.bundles.wwqVec)\r\n            this.mangheSpine.setAnimation(0, \"qiehuan1\", false)\r\n\r\n            this.mangheSpine.timeScale = 1\r\n        } else {\r\n            this.mangheSpine.setAnimation(0, \"qiehuan2\", false)\r\n            this.mangheSpine.timeScale = 1\r\n            this._mangheType = 0\r\n            this.setSpriteFrame2(this.btnManghe, \"shopLayer/mangheNormal\", null, constants.bundles.wwqVec)\r\n        }\r\n        this.initVideoBtn()\r\n    }\r\n\r\n    showChouAnimale() {\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.setAnimation(0, aniName + \"2\", false)\r\n\r\n        // this.mangheSpine.animation = aniName + \"2\"\r\n        this.mangheSpine.timeScale = 1\r\n        this._curState = 2\r\n    }\r\n\r\n    animalFinish() {\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.loop = false\r\n\r\n        if (this._curState == 2) {\r\n            this.uiNode.active = false\r\n            this.mangheSpine.timeScale = 1\r\n            this.mangheSpine.setAnimation(0, \"bai3\", false)\r\n            this._curState = 3\r\n        } else if (this._curState == 3) {\r\n            this.checkShowGaoji()\r\n            // this.mangheSpine.animation = aniName + \"4\"\r\n            // this.btnSure.active = true\r\n            this.mangItem.active = true\r\n            // this._curState = 4\r\n        } else if (this._curState == 4) {\r\n            // this.mangheSpine.animation = this.mangheSpine.animation\r\n        }\r\n    }\r\n\r\n    checkShowGaoji() {\r\n\r\n        if (this.gaojiProp.length > 0) {\r\n            let propData = this.gaojiProp.shift()\r\n            if (propData) {\r\n                if (propData.quality >= 4) {\r\n                    this.mangheSpine.setAnimation(0, propData.quality == 4 ? \"purple4\" : \"yellow4\", true)\r\n                    this.mangheSpine.timeScale = 1\r\n                    this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n                    let propItem = instantiate(this.propItem)\r\n                    this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).width = 300\r\n                    this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).height = 300\r\n                    this.mangItem.getChildByName(\"Layout\").addChild(propItem)\r\n                    propItem.getComponent(PropItemPrefab).setView(propData.id, 1, PropItemPrefab.Type_BigIcon)\r\n                    propItem.getComponent(PropItemPrefab).setScale(300)\r\n                    this.btnSure.active = true\r\n                    this._curState = 4\r\n                    return\r\n                }\r\n            }\r\n        }\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.setAnimation(0, aniName + \"1\", false)\r\n\r\n        this.mangheSpine.timeScale = 1\r\n        this.mangItem.active = false\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        UserData.getInstance().getRewardProp(this._rewardArr)\r\n        this.openLayer(constants.layers.RewardLayer, { propArr: this._rewardArr })\r\n\r\n        playerModel.addDayTaskNum(3, this._rewardArr.length);\r\n\r\n        this.drawFinish()\r\n        this._curState = 5\r\n\r\n    }\r\n\r\n    onBtnClickSure() {\r\n\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.checkShowGaoji()\r\n        this.mangItem.active = true\r\n        return\r\n\r\n    }\r\n\r\n    drawFinish() {\r\n        this.num1.string = (designManager.config.extra2 - UserData.getInstance().$drawNormalNum) + \"\"\r\n        this.num2.string = (designManager.config.extra1 - UserData.getInstance().$drawGradeNum) + \"\"\r\n        this.uiNode.active = true\r\n        this.btnSure.active = false\r\n        this.mangItem.active = false\r\n        eventManager.send(msgac.homeHideMenu, { hide: false });\r\n\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this._curState = 0\r\n        this.mangheSpine.setAnimation(0, aniName + \"1\", false)\r\n        this.cancelButtonTouch(true)\r\n        this._isDrawIng = false\r\n    }\r\n\r\n    cancelButtonTouch(state) {\r\n        this.btnSingle.getComponent(Button).interactable = state\r\n        this.btnVideo.getComponent(Button).interactable = state\r\n        this.btnManghe.getComponent(Button).interactable = state\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n\r\n\r\n    closeLayer() {\r\n        super.closeLayer()\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","\r\nclass SingleInstance {\r\n\r\n    private static instance: any = null;\r\n    protected constructor() { };\r\n    public static getInstance<T>(): T {\r\n        if (this.instance == null) {\r\n            this.instance = new this();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n}\r\n\r\nexport { SingleInstance };\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Skill')\r\nexport class Skill extends Component {\r\n\r\n    info: any;\r\n    id: any;\r\n    row: any;\r\n\r\n    skillUtil: any;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    async init(info: any) {\r\n        this.info = info;\r\n        let id = info.id;\r\n\r\n        this.id = id;\r\n        this.unscheduleAllCallbacks();\r\n\r\n        let row = designManager.getRowById(constants.tableName.skill, id);\r\n        this.row = row;\r\n\r\n        try {\r\n            let skillUtil = cocosUtil.addComponentOnce(this, \"Skill\" + row.type);\r\n            skillUtil.unscheduleAllCallbacks();\r\n            this.skillUtil = skillUtil;\r\n            // @ts-ignore\r\n            skillUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getDuration() {\r\n        let duration = this.row.duration;\r\n        duration = duration * (1 + mapModel.skillSystem.getSkill2DurationAddPercent());\r\n\r\n        return duration;\r\n    }\r\n\r\n    getAtkCd() {\r\n        let cd = this.row.cd;\r\n        cd = cd * (1 - mapModel.skillSystem.getSkill2AtkCdSubPercent());\r\n        return cd;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (this.skillUtil && this.skillUtil.updateLogic) {\r\n            this.skillUtil.updateLogic(dt);\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n        this.unscheduleAllCallbacks();\r\n        if (this.skillUtil) {\r\n            this.skillUtil.unscheduleAllCallbacks();\r\n        }\r\n    }\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 锤子\r\n@ccclass('Skill1')\r\nexport class Skill1 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, null, this);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 轰炸机\r\n@ccclass('Skill10')\r\nexport class Skill10 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n    // 是否轰炸中\r\n    isShoting: boolean;\r\n\r\n    robotBullet: any;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n        this.isShoting = false;\r\n        this.robotBullet = null;\r\n\r\n        let extraObj = {\r\n            endCb: (bulletUtil: any) => {\r\n                if (!cocosUtil.isValid(this.node)) {\r\n                    bulletUtil.bullet.recycleSelf();\r\n                    return;\r\n                }\r\n                this.robotBullet = bulletUtil;\r\n            },\r\n            lv: this.skill.row.lv\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, null, extraObj);\r\n    }\r\n\r\n    forceDestroy() {\r\n        if (cocosUtil.isValid(this.robotBullet)) {\r\n            this.robotBullet.bullet.recycleSelf();\r\n        }\r\n    }\r\n\r\n    // 开始轰炸\r\n    startShoting() {\r\n        let duration = this.skill.getDuration();\r\n        this.isShoting = true;\r\n        this.robotBullet.startShot(duration);\r\n        this.scheduleOnce(() => {\r\n            this.isShoting = false;\r\n            this.timeCount = 0;\r\n        }, duration);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (!this.robotBullet) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount += dt;\r\n\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        if (this.isShoting) {\r\n            return;\r\n        }\r\n\r\n        this.startShoting();\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from '../bullet/Bullet';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 转盘\r\n@ccclass('Skill2')\r\nexport class Skill2 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    isShowing: boolean = false;\r\n    timeCount: number = 0;\r\n\r\n    bulletArr: Bullet[];\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n        this.bulletArr = [];\r\n\r\n        this.isShowing = false;\r\n    }\r\n\r\n    showDisks() {\r\n        let arr = cocosUtil.getCircleDirectionArr(this.skill.row.num, 160);\r\n        utilTools.forArr(arr, (direction: any) => {\r\n            let extraObj = {\r\n                direction: direction,\r\n                endCb: (bullet: Bullet) => {\r\n                    if (!cocosUtil.isValid(this.node)) {\r\n                        bullet.recycleSelf();\r\n                        return;\r\n                    }\r\n                    if (this.bulletArr.indexOf(bullet) == -1) {\r\n                        this.bulletArr.push(bullet);\r\n                    }\r\n                }\r\n            };\r\n            mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, null, extraObj);\r\n        });\r\n    }\r\n\r\n    hideDisks(isAtOnce: boolean = false) {\r\n        this.bulletArr.forEach((bullet: Bullet) => {\r\n            if (cocosUtil.isValid(bullet)) {\r\n                bullet.bulletUtil.hide(isAtOnce);\r\n            }\r\n        });\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (this.isShowing) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount += dt;\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.isShowing = true;\r\n        this.scheduleOnce(() => {\r\n            this.isShowing = false;\r\n            this.hideDisks();\r\n        }, this.skill.getDuration());\r\n\r\n        this.showDisks();\r\n    }\r\n\r\n    forceDestroy() {\r\n        this.hideDisks(true);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 飞镖\r\n@ccclass('Skill3')\r\nexport class Skill3 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n        let targetNode = mapModel.mapSystem.getMinDisTargetNode();\r\n        if (!targetNode) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        let direction = targetNode.getPosition().subtract(mapModel.player.node.getPosition());\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET,\r\n            cocosUtil.convertToWorldSpace(mapModel.player.node), direction, this);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 油桶\r\n@ccclass('Skill4')\r\nexport class Skill4 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n    isShowing: boolean = false;\r\n\r\n    // 油桶扔出距离\r\n    moveDis: number = 200;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    // 扔出油桶\r\n    throwFire() {\r\n        let arr = cocosUtil.getCircleDirectionArr(this.skill.row.num);\r\n        utilTools.forArr(arr, (direction: Vec3) => {\r\n            let targetPos = mapModel.player.node.getPosition().add(direction.multiplyScalar(this.moveDis));\r\n            let extraObj = {\r\n                targetPos: targetPos,\r\n                time: this.skill.getDuration()\r\n            };\r\n            mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, direction, extraObj);\r\n        });\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (this.isShowing) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount += dt;\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.isShowing = true;\r\n        this.scheduleOnce(() => {\r\n            this.isShowing = false;\r\n        }, this.skill.getDuration());\r\n\r\n        this.throwFire();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 导弹\r\n@ccclass('Skill5')\r\nexport class Skill5 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        let targetNode = mapModel.mapSystem.getMinDisTargetNode();\r\n        if (!targetNode) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        let direction = targetNode.getPosition().subtract(mapModel.player.node.getPosition());\r\n\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, direction);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 科技球\r\n@ccclass('Skill6')\r\nexport class Skill6 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        // 出射方向随机\r\n        let direction = cocosUtil.getCircleDirectionArr(1)[0];\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        let extrObj = {\r\n            invokeClass: this,\r\n            time: this.skill.getDuration()\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, direction, extrObj);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 力场\r\n@ccclass('Skill7')\r\nexport class Skill7 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    bulletUtil: any;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n        this.bulletUtil = null;\r\n\r\n        let extraObj = {\r\n            lv: this.skill.row.lv,\r\n            endCb: (bulletUtil: any) => {\r\n                if (!cocosUtil.isValid(this.node)) {\r\n                    bulletUtil.bullet.recycleSelf();\r\n                    return;\r\n                }\r\n                this.bulletUtil = bulletUtil;\r\n            }\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, null, extraObj);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n\r\n    }\r\n\r\n    initBulletScale() {\r\n        if (cocosUtil.isValid(this.bulletUtil)) {\r\n            this.bulletUtil.initScale();\r\n        }\r\n    }\r\n\r\n    forceDestroy() {\r\n        if (cocosUtil.isValid(this.bulletUtil)) {\r\n            this.bulletUtil.bullet.recycleSelf();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from '../monsters/Monster';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 闪电\r\n@ccclass('Skill8')\r\nexport class Skill8 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        let arr = [];\r\n        mapModel.monsterSystem.forVisibleMonster((monster: Monster) => {\r\n            let pos = monster.node.position;\r\n            let playerPos = mapModel.player.node.position;\r\n            if (Math.abs(pos.x - playerPos.x) > mapModel.visibleHalfSize.width - 100) {\r\n                return;\r\n            }\r\n            if (Math.abs(pos.y - playerPos.y) > mapModel.visibleHalfSize.height - 150) {\r\n                return;\r\n            }\r\n            arr.push(monster);\r\n        });\r\n        if (arr.length <= 0) {\r\n            return;\r\n        }\r\n        this.timeCount = 0;\r\n\r\n        for (let i = 0; i < this.skill.row.num; i++) {\r\n            this.scheduleOnce(() => {\r\n                if (arr.length <= 0) {\r\n                    return;\r\n                }\r\n                let index = Math.floor(Math.random() * arr.length);\r\n                let monster = arr[index];\r\n                if (monster.hp <= 0) {\r\n                    return;\r\n                }\r\n                let pos = cocosUtil.convertToWorldSpace(monster.node);\r\n                mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, pos);\r\n                audioManager.playEffect(this.skill.row.audio);\r\n            }, i * 0.3);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 钻头\r\n@ccclass('Skill9')\r\nexport class Skill9 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        // 出射方向随机\r\n        let direction = cocosUtil.getCircleDirectionArr(1)[0];\r\n        let extraObj = {\r\n            invokeClass: this,\r\n            time: this.skill.getDuration()\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, direction, extraObj);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n","import { Color, find, Node, Tween, tween, UIOpacity, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { ItemLayer } from '../base/ItemLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkillSelectLayer')\r\nexport class SkillSelectLayer extends BaseLayer {\r\n\r\n    skill1ItemLayer: ItemLayer;\r\n    skill2ItemLayer: ItemLayer;\r\n\r\n    selectItemLayer: ItemLayer;\r\n\r\n    hasSelect: boolean;\r\n\r\n    uiNode: Node;\r\n\r\n    btnRefresh: Node;\r\n    btnGetAll: Node;\r\n\r\n    textHint: Node;\r\n    allHint: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.uiNode = this.getNodeByPath(\"ui\");\r\n\r\n        this.skill1ItemLayer = this.getNodeByPath(\"ui/skillLayer1/itemLayer\").addComponent(ItemLayer);\r\n        this.skill2ItemLayer = this.getNodeByPath(\"ui/skillLayer2/itemLayer\").addComponent(ItemLayer);\r\n\r\n        this.selectItemLayer = this.getNodeByPath(\"ui/selectLayer\").addComponent(ItemLayer);\r\n\r\n        this.btnRefresh = this.getNodeByPath(\"ui/btns/btnRefresh\");\r\n        this.btnGetAll = this.getNodeByPath(\"ui/btns/btnGetAll\");\r\n\r\n        this.textHint = this.getNodeByPath(\"ui/textHint\");\r\n        this.allHint = this.getNodeByPath(\"ui/allHint\");\r\n\r\n        this.isShowBannerAd = true;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        this.addEventArr([\r\n            msgac.mapLeave,\r\n        ]);\r\n        tyqAdManager.showDelayFullVideo()\r\n        tyqAdManager.showDelayInterstitialAd()\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        this.removeEventArr([\r\n            msgac.mapLeave,\r\n        ]);\r\n    }\r\n\r\n    initUI() {\r\n        cocosUtil.tweenScaleIn2(this.uiNode);\r\n        this.hasSelect = false;\r\n\r\n        this.setString(this.getNodeByPath(\"expProgress/lv\"), mapModel.expLv);\r\n        this.refreshSkillLayer();\r\n        this.refreshSelectLayer();\r\n\r\n        this.refreshInfoLayer();\r\n    }\r\n\r\n    refreshInfoLayer() {\r\n        // 2023-03-13 改成一直显示欧皇附体按钮\r\n        return;\r\n        let lvCount = this.layerData.lvCount;\r\n        if (!lvCount) {\r\n            lvCount = 1;\r\n        }\r\n        if (mapModel.skillAllNum > 0) {\r\n            this.btnRefresh.active = false;\r\n            this.btnGetAll.active = true;\r\n\r\n            this.textHint.active = false;\r\n            this.allHint.active = true;\r\n        } else {\r\n            this.btnRefresh.active = true;\r\n            this.btnGetAll.active = false;\r\n\r\n            this.textHint.active = true;\r\n            this.allHint.active = false;\r\n\r\n            let refreshInfoNode = this.getNodeByPath(\"ui/btns/btnRefresh/info\");\r\n            let refreshFreeNode = this.getNodeByPath(\"ui/btns/btnRefresh/free\");\r\n            if (playerModel.skillFreeRefreshCount > 0) {\r\n                refreshInfoNode.active = true;\r\n                refreshFreeNode.active = false;\r\n            } else {\r\n                refreshInfoNode.active = false;\r\n                refreshFreeNode.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    refreshSkillLayer() {\r\n        this.setNumItemLayer(this.skill1ItemLayer.node, constants.design.skillNum, this.refreshSkill1Item.bind(this));\r\n        this.setNumItemLayer(this.skill2ItemLayer.node, constants.design.skillNum, this.refreshSkill2Item.bind(this));\r\n    }\r\n\r\n    refreshSkill2Item(itemUI: Node, num: any) {\r\n        let info = mapModel.skillSystem.skill2Arr[num - 1];\r\n        let iconNode = find(\"icon\", itemUI);\r\n        if (info) {\r\n            iconNode.active = true;\r\n            let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n            this.setSpriteFrame(iconNode, row.icon);\r\n        } else {\r\n            iconNode.active = false;\r\n        }\r\n    }\r\n\r\n    refreshSkill1Item(itemUI: Node, num: any) {\r\n        let info = mapModel.skillSystem.skillArr[num - 1];\r\n        let iconNode = find(\"icon\", itemUI);\r\n        if (info) {\r\n            iconNode.active = true;\r\n            let row = designManager.getRowById(constants.tableName.skill, info.id);\r\n            this.setSpriteFrame(iconNode, row.icon);\r\n        } else {\r\n            iconNode.active = false;\r\n        }\r\n    }\r\n\r\n    refreshSelectLayer() {\r\n        let arr = mapModel.mapSystem.getSelectItemArr();\r\n        this.selectItemLayer.initUI(this, arr, this.refreshSelectItem.bind(this));\r\n    }\r\n\r\n    refreshSelectItem(itemUI: any, item: any) {\r\n        cocosUtil.setRenderableColor(itemUI, Color.WHITE, true);\r\n        let newNode = find(\"new\", itemUI);\r\n        let info = item.info;\r\n        if (info) {\r\n            newNode.active = false;\r\n        } else {\r\n            newNode.active = true;\r\n            Tween.stopAllByTarget(newNode);\r\n            cocosUtil.tweenBreath(newNode, 0.5, 1.1);\r\n        }\r\n\r\n        let row = null;\r\n        switch (item.name) {\r\n            case constants.tableName.weapon:\r\n            case constants.tableName.skill:\r\n            case constants.tableName.skill2:\r\n                let id = designManager.getFirstIdByType(item.type);\r\n                if (info) {\r\n                    id = info.id + 1;\r\n                }\r\n                row = designManager.getRowById(item.name, id);\r\n                break;\r\n            case constants.tableName.prop:\r\n                row = designManager.getRowById(item.name, item.id);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (!row) {\r\n            myLog.e(\"row is undefined:\", row, item);\r\n        }\r\n        itemUI.row = row;\r\n        this.setString(find(\"name\", itemUI), row.name);\r\n\r\n        this.setSpriteFrame(find(\"icon\", itemUI), row.icon);\r\n        this.setString(find(\"info\", itemUI), row.info);\r\n\r\n        let btnDoubleSelect = find(\"btnDoubleSelect\", itemUI);\r\n        btnDoubleSelect.active = false;\r\n        let selectEffect = find(\"selectEffect\", itemUI);\r\n        selectEffect.active = false;\r\n        cocosUtil.addComponentOnce(selectEffect, AnimationCtrl);\r\n\r\n        let starLayer = find(\"starLayer\", itemUI);\r\n        let bgNode = find(\"bg\", itemUI);\r\n        let bg2Node = find(\"bg2\", itemUI);\r\n        if (row.lv >= constants.design.maxLv) {\r\n            bgNode.active = false;\r\n            bg2Node.active = true;\r\n        } else {\r\n            bgNode.active = true;\r\n            bg2Node.active = false;\r\n        }\r\n        if (item.name == constants.tableName.prop) {\r\n            starLayer.active = false;\r\n        } else {\r\n            starLayer.active = true;\r\n            this.setNumItemLayer(starLayer, constants.design.maxLv, (starItemUI: Node, starLv: number) => {\r\n                let uiOpacity = starItemUI.getComponent(UIOpacity);\r\n                uiOpacity.opacity = 255;\r\n                Tween.stopAllByTarget(uiOpacity);\r\n\r\n                let starIcon = find(\"icon\", starItemUI);\r\n                let starIcon2 = find(\"icon2\", starItemUI);\r\n                let yinIcon = find(\"yin\", starItemUI);\r\n                if (row.lv >= starLv) {\r\n                    yinIcon.active = false;\r\n                    if (row.lv == constants.design.maxLv) {\r\n                        starIcon.active = false;\r\n                        starIcon2.active = true;\r\n                    } else {\r\n                        starIcon.active = true;\r\n                        starIcon2.active = false;\r\n                    }\r\n                    if (row.lv == starLv) {\r\n                        cocosUtil.tweenBlink(starItemUI, 0.3);\r\n                        itemUI.starNode = starItemUI;\r\n                    }\r\n                } else {\r\n                    yinIcon.active = true;\r\n                    starIcon.active = false;\r\n                    starIcon2.active = false;\r\n                }\r\n            });\r\n            if (row.lv <= constants.design.maxLv - 1) {\r\n                btnDoubleSelect.active = true;\r\n            }\r\n        }\r\n\r\n        let combLayer = find(\"comb\", itemUI);\r\n        if (row.skillArr) {\r\n            combLayer.active = true;\r\n            let iconNode = find(\"icon\", combLayer);\r\n            let skillId = 0;\r\n            utilTools.forArr(row.skillArr, (type: number) => {\r\n                let sInfo = mapModel.skillSystem.getSkillInfoByType(type);\r\n                if (sInfo) {\r\n                    skillId = sInfo.id;\r\n                    return true;\r\n                }\r\n            });\r\n            if (skillId == 0) {\r\n                skillId = designManager.getFirstIdByType(row.skillArr[0])\r\n            }\r\n            let skillRow = designManager.getRowById(constants.tableName.skill, skillId);\r\n            this.setSpriteFrame(iconNode, skillRow.icon);\r\n            Tween.stopAllByTarget(iconNode);\r\n            tween(iconNode).delay(1).to(0.3, { scale: v3(1.5, 1.5, 1) }).to(0.15, { scale: v3(1, 1, 1) }).union().repeatForever().start();\r\n        } else {\r\n            combLayer.active = false;\r\n        }\r\n    }\r\n\r\n    mapLeaveRet() {\r\n        this.closeLayer();\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnRefresh() {\r\n        if (this.hasSelect) {\r\n            return;\r\n        }\r\n        if (playerModel.skillFreeRefreshCount > 0) {\r\n            sdkManager.openAd(\"3选1刷新\", (st: number) => {\r\n                if (st == 1) {\r\n                    this.refreshSelectLayer();\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        playerModel.skillFreeRefreshCount++;\r\n        this.refreshSelectLayer();\r\n        this.refreshInfoLayer();\r\n    }\r\n\r\n    onClickBtnGetAll() {\r\n        if (this.hasSelect) {\r\n            return;\r\n        }\r\n        sdkManager.openAd(\"3选1欧皇附体\", (st: number) => {\r\n            if (st == 1) {\r\n                mapModel.skillAllNum--;\r\n                this.hasSelect = true;\r\n                let arr = [];\r\n                this.selectItemLayer.node.children.forEach((node: any) => {\r\n                    arr.push(node);\r\n                });\r\n                let tempFunc = () => {\r\n                    let node = arr.shift();\r\n                    if (!node) {\r\n                        this.goNext();\r\n                        return;\r\n                    }\r\n                    this.doSelectItem(node, false, () => {\r\n                        tempFunc();\r\n                    });\r\n                };\r\n                tempFunc();\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    doSelectItem(node: any, isYin = true, callback?: Function, isDouble: boolean = false) {\r\n        let starNode: Node = node.starNode;\r\n        let item = node.item;\r\n        let row = node.row;\r\n        utilTools.waterfall([\r\n            (result: any, cb: Function) => {\r\n                if (isYin) {\r\n                    // 弱化其它选项\r\n                    utilTools.forArr(this.selectItemLayer.node.children, (itemUI: Node) => {\r\n                        if (node == itemUI) {\r\n                            return;\r\n                        }\r\n                        cocosUtil.setRenderableColor(itemUI, constants.colors.yin, true);\r\n                    });\r\n                }\r\n                if (starNode && starNode.activeInHierarchy) {\r\n                    // 星星选中特效\r\n                    let selectEffect = find(\"selectEffect\", node);\r\n                    selectEffect.active = true;\r\n                    let pos = cocosUtil.convertToNodeSpace(selectEffect, cocosUtil.convertToWorldSpace(starNode));\r\n                    selectEffect.setPosition(pos);\r\n                    selectEffect.getComponent(AnimationCtrl).playAnimationOnce(\"2\", () => {\r\n                        selectEffect.active = false;\r\n                    });\r\n                    starNode.scale = v3(1, 1, 1);\r\n                    tween(starNode).to(0.1, { scale: v3(1.5, 1.5, 1) }).delay(0.15).to(0.15, { scale: v3(1, 1, 1) }).call(() => {\r\n                        cb();\r\n                    }).start();\r\n                    if (isDouble) {\r\n                        // 连升两星\r\n                        let starNode2 = find(\"starLayer\", node).children[row.lv];\r\n                        if (starNode2) {\r\n                            let selectEffect2 = cocosUtil.instantiate(selectEffect);\r\n                            selectEffect2.parent = selectEffect.parent;\r\n                            pos = cocosUtil.convertToNodeSpace(selectEffect2, cocosUtil.convertToWorldSpace(starNode2));\r\n                            selectEffect2.position = pos;\r\n                            selectEffect2.getComponent(AnimationCtrl).playAnimationOnce(\"2\", () => {\r\n                                selectEffect2.removeFromParent();\r\n                            });\r\n                            starNode2.scale = v3(1, 1, 1);\r\n                            find(\"icon\", starNode2).active = true;\r\n                            tween(starNode2).to(0.1, { scale: v3(1.5, 1.5, 1) }).delay(0.15).to(0.15, { scale: v3(1, 1, 1) }).start();\r\n                        }\r\n                    }\r\n                    return;\r\n                }\r\n                this.scheduleOnce(() => {\r\n                    cb();\r\n                }, 0.2);\r\n            },\r\n            (result: any, cb: Function) => {\r\n                switch (item.name) {\r\n                    case constants.tableName.weapon:\r\n                        mapModel.weaponSystem.addWeapon(item.type);\r\n                        if (isDouble) {\r\n                            mapModel.weaponSystem.addWeapon(item.type);\r\n                        }\r\n                        break;\r\n                    case constants.tableName.skill:\r\n                        mapModel.skillSystem.addSkill(item.type);\r\n                        if (isDouble) {\r\n                            mapModel.skillSystem.addSkill(item.type);\r\n                        }\r\n                        break;\r\n                    case constants.tableName.skill2:\r\n                        mapModel.skillSystem.addSkill2(item.type);\r\n                        if (isDouble) {\r\n                            mapModel.skillSystem.addSkill2(item.type);\r\n                        }\r\n                        break;\r\n                    case constants.tableName.prop:\r\n                        mapModel.propSystem.getProp(item.id);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                cb();\r\n            },\r\n            (result: any, cb: Function) => {\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        ]);\r\n    }\r\n\r\n    goNext() {\r\n        this.layerData.lvCount--;\r\n        if (this.layerData.lvCount > 0) {\r\n            this.initUI();\r\n        } else {\r\n            this.closeLayer();\r\n            if (this.layerCb) {\r\n                this.layerCb();\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickSelectItem(node: any) {\r\n        if (this.hasSelect) {\r\n            return;\r\n        }\r\n        this.hasSelect = true;\r\n        this.doSelectItem(node, true, () => {\r\n            this.goNext();\r\n        });\r\n    }\r\n\r\n    onClickBtnDoubleSelect(node: any) {\r\n        if (this.hasSelect) {\r\n            return;\r\n        }\r\n        sdkManager.openAd(\"3选1连升两星\", (st: number) => {\r\n            if (st == 1) {\r\n                this.hasSelect = true;\r\n                let starNode: Node = node.parent.starNode;\r\n                Tween.stopAllByTarget(starNode.getComponent(UIOpacity));\r\n                starNode.getComponent(UIOpacity).opacity = 255;\r\n                find(\"yin\", starNode).active = true;\r\n                find(\"icon\", starNode).active = false;\r\n                this.scheduleOnce(() => {\r\n                    find(\"yin\", starNode).active = false;\r\n                    find(\"icon\", starNode).active = true;\r\n                    this.doSelectItem(node.parent, true, () => {\r\n                        this.goNext();\r\n                    }, true);\r\n                }, 0.3);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { find, macro, Node, UITransform, _decorator } from 'cc';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { Skill } from '../item/skill/Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkillSystem')\r\nexport class SkillSystem extends BaseLayer {\r\n\r\n    skillArr: any = [];\r\n\r\n    skill2Arr: any = [];\r\n    // 回血定时器\r\n    hasOpenScheculeAddHp: boolean = false;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    getSaveData() {\r\n        let skillData: any = {};\r\n        skillData.skillArr = this.skillArr;\r\n        skillData.skill2Arr = this.skill2Arr;\r\n\r\n        return skillData;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        utilTools.forArr(data.skillArr, (info: any) => {\r\n            this.addSkill(0, info.id);\r\n        });\r\n\r\n        utilTools.forArr(data.skill2Arr, (info: any) => {\r\n            this.addSkill2(0, info.id);\r\n        });\r\n    }\r\n\r\n    // 添加主动技能\r\n    addSkill(type: number, skillId: number = 0) {\r\n        if (skillId > 0) {\r\n            type = designManager.getRowById(constants.tableName.skill, skillId).type;\r\n        }\r\n\r\n        let info = this.getSkillInfoByType(type);\r\n        if (info) {\r\n            // 升级\r\n            let row = designManager.getRowById(constants.tableName.skill, info.id + 1);\r\n            if (!row || row.lv > constants.design.maxLv) {\r\n                // 已满级\r\n                return;\r\n            }\r\n            info.id++;\r\n        } else {\r\n            if (this.skillArr.length >= constants.design.skillNum) {\r\n                // 数量已满\r\n                return;\r\n            }\r\n            // 新增\r\n            info = {};\r\n            info.id = designManager.getFirstIdByType(type);\r\n            this.skillArr.push(info);\r\n        }\r\n\r\n        if (skillId > 0) {\r\n            info.id = skillId;\r\n        }\r\n\r\n        let name = this.getSkillNodeNameByType(type);\r\n        let node = find(name, this.node);\r\n        if (node) {\r\n            let skillUtil = node.getComponent(Skill).skillUtil;\r\n            if (skillUtil && skillUtil.forceDestroy) {\r\n                skillUtil.forceDestroy();\r\n            }\r\n            node.destroy();\r\n            node.parent = null;\r\n        }\r\n\r\n        node = new Node(name);\r\n        node.addComponent(UITransform);\r\n        node.parent = this.node;\r\n        let skill = node.addComponent(Skill);\r\n\r\n        skill.init(info);\r\n        if (skill.skillUtil) {\r\n            skill.skillUtil.timeCount = skill.row.cd;\r\n        }\r\n    }\r\n\r\n    getSkillInfoByType(type: number) {\r\n        for (let i in this.skillArr) {\r\n            let tmp = this.skillArr[i];\r\n            let row = designManager.getRowById(constants.tableName.skill, tmp.id);\r\n            if (row.type == type) {\r\n                return tmp;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getSkillNodeNameByType(type: number) {\r\n        return \"skill\" + type;\r\n    }\r\n\r\n    getSkillCompomentByType(type: number) {\r\n        let name = this.getSkillNodeNameByType(type);\r\n        let node = find(name, this.node);\r\n        if (node) {\r\n            return node.getComponent(Skill);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getSkill2InfoByType(type: number) {\r\n        for (let i = 0; i < this.skill2Arr.length; i++) {\r\n            let info = this.skill2Arr[i];\r\n            let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n            if (type == row.type) {\r\n                return info;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // 添加被动技能\r\n    addSkill2(type: number, skillId: number = 0) {\r\n        if (skillId > 0) {\r\n            type = designManager.getRowById(constants.tableName.skill2, skillId).type;\r\n        }\r\n\r\n        let info = this.getSkill2InfoByType(type);\r\n        if (info) {\r\n            // 升级\r\n            let row = designManager.getRowById(constants.tableName.skill2, info.id + 1);\r\n            if (!row || row.lv > constants.design.maxLv) {\r\n                // 已满级\r\n                return;\r\n            }\r\n            info.id++;\r\n        } else {\r\n            if (this.skill2Arr.length >= constants.design.skillNum) {\r\n                // 数量已满\r\n                return;\r\n            }\r\n            // 新增\r\n            info = {};\r\n            info.id = designManager.getFirstIdByType(type);\r\n            this.skill2Arr.push(info);\r\n        }\r\n\r\n        if (skillId > 0) {\r\n            info.id = skillId;\r\n        }\r\n\r\n        let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n        switch (row.type) {\r\n            case 6:\r\n                // 通知力场技能刷新大小\r\n                let skill = this.getSkillCompomentByType(7);\r\n                if (skill) {\r\n                    skill.skillUtil.initBulletScale();\r\n                }\r\n                break;\r\n            case 7:\r\n                // 每5秒回血\r\n                if (!this.hasOpenScheculeAddHp) {\r\n                    this.hasOpenScheculeAddHp = true;\r\n                    this.schedule(this.playerHpAdd, 5, macro.REPEAT_FOREVER);\r\n                }\r\n                break;\r\n            case 8:\r\n                // 提高生命上限\r\n                mapModel.player.addHpMaxPercent(row.p1);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    playerHpAdd() {\r\n        let hp = this.getSkill2Val(7);\r\n        mapModel.player.addHp(hp);\r\n    }\r\n\r\n    getSkill2Val(type: number) {\r\n        let info = this.getSkill2InfoByType(type);\r\n        if (info) {\r\n            let row = designManager.getRowById(constants.tableName.skill2, info.id);\r\n            return row.p1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    // 减少攻击间隔\r\n    getSkill2AtkCdSubPercent() {\r\n        return this.getSkill2Val(12);\r\n    }\r\n\r\n    // 增加伤害\r\n    getSkill2AtkAddPercent() {\r\n        return this.getSkill2Val(11);\r\n    }\r\n\r\n    // 增加道具吸取距离\r\n    getSkill2PropGetAddDis() {\r\n        return this.getSkill2Val(10);\r\n    }\r\n\r\n    // 金币增加\r\n    getSkill2AddCoin() {\r\n        return this.getSkill2Val(9);\r\n    }\r\n\r\n    // 提升攻击范围\r\n    getSkill2RangeAddScale() {\r\n        return this.getSkill2Val(6);\r\n    }\r\n\r\n    // 减少伤害百分比\r\n    getSkill2DamSubPercent() {\r\n        return this.getSkill2Val(5);\r\n    }\r\n\r\n    // 提升技能持续时间\r\n    getSkill2DurationAddPercent() {\r\n        return this.getSkill2Val(4);\r\n    }\r\n\r\n    // 经验值增加\r\n    getSkill2AddExp() {\r\n        return this.getSkill2Val(3);\r\n    }\r\n\r\n    // 提升玩家移动速度\r\n    getSkill2PlayerSpeedAddPercent() {\r\n        return this.getSkill2Val(2);\r\n    }\r\n\r\n    // 提升子弹飞行速度\r\n    getSkill2BulletSpeedAddPercent() {\r\n        return this.getSkill2Val(1);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        utilTools.forArr(this.node.children, (node: Node) => {\r\n            node.getComponent(Skill).updateLogic(dt);\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkinChangeLayer')\r\nexport class SkinChangeLayer extends BaseLayer {\r\n\r\n    listResetPos = true;\r\n\r\n    btnEquip: Node;\r\n    btnGoGet: Node;\r\n\r\n    choseId: number = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.btnEquip = this.getNodeByPath(\"ui/bottom/btns/btnEquip\");\r\n        this.btnGoGet = this.getNodeByPath(\"ui/bottom/btns/btnGoGet\");\r\n\r\n        this.choseId = UserData.getInstance().heroSkin;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let arr = designManager.getRowsByType(constants.tableName.prop, constants.propTypes.skin);\r\n        this.scrollViewSetData(this.getNodeByPath(\"ui/bottom/list\"), arr, this.refreshSkinItem.bind(this), this.listResetPos);\r\n        this.listResetPos = false;\r\n\r\n        this.setRoleSkin(this.getNodeByPath(\"ui/top/body\"), this.choseId);\r\n        let rank = this.choseId % 2000;\r\n        this.setSpriteFrame2(this.getNodeByPath(\"ui/top/skin\"), \"skin/skin\" + rank, null, \"ui\");\r\n\r\n        this.btnEquip.active = false;\r\n        this.btnGoGet.active = false;\r\n        if (UserData.getInstance().getPropById(this.choseId) > 0) {\r\n            this.btnEquip.active = true;\r\n        } else {\r\n            this.btnGoGet.active = true;\r\n        }\r\n    }\r\n\r\n    refreshSkinItem(itemUI: Node, row: any) {\r\n        this.setSpriteFrame2(find(\"icon\", itemUI), \"prop/\" + row.icon);\r\n        let num = UserData.getInstance().getPropById(row.id);\r\n        let yinNode = find(\"yin\", itemUI);\r\n        let choseNode = find(\"chose\", itemUI);\r\n        if (num > 0) {\r\n            yinNode.active = false;\r\n        } else {\r\n            yinNode.active = true;\r\n        }\r\n        if (row.id == this.choseId) {\r\n            choseNode.active = true;\r\n        } else {\r\n            choseNode.active = false;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickSkinItem(node: any) {\r\n        let row = node.item;\r\n        this.choseId = row.id;\r\n        this.initUI();\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n    onClickBtnGoGet() {\r\n        this.closeLayer();\r\n        let obj: any = {\r\n            layerName: constants.layers.RewardSkinLayer\r\n        };\r\n        if (this.choseId % 2000 == 5) {\r\n            obj.layerName = constants.layers.DaySignLayer;\r\n        }\r\n        eventManager.send(msgac.jumpLayer, obj);\r\n    }\r\n\r\n    onClickBtnEquip() {\r\n        let num = UserData.getInstance().getPropById(this.choseId);\r\n        if (num <= 0) {\r\n            this.createNotice(localText.notHas);\r\n            return;\r\n        }\r\n        UserData.getInstance().heroSkin = this.choseId;\r\n        this.createNotice(localText.equipSuccess);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, find, Tween, tween, UIOpacity, _decorator } from 'cc';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('targetPos')\r\nexport class targetPos extends Component {\r\n\r\n    hint: Hint;\r\n    body2Opacity: UIOpacity;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        if (!this.body2Opacity) {\r\n            this.body2Opacity = find(\"body2\", this.node).getComponent(UIOpacity);\r\n        }\r\n        Tween.stopAllByTarget(this.body2Opacity);\r\n\r\n        this.body2Opacity.opacity = 80;\r\n        tween(this.body2Opacity).to(0.2, { opacity: 255 }).to(0.2, { opacity: 80 }).union().repeatForever().start();\r\n\r\n        let time = this.hint.extraObj;\r\n        this.scheduleOnce(() => {\r\n            this.hint.recycleSelf();\r\n        }, time);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, find, Tween, tween, UIOpacity, v3, _decorator } from 'cc';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('targetPos2')\r\nexport class targetPos2 extends Component {\r\n\r\n    hint: Hint;\r\n    body2Opacity: UIOpacity;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        if (!this.body2Opacity) {\r\n            this.body2Opacity = find(\"body2\", this.node).getComponent(UIOpacity);\r\n        }\r\n        Tween.stopAllByTarget(this.body2Opacity);\r\n\r\n        this.body2Opacity.opacity = 0;\r\n        tween(this.body2Opacity).to(0.5, { opacity: 255 }).start();\r\n\r\n        this.node.scale = v3(1, 1, 1);\r\n        tween(this.node).to(0.6, { scale: v3(0.2, 0.2, 1) }).start();\r\n\r\n        this.hint.extraObj(this);\r\n\r\n        this.scheduleOnce(() => {\r\n            this.hint.recycleSelf();\r\n        }, 1);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, tween, UITransform, v3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Hint, HintNames } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('targetPos3')\r\nexport class targetPos3 extends Component {\r\n\r\n    hint: Hint;\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        this.node.scale = v3(4, 4, 1);\r\n        tween(this.node).to(0.3, { scale: v3(0.9, 0.9, 1) }).to(0.1, { scale: v3(1.1, 1.1, 1) }).to(0.1, { scale: v3(1, 1, 1) }).call(() => {\r\n            this.hint.recycleSelf();\r\n            let worldPos = cocosUtil.convertToWorldSpace(this.node);\r\n            worldPos.y += this.node.getComponent(UITransform).height * 0.5;\r\n            mapModel.hintSystem.addHint(HintNames.comeShine, worldPos, 0, this.hint.extraObj);\r\n        }).start();\r\n    }\r\n\r\n}\r\n\r\n","import { _decorator, Component, Node , sys, director} from 'cc';\r\nimport { tyqSDK } from '../tyqSDK';\r\nimport { GNetConf } from './conf';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TimeCtr')\r\nexport default class TimeCtr extends Component{\r\n\r\n    private static instance:TimeCtr = null!;\r\n\r\n    public static GetInstance(){\r\n        if (!this.instance) {\r\n            this.instance = new TimeCtr();\r\n            this.instance.InitTimeCtr();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    urls:string[] = [\r\n        \r\n        // \"http://124.71.202.184/time.php\",\r\n        // \"http://192.168.0.113/time.php\",\r\n        // 'https://otheve.beacon.qq.com/analytics/upload?tp=js',//tx2\r\n        tyqSDK.getUrl().httpUrl+'/isAlive',\r\n        // \"http://www.baidu.com\",//百度\r\n        // 'http://vv.video.qq.com/checktime?otype=json',//tx1\r\n        // 'http://api.m.taobao.com/rest/api3.do?api=mtop.common.getTimestamp',//tb //http://api.m.taobao.com/rest/api3.do?api=mtop.common.getTimestamp\r\n        // 'http://quan.suning.com/getSysTime.do',//sn http://quan.suning.com/getSysTime.do\r\n    ];\r\n\r\n    public serverTime:number = 0;\r\n    public diffServerTime:number = 0;\r\n    public isRunServerTime:boolean =false;\r\n    loginTime:string = '';\r\n    public curSystemDate = 0;\r\n    \r\n    InitTimeCtr(){\r\n\r\n    }\r\n\r\n    UpdateServerTime(time:number){\r\n        director.getScheduler().unschedule(this.updateTimer,this)\r\n        // time = new Date().getTime();// 修改服务器时间为本地进行测试 !!\r\n        this.serverTime = time;\r\n        this.curSystemDate = time;\r\n        // console.log(\"date:\",new Date(time))\r\n        director.getScheduler().schedule(this.updateTimer, this, 1);\r\n        // let now = new Date(time);\r\n        // console.log(\"now:\",now,now.getFullYear(),now.getMonth()+1,now.getDate(),\"星期:\"+now.getDay())\r\n    }\r\n\r\n    UpdateServerTimeByHeartbeat(time:number){\r\n        // console.warn(\"---时间同步----\", time)\r\n        this.serverTime = time;\r\n        this.curSystemDate = time;\r\n    }\r\n\r\n    ReInit(){\r\n       director.getScheduler().unschedule(this.updateTimer,this)\r\n    }\r\n\r\n    public updateTimer() {\r\n\t\t// this.serverTime += 1000;\r\n        this.isRunServerTime = true;\r\n        // 检查是否隔天了..\r\n        // if (App.center.GetNowDateString() != this.loginTime && this.loginTime != '') {\r\n        //     App.Instance.InitCtr();\r\n        //     this.loginTime = App.center.GetNowDateString();\r\n        // }\r\n\t}\r\n\r\n    get ServerTime(){\r\n        if (this.serverTime != 0) {\r\n            return this.serverTime;\r\n        }\r\n        return Date.now();\r\n    }\r\n\r\n    get ServerDate(){\r\n        if (this.serverTime != 0) {\r\n            return new Date(this.serverTime);\r\n        }\r\n    }\r\n\r\n    public async RequestTime(call:Function) {\r\n        for (let i = 0; i < this.urls.length; i++) {\r\n            const url = this.urls[i];\r\n            let isOk = false;\r\n            let result:any = {};\r\n            await this.request(url).then((r)=>{\r\n                isOk = true;\r\n                result = r;\r\n            }).catch((r)=>{\r\n                isOk = false;\r\n                result = r;\r\n            })\r\n\r\n            if (isOk) {\r\n                call(result);\r\n                return;\r\n            }\r\n        }\r\n\r\n        call({result:false});\r\n\t\t// let xhr = cc.loader.getXMLHttpRequest();\r\n\t\t// xhr.timeout = 1000*3 ;\r\n\t\t// xhr.onreadystatechange = () => {\r\n\t\t// \t// console.log(\"statusText:\",self.xhr.statusText);\r\n\t\t// \tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t// \t\tlet respone = xhr.responseText;\r\n\t\t// \t\tif (!respone) {\r\n\t\t// \t\t\tconsole.log('http error', respone);\r\n\t\t// \t\t\treturn;\r\n\t\t// \t\t}\r\n\t\t// \t\tconsole.log('收到的消息:',respone);\r\n        //         let message = JSON.parse(respone);\r\n        //         if (message.result == 200) {\r\n        //             // console.log(\"serverTime:\",message.serverTime);\r\n        //             let time = Number(message.serverTime);\r\n        //             // let date = new Date(time);\r\n        //             // console.log(\"date:\",date)\r\n        //             call({result:true,time:time});\r\n        //         }\r\n                \r\n\t\t// \t}\r\n        //     // console.log(\"xhr.getAllResponseHeaders():\",xhr.getAllResponseHeaders())\r\n\t\t// };\r\n\r\n\t\t// xhr.ontimeout = (res) => {\r\n\t\t// \tconsole.log('ontimeout:', res);\r\n        //     call({result:false})\r\n\t\t// \t// NetMgr.getInstance ().repeatNet(mid);\r\n\t\t// };\r\n\r\n\t\t// xhr.onerror = (error) => {\r\n\t\t// \t// 尝试重新发送\r\n\t\t// \tconsole.log('http.POST Error', error);\r\n        //     call({result:false})\r\n\t\t// };\r\n\t\t// let url = this.urls[0];\r\n\t\t// console.log('url:', url);\r\n\t\t// xhr.open('POST', url, true);\r\n        // xhr.setRequestHeader('Content-Type', 'application/json;charset=utf-8');\r\n        \r\n\r\n\t\t// // xhr.send(JSON.stringify(msg));\r\n        // xhr.send();\r\n\t}\r\n\r\n\r\n    private request(url:string){\r\n        return new Promise((resolve,reject)=>{\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.timeout = 1000*3 ;\r\n            xhr.onreadystatechange = () => {\r\n                console.log(\"statusText:\",xhr.statusText);\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    let respone = xhr.responseText;\r\n                    if (!respone) {\r\n                        console.log('http error', respone);\r\n                        return;\r\n                    }\r\n                    console.log('收到的消息:',respone);\r\n                    let message = JSON.parse(respone);\r\n                    // if (message.result == 200) {\r\n                    //     // console.log(\"serverTime:\",message.serverTime);\r\n                        \r\n                    // }\r\n                    // else{\r\n                    //     reject({result:false})\r\n                    // }\r\n                    if (message.serverTime) {\r\n                        let time = Number(message.serverTime);\r\n                        resolve({result:true,time:time});\r\n                    }\r\n                    else{\r\n                        reject({result:false})\r\n                    }\r\n                    \r\n                }\r\n                // else{\r\n                //     reject({result:false})\r\n                // }\r\n            };\r\n\r\n            xhr.ontimeout = (res) => {\r\n                // console.log('ontimeout:', res);\r\n                reject({result:false})\r\n                // NetMgr.getInstance ().repeatNet(mid);\r\n            };\r\n\r\n            xhr.onerror = (error) => {\r\n                // 尝试重新发送\r\n                // console.log('http.POST Error', error);\r\n                reject({result:false})\r\n            };\r\n            // console.log('url:', url);\r\n            xhr.open('POST', url, true);\r\n            xhr.setRequestHeader('Content-Type', 'application/json');\r\n            \r\n\r\n            // xhr.send(JSON.stringify(msg));\r\n            xhr.send();\r\n        })\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Label, Node, ProgressBar, tween, v3, Vec3, view, _decorator } from 'cc';\r\nimport { CountTimeUtil } from '../../../utils/CountTimeUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TopUILayer')\r\nexport class TopUILayer extends BaseUILayer {\r\n\r\n    @property({ type: Label, tooltip: \"体力标签\" }) powerLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"宝石标签\" }) baoshiLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"金币标签\" }) coinLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"玩家等级\" }) lvLabel: Label = null;\r\n    @property({ type: Node, tooltip: \"使用展示\" }) showNode: Node = null;\r\n    @property({ type: ProgressBar, tooltip: \"经验进度条\" }) expBar: ProgressBar = null;\r\n\r\n    @property({ type: Label, tooltip: \"体力时间\" }) tiliLabel: Label = null;\r\n    @property({ type: Node }) clearBtn: Node = null;\r\n\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.initLayout()\r\n    }\r\n\r\n    onEnable() {\r\n        eventManager.on(msgac.commonResRefresh, this.updateData, this);\r\n        this.clearBtn.active = false//playerModel.isInDevelopmentEnvironment()  //cocosUtil.isDesktopBrowser();\r\n    }\r\n\r\n    initLayout() {\r\n        let screen1 = view.getVisibleSize()\r\n        let scale = this.getScreenScale()\r\n        if (screen1.height / screen1.width > 2) {\r\n            this.node.position = new Vec3(this.node.position.x, screen1.height / scale / 2 - 220, this.node.position.z)\r\n        } else {\r\n            this.node.position = new Vec3(this.node.position.x, screen1.height / scale / 2 - 160, this.node.position.z)\r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.updateData()\r\n    }\r\n\r\n    showUseAnimal(type, num) {\r\n        this.showNode.active = true\r\n        this.showNode.getChildByName(\"numLabel\").getComponent(Label).string = \"\" + num\r\n        tween(this.showNode).show().set({ position: v3(-88, -9, 0) }).to(0.5, { position: v3(-88, -39, 0) }).hide().start()\r\n        this.updateData()\r\n    }\r\n\r\n    onDisable() {\r\n        eventManager.off(msgac.commonResRefresh, this.updateData, this);\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n    }\r\n\r\n    updateData() {\r\n        this.powerLabel.string = UserData.getInstance().power + \"/\" + designManager.config.energyMax\r\n        this.baoshiLabel.string = UserData.getInstance().baoshi + \"\"\r\n        this.coinLabel.string = UserData.getInstance().coin + \"\"\r\n        this.lvLabel.string = UserData.getInstance().roleLv + \"\"\r\n        this.expBar.progress = Math.min(1, UserData.getInstance().roleExp / UserData.getInstance().getNextLevelExp())\r\n        if (this.tiliLabel.node.getComponent(CountTimeUtil)) {\r\n            this.tiliLabel.node.getComponent(CountTimeUtil).setTime(UserData.getInstance().getCountTime(), function () {\r\n                UserData.getInstance().checkPowerTime()\r\n                eventManager.send(msgac.commonResRefresh);\r\n            })\r\n        }\r\n\r\n        UserData.getInstance().saveData()\r\n    }\r\n\r\n    clearData() {\r\n        UserData.getInstance().remove()\r\n    }\r\n\r\n    showRewardItem(event, data) {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (data == 1) {\r\n            if (UserData.getInstance().power < designManager.config.energyMax) {\r\n                this.openLayer(constants.layers.RewardItemLayer, { propId: 105, num: Math.min(designManager.config.adenergy, designManager.config.energyMax - UserData.getInstance().power) })\r\n            }\r\n        } else if (data == 2) {\r\n            this.openLayer(constants.layers.RewardItemLayer, { propId: 801, num: designManager.config.adDiamond })\r\n        } else if (data == 3) {\r\n            this.openLayer(constants.layers.RewardItemLayer, { propId: 104, num: designManager.config.adCoin })\r\n        }\r\n    }\r\n}\r\n\r\n","import { find, Node, _decorator } from 'cc';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TowerFloorLayer')\r\nexport class TowerFloorLayer extends BaseLayer {\r\n\r\n    floorLayer: Node;\r\n    floor: number = 1;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.floorLayer = this.getNodeByPath(\"ui/floorLayer\");\r\n\r\n        if (tyqSDK.getSwitchValue(\"tyq_HeroLayer_open\") != 1) {\r\n            this.getNodeByPath(\"ui/btnRole\").active = false\r\n        }\r\n\r\n        if (tyqSDK.channel != ChannelFlag.WECHAT_JJWS) {\r\n            this.getNodeByPath(\"ui/btnRole\").active = true\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let arr = [];\r\n        let mapId = this.layerData.id;\r\n        let floor = UserData.getInstance().getTowerMapInfo(mapId).floor;\r\n        this.floor = floor;\r\n        let tmp = 2;\r\n        while (true) {\r\n            let f = floor - tmp;\r\n            tmp--;\r\n            if (tmp < 0) {\r\n                break;\r\n            }\r\n            if (f <= 0) {\r\n                continue;\r\n            }\r\n            arr.push(f);\r\n        }\r\n        let maxFloor = designManager.getTable(constants.tableName.towerFloor).length;\r\n        tmp = floor;\r\n        while (arr.length <= 7) {\r\n            arr.push(tmp);\r\n            tmp++;\r\n            if (tmp > maxFloor) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        this.setItemLayer(this.floorLayer, arr, this.refreshFloorItem.bind(this));\r\n    }\r\n\r\n    refreshFloorItem(itemUI: any, floor: number) {\r\n        this.setString(find(\"floor\", itemUI), floor);\r\n        let aniCtrl: AnimationCtrl = cocosUtil.addComponentOnce(find(\"spine\", itemUI), AnimationCtrl);\r\n\r\n        let mapId = this.layerData.id;\r\n        let nowFloor = UserData.getInstance().getTowerMapInfo(mapId).floor;\r\n\r\n        if (nowFloor == floor) {\r\n            aniCtrl.playAnimationOnce(\"a2\", () => {\r\n                aniCtrl.playAnimation(\"a3\", true);\r\n            });\r\n        } else if (floor > nowFloor) {\r\n            aniCtrl.playAnimation(\"a1\", true);\r\n        } else {\r\n            aniCtrl.playAnimation(\"a4\", true);\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnRole() {\r\n        this.openLayer(constants.layers.TowerRoleLayer);\r\n    }\r\n\r\n    onClickFloorItem(node) {\r\n        let floor = node.item;\r\n        let mapId = this.layerData.id;\r\n        if (floor != UserData.getInstance().getTowerMapInfo(mapId).floor) {\r\n            return;\r\n        }\r\n        // this.closeLayer();\r\n        mapModel.enterMapWithMapId(mapId, floor);\r\n        tyqSDK.eventSendCustomEvent(\"参与无尽模式\")\r\n    }\r\n\r\n}\r\n\r\n","import { Animation, find, Node, ScrollView, _decorator } from 'cc';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { AnimationCtrl } from '../base/AnimationCtrl';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TowerLayer')\r\nexport class TowerLayer extends BaseLayer {\r\n\r\n    qianShouNode: Node;\r\n    dianJvNode: Node;\r\n    xieZiNode: Node;\r\n    nianChouNode: Node;\r\n    paoDangRenNode: Node;\r\n\r\n    btnsLayer: Node;\r\n\r\n    onLoad() {\r\n        this.layerName = constants.layers.TowerLayer;\r\n        super.onLoad();\r\n\r\n        this.btnsLayer = this.getNodeByPath(\"ui/listNoUtil/view/content/map\");\r\n        let chs = this.btnsLayer.children;\r\n        for (let i = 0; i < chs.length; i++) {\r\n            find(\"monster\", chs[i]).addComponent(AnimationCtrl);\r\n            let textNode = find(\"name/text\", chs[i]);\r\n            let row = designManager.getRowById(constants.tableName.map, 101 + i);\r\n            this.setString(textNode, row.name)\r\n        }\r\n        this.qianShouNode = find(\"monster\", chs[0]);\r\n        this.dianJvNode = find(\"monster\", chs[1]);\r\n        this.xieZiNode = find(\"monster\", chs[2]);\r\n        this.nianChouNode = find(\"monster\", chs[4]);\r\n        this.paoDangRenNode = find(\"monster\", chs[5]);\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.getNodeByPath(\"ui/listNoUtil\").getComponent(ScrollView).scrollToTop();\r\n        let chs = this.btnsLayer.children;\r\n        for (let i = 0; i < chs.length; i++) {\r\n            let itemUI = chs[i];\r\n            let row = designManager.getRowById(constants.tableName.map, 100 + i + 1);\r\n            // @ts-ignore\r\n            itemUI.row = row;\r\n            this.setString(find(\"name\", itemUI), row.name);\r\n            let handNode = find(\"hand\", itemUI);\r\n            if (handNode) {\r\n                handNode.active = false;\r\n            }\r\n            if (this.needHand()) {\r\n                if (i == 0) {\r\n                    itemUI.active = true;\r\n                    handNode.active = true;\r\n                } else {\r\n                    itemUI.active = false;\r\n                }\r\n            } else {\r\n                itemUI.active = true;\r\n            }\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.startQianShouUpdate();\r\n            if (!this.needHand()) {\r\n                this.startDianJvUpdate();\r\n                this.startXieziUpdate();\r\n                this.startNianChouUpdate();\r\n                this.startPaoDangRenUpdate();\r\n            }\r\n        }, 1 + Math.random());\r\n    }\r\n\r\n    needHand() {\r\n        let floorId = UserData.getInstance().getTowerMapInfo(101).floor;\r\n        if (floorId <= 1) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    startPaoDangRenUpdate() {\r\n        if (Math.random() > 0.3) {\r\n            if (this.paoDangRenNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.paoDangRenNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startPaoDangRenUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            let name = Math.random() > 0.7 ? \"attack1\" : \"attack3\";\r\n            if (name == \"attack1\") {\r\n                let num = Math.random();\r\n                if (num < 0.33) {\r\n                    name = \"attackHand1\";\r\n                } else if (num < 0.66) {\r\n                    name = \"attackHand2\";\r\n                } else {\r\n                    name = \"attackHand3\";\r\n                }\r\n            }\r\n            let animation = this.paoDangRenNode.getComponent(Animation);\r\n            animation.pause();\r\n            this.paoDangRenNode.getComponent(AnimationCtrl).playAnimationOnce(name, () => {\r\n                animation.resume();\r\n                this.startPaoDangRenUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    startNianChouUpdate() {\r\n        if (Math.random() > 0.2) {\r\n            if (this.nianChouNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.nianChouNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startNianChouUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            this.nianChouNode.getComponent(AnimationCtrl).playAnimationOnce(\"attack1\", () => {\r\n                this.startNianChouUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    startXieziUpdate() {\r\n        if (Math.random() > 0.2) {\r\n            if (this.xieZiNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.xieZiNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startXieziUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            let name = Math.random() > 0.5 ? \"attack1\" : \"attack4\";\r\n            this.xieZiNode.getComponent(AnimationCtrl).playAnimationOnce(name, () => {\r\n                this.startXieziUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    startDianJvUpdate() {\r\n        if (Math.random() > 0.3) {\r\n            if (this.dianJvNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.dianJvNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startDianJvUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            let name = Math.random() > 0.5 ? \"attack1\" : \"attack2\";\r\n            this.dianJvNode.getComponent(AnimationCtrl).playAnimationOnce(name, () => {\r\n                this.startDianJvUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    startQianShouUpdate() {\r\n        if (Math.random() > 0.5) {\r\n            if (this.qianShouNode.getComponent(AnimationCtrl).spineSkeleton.animation != \"walk\") {\r\n                this.qianShouNode.getComponent(AnimationCtrl).playAnimation(\"walk\", true);\r\n            }\r\n            this.scheduleOnce(() => {\r\n                this.startQianShouUpdate();\r\n            }, 1 + Math.random());\r\n        } else {\r\n            this.qianShouNode.getComponent(AnimationCtrl).playAnimationOnce(\"attack\", () => {\r\n                this.startQianShouUpdate();\r\n            });\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    openTowerFloorLayer(mapId: number) {\r\n        let obj = {\r\n            id: mapId\r\n        };\r\n        this.openLayer(constants.layers.TowerFloorLayer, obj);\r\n    }\r\n\r\n    onClickBtnTower(node: any) {\r\n        let row = node.row;\r\n        this.openTowerFloorLayer(row.id);\r\n    }\r\n\r\n}\r\n\r\n","import { Color, find, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TowerRoleLayer')\r\nexport class TowerRoleLayer extends BaseLayer {\r\n\r\n    propItemUIArr = [];\r\n\r\n    atkNode: Node;\r\n    hpNode: Node;\r\n\r\n    weaponList: Node;\r\n\r\n    costPropIcon: Node;\r\n    costPropNum: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        let chs = this.getNodeByPath(\"ui/herobg/propLeft\").children;\r\n        for (let i in chs) {\r\n            this.propItemUIArr.push(chs[i]);\r\n        }\r\n        chs = this.getNodeByPath(\"ui/herobg/propRight\").children;\r\n        for (let i in chs) {\r\n            this.propItemUIArr.push(chs[i]);\r\n        }\r\n\r\n        this.atkNode = this.getNodeByPath(\"ui/herobg/attackbg/Label\");\r\n        this.hpNode = this.getNodeByPath(\"ui/herobg/lifebg/Label\");\r\n\r\n        this.weaponList = this.getNodeByPath(\"ui/herobg/list\");\r\n\r\n        this.costPropIcon = this.getNodeByPath(\"ui/herobg/bar/btnOpt/info/icon\");\r\n        this.costPropNum = this.getNodeByPath(\"ui/herobg/bar/btnOpt/info/num\");\r\n\r\n        this.setRoleSkin(this.getNodeByPath(\"ui/herobg/role\"));\r\n\r\n        // test\r\n        // UserData.getInstance().addPropNum(106, 99999);\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let idArr = UserData.getInstance().wearProp;\r\n        for (let i = 0; i < idArr.length; i++) {\r\n            let itemUI = this.propItemUIArr[i];\r\n            let emptyNode = find(\"empty\", itemUI);\r\n            let uiNode = find(\"ui\", itemUI);\r\n            let id = idArr[i];\r\n            if (i == 0) {\r\n                id = UserData.getInstance().$towerWeaponId;\r\n            }\r\n            if (id > 0) {\r\n                itemUI.id = id;\r\n                emptyNode.active = false;\r\n                uiNode.active = true;\r\n                this.setPropItemIcon(uiNode, id);\r\n                this.setWeaponbLv(find(\"lv\", uiNode), id);\r\n            } else {\r\n                itemUI.id = 0;\r\n                emptyNode.active = true;\r\n                uiNode.active = false;\r\n            }\r\n        }\r\n\r\n        let info = UserData.getInstance().getTowerRoleProInfo();\r\n        this.setString(this.atkNode, info.atk);\r\n        this.setString(this.hpNode, info.hp);\r\n\r\n        this.scrollViewSetData(this.weaponList, UserData.getInstance().$towerWeaponIdArr, this.refreshWeaponItem.bind(this));\r\n\r\n        let lv = UserData.getInstance().getWeaponLv(UserData.getInstance().$towerWeaponId);\r\n        let row = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n        let propRow = designManager.getRowById(constants.tableName.prop, row.propId);\r\n\r\n        let nextRow = designManager.getRowById(constants.tableName.weaponOpt, lv + 1);\r\n        if (nextRow) {\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/Label\").active = true;\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/info\").active = true;\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/max\").active = false;\r\n\r\n            this.setSpriteFrame(this.costPropIcon, propRow.icon);\r\n            this.setString(this.costPropNum, \"X\" + row.propNum);\r\n            if (UserData.getInstance().getPropNumById(row.propId) >= row.propNum) {\r\n                cocosUtil.setRenderableColor(this.costPropNum, Color.WHITE);\r\n            } else {\r\n                cocosUtil.setRenderableColor(this.costPropNum, Color.RED);\r\n            }\r\n        } else {\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/Label\").active = false;\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/info\").active = false;\r\n            this.getNodeByPath(\"ui/herobg/bar/btnOpt/max\").active = true;\r\n        }\r\n\r\n        this.setSpriteFrame(this.getNodeByPath(\"ui/itemLayer/icon\"), propRow.icon);\r\n        this.setNumString(this.getNodeByPath(\"ui/itemLayer/num\"), UserData.getInstance().getPropNumById(row.propId));\r\n\r\n    }\r\n\r\n    setPropItemIcon(itemUI: Node, id: number) {\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        let icon = \"prop/\" + row.icon;\r\n        if (row.type == 11) {\r\n            let wRow = designManager.getRowById(constants.tableName.weapon, row.weaponid);\r\n            icon = \"weapon/\" + wRow.icon;\r\n        }\r\n        this.setSpriteFrame2(find(\"icon\", itemUI), icon);\r\n        this.setSpriteFrame2(find(\"bg\", itemUI), \"prop/propbg\" + row.quality);\r\n    }\r\n\r\n    setWeaponbLv(lvNode: Node, id: number) {\r\n        if (!lvNode) {\r\n            return;\r\n        }\r\n        let lv = UserData.getInstance().getWeaponLv(id);\r\n        this.setString(lvNode, localText.lv + lv);\r\n    }\r\n\r\n    refreshWeaponItem(itemUI: Node, id: number) {\r\n        this.setPropItemIcon(itemUI, id);\r\n        this.setWeaponbLv(find(\"lv\", itemUI), id);\r\n        let choseNode = find(\"chose\", itemUI);\r\n        if (id == UserData.getInstance().$towerWeaponId) {\r\n            choseNode.active = true;\r\n        } else {\r\n            choseNode.active = false;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickPropItem(node: any) {\r\n        let id = node.id;\r\n        if (id > 0) {\r\n            let row = designManager.getRowById(constants.tableName.prop, id);\r\n            let obj: any = { propId: id };\r\n            if (row.type == 11) {\r\n                obj.weaponLv = UserData.getInstance().getWeaponLv();\r\n            }\r\n            this.openLayer(constants.layers.PropInfoLayer, obj);\r\n        }\r\n    }\r\n\r\n    onClickWeaponItem(node: any) {\r\n        let id = node.item;\r\n        UserData.getInstance().$towerWeaponId = id;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnOpt() {\r\n        let ret = UserData.getInstance().towerWeaponAddLv();\r\n        switch (ret.st) {\r\n            case 1:\r\n                this.initUI();\r\n                break;\r\n            case 2:\r\n                this.createNotice(localText.maxLv);\r\n                break;\r\n            case 3:\r\n                this.showLackItem(ret.propId);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnSkin() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SkinChangeLayer, () => {\r\n            this.setRoleSkin(this.getNodeByPath(\"ui/herobg/role\"));\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","import { Node, tween, v3, _decorator } from 'cc';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TransLayer')\r\nexport class TransLayer extends BaseLayer {\r\n\r\n    iconNode: Node;\r\n    blackNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.iconNode = this.getNodeByPath(\"icon\");\r\n        this.blackNode = this.getNodeByPath(\"black\");\r\n    }\r\n\r\n    initUI() {\r\n        this.blackNode.active = false;\r\n        this.iconNode.scale = v3(5, 5, 1);\r\n        tween(this.iconNode).to(0.5, { scale: v3(0.05, 0.05, 1) }, { easing: \"quadOut\" }).call(() => {\r\n            this.blackNode.active = true;\r\n        }).start();\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { native, sys, view } from \"cc\";\r\nimport { NATIVE, VIVO, WECHAT } from \"cc/env\";\r\nimport { msgac } from \"../game/data/msgac\";\r\nimport { eventManager } from \"../game/manager/eventManager\";\r\nimport { VivoManager } from \"./platform/Vivo\";\r\nimport { Wechat } from \"./platform/wechat/wechat\";\r\nimport { EType, IPos, WXCustomAd } from \"./platform/wechat/WXCustomAd\";\r\nimport { tyqSDK } from \"./tyqSDK\";\r\nimport { tyqSDKConfig } from \"./tyqSDKConfig\";\r\n\r\n/**渠道 */\r\nexport enum Channel {\r\n    /**默认 浏览器*/\r\n    DEFAULT = 0,\r\n    /**微信小游戏 */\r\n    WECHAT = 1,\r\n    ANDROID,\r\n    IOS,\r\n    ANDROID_233,\r\n    ANDROID_4399,\r\n    H5_4399,\r\n    VIVO_MINI_GAME,\r\n    OPPO_MINI_GAME,\r\n\r\n}\r\n\r\nclass TyqAdManager {\r\n\r\n    private static _instance: TyqAdManager;\r\n    public static get instance(): TyqAdManager {\r\n        if (!this._instance) {\r\n            this._instance = new TyqAdManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    private channel: Channel = Channel.DEFAULT;\r\n\r\n\r\n\r\n\r\n\r\n    // 默认原生广告各个类型的尺寸\r\n    public customAdSizeObj: any = {\r\n        // 矩阵 行数：5\r\n        rect: {\r\n            width: 360,\r\n            height: 506\r\n        },\r\n        // 横向 尺寸：80%  默认数：5\r\n        horizontal: {\r\n            width: 288,\r\n            height: 90\r\n        },\r\n        // 竖向 尺寸：90%  默认数：5\r\n        vertical: {\r\n            width: 62,\r\n            height: 388\r\n        },\r\n        // 单个格子 尺寸：90%\r\n        grid: {\r\n            width: 68,\r\n            height: 102\r\n        }\r\n    };\r\n\r\n    // 当前显示广告的类型\r\n    private adShowType: string;\r\n    // banner广告是否正在显示中\r\n    private bannerAdShowing: boolean = false;\r\n    // banner广告显示接口调用次数\r\n    private showBannerCount = 0;\r\n\r\n    private shareTime = 0\r\n    private shareListenerSuccess = null\r\n    private shareListenerFail = null\r\n\r\n    private openID = \"\"\r\n\r\n    private strategy = 1\r\n\r\n    public videoCallBack: Function = () => { };\r\n    public videoCallBackFail: Function = () => { };\r\n\r\n    private shareopenID = \"\"\r\n\r\n    constructor() {\r\n        if (sys.platform == sys.Platform.WECHAT_GAME) {\r\n            this.channel = Channel.WECHAT;\r\n\r\n            let windowSize = view.getVisibleSize();\r\n            if (windowSize.width / windowSize.height > 720 / 1440) {\r\n                Wechat.bannerSize = { width: 300, height: 120 }\r\n            }\r\n\r\n        } else {\r\n            this.channel = Channel.DEFAULT;\r\n        }\r\n        if (NATIVE) {\r\n            this.channel = Channel.ANDROID_233;\r\n        }\r\n        this.channel = Channel.OPPO_MINI_GAME\r\n    }\r\n\r\n    public getEnterUrlQuery() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            // 冷启动 wx.getLaunchOptionsSync()\r\n            // 冷启动和热启动 wx.getEnterOptionsSync()\r\n            if (wx.getEnterOptionsSync) {\r\n                let options = wx.getEnterOptionsSync();\r\n                //    console.log(\"options\", options)\r\n                if (options && options.query) {\r\n                    //  console.log(\"options.query\", options.query.toString())\r\n                    let openID = options.query.shareGameSync\r\n                    //    console.log(\"login openID = \", openID)\r\n                    if (openID) {\r\n                        // this.reportShareBehavior(6, 1, openID)\r\n                        this.shareopenID = openID\r\n                        tyqSDK.eventSendCustomEvent(\"参与激励托管分享成功进来的玩家\")\r\n                    }\r\n                    return options.query;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public showAppMessage() {\r\n        this.shareTime = new Date().getTime()\r\n        console.log(\"this.openID = \", this.openID)\r\n        Wechat.shareAppMessage(\"挑战未知敌人，化身特工\", \"\", \"shareGameSync=\" + this.openID)\r\n    }\r\n\r\n    public getOpenID() {\r\n        //只能在服务端请求\r\n        wx.login({\r\n            success: res => {\r\n                if (res.code) {\r\n                    let URL = 'https://api.weixin.qq.com/sns/jscode2session?appid=###&secret=********&js_code=' + res.code + '&grant_type=authorization_code'\r\n                    wx.request({\r\n                        url: URL,\r\n                        success: function (res) {\r\n                            console.log(res.data)//res.data中有openid\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    public getChannel() {\r\n        return this.channel;\r\n    }\r\n\r\n    public initAdIds() {\r\n\r\n        if (this.channel == Channel.WECHAT) {\r\n            // 显示当前页面的转发按钮\r\n            // \"shareAppMessage\"表示“发送给朋友”按钮，\"shareTimeline\"表示“分享到朋友圈”按钮\r\n            wx.showShareMenu({\r\n                withShareTicket: true,\r\n                menus: ['shareAppMessage', 'shareTimeline']\r\n            });\r\n\r\n            wx.onHide(this.wxOnHide.bind(this));\r\n            wx.onShow(this.wxOnShow.bind(this));\r\n\r\n            // banner广告参数\r\n            let bannerIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_banners);\r\n            if (bannerIds) {\r\n                Wechat._bannerAdUnitId = bannerIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置banner广告参数\");\r\n            }\r\n\r\n            // 插屏广告参数\r\n            let interstitialIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_interstitial);\r\n            if (interstitialIds) {\r\n                Wechat._interstitialAdUnitId = interstitialIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置banner广告参数\");\r\n            }\r\n\r\n            // 原生广告参数\r\n            let customRectIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_custom_rect);\r\n            if (customRectIds) {\r\n                WXCustomAd._customc_rect_adunit = customRectIds.split(\";\");\r\n                //  console.log(\" WXCustomAd._customc_rect_adunit = \",WXCustomAd._customc_rect_adunit)\r\n            } else {\r\n                tyqSDK.log(\"未配置原生矩阵广告参数\");\r\n            }\r\n            let customVIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_custom_v);\r\n            if (customVIds) {\r\n                WXCustomAd._customc_v_adunit = customVIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置原生垂直广告参数\");\r\n            }\r\n            let customHIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_custom_h);\r\n            if (customHIds) {\r\n                WXCustomAd._customc_h_adunit = customHIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置原生水平广告参数\");\r\n            }\r\n\r\n            // 激励视频广告参数\r\n            let rewardedIds = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_ad_rewarded);\r\n            if (rewardedIds) {\r\n                Wechat._rewardedVideoAdUnitId = rewardedIds.split(\";\");\r\n            } else {\r\n                tyqSDK.log(\"未配置激励视频广告参数\");\r\n            }\r\n\r\n            // 预加载广告\r\n            // banner广告必须要预加载后才能使用\r\n            Wechat.preLoadBanner();\r\n\r\n            // 为了减少初始化卡顿时间，激励视频广告可以不预加载\r\n            Wechat.createRewardedVideoAd();\r\n\r\n            // 为了减少初始化卡顿时间，插屏广告可以不预加载\r\n            // Wechat.createInterstitialAd();\r\n        } else if (this.channel == Channel.ANDROID_233 || this.channel == Channel.ANDROID_4399) {\r\n            //  if (NATIVE) {\r\n            console.log(\" NATIVE android 平台 initAdIds \")\r\n            window.rewardedVideoAdCallBack = (res: any) => {\r\n                //EventHelper.DispatchEvent(\"showTips\", \"获得奖励\");\r\n                console.log(\"AD_DEMO rewardedVideoAdCallBack \", res)\r\n                eventManager.send(msgac.showNotice, \" 发放视频奖励 \");\r\n                if (this.videoCallBack) {\r\n                    this.videoCallBack()\r\n                }\r\n            }\r\n\r\n            window.rewardedVideoAdFailCallBack = (res: any) => {\r\n                //EventHelper.DispatchEvent(\"showTips\", \"获得奖励\");\r\n                console.log(\"AD_DEMO rewardedVideoAdCallBack \", res)\r\n                //    eventManager.send(msgac.showNotice, \" 视频奖励 失败\");\r\n                if (this.videoCallBackFail) {\r\n                    this.videoCallBackFail()\r\n                }\r\n            }\r\n            //  jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"RewardVideoShow\", \"(Ljava/lang/String;)V\", \"展示广告\");\r\n            return\r\n            // }\r\n        }\r\n    }\r\n\r\n    public wxOnHide(res?) {\r\n        // tyqSDK.log(\"wx onHide:\", res, this.adShowType);\r\n        if (!res) {\r\n            return;\r\n        }\r\n\r\n        let mode = res.mode;\r\n        let action = res.targetAction;\r\n        let pagePath = res.targetPagePath;\r\n\r\n        // 8：跳转到小游戏内部页面WCCanvasPageViewController\r\n        // 9：跳转到其他微信小游戏\r\n        // 10：跳转到一个链接\r\n        let actions = [8, 9, 10];\r\n        if (actions.indexOf(action) == -1) {\r\n            // 不感兴趣的跳转，直接返回，比如：右上角的圆点或者home键最小化\r\n            return;\r\n        }\r\n\r\n        if (this.adShowType) {\r\n            // 已判断到的广告类型，直接使用\r\n            tyqSDK.adClickUpload(this.adShowType, mode, action, pagePath);\r\n            return;\r\n        }\r\n\r\n        // 要判断出是banner或者原生广告点击\r\n        if (action == 9) {\r\n            // 跳转其他微信小游戏\r\n            tyqSDK.adClickUpload(tyqSDKConfig.adShowTypes.bannerAndCustomAd, mode, action, pagePath);\r\n            return;\r\n        }\r\n        if (pagePath) {\r\n            // 跳转内部页或者广告链接\r\n            if (pagePath == \"WCCanvasPageViewController\"\r\n                || pagePath.indexOf(\"ad.weixin.qq.com\") != -1\r\n                || pagePath.indexOf(\"ad_biz_info\") != -1\r\n                || pagePath.indexOf(\"weixinadkey\") != -1\r\n            ) {\r\n                tyqSDK.adClickUpload(tyqSDKConfig.adShowTypes.bannerAndCustomAd, mode, action, pagePath);\r\n            }\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n    public wxOnShow(res?) {\r\n        console.log(\"wx onShow:\", res);\r\n        if (this.shareTime > 0 && (new Date().getTime()) - this.shareTime >= 2000) {\r\n            this.shareListenerSuccess && this.shareListenerSuccess()\r\n        } else {\r\n            this.reportShareBehavior(5, this.strategy, 1)\r\n            this.shareListenerFail && this.shareListenerFail()\r\n        }\r\n        this.shareListenerFail = null\r\n        this.shareListenerSuccess = null\r\n        this.shareTime = 0\r\n    }\r\n\r\n    /**\r\n     * 显示底部banner轮播广告\r\n     * @param time 轮播间隔时间，单位：毫秒，默认5秒 \r\n     */\r\n    public showBannerAd(time?: number) {\r\n        this.showBannerCount++;\r\n\r\n        if (this.channel == Channel.WECHAT) {\r\n            if (this.bannerAdShowing) {\r\n                return true;\r\n            }\r\n            if (!time) {\r\n                time = 5000;\r\n            }\r\n            Wechat.showBannerTurns(time);\r\n            this.bannerAdShowing = true;\r\n        } else if (this.channel == Channel.ANDROID_4399) {\r\n            native.reflection.callStaticMethod(\"com/cocos/game/SdkUtil4399\", \"showBanner\", \"(Ljava/lang/String;)Z\", \"展示banner广告\")\r\n        } else if (this.channel == Channel.VIVO_MINI_GAME) {\r\n            if (VIVO) {\r\n                VivoManager.showBannerAd()\r\n                return\r\n            }\r\n        }\r\n\r\n    }\r\n    /**\r\n     * 隐藏banner广告\r\n     */\r\n    public hideBannerAd(isForce?: boolean) {\r\n        this.showBannerCount--;\r\n        if (isForce) {\r\n            this.showBannerCount = 0;\r\n        }\r\n        if (this.showBannerCount > 0) {\r\n            return;\r\n        }\r\n        if (this.channel == Channel.WECHAT) {\r\n            Wechat.hideBannerAd();\r\n            this.bannerAdShowing = false;\r\n        } else if (this.channel == Channel.ANDROID_4399) {\r\n            native.reflection.callStaticMethod(\"com/cocos/game/SdkUtil4399\", \"hideBanner\", \"(Ljava/lang/String;)Z\", \"隐藏banner广告\")\r\n        } else if (this.channel == Channel.VIVO_MINI_GAME) {\r\n            if (VIVO) {\r\n                VivoManager.hideBannerAd()\r\n                return\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * banner广告是否正在显示中\r\n     */\r\n    public isBannerAdShowing(): boolean {\r\n        return this.bannerAdShowing;\r\n    }\r\n\r\n    /**\r\n     * 显示插屏广告\r\n     */\r\n    public showInterstitialAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            Wechat.showInterstitialAd(() => {\r\n                // 关闭或者发生错误\r\n                this.adShowType = \"\";\r\n            }, () => {\r\n                // 成功展示\r\n                this.adShowType = tyqSDKConfig.adShowTypes.interstitialAd;\r\n            });\r\n        } else if (this.channel == Channel.ANDROID_233) {\r\n            this.showFullRewarded()\r\n            // native.reflection.callStaticMethod(\"com/cocos/game/MetaAdApiUtil\", \"showInterstitialAd\", \"(Ljava/lang/String;)Z\", \"展示插屏广告\")\r\n        } else if (this.channel == Channel.ANDROID_4399) {\r\n            native.reflection.callStaticMethod(\"com/cocos/game/SdkUtil4399\", \"InterstitialShow\", \"(Ljava/lang/String;)Z\", \"展示插屏广告\")\r\n        }\r\n    }\r\n\r\n    private _delayTime = 0\r\n\r\n    public showDelayFullVideo() {\r\n        if (this.channel == Channel.ANDROID_233) {\r\n            let time = new Date().getTime()\r\n            // console.log(\"time - this._delayTime = \",time - this._delayTime)\r\n            if (time - this._delayTime >= 120000) {\r\n                this.showFullRewarded()\r\n                this._delayTime = time\r\n            }\r\n        }\r\n    }\r\n\r\n    public showDelayInterstitialAd() {\r\n        if (this.channel == Channel.ANDROID_4399) {\r\n            if (this._delayTime <= 0) {\r\n                this._delayTime = new Date().getTime()\r\n                return\r\n            }\r\n            let time = new Date().getTime()\r\n            if (time - this._delayTime >= 200000) {\r\n                this.showInterstitialAd()\r\n                this._delayTime = time\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示原生矩阵广告\r\n     */\r\n    public showCustomRectCenterAd(failcb = null) {\r\n        if (this.channel == Channel.WECHAT) {\r\n            //  console.log(\"showCustomRectCenterAd\")\r\n            WXCustomAd.createCustomAd(\"default_custom_ad_rect\", EType.rect, {\r\n                centerX: 0,\r\n                centerY: 0\r\n            }, this.customAdSizeObj.rect, null, failcb);\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生矩阵广告\r\n     */\r\n    public hideCustomRectCenterAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideCustomAd(\"default_custom_ad_rect\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示原生垂直广告，显示在左右两边\r\n     */\r\n    public showCustomVerticalLeftRightAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.createCustomAd(\"default_custom_ad_v_left\", EType.vertical, {\r\n                left: 0\r\n            }, this.customAdSizeObj.vertical);\r\n            WXCustomAd.createCustomAd(\"default_custom_ad_v_right\", EType.vertical, {\r\n                right: 0\r\n            }, this.customAdSizeObj.vertical);\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生垂直广告\r\n     */\r\n    public hideCustomVerticalLeftRightAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideCustomAd(\"default_custom_ad_v_left\");\r\n            WXCustomAd.hideCustomAd(\"default_custom_ad_v_right\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示原生水平广告，显示在顶部\r\n     */\r\n    public showCustomHorizontalTopAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.createCustomAd(\"default_custom_ad_h\", EType.horizontal, {\r\n                top: 0\r\n            }, this.customAdSizeObj.horizontal);\r\n        }\r\n    }\r\n    /**\r\n    * 隐藏原生水平广告\r\n    */\r\n    public hideCustomHorizontalTopAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideCustomAd(\"default_custom_ad_h\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 通用显示原生广告接口\r\n     * @param flag 标识 \r\n     * @param type 类型\r\n     * @param pos 位置信息\r\n     * @param adSize 尺寸\r\n     * @param adId 广告id\r\n     * @param failcb 失败回调\r\n     */\r\n    public showCustomAd(flag: string, type: EType, pos: IPos, adSize: { width: number, height: number }, adId?: any, failcb?: Function) {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.createCustomAd(flag, type, pos, adSize, adId, failcb);\r\n        }\r\n    }\r\n    /**\r\n     * 根据创建标识隐藏原生广告\r\n     * @param flag\r\n     */\r\n    public hideCustomAd(flag: string) {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideCustomAd(flag);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏所有原生广告\r\n     */\r\n    public hideCustomAllAd() {\r\n        if (this.channel == Channel.WECHAT) {\r\n            WXCustomAd.hideAllAd();\r\n        }\r\n    }\r\n\r\n\r\n    public showFullRewarded() {\r\n        if (this.channel == Channel.ANDROID_233) {\r\n            // successCb && successCb()\r\n            console.log(\"showFullRewarded\")\r\n            native.reflection.callStaticMethod(\"com/cocos/game/MetaAdApiUtil\", \"ShowFullRewardVideoShow\", \"(Ljava/lang/String;)Z\", \"展示全屏视频广告\")\r\n            return\r\n        }\r\n    }\r\n\r\n    public reportShareBehavior(operation, strategy = 1, currentShow = null) {\r\n\r\n        if (tyqSDKConfig.isOpenBeHavior) {\r\n            if (this.shareopenID != \"\") {\r\n                Wechat.reportShareBehavior({ operation: 6, strategy: 1, inviteUser: this.shareopenID })\r\n                this.shareopenID = \"\"\r\n            }\r\n\r\n            Wechat.reportShareBehavior({ operation: operation, strategy: strategy, currentShow: currentShow })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示激励视频广告\r\n     */\r\n    public showRewardedAd(successCb?: Function, failCb?: Function, forceVideo = false) {\r\n        this.strategy = 1\r\n        if (tyqSDKConfig.isOpenBeHavior && this.channel == Channel.WECHAT) {\r\n            if (Wechat.isShareBehavior()) {\r\n                if (!forceVideo) {\r\n                    tyqAdManager.showAppMessage()\r\n                    this.shareListenerSuccess = successCb\r\n                    this.shareListenerFail = failCb\r\n                    Wechat.reportShareBehavior({ operation: 2, strategy: 1, currentShow: 1 })\r\n                    return\r\n                } else {\r\n                    this.strategy = 0\r\n                    Wechat.reportShareBehavior({ operation: 2, strategy: 0, currentShow: 0 })\r\n                }\r\n            } else {\r\n                Wechat.reportShareBehavior({ operation: 2, strategy: 1, currentShow: 0 })\r\n            }\r\n        }\r\n\r\n        if (tyqSDKConfig.isCloseAd) {\r\n            successCb && successCb()\r\n            return\r\n        }\r\n\r\n        if (this.channel == Channel.ANDROID_233) {\r\n            this.videoCallBack = successCb\r\n            this.videoCallBackFail = failCb\r\n            // console.log(\" NATIVE android 平台 \")\r\n            if (!native.reflection.callStaticMethod(\"com/cocos/game/MetaAdApiUtil\", \"RewardVideoShow\", \"(Ljava/lang/String;)Z\", \"展示广告\")) {\r\n                failCb && failCb();\r\n            }\r\n            return\r\n        }\r\n        if (this.channel == Channel.ANDROID_4399) {\r\n            this.videoCallBack = successCb\r\n            this.videoCallBackFail = failCb\r\n            console.log(\" NATIVE android 平台 com/cocos/game/SdkUtil4399\")\r\n            if (!native.reflection.callStaticMethod(\"com/cocos/game/SdkUtil4399\", \"RewardVideoShow\", \"(Ljava/lang/String;)Z\", \"展示广告\")) {\r\n                failCb && failCb();\r\n            }\r\n            return\r\n        }\r\n\r\n        if (this.channel == Channel.WECHAT) {\r\n            Wechat.showRewardVideoAd(() => {\r\n                this.adShowType = tyqSDKConfig.adShowTypes.rewardedAd;\r\n            }).then((isSuccess) => {\r\n                this.adShowType = \"\";\r\n                if (isSuccess) {\r\n                    if (successCb) {\r\n                        successCb();\r\n                    }\r\n                } else {\r\n                    this.reportShareBehavior(5, this.strategy, 0)\r\n                    if (failCb) {\r\n                        failCb();\r\n                    }\r\n                }\r\n            }, () => {\r\n                this.adShowType = \"\";\r\n                this.reportShareBehavior(5, this.strategy, 0)\r\n                if (failCb) {\r\n                    failCb();\r\n                }\r\n            });\r\n        }\r\n\r\n        if (this.channel == Channel.VIVO_MINI_GAME) {\r\n            VivoManager.showRewardVideoAd((state) => {\r\n                if (state == 1) {\r\n                    successCb && successCb()\r\n                } else {\r\n                    failCb && failCb(state)\r\n                }\r\n            })\r\n            return\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport const tyqAdManager = TyqAdManager.instance;\r\n","\r\nimport { Button, Component, find, Label, Node, RichText } from 'cc';\r\nimport { tyqSDK } from '../../tyqSDK';\r\nimport { tyqLayerManager } from '../manager/tyqLayerManager';\r\n\r\nexport class TyqBaseLayer extends Component {\r\n\r\n    public obj: any = {};\r\n    public cb: Function;\r\n    public layerName: string = \"DefaultLayer\";\r\n\r\n    // {路径:节点对象}\r\n    public pathNodeObj: Map<string, Node> = new Map();\r\n\r\n    onLoad() {\r\n        this.addButtonListener(this.node);\r\n        this.addPathNode(this.node, \"\");\r\n    }\r\n\r\n    addPathNode(node: Node, path: string) {\r\n        if (node != this.node) {\r\n            this.pathNodeObj.set(path, node);\r\n        }\r\n        if (path) {\r\n            path += \"/\";\r\n        }\r\n        let chs = node.children;\r\n        for (let i = 0, len = chs.length; i < len; i++) {\r\n            let pNode = chs[i];\r\n            this.addPathNode(pNode, path + pNode.name);\r\n        }\r\n    }\r\n\r\n    getNodeByPath(path: string) {\r\n        let node = this.pathNodeObj.get(path);\r\n        if (node) {\r\n            return node;\r\n        }\r\n\r\n        node = find(path, this.node);\r\n        if (node) {\r\n            this.pathNodeObj.set(path, node);\r\n            return node;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    addButtonListener(node: Node) {\r\n        if (node.getComponent(Button)) {\r\n            node.on(\"click\", this.preOnButtonClick, this);\r\n        }\r\n\r\n        let chs = node.children;\r\n        for (let i = 0, max = chs.length; i < max; i++) {\r\n            let ch = chs[i];\r\n            this.addButtonListener(ch);\r\n        }\r\n\r\n    };\r\n\r\n    preOnButtonClick(btn: any) {\r\n        let node = btn.node;\r\n        let name = node.name;\r\n        tyqSDK.log(this.layerName + \" onButtonClick \" + name);\r\n\r\n        this.onButtonClick(node, node.name);\r\n\r\n    }\r\n\r\n    onButtonClick(node: Node, name: String) {\r\n\r\n    }\r\n\r\n    openLayer(layerName: string, data?: any, cb?: Function) {\r\n        tyqLayerManager.openLayer(layerName, data, cb);\r\n    }\r\n\r\n    closeLayer() {\r\n        tyqLayerManager.closeLayer(this);\r\n    }\r\n\r\n    setString(node: Node, info: any) {\r\n        info = info + \"\";\r\n        let label = node.getComponent(Label);\r\n        if (label) {\r\n            label.string = info;\r\n            return;\r\n        }\r\n\r\n        let rich = node.getComponent(RichText);\r\n        if (rich) {\r\n            rich.string = info;\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nexport const tyqConstants = {\r\n\r\n    paths: {\r\n        layer: \"layer/\",\r\n    },\r\n\r\n    bundles: {\r\n        tyqSDKBundle: \"tyqSDKBundle\",\r\n    },\r\n\r\n    layers: {\r\n        TyqMoreGameLayer: \"TyqMoreGameLayer\",\r\n    }\r\n}\r\n","\r\nimport { find, instantiate, Prefab, UITransform } from 'cc';\r\nimport { tyqSDK } from '../../tyqSDK';\r\nimport { tyqConstants } from '../tyqConstants';\r\nimport { TyqBaseLayer } from './../layer/TyqBaseLayer';\r\nimport { tyqResManager } from './tyqResManager';\r\n\r\nclass TyqLayerManager {\r\n\r\n    private static _instance: TyqLayerManager;\r\n    private constructor() {\r\n    }\r\n    public static get instance(): TyqLayerManager {\r\n        if (this._instance == null) {\r\n            this._instance = new TyqLayerManager();\r\n        }\r\n\r\n        return this._instance;\r\n    }\r\n\r\n    openLayer(layerName: string, obj?: any, cb?: Function) {\r\n        let path = tyqConstants.paths.layer + layerName;\r\n        tyqResManager.loadAsset(tyqConstants.bundles.tyqSDKBundle, path, Prefab, null, (err, prefab) => {\r\n            if (err) {\r\n                tyqSDK.log(\"LayerManager.openLayer error:\" + err.message, layerName, err);\r\n                return;\r\n            }\r\n            let node = instantiate(prefab);\r\n            let com = node.addComponent(layerName);\r\n            com.obj = obj;\r\n            com.cb = cb;\r\n            com.layerName = layerName;\r\n\r\n            // 设置显示层级，保证在最上面\r\n            node.getComponent(UITransform).priority = 999;\r\n            node.parent = find(\"Canvas\");\r\n\r\n            tyqSDK.log(\"openLayer \" + layerName, obj);\r\n        });\r\n    }\r\n\r\n    closeLayer(layer: TyqBaseLayer) {\r\n        let layerName = layer.layerName;\r\n        layer.node.destroy();\r\n    }\r\n\r\n}\r\n\r\nexport const tyqLayerManager = TyqLayerManager.instance;\r\n","import { Node, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../tyqSDK';\r\nimport { tyqSDKConfig } from '../../tyqSDKConfig';\r\nimport { TyqBaseLayer } from './TyqBaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TyqMoreGameLayer')\r\nexport class TyqMoreGameLayer extends TyqBaseLayer {\r\n\r\n    private level: number = 0;\r\n\r\n    private isShowBanner: boolean = false;\r\n    private lastBannerShow: boolean = false;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.level = this.obj.level;\r\n\r\n        this.lastBannerShow = tyqSDK.isBannerAdShowing();\r\n        tyqSDK.hideBannerAd();\r\n\r\n        tyqSDK.showCustomHorizontalTopAd(true);\r\n        tyqSDK.showCustomRectCenterAd();\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            case \"btnGoOn\":\r\n                this.onClickBtnGoOn(node);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGoOn(node: Node) {\r\n        let val = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_banner_touch);\r\n        if (val && this.level > parseInt(val)) {\r\n            if (!this.isShowBanner) {\r\n                this.isShowBanner = true;\r\n                tyqSDK.showBannerAd();\r\n                this.scheduleOnce(() => {\r\n                    tyqSDK.hideBannerAd();\r\n                }, 1.5 + Math.random());\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.unscheduleAllCallbacks();\r\n        this.closeLayer();\r\n        if (this.cb) {\r\n            this.cb();\r\n        }\r\n\r\n        if (this.lastBannerShow) {\r\n            tyqSDK.showBannerAd();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { assetManager } from \"cc\";\r\nimport { tyqSDK } from \"../../tyqSDK\";\r\n\r\nclass TyqResManager {\r\n    private static _instance: TyqResManager;\r\n    private constructor() {\r\n    }\r\n    public static get instance(): TyqResManager {\r\n        if (this._instance == null) {\r\n            this._instance = new TyqResManager();\r\n        }\r\n\r\n        return this._instance;\r\n    }\r\n\r\n    /**\r\n     * 从bundle中加载某个资源，优先使用缓存中的\r\n     * @param bundleName bundle名称\r\n     * @param path 资源路径\r\n     * @param assetType 资源类型\r\n     * @param onProgress 加载进度回调\r\n     * @param onComplete 加载完成回调\r\n     */\r\n    loadAsset(bundleName: string, path: string, assetType: any, onProgress?: Function, onComplete?: Function) {\r\n        let bundle = assetManager.getBundle(bundleName);\r\n        if (bundle && bundle.get(path, assetType)) {\r\n            if (onComplete) {\r\n                onComplete(null, bundle.get(path, assetType));\r\n            }\r\n            return;\r\n        }\r\n\r\n        let loadAssetFunc = () => {\r\n            bundle.load(path, assetType, (finish: number, total: number) => {\r\n                if (onProgress) {\r\n                    onProgress(finish, total);\r\n                }\r\n            }, (err, asset) => {\r\n                if (err) {\r\n                    tyqSDK.log(\"ResManager.loadAsset error:\" + err.message, bundleName, path, err);\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                if (onComplete) {\r\n                    onComplete(null, asset);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (!bundle) {\r\n            assetManager.loadBundle(bundleName, (err, retBundle) => {\r\n                if (err) {\r\n                    if (onComplete) {\r\n                        onComplete(err);\r\n                    }\r\n                    return;\r\n                }\r\n                bundle = retBundle;\r\n                loadAssetFunc();\r\n            });\r\n            return;\r\n        }\r\n\r\n        loadAssetFunc();\r\n    }\r\n}\r\n\r\nexport const tyqResManager = TyqResManager.instance;\r\n\r\n","import { Game, game, sys } from \"cc\";\r\nimport { VIVO } from \"cc/env\";\r\nimport { tyqLayerManager } from \"./cocos/manager/tyqLayerManager\";\r\nimport { tyqConstants } from \"./cocos/tyqConstants\";\r\nimport { GNetConf } from \"./network/conf\";\r\nimport { VivoManager } from \"./platform/Vivo\";\r\nimport { EType, IPos } from \"./platform/wechat/WXCustomAd\";\r\nimport { Channel, tyqAdManager } from \"./tyqAdManager\";\r\nimport { tyqSDKConfig } from \"./tyqSDKConfig\";\r\nimport { Http } from \"./utils/weHttp\";\r\nimport { NetworkMgr } from \"./utils/weNetworkMgr\";\r\n\r\nexport interface jumpIconData {\r\n    name: string,\r\n    appid: string,\r\n    imgUrl: string,\r\n    weixin_ads_data: string,\r\n    key: string,\r\n}\r\n\r\nexport enum TyqSDKAppVersion {\r\n    VERSION_1 = 1,\r\n    VERSION_2 = 2\r\n}\r\n\r\nexport enum ChannelFlag {\r\n    // 微信小游戏-末日特工队\r\n    WECHAT_MRTGD = 1,\r\n    // 微信小游戏-机甲舞神\r\n    WECHAT_JJWS = 2,\r\n\r\n    WECHAT_Box4399 = 3,\r\n\r\n    VIVO_MINI_GAME = 4,\r\n\r\n    OPPO_MINI_GAME = 5,\r\n\r\n}\r\n\r\nclass TyqSDK {\r\n    public static readonly instance = new TyqSDK();\r\n\r\n    /**开关对象合集 */\r\n    private switch_info: any = {};\r\n    /**总开关 1是开 0是关*/\r\n    private master_switch: number = 0;\r\n    /**用户唯一openID */\r\n    private openid: string = \"\"\r\n    /**游玩时间 */\r\n    private _playTime: number = 0;\r\n\r\n\r\n    private _gameLevel: number = 0;\r\n    private item_openId = \"tyq_item_openid\";\r\n    private item_watermark = \"tyq_item_watermark_\";\r\n    private _watermark: string = \"\";\r\n    private _onlineTime = 0;\r\n\r\n    public weixin_ads_data: Array<Object>[][] = null;\r\n    public wxGameIconData: Array<jumpIconData> = [];\r\n\r\n    // 完成关卡数累计\r\n    private levelCount: number = 0;\r\n    // 服务器与本地的时间差，单位：秒\r\n    private timeDiff: number = 0;\r\n\r\n    // 打包渠道标识\r\n    public channel;\r\n\r\n    // 开始分享时间点\r\n    private shareTime: Date;\r\n    // 分享结果回调\r\n    private shareCallback: Function;\r\n\r\n    public initGame() {\r\n        this.channel = ChannelFlag.WECHAT_MRTGD;\r\n        this.setLogOpen(true);\r\n        this.setAppVersion(1);\r\n        if (tyqAdManager.getChannel() == Channel.ANDROID_233) {\r\n            this.init(\"TyqApp20230213163724\", \"1iK3I97Mx6VuTjPKgUur1RUeV2eHH3OB\"); //233apk\r\n        } else if (tyqAdManager.getChannel() == Channel.ANDROID_4399) {\r\n            this.init(\"TyqApp20230214154427\", \"o4gt48BCrJHyAxBco6aY6ydxwhPsJUxl\"); //4399apk\r\n        } else if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n            switch (this.channel) {\r\n                case ChannelFlag.WECHAT_MRTGD:\r\n                    this.init(\"TyqApp20221110115330\", \"VE3URwtUCEWyoxCdOqxDs8SxBNTnNpm1\"); // 微信小游戏\r\n                    break;\r\n                case ChannelFlag.WECHAT_JJWS:\r\n                    this.init(\"TyqApp20230302154121\", \"J1PRD20Bu8rPTtHj2A64xrTiplCRvqbu\"); // 微信小游戏\r\n                    break;\r\n                case ChannelFlag.WECHAT_Box4399:\r\n                    this.init(\"TyqApp20230214154438\", \"NXdhVUkArhQO3izZAdkMUDeYd4XVNSQl\"); //4399 游戏盒小游戏\r\n                    break;\r\n            }\r\n        }else if(tyqAdManager.getChannel() == Channel.VIVO_MINI_GAME){\r\n            this.init(\"TyqApp20230506150422\", \"RFJowvHuA3CX3ArprdniQo93OPmrN8Sq\"); //vivo小游戏\r\n        }else if(tyqAdManager.getChannel() == Channel.OPPO_MINI_GAME){\r\n            this.init(\"TyqApp20230518113406\", \"Mo9qrwx4GKfZuFPdW5qp8BZLD1qlUA8S\"); //oppo小游戏\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns 返回真实的url\r\n     */\r\n    public getUrl() {\r\n        if (this.channel == ChannelFlag.WECHAT_MRTGD) {\r\n            return {\r\n                httpUrl: GNetConf.mrtgd_HttpUrl,\r\n                wsUrl: GNetConf.mrtgd_WsUrl\r\n            }\r\n        } else if (this.channel == ChannelFlag.WECHAT_JJWS) {\r\n            return {\r\n                httpUrl: GNetConf.mrtgd_jjws_HttpUrl,\r\n                wsUrl: GNetConf.mrtgd_jjws_WsUrl\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 初始化接口，尽量早调用\r\n     * @param appId 运营后台提供 \r\n     * @param apiKey 运营后台提供 \r\n     * @param cb 初始化结果回调 st:1成功  st:0失败\r\n     */\r\n    public init(appId: string, apiKey: string, cb?: (st: number) => void) {\r\n        tyqSDKConfig.appId = appId;\r\n        tyqSDKConfig.apiKey = apiKey;\r\n\r\n        Http.init(tyqSDKConfig.server, tyqSDKConfig.apiKey);\r\n\r\n        this._watermark = sys.localStorage.getItem(this.item_watermark) || \"\";\r\n        this.openid = this.initOpenId();\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            tyqAdManager.initAdIds();\r\n        }\r\n\r\n        this.httpPost(\"api/v1/switch_info\", null, (ret: any) => {\r\n            if (ret.data) {\r\n                this.timeDiff = ret.data.current_time_stamp - this.getTimeStamp(true);\r\n\r\n                this.switch_info = ret.data.switch_info;\r\n                this.master_switch = ret.data.master_switch;\r\n                if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n                    tyqAdManager.initAdIds();\r\n                }\r\n\r\n\r\n                if (ret.data.weixin_ads_data) {\r\n                    this.weixin_ads_data = ret.data.weixin_ads_data;\r\n                    for (let key in this.weixin_ads_data) {\r\n                        let arr = [];\r\n                        this.log('key', key);\r\n                        if (typeof (key)) {\r\n                            for (let i = 0; i < this.weixin_ads_data[key].length; i++) {\r\n                                arr = [];\r\n                                for (let keys in this.weixin_ads_data[key][i]) {\r\n                                    arr.push(this.weixin_ads_data[key][i][keys]);\r\n                                }\r\n                                var jumpIconData: jumpIconData = {\r\n                                    name: arr[0],\r\n                                    appid: arr[1],\r\n                                    imgUrl: arr[2],\r\n                                    weixin_ads_data: arr[3],\r\n                                    key: key,\r\n                                }\r\n                                this.wxGameIconData.push(jumpIconData);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.login();\r\n            if (cb) {\r\n                cb(1);\r\n            }\r\n        }, () => {\r\n            if (cb) {\r\n                cb(0);\r\n            }\r\n        });\r\n\r\n        //开始统计玩家停留时间\r\n        this._onlineTime = this.getTimeStamp();\r\n        game.on(Game.EVENT_HIDE, () => {\r\n            this.collectPlayeTime();\r\n        });\r\n        game.on(Game.EVENT_SHOW, () => {\r\n            this._onlineTime = this.getTimeStamp();\r\n            if (this.shareTime) {\r\n                let dt = new Date().getTime() - this.shareTime.getTime();\r\n                this.shareTime = undefined;\r\n                if (dt >= 3000) {\r\n                    if (this.shareCallback) {\r\n                        this.shareCallback();\r\n                        this.shareCallback = undefined;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 登陆接口，初始化接口回调成功后调用\r\n     */\r\n    private login() {\r\n        if (!this.openid) {\r\n            this.error(\"openId为空\");\r\n            return;\r\n        }\r\n\r\n        let urlQuery = tyqAdManager.getEnterUrlQuery();\r\n\r\n        let obj: any = {};\r\n        if (urlQuery) {\r\n            if (urlQuery.ads_id) {\r\n                obj.ads_id = urlQuery.ads_id;\r\n            }\r\n            if (urlQuery.source_openid) {\r\n                obj.source_openid = urlQuery.source_openid;\r\n            }\r\n            if (urlQuery.pull_in_ads_id) {\r\n                obj.pull_in_ads_id = urlQuery.pull_in_ads_id;\r\n            }\r\n        }\r\n        this.httpPost(\"api/v1/login\", obj, (res: any) => {\r\n            this.log(\"登陆：\" + this.openid);\r\n            if (res.data) {\r\n                this._watermark = encodeURIComponent(res.data.watermark);\r\n                sys.localStorage.setItem(this.item_watermark, this._watermark);\r\n            }\r\n        }, () => {\r\n            this.error(\"登录失败,网络错误\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 分享\r\n     * @param params 分享url参数 格式：key1=val1&key2=val2\r\n     * @param cb 有回调，就代表分享成功\r\n     */\r\n    share(params?: string, cb?: Function) {\r\n        if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n            this.shareTime = new Date();\r\n            this.shareCallback = cb;\r\n            wx.shareAppMessage({\r\n                query: params\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 用于区分审核版和正式版的开关参数 1和2，对应后台版本一和版本二参数设置 默认值：1\r\n     * 注意：该接口要在init接口调用之前调用才有效\r\n     * @param version \r\n     */\r\n    public setAppVersion(version: TyqSDKAppVersion) {\r\n        tyqSDKConfig.appVersion = version;\r\n    }\r\n\r\n    /**\r\n     * 直接获取开关值，优先判断总开关，总开关如果是关的，那将全部返回关闭状态\r\n     */\r\n    public getSwitchValue(str: string, df?: any): any {\r\n        if (this.master_switch == 0) {\r\n            return 0;\r\n        }\r\n        if (!this.switch_info[str]) {//不存在这个开关\r\n            this.log(str + \"开关不存在\");\r\n            return df || 0;\r\n        } else if (this.switch_info[str] == \"0\") {\r\n            return 0;\r\n        } else {\r\n            return this.switch_info[str];\r\n        }\r\n    }\r\n    /**\r\n     * 概率开关值\r\n     * @param str \r\n     * @returns \r\n     */\r\n    public getConfigProbability(str: string) {\r\n        let value = this.getSwitchValue(str);\r\n        if (!value) {\r\n            return false;\r\n        }\r\n        let rand = Math.random();\r\n        if (rand < value) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 收集用户玩游戏停留时间\r\n     */\r\n    private collectPlayeTime() {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n\r\n        var nowTime = this.getTimeStamp();\r\n        let elapsed = nowTime - this._onlineTime;\r\n        this.log(\"上传停留\", elapsed);\r\n        let info = {\r\n            duration_time: elapsed\r\n        }\r\n        this.httpPost(\"api/v1/collect_open_game_play_time\", info);\r\n    }\r\n\r\n    private httpPost(url: string, info: any, successCb?: Function, failCb?: Function) {\r\n        if (!info) {\r\n            info = {};\r\n        }\r\n        // 添加公共参数\r\n        info.appid = tyqSDKConfig.appId;\r\n        info.nonce_str = this.randomStr();\r\n        info.time_stamp = this.getTimeStamp(true) + this.timeDiff;\r\n        info.app_version = tyqSDKConfig.appVersion;\r\n        info.openid = this.openid;\r\n        info.watermark = this._watermark;\r\n\r\n        this.log(\"请求\", url, info);\r\n        NetworkMgr.xhrPost(url, info, (ret: any) => {\r\n            // 成功回调\r\n            this.log(\"请求返回\", url, ret);\r\n            if (successCb) {\r\n                successCb(ret);\r\n            }\r\n        }, () => {\r\n            // 失败回调\r\n            if (failCb) {\r\n                failCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    public wxIconData(): Array<jumpIconData> {\r\n        return this.wxGameIconData;\r\n    }\r\n    public wxJumpData(): Array<Object> {\r\n        return this.weixin_ads_data;\r\n    }\r\n\r\n    /**\r\n     * 收集用户点击跳转信息，关于跳转后台小游戏接口触活量统计\r\n     * @param event 时间名称\r\n     * @param weixin_ads_id 后台所对应图片展示位\r\n     */\r\n    public collectClickEventGame(event: string, weixin_ads_id: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let info = {\r\n            event_id: event,\r\n            weixin_ads_id: weixin_ads_id,\r\n        }\r\n        this.httpPost(\"api/v1/collect_weixin_ads_jumb_ok_cb\", info);\r\n    }\r\n\r\n    /**\r\n     * 获取随机字符串\r\n    */\r\n    private randomStr(strLen: number = 32) {\r\n        let len = strLen;\r\n        let $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678'; /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/\r\n        let maxPos = $chars.length;\r\n        let pwd = '';\r\n        for (let idx = 0; idx < len; idx++) {\r\n            pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n        }\r\n        return pwd;\r\n    }\r\n\r\n    /**\r\n     * 获取时间戳\r\n     * @param isSecond true 单位：秒    默认单位：毫秒\r\n     * @returns \r\n     */\r\n    private getTimeStamp(isSecond = false) {\r\n        let time = Date.now();\r\n        if (isSecond) {\r\n            time = Math.floor(time / 1000);\r\n        }\r\n        return time;\r\n    }\r\n\r\n    /**\r\n     * openId初始化\r\n     */\r\n    private initOpenId(): string {\r\n        let openId = sys.localStorage.getItem(this.item_openId);\r\n        if (!openId) {\r\n            openId = this.randOpenId();\r\n            sys.localStorage.setItem(this.item_openId, openId);\r\n            this.log(\"注册：\" + openId);\r\n        }\r\n        this.log(\"openid=\", openId);\r\n\r\n        return openId;\r\n    }\r\n    private randOpenId() {\r\n        var s = [], hexDigits = \"0123456789abcdef\";\r\n        for (var i = 0; i < 40; i++) {\r\n            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n        }\r\n        s[14] = \"4\";\r\n        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\r\n        s[8] = s[13] = s[18] = s[23] = s[28] = \"-\";\r\n        return s.join(\"\");\r\n    }\r\n\r\n    /**\r\n     * 埋点事件：某个关卡开始时调用\r\n     * @param level 第几个关卡\r\n     */\r\n    public eventLevelStart(level: number) {\r\n        this._gameLevel = level;\r\n        this.collectLevelInfo(1);\r\n    }\r\n    /**\r\n     * 埋点事件：关卡挑战结束时调用\r\n     * @param level 第几个关卡\r\n     * @param isWin 是否成功\r\n     */\r\n    public eventLevelEnd(level: number, isWin: boolean) {\r\n        this._gameLevel = level;\r\n        this.collectLevelInfo(isWin ? 2 : 3);\r\n    }\r\n    /**\r\n     * 自定义埋点事件\r\n     * @param eventType 事件类型 \r\n     * @param eventName 事件名称\r\n     */\r\n    public eventSendCustomEvent(eventType: string, eventName?: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let name = eventName ? eventType + \"-\" + eventName : eventType;\r\n        this.log(\"%cevent:\" + name, \"color:#FF0000\");\r\n        let info = {\r\n            event_id: name,\r\n        }\r\n        this.httpPost(\"api/v1/collect_click_event\", info);\r\n    }\r\n\r\n    public adClickUpload(adType: string, mode: string, action: number, pagePath: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        if (pagePath) {\r\n            pagePath = encodeURIComponent(pagePath);\r\n        }\r\n        this.log(\"广告点击上报：\" + adType, mode, action, pagePath);\r\n\r\n        let status = 0;\r\n        if (adType == tyqSDKConfig.adShowTypes.rewardedAd) {\r\n            status == 1;\r\n        } else if (adType == tyqSDKConfig.adShowTypes.interstitialAd) {\r\n            status = 2;\r\n        } else if (adType == tyqSDKConfig.adShowTypes.bannerAndCustomAd) {\r\n            status = 3;\r\n        }\r\n\r\n        let info: any = {};\r\n        info.status = status;\r\n        let urlQuery = tyqAdManager.getEnterUrlQuery();\r\n        if (urlQuery && urlQuery.pull_in_ads_id) {\r\n            info.pull_in_ads_id = urlQuery.pull_in_ads_id;\r\n        }\r\n        this.httpPost(\"api/v1/collect_weixin_ads_mb_act_info\", info);\r\n    }\r\n\r\n\r\n    /**\r\n     * 收集关卡游玩信息\r\n     * @param stata 1：关卡挑战开始  2：胜利  3：失败\r\n     */\r\n    private collectLevelInfo(stata: number) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let curTime = this.getTimeStamp(false);\r\n        var play_time = 0;\r\n        if (stata == 1) {\r\n            // 关卡开始，记录下开始时间点\r\n            this._playTime = curTime;\r\n        } else {\r\n            // 关卡结束，计算花费时长\r\n            play_time = curTime - this._playTime;\r\n            this._playTime = 0;\r\n        }\r\n\r\n        let info = {\r\n            game_level: this._gameLevel,\r\n            status: stata,\r\n            play_time: play_time\r\n        }\r\n        this.httpPost(\"api/v1/collect_user_play_game_level\", info);\r\n    }\r\n\r\n    /**\r\n     * 设置SDK输出日志开关，默认是关闭的\r\n     * @param isOpen \r\n     */\r\n    public setLogOpen(isOpen: boolean) {\r\n        tyqSDKConfig.isLogOpen = isOpen;\r\n    }\r\n\r\n    public log(message?: any, ...optionalParams: any[]) {\r\n        if (!tyqSDKConfig.isLogOpen) {\r\n            return;\r\n        }\r\n        if (typeof (message) == \"string\") {\r\n            console.log(\"[TyqSDK]\" + message, ...optionalParams);\r\n        } else {\r\n            console.log(\"[TyqSDK]\", message, ...optionalParams);\r\n        }\r\n    }\r\n    public error(message?: any, ...optionalParams: any[]) {\r\n        if (!tyqSDKConfig.isLogOpen) {\r\n            return;\r\n        }\r\n        console.error(\"[TyqSDK]\" + message, ...optionalParams);\r\n    }\r\n\r\n\r\n    // 广告相关接口===========================================start\r\n    /**\r\n     * 显示底部banner广告，内部有调用计数机制，调用+1，调用hideBannerAd会减1，计数为0才会真正隐藏banner广告\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showBannerAd(forceShow?: boolean) {\r\n        let time = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_banner_turns);\r\n        if (time) {\r\n            tyqAdManager.showBannerAd(parseInt(time));\r\n            return;\r\n        }\r\n        if (forceShow) {\r\n            tyqAdManager.showBannerAd();\r\n            return;\r\n        }\r\n      \r\n    }\r\n    /**\r\n     * 隐藏bannner广告\r\n     * @param isForce 是否强制将计数置为零，并强制隐藏\r\n     */\r\n    public hideBannerAd(isForce?: boolean) {\r\n        tyqAdManager.hideBannerAd(isForce);\r\n    }\r\n    /**\r\n     * banner广告是否正在显示中\r\n     */\r\n    public isBannerAdShowing(): boolean {\r\n        return tyqAdManager.isBannerAdShowing();\r\n    }\r\n\r\n    /**\r\n     * 显示插屏广告\r\n     */\r\n    public showInterstitialAd() {\r\n        tyqAdManager.showInterstitialAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生矩阵广告\r\n     */\r\n    public showCustomRectCenterAd(failcb = null) {\r\n        tyqAdManager.showCustomRectCenterAd(failcb);\r\n    }\r\n    /**\r\n     * 隐藏原生矩阵广告\r\n     */\r\n    public hideCustomRectCenterAd() {\r\n        tyqAdManager.hideCustomRectCenterAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生垂直广告，显示在左右两边\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showCustomVerticalLeftRightAd(forceShow?: boolean) {\r\n        if (forceShow || this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_custom_v_switch)) {\r\n            tyqAdManager.showCustomVerticalLeftRightAd();\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生垂直广告\r\n     */\r\n    public hideCustomVerticalLeftRightAd() {\r\n        tyqAdManager.hideCustomVerticalLeftRightAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生水平广告，显示在顶部\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showCustomHorizontalTopAd(forceShow?: boolean) {\r\n        if (forceShow || this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_custom_h_switch)) {\r\n            tyqAdManager.showCustomHorizontalTopAd();\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生水平广告\r\n     */\r\n    public hideCustomHorizontalTopAd() {\r\n        tyqAdManager.hideCustomHorizontalTopAd();\r\n    }\r\n\r\n    /**\r\n     * 通用显示原生广告接口\r\n     * @param flag 标识 \r\n     * @param type 类型 1矩阵；2横向；3竖向；4单格子\r\n     * @param pos 位置信息\r\n     * @param adSize 尺寸\r\n     * @param adId 广告id\r\n     * @param failcb 失败回调\r\n     */\r\n    public showCustomAd(flag: string, type: EType, pos: IPos, adSize?: { width: number, height: number }, adId?: any, failcb?: Function) {\r\n        if (!adSize) {\r\n            switch (type) {\r\n                case EType.rect:\r\n                    adSize = tyqAdManager.customAdSizeObj.rect;\r\n                    break;\r\n                case EType.horizontal:\r\n                    adSize = tyqAdManager.customAdSizeObj.horizontal;\r\n                    break;\r\n                case EType.vertical:\r\n                    adSize = tyqAdManager.customAdSizeObj.vertical;\r\n                    break;\r\n                default:\r\n                    adSize = tyqAdManager.customAdSizeObj.gird;\r\n                    break;\r\n            }\r\n        }\r\n        tyqAdManager.showCustomAd(flag, type, pos, adSize, adId, failcb);\r\n    }\r\n    /**\r\n     * 根据创建标识隐藏原生广告\r\n     * @param flag \r\n     */\r\n    public hideCustomAd(flag: string) {\r\n        tyqAdManager.hideCustomAd(flag);\r\n    }\r\n\r\n    /**\r\n     * 隐藏所有原生广告\r\n     */\r\n    public hideCustomAllAd() {\r\n        tyqAdManager.hideCustomAllAd();\r\n    }\r\n\r\n    /**\r\n     * 修改通用原生矩阵广告的尺寸\r\n     * 后台默认参数 行数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomRectAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.rect.width = width;\r\n        tyqAdManager.customAdSizeObj.rect.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生水平广告的尺寸\r\n     * 后台默认参数 尺寸：80%  默认数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomHorizontalAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.horizontal.width = width;\r\n        tyqAdManager.customAdSizeObj.horizontal.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生垂直广告的尺寸\r\n     * 后台默认参数 尺寸：90%  默认数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomVerticalAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.vertical.width = width;\r\n        tyqAdManager.customAdSizeObj.vertical.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生单个格子广告的尺寸\r\n     * 后台默认参数 单个格子 尺寸：90%\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomGridAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.grid.width = width;\r\n        tyqAdManager.customAdSizeObj.grid.height = height;\r\n    }\r\n\r\n    /**\r\n     * 显示激励视频广告\r\n     * @param info 观看激励视频位置描述，如果有值，会自动埋点该位置的观看激励视频与观看完激励视频事件\r\n     * @param cb 结果回调，参数st  1成功，发放奖励   其他失败\r\n     */\r\n    public showRewardedAd(info?: string, cb?: (st: number) => void) {\r\n        if (info) {\r\n            this.eventSendCustomEvent(tyqSDKConfig.eventNames.rewardedAdStart + info);\r\n        }\r\n        tyqAdManager.showRewardedAd(() => {\r\n            if (info) {\r\n                this.eventSendCustomEvent(tyqSDKConfig.eventNames.rewardedAdSuccess + info);\r\n            }\r\n            if (cb) {\r\n                cb(1);\r\n            }\r\n        }, (state) => {\r\n            if (cb) {\r\n                if(state){\r\n                    cb(state);\r\n                }else{\r\n                    cb(0);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // 广告相关接口===========================================end\r\n    /**\r\n     * 进入加载页，需要调用该接口\r\n     */\r\n    public onShowLoadingLayer() {\r\n        this.eventSendCustomEvent(tyqSDKConfig.eventNames.enterLoadingLayer);\r\n    }\r\n\r\n    /**\r\n     * 游戏显示主界面，需要调用该接口\r\n     */\r\n    public onShowHomeLayer() {\r\n        this.eventSendCustomEvent(tyqSDKConfig.eventNames.enterHomeLayer);\r\n\r\n        let val = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_show_main_layer);\r\n        if (!val) {\r\n            return;\r\n        }\r\n        val = parseInt(val);\r\n        if (val == 1) {\r\n            // 显示插屏广告\r\n            this.showInterstitialAd();\r\n        } else if (val == 2) {\r\n            // 显示矩阵广告\r\n            this.showCustomRectCenterAd(null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 完成某局或者某个关卡，需要调用该接口，不管成功或者失败，都要调用\r\n     * @param level 当前进行到的关卡\r\n     */\r\n    public addLevelCount(level: number) {\r\n        let startLevel = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_reward_level);\r\n        if (!startLevel) {\r\n            return;\r\n        }\r\n\r\n        startLevel = parseInt(startLevel);\r\n        if (level <= startLevel) {\r\n            return;\r\n        }\r\n\r\n        this.levelCount++;\r\n        let val = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_level_count);\r\n        if (val) {\r\n            val = parseInt(val);\r\n            if (this.levelCount >= val) {\r\n                this.levelCount = 0;\r\n                this.showRewardedAd();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 游戏显示结算界面，需要调用该接口\r\n     */\r\n    public onShowSettlementLayer() {\r\n        this.showInterstitialAd();\r\n    }\r\n\r\n    /**\r\n     * 在游戏结算界面展示之前，调用该接口，显示SDK的【更多游戏】界面\r\n     * @param level 当前进行到的关卡\r\n     * @param closeCb 更多游戏界面关闭后的回调，继续执行展示游戏结算界面的逻辑\r\n     */\r\n    public showMoreGameLayer(level: number, closeCb: Function) {\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            return\r\n        }\r\n        let startLevel = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level);\r\n        if (!startLevel) {\r\n            closeCb();\r\n            return;\r\n        }\r\n\r\n        startLevel = parseInt(startLevel);\r\n        if (level <= startLevel) {\r\n            closeCb();\r\n            return;\r\n        }\r\n\r\n        let obj: any = {};\r\n        obj.level = level;\r\n        tyqLayerManager.openLayer(tyqConstants.layers.TyqMoreGameLayer, obj, () => {\r\n            closeCb();\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const tyqSDK = TyqSDK.instance;\r\n","export const tyqSDKConfig = {\r\n    /**游戏名称 */\r\n    gameName: '末日特工队',\r\n    /**游戏版本号 */\r\n    gameVersion: '1.0.0',\r\n    /**用于区分审核版和正式版，每次上传都需要改这个值 1和2*/\r\n    appVersion: 1,\r\n    //后台appid\r\n    appId: '',\r\n    //后台分配的key \r\n    apiKey: '',\r\n    //后台app秘钥\r\n    AppSecret: \"1\",\r\n    // SDK服务端域名\r\n    server: 'https://api.game.xmtyq.com/china_app_game_sdk/',\r\n\r\n    // SDK日志输出开关\r\n    isLogOpen: false,\r\n\r\n    //是否关闭视频广告\r\n    isCloseAd: true,\r\n\r\n    /**\r\n     * 是否开启激励托管\r\n     */\r\n    isOpenBeHavior: false,\r\n\r\n    // 后台参数key值\r\n    paramsKeys: {\r\n        // 各种类型的广告id\r\n        tyq_ad_banners: \"tyq_ad_banners\",\r\n        tyq_ad_interstitial: \"tyq_ad_interstitial\",\r\n        tyq_ad_custom_rect: \"tyq_ad_custom_rect\",\r\n        tyq_ad_custom_v: \"tyq_ad_custom_v\",\r\n        tyq_ad_custom_h: \"tyq_ad_custom_h\",\r\n        tyq_ad_rewarded: \"tyq_ad_rewarded\",\r\n\r\n        // banner轮流展示间隔时间（单位：毫秒，0表示关闭）\r\n        tyq_banner_turns: \"tyq_banner_turns\",\r\n        // 界面顶部水平格子广告（0：关闭 1：开启）\r\n        tyq_custom_h_switch: \"tyq_custom_h_switch\",\r\n        // 界面左右两侧垂直格子广告（0：关闭 1：开启）\r\n        tyq_custom_v_switch: \"tyq_custom_v_switch\",\r\n        // 进入主界面强弹插屏或者矩阵(0：关闭，1：插屏，2：矩阵格子）\r\n        tyq_show_main_layer: \"tyq_show_main_layer\",\r\n        // 完成（包括失败）任意局数强弹激励视频，与tyq_reward_level配合使用（0：关闭，>=1：局数）\r\n        tyq_level_count: \"tyq_level_count\",\r\n        // 强弹激励视频在指定关卡后才展示，不包括本身（0：关闭，>=1：关卡数）\r\n        tyq_reward_level: \"tyq_reward_level\",\r\n        // 底部bannner广告误触开关，与参数tyq_more_game_level配合使用(0：关闭，>=1：第x关之后开启，不包括x）\r\n        tyq_banner_touch: \"tyq_banner_touch\",\r\n        // 控制更多游戏页面在指定关卡后(0：关闭，>=1：第x关之后开启，不包括x）\r\n        tyq_more_game_level: \"tyq_more_game_level\",\r\n        tyq_ad_custom_rect_switch: \"tyq_ad_custom_rect_switch\"\r\n\r\n    },\r\n\r\n    // 广告点击类型\r\n    adShowTypes: {\r\n        rewardedAd: \"激励视频广告点击\",\r\n        interstitialAd: \"插屏广告点击\",\r\n        bannerAndCustomAd: \"banner与原生广告点击\",\r\n    },\r\n\r\n    eventNames: {\r\n        enterLoadingLayer: \"进入加载页\",\r\n        enterHomeLayer: \"进入主界面\",\r\n        rewardedAdStart: \"观看激励视频-\",\r\n        rewardedAdSuccess: \"观看完激励视频-\",\r\n    }\r\n}\r\n\r\n","import { Component, Game, game, instantiate, js, sys, tween, v3 } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { GLoginState } from \"../../tyqSDK/network/conf\";\r\nimport CronCtr from \"../../tyqSDK/network/CronCtr\";\r\nimport ServerCtr from \"../../tyqSDK/network/ServerCtr\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { constants } from \"../data/constants\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { audioManager } from \"../manager/audioManager\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { eventManager } from \"../manager/eventManager\";\r\nimport { RedPointLogicMgr, RPointMask } from \"../manager/RedPointLogicMgr\";\r\nimport { playerModel } from \"./playerModel\";\r\n\r\n\r\nexport interface LevelDataItem {\r\n    Level: number   //\r\n    Time: number //  最大生存时间 ，单位秒\r\n    ReceiveState: number[] //[0,0,0] //3个级别章节奖励领取状态。0:未领取 1：已领取\r\n}\r\n\r\nexport interface PropItem {\r\n    Id: number\r\n    Num: number\r\n}\r\n\r\nexport class UserData extends Component {\r\n\r\n    private static _instance: UserData = null\r\n\r\n    public $localKey: string = \"UserData\";\r\n    private $time: number = null;\r\n\r\n    /**关卡 */\r\n    private $roleLv: number = 1\r\n\r\n    /**关卡 */\r\n    private $roleExp: number = 1\r\n\r\n    /**体力 */\r\n    private $power: number = 30\r\n\r\n    /**体力上限 */\r\n    private _maxPower: number = 30\r\n\r\n    private _powerRevoverTime = 60\r\n    /**体力倒计时 */\r\n    private $powerTime: number = 0\r\n\r\n    /** 宝石 */\r\n    private $baoShi: number = 1000\r\n\r\n    private $optStone: number = 0;\r\n    private $dayAct: number = 0;\r\n\r\n    /** 金币 */\r\n    private $coin: number = 1000\r\n\r\n    // 小手指引\r\n    private $mapHand: number = 0;\r\n    // 攻击力\r\n    private _attack: number = 0\r\n    // 生命值\r\n    private _life: number = 0\r\n\r\n    private $curMap = 1\r\n\r\n    private $openLevel = 1\r\n\r\n    private $levelData = []\r\n\r\n    private $mapData: any\r\n\r\n    private $propData = [{ id: 301, num: 0, iswear: 0 }]\r\n\r\n    private $wearProp = [0, 0, 0, 0, 0, 0]\r\n\r\n    private $playerData: any = {};\r\n\r\n    private $patrolStartTime = 0\r\n\r\n    private $patrolRewardProp = []\r\n    private $patrolRewardPropArr = []\r\n\r\n    private $heroSkin = 2001\r\n\r\n    public $drawNormalNum = 0\r\n    public $drawGradeNum = 0\r\n\r\n    // 爬塔\r\n    public $towerWeaponIdArr = [10130, 10135, 10140, 10145, 10150, 10155, 10160, 10165];\r\n    public $towerWeaponId = 0;\r\n    public $towerWeaponLvObj = {};\r\n    public $towerMapIdObj = {};\r\n\r\n\r\n    public $pyramidState: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    public $pyramidDrawTime = 0\r\n\r\n    public $friendPassCnt = 0 //好友通关数\r\n    public $videoCalCnt = 0 //视频累计\r\n\r\n    public $freeDraw = 0\r\n\r\n    public static getInstance() {\r\n        if (this._instance == null) {\r\n            this._instance = new UserData()\r\n            this._instance.onInit()\r\n        }\r\n        return this._instance\r\n    }\r\n\r\n    onInit() {\r\n        //使用服务端数据\r\n        console.log(\"-----比较服务端数据版本号---\", ServerCtr.GetInstance().dataVersion, ServerCtr.GetInstance().serverDataVersion)\r\n        if (ServerCtr.GetInstance().loginState == GLoginState.loginWithAccount) {\r\n            if (ServerCtr.GetInstance().dataVersion < ServerCtr.GetInstance().serverDataVersion) {\r\n                this.loadServerData(ServerCtr.GetInstance().serverData)\r\n            } else {\r\n                this.load();\r\n            }\r\n        } else {\r\n            this.load();\r\n        }\r\n\r\n        // console.error(\"-----跟踪----\")\r\n\r\n        this.$time = 0;\r\n        this.initEvent();\r\n        this.setBaseConfig()\r\n        //   this.$wearProp = [10001, 0, 0, 10003, 0, 0]\r\n        this.afterLoadData();\r\n\r\n\r\n        //上传数据\r\n        if (ServerCtr.GetInstance().dataVersion > ServerCtr.GetInstance().serverDataVersion) {\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n        }\r\n\r\n        this.schedule(() => {\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n        }, 300)\r\n\r\n    }\r\n\r\n\r\n    setBaseConfig() {\r\n        this._maxPower = designManager.config.energyMax\r\n        this._powerRevoverTime = designManager.config.energyRecoverTime\r\n        this.updateRoleAtkHp()\r\n    }\r\n\r\n    afterLoadData() {\r\n        if (!this.$towerWeaponId) {\r\n            this.$towerWeaponId = this.$towerWeaponIdArr[0];\r\n        }\r\n        if (this.getPropById(2001) <= 0) {\r\n            this.addPropNum(2001, 1);\r\n        }\r\n    }\r\n\r\n    setConfig() {\r\n        this.$baoShi = designManager.config.basicGem\r\n        this.$coin = designManager.config.basicGold\r\n        this.$propData = [{ id: 301, num: 0, iswear: 0 }]\r\n        this.$wearProp = [0, 0, 0, 0, 0, 0]\r\n        this.$levelData = []\r\n        this.$curMap = 1\r\n        this.$openLevel = 1\r\n        this.$power = designManager.config.energyMax\r\n\r\n        this.$mapData = null\r\n        this.$roleExp = 0\r\n        this.$roleLv = 1\r\n        this.$mapHand = 0;\r\n        this.$patrolRewardProp = []\r\n        this.$patrolRewardPropArr = []\r\n\r\n        this.$patrolStartTime = (new Date()).getTime()\r\n\r\n        this.$drawNormalNum = 0\r\n        this.$drawGradeNum = 0\r\n\r\n        this.$pyramidState = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n\r\n        this.$friendPassCnt = 0;\r\n        this.$videoCalCnt = 0;\r\n    }\r\n\r\n    public getHeroSkin(id: number = 0) {\r\n        if (!id) {\r\n            id = this.$heroSkin;\r\n        }\r\n        let data = designManager.getRowById(constants.tableName.prop, id)\r\n        if (data) {\r\n            return \"skin\" + data.p2\r\n        }\r\n        return \"skin1\"\r\n    }\r\n\r\n    public set heroSkin(skinID) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            if (this.$propData[index].id == skinID && this.$propData[index].num > 0) {\r\n                this.$heroSkin = skinID\r\n                return\r\n            }\r\n        }\r\n    }\r\n\r\n    public get heroSkin() {\r\n        return this.$heroSkin;\r\n    }\r\n\r\n    public isHaveProp(id: number | any[]) {\r\n        if (typeof (id) === \"number\") {\r\n            for (let index = 0; index < this.$propData.length; index++) {\r\n                if (this.$propData[index].id == id && this.$propData[index].num > 0) {\r\n                    return true\r\n                }\r\n            }\r\n        } else {\r\n            let havenum = 0\r\n            for (let i = 0; i < id.length; i++) {\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    if (this.$propData[index].id == id[i] && this.$propData[index].num > 0) {\r\n                        havenum++\r\n                    }\r\n                }\r\n            }\r\n            if (havenum >= id.length) {\r\n                return true\r\n            }\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    public get roleLv() {\r\n        return this.$roleLv;\r\n    }\r\n\r\n    public get power() {\r\n        this.checkPowerTime()\r\n        return this.$power;\r\n    }\r\n\r\n    public towerWeaponAddLv() {\r\n        let ret: any = {};\r\n        let lv = this.getWeaponLv(this.$towerWeaponId);\r\n        let nextRow = designManager.getRowById(constants.tableName.weaponOpt, lv + 1);\r\n        if (!nextRow) {\r\n            // 已满级\r\n            ret.st = 2;\r\n            return ret;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n        let num = this.getPropNumById(row.propId);\r\n        if (num < row.propNum) {\r\n            // 消耗道具不足\r\n            ret.st = 3;\r\n            ret.propId = row.propId;\r\n            return ret;\r\n        }\r\n\r\n        this.addPropNum(row.propId, -row.propNum);\r\n        this.$towerWeaponLvObj[this.$towerWeaponId] = lv + 1;\r\n\r\n        ret.st = 1;\r\n\r\n        return ret;\r\n\r\n    }\r\n\r\n    public getTowerMapInfo(mapId: number) {\r\n        let info = this.$towerMapIdObj[mapId];\r\n        if (!info) {\r\n            info = {\r\n                floor: 1\r\n            };\r\n        }\r\n\r\n        return info;\r\n    }\r\n    public addTowerMapFloor(mapId: number) {\r\n        let info = this.getTowerMapInfo(mapId);\r\n        let nextFloor = info.floor + 1;\r\n        if (!designManager.getRowById(constants.tableName.towerFloor, nextFloor)) {\r\n            // 已到达最顶层\r\n            return;\r\n        }\r\n        info.floor++;\r\n        this.$towerMapIdObj[mapId] = info;\r\n    }\r\n\r\n    public getWeaponLv(id: number = this.$towerWeaponId) {\r\n        let lv = this.$towerWeaponLvObj[id];\r\n        if (!lv) {\r\n            lv = 1;\r\n        }\r\n\r\n        return lv;\r\n    }\r\n\r\n    public checkPowerTime() {\r\n        if (this.$power < this._maxPower) {\r\n            if (this.$powerTime == 0) {\r\n                this.$powerTime = new Date().getTime()\r\n            } else {\r\n                let time = new Date().getTime() - this.$powerTime\r\n                let num = Math.floor(time / 1000 / this._powerRevoverTime)\r\n                if (num > 0) {\r\n                    this.$power += num\r\n                    this.$power = Math.min(this._maxPower, Math.max(0, this.$power))\r\n                    this.$powerTime = this.$powerTime + num * this._powerRevoverTime * 1000\r\n                }\r\n            }\r\n        } else {\r\n            this.$powerTime = 0\r\n        }\r\n    }\r\n\r\n    public getCountTime() {\r\n        if (this.$power < this._maxPower) {\r\n            return Math.max(0, Math.min(this._powerRevoverTime, this._powerRevoverTime - (new Date().getTime() - this.$powerTime) / 1000))\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public usePower(num) {\r\n        this.$power += num\r\n        this.$power = Math.min(this._maxPower, Math.max(0, this.$power))\r\n        this.checkPowerTime()\r\n    }\r\n\r\n    public get baoshi() {\r\n        return this.$baoShi\r\n    }\r\n\r\n    public useBaoShi(num: number, update = false) {\r\n        this.$baoShi += num;\r\n        this.$baoShi = Math.max(0, this.$baoShi);\r\n        if (update) {\r\n            eventManager.send(msgac.commonResRefresh)\r\n        }\r\n    }\r\n\r\n    public get optStone() {\r\n        return this.$optStone;\r\n    }\r\n    public useOptStone(num: number) {\r\n        this.$optStone += num;\r\n        this.$optStone = Math.max(0, this.$optStone);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get dayAct() {\r\n        return this.$dayAct;\r\n    }\r\n    public set dayAct(num: number) {\r\n        this.$dayAct = num;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public useDayAct(num: number) {\r\n        this.$dayAct += num;\r\n        this.$dayAct = Math.max(0, this.$dayAct);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get energy() {\r\n        return playerModel.energyObj.num;\r\n    }\r\n    public useEnergy(num: number) {\r\n        playerModel.energyObj.num += num;\r\n        playerModel.energyObj.num = Math.max(0, playerModel.energyObj.num);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public checkAndUseBaoshi(num: number, update = false) {\r\n        if (this.$baoShi >= num) {\r\n            this.useBaoShi(0 - num, update)\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    public useCoin(num: number, update = false) {\r\n        this.$coin += num\r\n        this.$coin = Math.max(0, this.$coin)\r\n        if (update) {\r\n            eventManager.send(msgac.commonResRefresh)\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public cheackAndUseCoin(num: number, update = false) {\r\n        if (this.$coin >= num) {\r\n            this.useCoin(0 - num, update)\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    public get coin() {\r\n        return this.$coin\r\n    }\r\n\r\n    public get attack() {\r\n        return this._attack\r\n    }\r\n\r\n    public get life() {\r\n        return this._life\r\n    }\r\n\r\n    public addExp(num) {\r\n        this.$roleExp += num\r\n        let roleData = designManager.getTable(constants.tableName.heroLevel)\r\n        for (let index = this.roleLv + 1; index < roleData.length; index++) {\r\n            let element = roleData[index - 1];\r\n            if (this.$roleExp >= element.exp) {\r\n                this.$roleLv = index\r\n                this.updateRoleAtkHp()\r\n            } else {\r\n                return\r\n            }\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public updateRoleAtkHp() {\r\n        let roleData = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv)\r\n        this._attack = roleData.atk\r\n        this._life = roleData.hp\r\n\r\n        for (let i = 0; i < this.$wearProp.length; i++) {\r\n            if (this.$wearProp[i] > 0) {\r\n                let propData = designManager.getRowById(constants.tableName.prop, this.$wearProp[i])\r\n                if (propData && propData.atk) {\r\n                    this._attack += propData.atk\r\n                }\r\n                if (propData && propData.hp) {\r\n                    this._life += propData.hp\r\n                }\r\n            }\r\n        }\r\n\r\n        let suitInfo = this.getSuitPercentAdd();\r\n        this._attack *= 1 + suitInfo.atk;\r\n        this._life *= 1 + suitInfo.hp;\r\n        this._attack = Math.floor(this._attack)\r\n        this._life = Math.floor(this._life)\r\n    }\r\n\r\n    public getSuitPercentAdd() {\r\n        let suitData = this.getSuitId()\r\n        let atkAdd = 0;\r\n        let hpAdd = 0;\r\n        if (suitData != 0) {\r\n            let suitId = suitData[0]\r\n            let suitNum = suitData[1]\r\n            let suitAttr = designManager.getRowById(constants.tableName.suit, suitId)\r\n            if (suitNum >= 5) {\r\n                atkAdd = suitAttr.effectAtk_5\r\n                hpAdd = suitAttr.effectHP_5\r\n            } else if (suitNum >= 3) {\r\n                atkAdd = suitAttr.effectAtk_3\r\n                hpAdd = suitAttr.effectHP_3\r\n            }\r\n        }\r\n        let ret = {\r\n            atk: atkAdd / 100,\r\n            hp: hpAdd / 100\r\n        };\r\n\r\n        return ret;\r\n    }\r\n\r\n    public weaponOptLvEffect(val: number, lv: number) {\r\n        let optRow = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n        if (optRow) {\r\n            val = val * (1 + optRow.atk / 100);\r\n            val = Math.ceil(val);\r\n        }\r\n        return val;\r\n    }\r\n\r\n    public getTowerRoleProInfo(isEnter: boolean = false) {\r\n        let roleData = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv);\r\n\r\n        // 等级加成\r\n        let atk = roleData.atk;\r\n        let hp = roleData.hp;\r\n\r\n        // 装备加成\r\n        for (let i = 0; i < this.$wearProp.length; i++) {\r\n            let id = this.$wearProp[i];\r\n            if (i == 0) {\r\n                id = this.$towerWeaponId;\r\n                if (isEnter) {\r\n                    id = 0;\r\n                }\r\n            }\r\n            if (id > 0) {\r\n                let propData = designManager.getRowById(constants.tableName.prop, id);\r\n                if (propData && propData.atk) {\r\n                    let val = propData.atk;\r\n                    if (i == 0) {\r\n                        let lv = this.getWeaponLv(id);\r\n                        val = this.weaponOptLvEffect(val, lv);\r\n                    }\r\n                    atk += val;\r\n                }\r\n                if (propData && propData.hp) {\r\n                    hp += propData.hp;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 套装加成\r\n        let suitInfo = this.getSuitPercentAdd();\r\n        atk *= 1 + suitInfo.atk;\r\n        hp *= 1 + suitInfo.hp;\r\n\r\n        atk = Math.floor(atk);\r\n        hp = Math.floor(hp);\r\n\r\n        return {\r\n            atk: atk,\r\n            hp: hp\r\n        };\r\n\r\n    }\r\n\r\n    public get roleExp() {\r\n        return this.$roleExp\r\n    }\r\n\r\n    public getNextLevelExp() {\r\n        let nextdata = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv + 1)\r\n        if (nextdata) {\r\n            return nextdata.exp\r\n        }\r\n        return this.$roleExp\r\n    }\r\n\r\n    public setCurMap(mapid) {\r\n        this.$curMap = mapid\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public getCurMap() {\r\n        return this.$curMap\r\n    }\r\n\r\n    public set openLevel(level) {\r\n        this.$openLevel = level\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get openLevel() {\r\n        //return 2\r\n        return this.$openLevel\r\n    }\r\n\r\n    public set mapData(data: any) {\r\n        this.$mapData = data\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get mapData() {\r\n        return this.$mapData\r\n    }\r\n\r\n    public set playerData(data: any) {\r\n        this.$playerData = data;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public get playerData() {\r\n        return this.$playerData;\r\n    }\r\n\r\n    public set mapHand(st: number) {\r\n        this.$mapHand = st;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public get mapHand() {\r\n        return this.$mapHand;\r\n    }\r\n\r\n    public get wearProp() {\r\n        return this.$wearProp\r\n    }\r\n\r\n    /**\r\n     *  穿戴装备\r\n     * @param propdata cj\r\n     * @returns \r\n     */\r\n    public setWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) {\r\n                return\r\n            } else if (this.$wearProp[propdata.wearIndex - 1] == 0) {\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            } else {\r\n                this.setPropWearById(this.$wearProp[propdata.wearIndex - 1], 0)\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            }\r\n            RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n            this.updateRoleAtkHp()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 卸下装备\r\n     */\r\n    public unWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) {\r\n                this.$wearProp[propdata.wearIndex - 1] = 0\r\n                this.setPropWearById(propdata.id, 0)\r\n                this.updateRoleAtkHp()\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n                ServerCtr.GetInstance().addDataVersion()\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 自动判断是穿戴 还是 卸下 操作\r\n     * @param propdata \r\n     */\r\n    public autoWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) {\r\n                this.$wearProp[propdata.wearIndex - 1] = 0\r\n                this.setPropWearById(propdata.id, 0)\r\n            } else {\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            }\r\n            this.updateRoleAtkHp()\r\n            RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n            ServerCtr.GetInstance().addDataVersion()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 检查当前装备是否穿戴在身上\r\n     * @param propdata \r\n     * @returns \r\n     */\r\n    public checkWearProp(propdata) {\r\n        if (propdata) {\r\n            return this.$wearProp[propdata.wearIndex - 1] == propdata.id\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查当前装备是否 比穿戴在身上的 装备更好\r\n     * @param propId \r\n     * @returns \r\n     */\r\n    public checkThisPropBestToWear(propId) {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, propId)\r\n        if (propdata.wearIndex > 0) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == 0) {\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    let item = designManager.getRowById(constants.tableName.prop, this.$propData[index].id);\r\n                    if (item.wearIndex == propdata.wearIndex) {\r\n                        if (propdata.quality < item.quality) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n                return true\r\n            }\r\n\r\n            let wearpropdata = designManager.getRowById(constants.tableName.prop, this.$wearProp[propdata.wearIndex - 1])\r\n            if (wearpropdata.quality < propdata.quality) {\r\n\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    let item = designManager.getRowById(constants.tableName.prop, this.$propData[index].id);\r\n                    if (item.wearIndex == propdata.wearIndex) {\r\n                        if (propdata.quality < item.quality) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查是否有可以穿戴的装备\r\n     * @returns \r\n     */\r\n    public checkBestPropToWear() {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            let propdata = designManager.getRowById(constants.tableName.prop, value.id)\r\n            if (propdata.wearIndex > 0) {\r\n                if (this.$wearProp[propdata.wearIndex - 1] == 0) {\r\n                    return true\r\n                }\r\n\r\n                let wearpropdata = designManager.getRowById(constants.tableName.prop, this.$wearProp[propdata.wearIndex - 1])\r\n                if (wearpropdata.quality < propdata.quality) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     *  获得 装备\r\n     * @param id 装备ID\r\n     * @param num 获得数量\r\n     * @returns \r\n     */\r\n    public setPropById(id, num) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                value.num += num\r\n                return\r\n            }\r\n        }\r\n        this.$propData.push({ id: id, num: num, iswear: 0 })\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    /**\r\n     * 合成装备\r\n     * @param blessId 合成装备ID\r\n     * @param getPropId 获得装备ID\r\n     * @param needNum 需要数量\r\n     */\r\n    public blessProp(blessId, getPropId, needNum) {\r\n        this.setPropById(getPropId, 1)\r\n        this.setPropById(blessId, needNum)\r\n        RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_BlessProp, false)\r\n\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            if (this.$wearProp[index] == blessId) {\r\n                this.$wearProp[index] = getPropId\r\n                this.setPropWearById(getPropId, 1)\r\n                this.setPropWearById(blessId, 0)\r\n                this.updateRoleAtkHp()\r\n            }\r\n        }\r\n        eventManager.send(msgac.updateDropData)\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    /**\r\n     * 检查 是否有可以合成的装备\r\n     * @returns \r\n     */\r\n    public checkPropCanBless() {\r\n        let arr = this.$propData\r\n        for (let index = 0; index < arr.length; index++) {\r\n            if (arr[index].num >= 3) {\r\n                let curProp = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查当前章节是否可以领取宝箱\r\n     */\r\n    public checkChapterCanReward() {\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        for (let i = 0; i < 3; i++) {\r\n            if (leveldata.Time >= (i * 5 + 5) * 60) {\r\n                if (leveldata.ReceiveState[i] == 0) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    public setPropWearById(id, isWear) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                value.iswear = isWear\r\n                return\r\n            }\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n\r\n    public _isShowOpenLevel = false\r\n    /**\r\n     * 保存关卡完成情况的数据\r\n     * @param data \r\n     */\r\n    public setLevelData(data: LevelDataItem) {\r\n        let row = designManager.getRowById(constants.tableName.map, data.Level);\r\n        if (row.type != constants.mapTypes.main) {\r\n            return;\r\n        }\r\n        let index = data.Level - 1\r\n        if (index < 0) {\r\n            index = 0\r\n        }\r\n        if (this.$levelData[index] == null) {\r\n            this.$levelData[index] = data\r\n        } else {\r\n            if (data.Time > this.$levelData[index].Time) {\r\n                this.$levelData[index].Time = data.Time\r\n            }\r\n        }\r\n        if (this.$levelData[index].Time >= 15 * 60) {\r\n            if (this.$openLevel <= data.Level) {\r\n                let nextId = this.$openLevel + 1;\r\n                if (designManager.getRowById(constants.tableName.map, nextId)) {\r\n                    this.$openLevel++\r\n                    this.$curMap = this.$openLevel\r\n                    this._isShowOpenLevel = true\r\n                }\r\n                ServerCtr.GetInstance().addDataVersion()\r\n            }\r\n        }\r\n    }\r\n\r\n    public getLevelData(level) {\r\n        let index = level - 1\r\n        if (index < 0) {\r\n            index = 0\r\n        }\r\n\r\n        if (this.$levelData[index]) {\r\n            return this.$levelData[index]\r\n        }\r\n\r\n        let ld: LevelDataItem = {\r\n            Level: level,\r\n            Time: 0,\r\n            ReceiveState: [0, 0, 0],\r\n        }\r\n\r\n        UserData.getInstance().setLevelData(ld)\r\n        return ld\r\n    }\r\n\r\n    public get propData() {\r\n        return this.$propData\r\n    }\r\n\r\n    public getPropSort() {\r\n        let dataArr = [];\r\n        for (let i in this.$propData) {\r\n            let prop = this.$propData[i];\r\n            let row = designManager.getRowById(constants.tableName.prop, prop.id);\r\n            if (row.type == 8 || row.type == 11) {\r\n                dataArr.push(prop);\r\n            }\r\n        }\r\n        let equipSort = (a: { id }, b: { id }) => {\r\n            let equipDataA = designManager.getRowById(constants.tableName.prop, a.id)\r\n            let equipDataB = designManager.getRowById(constants.tableName.prop, b.id)\r\n            return equipDataA.wearIndex - equipDataB.wearIndex;\r\n        }\r\n        dataArr.sort(equipSort);\r\n        return dataArr;\r\n    }\r\n\r\n    public getPropById(id) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                return value.num\r\n            }\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public getSuitId() {\r\n        let suitId = []\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            let element = this.$wearProp[index];\r\n            if (element > 0) {\r\n                let propData1 = designManager.getRowById(constants.tableName.prop, element)\r\n                if (!suitId[propData1.suit_id]) {\r\n                    suitId[propData1.suit_id] = 0\r\n                }\r\n                suitId[propData1.suit_id]++\r\n            }\r\n        }\r\n        for (let index = 0; index < suitId.length; index++) {\r\n            if (suitId[index] >= 3) {\r\n                return [index, suitId[index]]\r\n            }\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public getSuitNum(propData) {\r\n        let suitId = propData.suit_id\r\n        let num = 0\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            let element = this.$wearProp[index];\r\n            if (element > 0) {\r\n                let propData1 = designManager.getRowById(constants.tableName.prop, element)\r\n                if (propData1.suit_id == suitId) {\r\n                    num++\r\n                }\r\n            }\r\n        }\r\n        return num\r\n    }\r\n\r\n    public tobePropItem(arr: any[]) {\r\n        let propArr = []\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let prop: PropItem = {\r\n                Id: arr[i][0],\r\n                Num: arr[i][1],\r\n            }\r\n            propArr.push(prop)\r\n        }\r\n        return propArr\r\n    }\r\n\r\n    public getPropNumById(id: number) {\r\n        let num = 0;\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        switch (row.type) {\r\n            case 1:\r\n                num = this.$coin;\r\n                break;\r\n            case 9:\r\n                num = this.$baoShi;\r\n                break;\r\n            case 10:\r\n                num = this.$roleExp;\r\n                break;\r\n            case 12:\r\n                num = this.$power;\r\n                break;\r\n            case 14:\r\n                num = this.$optStone;\r\n                break;\r\n            case 15:\r\n                num = this.$dayAct;\r\n                break;\r\n            default:\r\n                for (let i in this.$propData) {\r\n                    let prop = this.$propData[i];\r\n                    if (prop.id == id) {\r\n                        num = prop.num;\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return num;\r\n    }\r\n\r\n    /**\r\n     * 获得/扣减道具\r\n     * @param id 道具id \r\n     * @param num 道具数量，负数表示 扣减\r\n     */\r\n    public addPropNum(id: number, num: number) {\r\n        let propItem: PropItem = {\r\n            Id: id,\r\n            Num: num\r\n        };\r\n        this.getRewardProp([propItem]);\r\n\r\n        return propItem;\r\n    }\r\n\r\n    public addPropByDesign(award: any) {\r\n        return this.addPropNum(award[0], award[1]);\r\n    }\r\n\r\n    public addPropArrByDesign(awardArr: any) {\r\n        let arr = [];\r\n        for (let i in awardArr) {\r\n            let award = awardArr[i];\r\n            let propItem: PropItem = {\r\n                Id: award[0],\r\n                Num: award[1]\r\n            };\r\n            arr.push(propItem);\r\n        }\r\n        this.getRewardProp(arr);\r\n\r\n        return arr;\r\n    }\r\n\r\n    /**；領取獎勵 格式 [10001,1];[10002,2];[10003,1] */\r\n    public getRewardProp(rewardArr: PropItem[], double = 1) {\r\n        for (let i = 0; i < rewardArr.length; i++) {\r\n            let dataArr = rewardArr[i];\r\n            let propdata = designManager.getRowById(constants.tableName.prop, dataArr.Id)\r\n            if (!propdata) {\r\n                myLog.e(\"prop is not in design\", propdata);\r\n                continue;\r\n            }\r\n            if (propdata.type == 1) {\r\n                this.useCoin(dataArr.Num * double)\r\n            } else if (propdata.type == 10) {\r\n                this.addExp(dataArr.Num * double)\r\n            } else if (propdata.type == 8 || propdata.type == 11) {\r\n                this.setPropById(dataArr.Id, dataArr.Num * double)\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_BlessProp, false)\r\n\r\n            } else if (propdata.type == 9) {\r\n                this.useBaoShi(dataArr.Num * double)\r\n            } else if (propdata.type == 12) {\r\n                this.usePower(dataArr.Num * double)\r\n            } else if (propdata.type == 14) {\r\n                // 魂晶\r\n                this.useOptStone(dataArr.Num * double);\r\n            } else if (propdata.type == 15) {\r\n                // 日活跃\r\n                this.useDayAct(dataArr.Num * double);\r\n            } else if (propdata.type == 16) {\r\n                // 能量战令\r\n                this.useEnergy(dataArr.Num * double);\r\n            } else {\r\n                this.setPropById(dataArr.Id, dataArr.Num * double)\r\n            }\r\n        }\r\n        eventManager.send(msgac.commonResRefresh)\r\n        this.saveData()\r\n    }\r\n\r\n    /**\r\n     *  使用道具。\r\n     * @param dataArr \r\n     * @returns  true 表示道具充足并使用。false 表示资源不够\r\n     */\r\n    public checkUseProp(dataArr: PropItem) {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, dataArr.Id)\r\n        if (!propdata) {\r\n            myLog.e(\"prop is not in design\", propdata);\r\n            return\r\n        }\r\n\r\n        if (propdata.type == 1) {\r\n            if (this.$coin >= dataArr.Num) {\r\n                this.useCoin(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        } else if (propdata.type == 9) {\r\n            if (this.$baoShi >= dataArr.Num) {\r\n                this.useBaoShi(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        } else if (propdata.type == 14) {\r\n            if (this.$optStone >= dataArr.Num) {\r\n                this.useOptStone(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        }\r\n    }\r\n\r\n\r\n    showGetAnimal(parent, node, start, end) {\r\n        let arr = cocosUtil.getCircleDirectionArr(10, 100);\r\n        for (let index = 0; index < 10; index++) {\r\n            let node1 = instantiate(node)\r\n            parent.addChild(node1)\r\n            node1.layer = parent.layer\r\n            tween(node1).set({ positon: v3(start[0], start[1], 0) }).to(0.2, { positon: v3(arr[index].x, arr[index].y, 0) }).to(0.5, { positon: v3(end[0], end[1], 0) }).start()\r\n            cocosUtil.drawCurvePath(node1, [arr[index].x, arr[index].y], [end[0], end[1]], 0.2 + Math.random() * 0.2, 30, 0.1 + index * 0.05)\r\n        }\r\n        return\r\n    }\r\n\r\n    stringToArr(str: string) {\r\n        let index = str.indexOf(\"[\")\r\n        let endIndex = str.indexOf(\"]\")\r\n        let newStr = str.substring(index + 1, endIndex)\r\n        return newStr.split(\",\")\r\n    }\r\n\r\n    /**注冊事件*/\r\n    protected initEvent() {\r\n        game.on(Game.EVENT_HIDE, () => {\r\n            // @ts-ignore\r\n            if (this.resetAccount) {\r\n                return;\r\n            }\r\n            this.$time = Date.now()\r\n            this.saveData()\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n        });\r\n        game.on(Game.EVENT_SHOW, () => {\r\n            audioManager.gameOnShow();\r\n        });\r\n    }\r\n\r\n    public saveData() {\r\n        eventManager.send(msgac.saveDataBefore);\r\n        let obj = js.createMap(true);;\r\n        for (let key in this) {\r\n            if (key.indexOf('$') != -1) {\r\n                obj[key] = this[key];\r\n            }\r\n        }\r\n        sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n        ServerCtr.GetInstance().addDataVersion()\r\n        eventManager.send(msgac.saveDataAfter);\r\n    }\r\n\r\n    public getLocalData() {\r\n        let obj = js.createMap(true);\r\n        for (let key in this) {\r\n            if (key.indexOf('$') != -1) {\r\n                obj[key] = this[key];\r\n            }\r\n        }\r\n        return {\r\n            \"userData\": JSON.stringify(obj),\r\n            \"version\": ServerCtr.GetInstance().dataVersion,\r\n            \"friendPassCnt\": this.$friendPassCnt, //通关数 好友最大值\r\n            \"videoCalCnt\": this.$videoCalCnt, //累积观看视频数量，累积值\r\n        }\r\n        // sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n    }\r\n\r\n    public loadServerData(jsonData) {\r\n        console.log(\"---------各种问题---\", jsonData)\r\n        ServerCtr.GetInstance().dataVersion = jsonData[\"version\"]\r\n        let obj = jsonData[\"userData\"];\r\n        if (obj) {\r\n            js.mixin(this, JSON.parse(obj));\r\n        }\r\n        sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n    }\r\n\r\n    public remove() {\r\n        sys.localStorage.removeItem(this.$localKey);\r\n        this.onInit()\r\n        eventManager.send(msgac.commonResRefresh)\r\n    }\r\n\r\n    // 注销账号\r\n    public clearAccountData() {\r\n        ServerCtr.GetInstance().addDataVersion();\r\n        CronCtr.getInstance().uploadAllRecord({ \"version\": ServerCtr.GetInstance().dataVersion + 1 });\r\n        sys.localStorage.removeItem(\"dataVersion\");\r\n        // @ts-ignore\r\n        this.resetAccount = true;\r\n    }\r\n\r\n    public load() {\r\n        let obj = sys.localStorage.getItem(this.$localKey);\r\n        if (obj) {\r\n            js.mixin(this, JSON.parse(obj));\r\n        } else {\r\n            this.setConfig()\r\n        }\r\n    }\r\n\r\n\r\n    private _drawAllWeight = [0, 0, 0]\r\n    private _drawAllSureWeight = [0, 0, 0]\r\n\r\n    /**\r\n     * 获得一次抽卡数据\r\n     */\r\n    public getDrawItem(drawType) {\r\n        let type = 2\r\n        if (drawType == 0) {\r\n            this.$drawNormalNum++\r\n            type = 2\r\n        } else {\r\n            this.$drawGradeNum++\r\n            type = 1\r\n        }\r\n        let isBichou = false\r\n        //  console.log(\"this.$drawGradeNum = \",this.$drawGradeNum)\r\n        //  console.log(\"this.$drawNormalNum = \",this.$drawNormalNum)\r\n\r\n        if (type == 2) {\r\n            if (this.$drawNormalNum >= designManager.config.extra2) {\r\n                //     console.log(\" 普通必抽\")\r\n                isBichou = true\r\n                this.$drawNormalNum = 0\r\n            }\r\n        } else {\r\n            if (this.$drawGradeNum >= designManager.config.extra1) {\r\n                isBichou = true\r\n                // console.log(\" 高级 必抽\")\r\n                this.$drawGradeNum = 0\r\n            }\r\n        }\r\n\r\n\r\n        let drawData = designManager.getRowsByType(constants.tableName.draw, type)\r\n        if (this._drawAllWeight[type] == NaN || this._drawAllWeight[type] <= 0) {\r\n            this._drawAllSureWeight[type] = 0\r\n            drawData.forEach(element => {\r\n                if (type == element.type) {\r\n                    this._drawAllWeight[type] += element.weight\r\n                    if (element.extra != \"\")\r\n                        this._drawAllSureWeight[type] += parseInt(element.extra)\r\n                }\r\n            });\r\n        }\r\n        let item = null\r\n        if (isBichou) {\r\n            let rand = Math.floor(Math.random() * this._drawAllSureWeight[type])\r\n            for (let index = 0; index < drawData.length; index++) {\r\n                let element = drawData[index];\r\n                if (type == element.type && element.extra) {\r\n                    rand -= element.extra\r\n                    if (rand <= 0) {\r\n                        item = element\r\n                        // console.log(\" 必抽，\", item)\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            let rand = Math.floor(Math.random() * this._drawAllWeight[type])\r\n            for (let index = 0; index < drawData.length; index++) {\r\n                let element = drawData[index];\r\n                if (type == element.type) {\r\n                    rand -= element.weight\r\n                    if (rand <= 0) {\r\n                        item = element\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // if (item && item.extra && item.extra > 0) {\r\n        //     // if (type == 2) {\r\n        //     //     this.$drawNormalNum = 0\r\n        //     // } else {\r\n        //     //     this.$drawGradeNum = 0\r\n        //     // }\r\n        // }\r\n        if (item == null) {\r\n            console.log(\"item null 没抽中 \")\r\n        }\r\n        return item\r\n    }\r\n\r\n\r\n    /**添加巡逻奖励 */\r\n    public getCurPatrolData() {\r\n        if (this.$patrolStartTime <= 0) {\r\n            this.$patrolStartTime = (new Date()).getTime()\r\n            return\r\n        }\r\n\r\n        let curTime = (new Date()).getTime()\r\n        let rewardArr = this.getPatrolReward()\r\n\r\n        this.$patrolStartTime = curTime\r\n        this.$patrolRewardPropArr = []\r\n        this.$patrolRewardProp = []\r\n\r\n        this.getRewardProp(rewardArr)\r\n        // this.getRewardProp(this.$patrolRewardPropArr)\r\n\r\n    }\r\n\r\n    public getPatrolTime() {\r\n        let curTime = (new Date()).getTime()\r\n        let passTime = Math.min(designManager.config.towerTop * 60, Math.floor((curTime - this.$patrolStartTime) / 1000))\r\n        return passTime\r\n    }\r\n\r\n    public getPatrolReward() {\r\n        let passTime = this.getPatrolTime()\r\n        let towerExp = Math.floor(passTime * designManager.config.towerExp / 60)\r\n        let getCoin = Math.floor(passTime * designManager.config.towerCoin / 60)\r\n\r\n        let rewardArr = []\r\n        // let prop: PropItem = {\r\n        //     Id: 101,\r\n        //     Num: getCoin,\r\n        // }\r\n        rewardArr.push({\r\n            Id: 101,\r\n            Num: getCoin,\r\n        })\r\n\r\n        rewardArr.push({\r\n            Id: 901,\r\n            Num: towerExp,\r\n        })\r\n        let towerItem = designManager.config.towerItem\r\n        // console.log(\"towerItem = \", towerItem)\r\n        let drawCount = Math.floor(passTime / 600)\r\n        for (let i = 0; i < drawCount; i++) {\r\n            if (this.$patrolRewardProp[i] != 1) {\r\n                for (let j = 0; j < towerItem.length; j++) {\r\n                    let curr = Math.random()\r\n                    if (curr < towerItem[j][1] / 10000) {\r\n                        let prop: PropItem = {\r\n                            Id: towerItem[j][0],\r\n                            Num: 1,\r\n                        }\r\n                        myLog.i(\"抽中 \", towerItem[j][0])\r\n                        this.$patrolRewardPropArr.push(prop)\r\n                    } else {\r\n                      //  myLog.i(\"未抽中\", curr, towerItem[j][1] / 10000)\r\n                    }\r\n                }\r\n                this.$patrolRewardProp[i] = 1\r\n            }\r\n        }\r\n        // this.getRewardProp()\r\n        this.$patrolRewardPropArr.forEach(element => {\r\n            rewardArr.push(element)\r\n        });\r\n        return rewardArr\r\n    }\r\n\r\n    public getPatrolState() {\r\n        let passTime = this.getPatrolTime()\r\n        if (passTime < 600) {\r\n            return 600 - passTime\r\n        }\r\n\r\n        return 0\r\n    }\r\n\r\n    public getPatrolRewardByTime(time) {\r\n        let towerExp = Math.floor(time * designManager.config.towerExp / 60)\r\n        let getCoin = Math.floor(time * designManager.config.towerCoin / 60)\r\n\r\n        let rewardArr = []\r\n        rewardArr.push({\r\n            Id: 101,\r\n            Num: getCoin,\r\n        })\r\n\r\n        rewardArr.push({\r\n            Id: 901,\r\n            Num: towerExp,\r\n        })\r\n        let towerItem = designManager.config.towerItem\r\n        // console.log(\"towerItem = \", towerItem)\r\n        let drawCount = Math.floor(time / 600)\r\n        for (let i = 0; i < drawCount; i++) {\r\n            for (let j = 0; j < towerItem.length; j++) {\r\n                let curr = Math.random()\r\n                if (curr < towerItem[j][1] / 10000) {\r\n                    let prop: PropItem = {\r\n                        Id: towerItem[j][0],\r\n                        Num: 1,\r\n                    }\r\n                    myLog.i(\"抽中 \", towerItem[j][0])\r\n                    rewardArr.push(prop)\r\n                } else {\r\n                    //   myLog.i(\"未抽中\", curr, towerItem[j][1] / 10000)\r\n                }\r\n            }\r\n        }\r\n        return rewardArr\r\n    }\r\n\r\n\r\n    public setPyramidState(index) {\r\n        this.$pyramidState[index] = 1\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n\r\n\r\n}","\r\n/**\r\n * 拓展String.format方法\r\n * 需要在cc.d.ts中添加以下声明代码，使用过程中才会有提示，并且不会报错\r\ndeclare interface String {\r\n    format(...agrs: any[]): string;\r\n    parseColor();\r\n}\r\n */\r\nString.prototype.format = function () {\r\n    let str = this;\r\n    for (let i in arguments) {\r\n        str = str.replace(/\\%\\w/, arguments[i]);\r\n    }\r\n    return str;\r\n}\r\n// // 错误提示去不掉，暂时不用了\r\n// Object.defineProperty(Array.prototype, \"sortArr\", {\r\n//     value: function (compareFunc: Function) {\r\n//         let arr = this;\r\n//         if (arr.length <= 1) {\r\n//             return;\r\n//         }\r\n//         for (let i = 0; i < arr.length - 1; i++) {\r\n//             for (let j = i + 1; j < arr.length; j++) {\r\n//                 let item1 = arr[i];\r\n//                 let item2 = arr[j];\r\n//                 if (compareFunc(item1, item2)) {\r\n//                     arr[i] = item2;\r\n//                     arr[j] = item1;\r\n//                 }\r\n//             }\r\n//         }\r\n//     }\r\n// });\r\n\r\nexport const utilTools = {\r\n\r\n    getRandomSign() {\r\n        return Math.random() > 0.5 ? 1 : -1;\r\n    },\r\n\r\n    // 角度值与弧度制之间的转换\r\n    radianToAngle(radian: number) {\r\n        return radian / Math.PI * 180;\r\n    },\r\n    angleToRadian(angle: number) {\r\n        return angle / 180 * Math.PI;\r\n    },\r\n\r\n    // 性能最好的数组遍历方式\r\n    forArr(arr: any, cb: Function) {\r\n        let len = arr.length;\r\n        if (len <= 0) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < len; i++) {\r\n            let info = arr[i];\r\n            if (info == undefined) {\r\n                continue;\r\n            }\r\n            let ret = cb(info, i);\r\n            if (ret) {\r\n                break;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 模仿async.waterfall写得，按顺序执行各个方法\r\n     * @param taskArr 要顺序执行的方法数组\r\n     * @param callback 执行结果回调\r\n     */\r\n    waterfall(taskArr: any, callback?: any) {\r\n        if (!callback) {\r\n            callback = function () { };\r\n        }\r\n        if (!Array.isArray(taskArr) || taskArr.length <= 0) {\r\n            callback(\"taskArr is null\");\r\n            return;\r\n        }\r\n        let taskIndex = 0;\r\n        let result = {};\r\n        let loadNextTask = function () {\r\n            let task = taskArr[taskIndex];\r\n            if (task) {\r\n                task(result, function (err) {\r\n                    if (err) {\r\n                        callback(err, null);\r\n                        return;\r\n                    }\r\n                    taskIndex++;\r\n                    loadNextTask();\r\n                });\r\n                return;\r\n            }\r\n            callback(null, result);\r\n        };\r\n        loadNextTask();\r\n    },\r\n\r\n    // 数字转化为百分比显示\r\n    valToPercent(val: number, fixNum?: number) {\r\n        // 保证舍去不显示的那部分\r\n        val = Math.floor(val * 10000);\r\n        val = val / 10000;\r\n\r\n        if (fixNum == undefined) {\r\n            fixNum = 2;\r\n        }\r\n        let ret = (val * 100).toFixed(fixNum) + \"%\";\r\n\r\n        return ret;\r\n    },\r\n\r\n    /**\r\n     * 获取如下格式的时间\r\n     * 05:00:56\r\n     * @param d 单位：豪秒\r\n     * @param isM 是否强制只显示到分\r\n     * @returns {string}\r\n     */\r\n    getTimeStr(d: number, isM?: boolean) {\r\n        var ret = \"\";\r\n        if (d < 0) {\r\n            d = 0;\r\n        }\r\n\r\n        d = d / 1000;\r\n        var hours = Math.floor(d / 3600);\r\n        var mins = Math.floor((d - hours * 3600) / 60);\r\n        var seconds = Math.floor(d - hours * 3600 - mins * 60);\r\n\r\n        if (isM) {\r\n            mins = mins + hours * 60;\r\n        } else {\r\n            if (hours >= 10) {\r\n                ret = ret + hours + \":\";\r\n            } else {\r\n                ret = ret + \"0\" + hours + \":\";\r\n            }\r\n        }\r\n\r\n        if (mins >= 10) {\r\n            ret = ret + mins + \":\";\r\n        } else {\r\n            ret = ret + \"0\" + mins + \":\";\r\n        }\r\n        if (seconds >= 10) {\r\n            ret = ret + seconds;\r\n        } else {\r\n            ret = ret + \"0\" + seconds;\r\n        }\r\n\r\n        return ret;\r\n    },\r\n\r\n    /**\r\n       * 获取如下格式的时间\r\n       * 05:00:56\r\n       * @param d 单位：豪秒\r\n       * @param isM 是否强制只显示到分\r\n       * @returns {string}\r\n       */\r\n    getTimeStrChinese(d: number, isSce = true, isM = true, isHour = true) {\r\n        var ret = \"\";\r\n        if (d < 0) {\r\n            d = 0;\r\n        }\r\n\r\n        d = d / 1000;\r\n        var hours = Math.floor(d / 3600);\r\n        var mins = Math.floor((d - hours * 3600) / 60);\r\n        var seconds = Math.floor(d - hours * 3600 - mins * 60);\r\n\r\n\r\n        if (hours > 0) {\r\n            ret = ret + hours + \"时\";\r\n        }\r\n\r\n        if (mins >= 10) {\r\n            ret = ret + mins + \"分\";\r\n        } else {\r\n            ret = ret + \"0\" + mins + \"分\";\r\n        }\r\n        if (isSce) {\r\n            if (seconds >= 10) {\r\n                ret = ret + seconds + \"秒\";\r\n            } else {\r\n                ret = ret + \"0\" + seconds + \"秒\";\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    },\r\n\r\n    /**\r\n     * 将对象obj中以time(不区分大小写)为结尾的key字符串值，转换为js时间对象Date\r\n     * @param obj\r\n     */\r\n    timeStrToDate(obj: any) {\r\n        if (typeof (obj) != \"object\" || obj == null) {\r\n            return obj;\r\n        }\r\n\r\n        if (Array.isArray(obj)) {\r\n            for (let i in obj) {\r\n                let item = obj[i];\r\n                if (item && typeof (item) == \"object\") {\r\n                    utilTools.timeStrToDate(item);\r\n                }\r\n            }\r\n        } else {\r\n            let keyArr = Object.keys(obj);\r\n            for (let i in keyArr) {\r\n                let key = keyArr[i] + \"\";\r\n                let val = obj[key];\r\n                if (val && typeof (val) == \"object\") {\r\n                    utilTools.timeStrToDate(val);\r\n                    continue;\r\n                }\r\n\r\n                try {\r\n                    let endStr = \"\";\r\n                    if (key.length >= 4) {\r\n                        endStr = key.substring(key.length - 4, key.length);\r\n                        if (endStr.toLocaleLowerCase() == \"time\" && val && typeof (val) == \"string\") {\r\n                            obj[key] = new Date(val);\r\n                        }\r\n                    }\r\n                } catch (e) {\r\n                    console.log(\"utilTools.timeStrToDate error:\" + e.message, e, obj);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return obj;\r\n    },\r\n\r\n    /**\r\n     * 数组排序\r\n     * @param arr \r\n     * @param compareFunc \r\n     */\r\n    sortArr(arr: any, compareFunc: Function) {\r\n        if (!arr || arr.length <= 1) {\r\n            return arr;\r\n        }\r\n        for (let i = 0; i < arr.length - 1; i++) {\r\n            for (let j = i + 1; j < arr.length; j++) {\r\n                let item1 = arr[i];\r\n                let item2 = arr[j];\r\n                if (compareFunc(item1, item2)) {\r\n                    arr[i] = item2;\r\n                    arr[j] = item1;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 概率是否满足\r\n     * @param val 概率值 0到1\r\n     */\r\n    isProb(val: number) {\r\n        if (!val) {\r\n            val = 0;\r\n        }\r\n        if (Math.random() < val) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * 打乱数组元素，默认不改变原有的数组，返回新的打乱后的数组\r\n     * @param arr \r\n     * @param isOrign true:原数组会被修改\r\n     */\r\n    randomArr(arr: any, isOrign: boolean = false): any {\r\n        if (!isOrign) {\r\n            arr = JSON.parse(JSON.stringify(arr));\r\n        }\r\n        let tmpArr = [];\r\n        while (arr.length > 0) {\r\n            let index = Math.floor(Math.random() * arr.length);\r\n            tmpArr.push(arr[index]);\r\n            arr.splice(index, 1);\r\n        }\r\n        return tmpArr;\r\n    },\r\n\r\n    /**\r\n     * 返回给定范围内的随机数值,整数包括左右边界\r\n     * @param min 最小值\r\n     * @param max 最大值\r\n     * @param isInt 是否整数化\r\n     * @returns {number}\r\n     */\r\n    getFloatValue(min: number, max: number, isInt?: boolean) {\r\n        let dv = max - min;\r\n        if (dv == 0) {\r\n            return min;\r\n        }\r\n        if (dv < 0) {\r\n            return 0;\r\n        }\r\n        if (isInt) {\r\n            let val = min + Math.floor(Math.random() * (dv + 1));\r\n            return val;\r\n        }\r\n\r\n        let val = min + Math.random() * dv;\r\n        return val;\r\n    },\r\n\r\n    // 跨天判断\r\n    overDay(date: any, now?: any) {\r\n        if (!date) {\r\n            return true;\r\n        }\r\n\r\n        if (!now) {\r\n            now = new Date();\r\n        }\r\n        let overDay = false;\r\n        if (date.getDate() == now.getDate()) {\r\n            if (now.getTime() - date.getTime() >= 24 * 60 * 60 * 1000) {\r\n                overDay = true;\r\n            }\r\n        } else {\r\n            overDay = true;\r\n        }\r\n\r\n        return overDay;\r\n    },\r\n\r\n    /**\r\n     * 根据权重从数组中返回指定的个数元素\r\n     * @param arr 数组\r\n     * @param num 返回个数\r\n     * @param canRepeat 是否可以重复取，默认不可以\r\n     * @returns {Array} 返回结果数组\r\n     */\r\n    getRowsByWeightAndNum(arr: any, num: number, canRepeat?: boolean) {\r\n        if (!num) {\r\n            num = 1;\r\n        }\r\n        var ret = [];\r\n        arr = utilTools.copyObj(arr);\r\n        for (var i = 0; i < num; i++) {\r\n            if (arr.length <= 0) {\r\n                break;\r\n            }\r\n            var row = this.getRowByWeight(arr);\r\n            ret.push(row);\r\n            if (!canRepeat) {\r\n                var index = arr.indexOf(row);\r\n                arr.splice(index, 1);\r\n            }\r\n        }\r\n        return ret;\r\n    },\r\n\r\n    /**\r\n     * 根据权重从数组中返回一个元素\r\n     * @param arr\r\n     * @param totalWeight\r\n     */\r\n    getRowByWeight(arr: any, totalWeight?: number) {\r\n        if (!totalWeight) {\r\n            totalWeight = 0;\r\n            for (var i in arr) {\r\n                var weight = arr[i].weight;\r\n                if (!weight) {\r\n                    weight = 0;\r\n                }\r\n                totalWeight += weight;\r\n            }\r\n        }\r\n        var random = Math.random() * totalWeight;\r\n        var left = 0;\r\n        var row = null;\r\n        for (var i in arr) {\r\n            var tmpRow = arr[i];\r\n            var weight = tmpRow.weight;\r\n            if (!weight) {\r\n                weight = 0;\r\n            }\r\n            if (random >= left && random < left + weight) {\r\n                row = tmpRow;\r\n                break;\r\n            }\r\n            left += weight;\r\n        }\r\n\r\n        return row;\r\n    },\r\n\r\n    /**\r\n     * 从给定的数组中，随机取出一个元素\r\n     * @param arr 数组\r\n     * @param isRemove 是否将该元素从数组中移除\r\n     * @return {null|*} 返回随机到的元素\r\n     */\r\n    getRandomItemByArr(arr: any, isRemove: boolean = false) {\r\n        if (!arr || arr.length <= 0) {\r\n            return null;\r\n        }\r\n        let index = Math.floor(Math.random() * arr.length);\r\n        let item = arr[index];\r\n        if (isRemove) {\r\n            arr.splice(index, 1);\r\n        }\r\n\r\n        return item;\r\n    },\r\n\r\n    /**\r\n     * 深度拷贝对象\r\n     * @param obj 要拷贝的对象内容\r\n     */\r\n    copyObj(obj: object) {\r\n        return JSON.parse(JSON.stringify(obj));\r\n    },\r\n\r\n}\r\n\r\n","import { find, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('VipLayer')\r\nexport class VipLayer extends BaseLayer {\r\n\r\n    choseVip: number;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.choseVip = playerModel.vipObj.vip;\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        let vip = playerModel.vipObj.vip;\r\n        this.setString(this.getNodeByPath(\"ui/top/rank/val\"), vip);\r\n\r\n        let infoLayer = this.getNodeByPath(\"ui/top/bar/info\");\r\n        let row = designManager.getRowById(constants.tableName.vip, vip);\r\n        let nextRow = designManager.getRowById(constants.tableName.vip, vip + 1);\r\n        let btnGet = this.getNodeByPath(\"ui/top/btnGet\");\r\n        if (nextRow) {\r\n            infoLayer.active = true;\r\n            btnGet.active = true;\r\n            this.setString(find(\"val\", infoLayer), row.adNum);\r\n            this.setString(find(\"vip\", infoLayer), \"VIP\" + nextRow.id);\r\n            this.setProgressBar(this.getNodeByPath(\"ui/top/bar\"), playerModel.vipObj.adNum / row.adNum);\r\n            this.setString(this.getNodeByPath(\"ui/top/bar/val\"), playerModel.vipObj.adNum + \"/\" + row.adNum);\r\n        } else {\r\n            btnGet.active = false;\r\n            infoLayer.active = false;\r\n            this.setProgressBar(this.getNodeByPath(\"ui/top/bar\"), 1);\r\n            this.setString(this.getNodeByPath(\"ui/top/bar/val\"), localText.full);\r\n        }\r\n\r\n        this.setString(this.getNodeByPath(\"ui/vip\"), \"VIP\" + this.choseVip + \"特权\");\r\n        let choseRow = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        this.setString(this.getNodeByPath(\"ui/text\"), localText.weaponEquipAdd.format(choseRow.atkAdd * 100));\r\n\r\n        let btnGetBox1 = this.getNodeByPath(\"ui/info/itemLayer/btnBox1/btnGetBox1\");\r\n        let hasGet1 = this.getNodeByPath(\"ui/info/itemLayer/btnBox1/hasGet\");\r\n        btnGetBox1.active = false;\r\n        hasGet1.active = false;\r\n        if (playerModel.vipObj.onceObj[this.choseVip]) {\r\n            // 已领取首次奖励\r\n            hasGet1.active = true;\r\n        } else if (this.choseVip <= vip) {\r\n            btnGetBox1.active = true;\r\n        }\r\n\r\n        let btnGetBox2 = this.getNodeByPath(\"ui/info/itemLayer/btnBox2/btnGetBox2\");\r\n        let hasGet2 = this.getNodeByPath(\"ui/info/itemLayer/btnBox2/hasGet\");\r\n        btnGetBox2.active = false;\r\n        hasGet2.active = false;\r\n        if (this.choseVip == vip) {\r\n            if (playerModel.vipObj.dayAward) {\r\n                hasGet2.active = true;\r\n            } else {\r\n                btnGetBox2.active = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGetBox1() {\r\n        if (this.choseVip > playerModel.vipObj.vip) {\r\n            return;\r\n        }\r\n        if (playerModel.vipObj.onceObj[this.choseVip]) {\r\n            // 已领取\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        let awardArr = UserData.getInstance().addPropArrByDesign(row.award);\r\n        this.openAwardGetLayer(awardArr);\r\n        playerModel.vipObj.onceObj[this.choseVip] = 1;\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBtnGetBox2() {\r\n        if (this.choseVip > playerModel.vipObj.vip) {\r\n            return;\r\n        }\r\n        if (playerModel.vipObj.dayAward) {\r\n            // 已领取\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        let awardArr = UserData.getInstance().addPropArrByDesign(row.dayAward);\r\n        this.openAwardGetLayer(awardArr);\r\n        playerModel.vipObj.dayAward = 1;\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBtnLeft() {\r\n        if (this.choseVip <= 1) {\r\n            return;\r\n        }\r\n        this.choseVip--;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnRight() {\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip + 1);\r\n        if (!row) {\r\n            return;\r\n        }\r\n        this.choseVip++;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnBox1() {\r\n        if (!playerModel.vipObj.onceObj[this.choseVip]) {\r\n            this.onClickBtnGetBox1();\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        this.openAwardInfoLayer(row.award);\r\n    }\r\n\r\n    onClickBtnBox2() {\r\n        if (!playerModel.vipObj.dayAward) {\r\n            this.onClickBtnGetBox2();\r\n            return;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.vip, this.choseVip);\r\n        this.openAwardInfoLayer(row.dayAward);\r\n    }\r\n\r\n    onClickBtnGet() {\r\n        sdkManager.openAd(\"VIP特权\", (st: number) => {\r\n            if (st == 1) {\r\n                let hasUp = playerModel.addVipAdNum();\r\n                if (hasUp) {\r\n                    this.choseVip = playerModel.vipObj.vip;\r\n                }\r\n                this.initUI();\r\n                eventManager.send(msgac.refreshRedPoint);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n","\r\ninterface tempVideoAd {\r\n    adObj: any\r\n    isInVideo: boolean\r\n    callBack: Function\r\n}\r\nclass vivo {\r\n    public static readonly _instance: vivo = new vivo();\r\n\r\n    private videoAd!: tempVideoAd\r\n    private bannerAd: any\r\n    private interstitialAd: any\r\n    private nativeAd: any\r\n\r\n    private videoPosId = '74668129b4b442539bed19caae5c8d9d';\r\n    private bannerPosId = '6caa9e6062d243e195ca6ca8e9a50a0d';\r\n    private interstitialPosId = '965c0f038e5a4b278940ad5864e1436c';\r\n    private nativePosId = '9b47cc8e3ec04c6b9232da4618439804';\r\n\r\n    constructor() {\r\n    }\r\n\r\n    //获取系统信息的同步版本\r\n    get systemInfo() {\r\n        return qg.getSystemInfoSync();\r\n    }\r\n    //设置屏幕是否常量\r\n    public setKeepScreenOn(bol: any) {\r\n        qg.setKeepScreenOn({\r\n            keepSrceenOn: bol,\r\n            success: () => { console.log('设置屏幕常亮成功') },\r\n            fail: () => { },\r\n            complete: () => { },\r\n        })\r\n    }\r\n    //登录授权\r\n    public authorize_code() {\r\n        return new Promise((resolve, reject) => {\r\n            qg.authorize({\r\n                type: \"code\",\r\n                success: function (data: any) {\r\n                    resolve(data);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n                }\r\n            })\r\n        });\r\n    }\r\n    // 旧版本获取token\r\n    public authorize_token() {\r\n        return new Promise((resolve, reject) => {\r\n            qg.authorize({\r\n                type: \"token\",\r\n                success: function (obj: any) {\r\n                    resolve(obj);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n                }\r\n            })\r\n        })\r\n    }\r\n    // 获取授权信息 \r\n    public getProfile(_token: any) {\r\n        return new Promise((resolve, reject) => {\r\n            qg.getProfile({\r\n                token: _token,\r\n                success: function (data: any) {\r\n                    resolve(data);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n\r\n                }\r\n            })\r\n        });\r\n    }\r\n    /*\r\n    *  qg.exitApplication()\r\n    *  退出游戏，同步方法\r\n    */\r\n    exitApplication(cb: any) {\r\n        qg.exitApplication();\r\n    }\r\n    /**\r\n     * 使手机发生较长时间的振动。\r\n     * @param callback 回调 (isSuccess, res)\r\n     */\r\n    public vibrateLong(callback?: Function): void {\r\n        qg.vibrateLong();\r\n        if (callback) {\r\n            callback()\r\n        }\r\n\r\n    };\r\n    /**\r\n     * 使手机发生较短时间的振动\r\n     * \r\n     */\r\n    public vibrateShort(cb?: Function): void {\r\n        qg.vibrateShort();\r\n        if (cb) {\r\n            cb()\r\n        }\r\n    };\r\n\r\n    //=============================广告\r\n\r\n    //播放激励视频\r\n    showRewardVideoAd(next: any) {\r\n        if (this.systemInfo.platformVersionCode < 1041) return next && next(false);\r\n        if (!qg.createRewardedVideoAd) return next && next(false);\r\n        if (this.videoAd) {\r\n        } else {\r\n            this.videoAd = {\r\n                adObj: null,\r\n                isInVideo: false,\r\n                callBack: null!\r\n            }\r\n            this.videoAd.adObj = qg.createRewardedVideoAd({\r\n                posId: this.videoPosId\r\n            });\r\n            this.videoAd.adObj.onError((err: any) => {\r\n                this.videoAd.isInVideo = false;\r\n                this.videoAd.callBack && this.videoAd.callBack(false);\r\n                // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n\r\n                console.log(\"视频广告创建失败\")\r\n                switch (err.errCode) {\r\n                    case -3:\r\n                        console.log(\"激励广告加载失败---调用太频繁\", JSON.stringify(err));\r\n\r\n\r\n                        break;\r\n                    case -4:\r\n                        console.log(\"激励广告加载失败--- 一分钟内不能重复加载\", JSON.stringify(err));\r\n\r\n\r\n                        break;\r\n                    case 30008:\r\n                        // 当前启动来源不支持激励视频广告，请选择其他激励策略\r\n                        break;\r\n                    default:\r\n                        console.log(\"激励广告展示失败\", err)\r\n\r\n\r\n                        break;\r\n                }\r\n            })\r\n            this.videoAd.adObj.onLoad(() => {\r\n                let adshow = this.videoAd.adObj.show();\r\n                adshow && adshow.then(() => {// 捕捉show失败的错误\r\n                    console.log(\"激励视频广告显示成功\");\r\n                    // if (AudioMgr.isOpen) {\r\n                    //     AudioMgr.pause();\r\n                    // }\r\n                    this.videoAd.isInVideo = true;\r\n                }).catch((err: any) => {\r\n                    console.log(\"激励视频广告显示失败\", err);\r\n                    this.videoAd.isInVideo = false;\r\n                    this.videoAd.callBack && this.videoAd.callBack(-1);\r\n                    // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n                });\r\n            })\r\n            this.videoAd.adObj.onClose((res: any) => {\r\n                this.videoAd.isInVideo = false;\r\n                console.log('onClose!', res)\r\n                if (res && res[\"isEnded\"]) {\r\n                    this.videoAd.callBack && this.videoAd.callBack(1);\r\n                } else {\r\n                    // Emitter.getInstance().emit(\"showADTip\", '提前关闭视频不能得到奖励哦！');\r\n                    this.videoAd.callBack && this.videoAd.callBack(0);\r\n                }\r\n                // if (AudioMgr.isOpen) {\r\n                //     AudioMgr.resume();\r\n                // }\r\n                this.videoAd.callBack = null!;\r\n                // this.rewardedVideoAd.offClose();\r\n            });\r\n        }\r\n        this.videoAd.isInVideo = true;\r\n        this.videoAd.callBack = next;\r\n        let adLoad = this.videoAd.adObj.load();//第一次调用 可能会报-3  广告能正常展示就可以忽略\r\n        // 捕捉load失败的错误\r\n        adLoad && adLoad.then(() => {\r\n            console.log(\"激励视频广告加载成功\");\r\n            this.videoAd.isInVideo = true;\r\n        }).catch((err: any) => {\r\n            this.videoAd.isInVideo = false;\r\n            console.log(\"激励视频广告加载失败\", err);\r\n            // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n            this.videoAd.callBack && this.videoAd.callBack(-1);\r\n        });\r\n    }\r\n\r\n    //------\r\n\r\n    showBannerAd() {\r\n        if (this.systemInfo.platformVersionCode < 1041) return;\r\n        if (this.bannerAd) return;\r\n        console.log('显示banner广告3')\r\n        let doBannerShow = () => {\r\n            let adshow = this.bannerAd.show();\r\n            adshow && adshow.then(() => {\r\n                console.log(\"banner广告展示成功\");\r\n            }).catch((err: any) => {\r\n                switch (err.code) {\r\n                    case 30003:\r\n                        console.log(\"新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入\")\r\n                        break;\r\n                    case 30009:\r\n                        console.log(\"10秒内调用广告次数超过1次，10秒后再调用\")\r\n                        break;\r\n                    case 30002:\r\n                        console.log(\"加载广告失败，重新加载广告\")\r\n                        break;\r\n                    default:\r\n                        console.log(\"banner广告展示失败\")\r\n                        console.log(JSON.stringify(err))\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n        this.bannerAd = qg.createBannerAd({\r\n            posId: this.bannerPosId,\r\n            style: {\r\n            }\r\n        });\r\n        console.log('创建banner广告第一步', this.bannerAd)\r\n        this.bannerAd.onSize((res: any) => {\r\n            console.log('banner onResize', res);\r\n            // gl.bannerSize = {\r\n            //     width: res.width,\r\n            //     height: (res.width / 16 * 9),\r\n            //     winHeight: this.systemInfo.screenHeight\r\n            // };\r\n            // this.bannerAd.style.left = (this.systemInfo.screenWidth - res.width) / 2;\r\n            // this.bannerAd.style.top = this.systemInfo.screenHeight - (res.width / 16 * 9);\r\n        })\r\n        this.bannerAd.onLoad(() => {\r\n            this.bannerAd.offLoad && this.bannerAd.offLoad();\r\n            console.log(\"banner 广告加载成功 ...\");\r\n            doBannerShow();\r\n        });\r\n        this.bannerAd.onError((err: any) => {\r\n            this.bannerAd.offError && this.bannerAd.offError();\r\n            console.log(\"banner 广告创建失败 ...\", err);\r\n        });\r\n        this.bannerAd.onClose((err: any) => {\r\n            this.bannerAd.offClose();\r\n            console.log(\"onClose 广告创建 ...\", err);\r\n        });\r\n    }\r\n    hideBannerAd() {\r\n        if (!this.bannerAd) {\r\n            return;\r\n        }\r\n        var addestroy = this.bannerAd.destroy();\r\n        // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n        addestroy && addestroy.then(() => {\r\n            console.log(\"banner广告销毁成功\");\r\n            this.bannerAd.offLoad();\r\n            this.bannerAd.offError();\r\n            this.bannerAd.offSize();\r\n        }).catch((err: any) => {\r\n            console.log(\"banner广告销毁失败\", err);\r\n        });\r\n    }\r\n\r\n    //-------\r\n    //显示插屏广告\r\n    showInterstitialAd(next?: any) {\r\n        if (this.systemInfo.platformVersionCode < 1031) return next && next(false);\r\n        if (this.interstitialAd) return;\r\n        console.log(\"显示插屏广告\");\r\n        this.interstitialAd = qg.createInterstitialAd({\r\n            posId: this.interstitialPosId,\r\n        });\r\n        var doShow = () => {\r\n            let adShow = this.interstitialAd.show();\r\n            // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n            adShow && adShow.then(() => {\r\n                console.log(\"插屏广告展示成功\");\r\n                next && next();\r\n            }).catch((err: any) => {\r\n                this.interstitialAd = null;\r\n                switch (err.code) {\r\n                    case 30003:\r\n                        console.log(\"新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入\")\r\n                        break;\r\n                    case 30009:\r\n                        console.log(\"10秒内调用广告次数超过1次，10秒后再调用\")\r\n                        break;\r\n                    case 30002:\r\n                        console.log(\"load广告失败，重新加载广告\")\r\n                        break;\r\n                    case 30000:\r\n                        break;\r\n                    default:\r\n                        console.log(\"插屏广告展示失败\")\r\n                        console.log(err)\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n        this.interstitialAd.onLoad(() => {\r\n            console.log('加载插屏广告成功')\r\n            doShow();\r\n        }, () => {\r\n            console.log('加载插屏广告失败')\r\n            this.interstitialAd = null;\r\n        })\r\n        this.interstitialAd.onError((err: any) => {\r\n            console.log(\"插屏广告创建失败 ...\", err)\r\n            this.interstitialAd = null;\r\n        })\r\n        this.interstitialAd.onClose(() => {\r\n            console.log(\"插屏 关闭 ...\")\r\n            this.interstitialAd && this.interstitialAd.offClose();\r\n            this.interstitialAd = null;\r\n        })\r\n    }\r\n    //----------\r\n\r\n    //创建原生广告\r\n    createNativeAd(next?: Function, resS?: Function) {\r\n        if (this.systemInfo.platformVersionCode < 1053) return next && next(false);\r\n        this.nativeAd = qg.createNativeAd({\r\n            posId: this.nativePosId\r\n        })\r\n        console.log(\"原生广告原生广告\", this.nativeAd)\r\n        this.nativeAd.onLoad((res: any) => {\r\n            if (res && res.adList) {\r\n                console.log(\"原生广告\", res);\r\n                console.log(res.adList)\r\n                console.log(res.adList[0])\r\n                next && next(res.adList[0]);\r\n            }\r\n            else {\r\n                next && next(null);\r\n            }\r\n            this.reportAdShow(res.adList[0].adId);\r\n        })\r\n        this.nativeAd.onError((res: any) => {\r\n            console.log('原生广告加载失败', res)\r\n            // next && next()\r\n            if (resS) {\r\n                resS()\r\n            }\r\n        })\r\n        let adLoad = this.nativeAd.load()\r\n        adLoad && adLoad.then(() => {\r\n            console.log(\"原生广告加载成功\");\r\n        }).catch((err: any) => {\r\n            console.log('原生广告加载失败', JSON.stringify(err));\r\n            // next && next()\r\n            if (resS) {\r\n                resS()\r\n            }\r\n        });\r\n    }\r\n\r\n    /**上报原生点击 */\r\n    clickNativeAd(adId: any) {\r\n        if (!this.nativeAd) return;\r\n        this.nativeAd.reportAdClick({\r\n            adId: adId,\r\n        });\r\n    }\r\n\r\n    /**上报广告曝光 */\r\n    reportAdShow(adId: any) {\r\n        if (!this.nativeAd) return;\r\n        this.nativeAd.reportAdShow({\r\n            adId: adId\r\n        })\r\n    }\r\n\r\n    /**销毁广告组件，释放资源 */\r\n    desNativeAd() {\r\n        console.log(\"销毁广告组件，释放资源\", this.nativeAd);\r\n        this.nativeAd.destroy();\r\n    }\r\n\r\n\r\n    // 检查登录信息 5分钟后token 失效\r\n    public getSetting(cbOK: any, cbFail = null) {\r\n\r\n    }\r\n}\r\n\r\nexport const VivoManager = vivo._instance;","import { BoxCollider2D, Collider2D, Contact2DType, find, Node, tween, Tween, v3, Vec2, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { playerModel } from '../../../model/playerModel';\r\nimport { UserData } from '../../../model/UserData';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { BaseLayer } from '../../base/BaseLayer';\r\nimport { Monster } from '../monsters/Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Weapon')\r\nexport class Weapon extends BaseLayer {\r\n\r\n    info: any;\r\n    id: any;\r\n    direction: Vec3;\r\n    row: any;\r\n\r\n    atk: number;\r\n    atkPercentAdd: number;\r\n\r\n    bodyNode: Node;\r\n    collider: BoxCollider2D;\r\n    lightNode: Node;\r\n\r\n    forward: boolean;\r\n\r\n    targetNode: Node;\r\n    outV3: any = v3(0, 0, 0);\r\n    canFace: boolean = true;\r\n    parentPos: Vec3;\r\n\r\n    timeCount: number = 0;\r\n\r\n    weaponUtil: any;\r\n\r\n    onLoad() {\r\n        this.collider = this.node.getComponent(BoxCollider2D);\r\n        if (this.collider) {\r\n            this.collider.enabled = false;\r\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.contactBegin, this);\r\n        }\r\n        this.bodyNode = find(\"body\", this.node);\r\n        this.lightNode = find(\"light\", this.node);\r\n\r\n        this.parentPos = this.node.parent.getPosition();\r\n    }\r\n\r\n    onDestroy() {\r\n        this.unscheduleAllCallbacks();\r\n        if (this.weaponUtil) {\r\n            this.weaponUtil.unscheduleAllCallbacks();\r\n        }\r\n    }\r\n\r\n    init(info: any) {\r\n        if (!this.bodyNode) {\r\n            this.onLoad();\r\n        }\r\n\r\n        this.info = info;\r\n        let id = info.id;\r\n\r\n        this.id = id;\r\n        this.unscheduleAllCallbacks();\r\n        Tween.stopAllByTarget(this.bodyNode);\r\n\r\n        let row = designManager.getRowById(constants.tableName.weapon, id);\r\n        this.row = row;\r\n\r\n        this.atk = row.atk;\r\n\r\n        try {\r\n            let weaponUtil = cocosUtil.addComponentOnce(this, \"Weapon\" + row.type);\r\n            weaponUtil.unscheduleAllCallbacks();\r\n            this.weaponUtil = weaponUtil;\r\n            // @ts-ignore\r\n            weaponUtil.init(this);\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n        if (this.weaponUtil && this.weaponUtil.isFixedPos) {\r\n            let scale = this.node.getScale();\r\n            if (info.uiIndex == 0 || info.uiIndex == 3) {\r\n                this.node.setScale(v3(Math.abs(scale.x), scale.y, scale.z));\r\n            } else {\r\n                this.node.setScale(v3(-Math.abs(scale.x), scale.y, scale.z));\r\n            }\r\n        }\r\n\r\n        this.atkPercentAdd = 0;\r\n        if (this.weaponUtil && this.weaponUtil.weaponId > 0 && mapModel.floor > 0) {\r\n            // 爬塔武器等级加成\r\n            let lv = UserData.getInstance().getWeaponLv(this.weaponUtil.weaponId);\r\n            let row = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n            this.atkPercentAdd = row.atk / 100;\r\n        }\r\n\r\n        if (mapModel.weaponSystem.weaponArr[0] == info) {\r\n            // 主武器攻击力收到vip等级加成\r\n            let vipRow = designManager.getRowById(constants.tableName.vip, playerModel.vipObj.vip);\r\n            if (vipRow) {\r\n                this.atkPercentAdd += vipRow.atkAdd;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    // 飞镖类\r\n    atkByDart() {\r\n        audioManager.playEffect(this.row.audio);\r\n        let p = cocosUtil.convertToWorldSpace(this.node);\r\n        let extraObj: any = {};\r\n        extraObj.atkPercentAdd = this.atkPercentAdd;\r\n        mapModel.bulletSystem.addBullet(this.row.bulletId, physicsGroup.PLAYER_BULLET, p, this.direction, extraObj);\r\n        this.timeCount = 0;\r\n        this.bodyNode.active = false;\r\n        tween(this.bodyNode).delay(this.row.atkTime - 0.2).call(() => {\r\n            this.bodyNode.active = true;\r\n            this.bodyNode.setScale(v3(0.1, 0.1, 1));\r\n        }).to(0.2, { scale: v3(1, 1, 1) }, { easing: \"quadOut\" }).start();\r\n    }\r\n\r\n    // 子弹类\r\n    atkByShot() {\r\n        audioManager.playEffect(this.row.audio);\r\n        if (this.lightNode) {\r\n            // 枪口闪光\r\n            this.lightNode.active = true;\r\n            this.scheduleOnce(() => {\r\n                this.lightNode.active = false;\r\n            }, 0.03);\r\n        }\r\n\r\n        // 后摇动作\r\n        this.canFace = false;\r\n        let back = this.direction.clone().normalize().negative().multiplyScalar(20);\r\n        let orignPos = this.node.getPosition();\r\n        let time = 0.05;\r\n        tween(this.node)\r\n            .to(time, { position: back }, { easing: \"quadOut\" })\r\n            .to(time, { position: orignPos }, { easing: \"quadIn\" })\r\n            .call(() => {\r\n                this.canFace = true;\r\n                this.timeCount = 0;\r\n            }).start();\r\n    }\r\n\r\n    // 拳头类\r\n    atkByFist(atkDis: number, time: number) {\r\n        // 攻击距离判断\r\n        if (this.getDisTargetNode() > atkDis) {\r\n            return true;\r\n        }\r\n        audioManager.playEffect(this.row.audio);\r\n        let back = this.direction.clone().normalize().negative().multiplyScalar(20);\r\n        let target = this.direction.clone().normalize().multiplyScalar(atkDis);\r\n        let pos = this.node.getPosition();\r\n        this.canFace = false;\r\n        this.forward = false;\r\n        tween(this.node)\r\n            .to(time, { position: back }, { easing: \"quadOut\" })\r\n            .call(() => {\r\n                this.forward = true;\r\n                this.collider.enabled = true;\r\n            })\r\n            .to(time * 2, { position: target }, { easing: \"quadOut\" })\r\n            .call(() => {\r\n                this.forward = false;\r\n                this.collider.enabled = false;\r\n                if (this.weaponUtil && this.weaponUtil.moveMaxFar) {\r\n                    this.weaponUtil.moveMaxFar();\r\n                }\r\n            })\r\n            .to(time * 2, { position: pos }, { easing: \"quadIn\" })\r\n            .call(() => {\r\n                this.canFace = true;\r\n                this.timeCount = 0;\r\n            })\r\n            .start();\r\n    }\r\n\r\n    // 甩棍类\r\n    atkByStick(atkDis: number) {\r\n        // 攻击距离判断\r\n        if (this.getDisTargetNode() > atkDis) {\r\n            return;\r\n        }\r\n        audioManager.playEffect(this.row.audio);\r\n        this.canFace = false;\r\n        let angle = this.node.angle;\r\n        let da = 90;\r\n        let time = 0.03;\r\n        tween(this.node).to(time, { angle: angle + da }).call(() => {\r\n            let extraObj: any = {};\r\n            extraObj.atkPercentAdd = this.atkPercentAdd;\r\n            mapModel.bulletSystem.addBullet(this.row.bulletId, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.node), this.direction, extraObj);\r\n        }).to(time, { angle: angle }).to(time, { angle: angle - da }).call(() => {\r\n            this.canFace = true;\r\n            this.timeCount = 0;\r\n        }).start();\r\n    }\r\n\r\n    // 强制敌人后退一点点\r\n    targetForceMoveBack(node: Node) {\r\n        if (!this.forward) {\r\n            return;\r\n        }\r\n        let monster = node.getComponent(Monster);\r\n        if (!monster || monster.row.type == constants.monsterTypes.boss) {\r\n            return;\r\n        }\r\n        let direction = this.direction.clone().normalize().multiplyScalar(50);\r\n        tween(node).by(0.02, { position: direction }).start();\r\n    }\r\n\r\n    getInfoPosition(index?: number, isWorld?: boolean) {\r\n        let pos = this.node.getPosition();\r\n        let infoNode = find(\"info\", this.node);\r\n        if (index > 0) {\r\n            infoNode = find(\"info\" + index, this.node);\r\n        }\r\n        if (infoNode) {\r\n            infoNode.active = false;\r\n            // 位置修正\r\n            let infoPos = infoNode.getPosition();\r\n            Vec3.rotateZ(infoPos, infoPos, Vec3.ZERO, utilTools.angleToRadian(this.node.angle));\r\n            pos.x += infoPos.x;\r\n            pos.y += infoPos.y;\r\n        }\r\n        if (this.weaponUtil && this.weaponUtil.isFixedPos) {\r\n            if (this.node.scale.x < 0) {\r\n                pos.x = -pos.x;\r\n            }\r\n        }\r\n        if (isWorld) {\r\n            pos = cocosUtil.convertToWorldSpaceWithPos(this.node, pos);\r\n        }\r\n\r\n        return pos;\r\n    }\r\n\r\n    contactBegin(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (otherCollider.group == physicsGroup.MONSTER) {\r\n            let monster = otherCollider.getComponent(Monster);\r\n            if (monster) {\r\n                let dam = this.atk;\r\n                if (this.atkPercentAdd > 0) {\r\n                    dam = dam * (1 + this.atkPercentAdd);\r\n                    dam = Math.ceil(dam);\r\n                }\r\n                monster.hitWithDam(dam);\r\n            }\r\n        }\r\n        if (this.weaponUtil && this.weaponUtil.contactBegin) {\r\n            this.weaponUtil.contactBegin(otherCollider.node);\r\n        }\r\n    }\r\n\r\n    getCalPosition() {\r\n        let pos = mapModel.player.node.getPosition();\r\n        pos.x += this.parentPos.x;\r\n        pos.y += this.parentPos.y;\r\n\r\n        return pos;\r\n    }\r\n\r\n    getDisTargetNode() {\r\n        if (!this.targetNode) {\r\n            return 999999;\r\n        }\r\n        let dis = Vec2.distance(this.getCalPosition(), this.targetNode.position);\r\n\r\n        return dis;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.targetNode = null;\r\n\r\n        // 找出距离最近的怪物或木箱\r\n        let targetNode = mapModel.mapSystem.getMinDisTargetNode(this.getCalPosition());\r\n        if (!targetNode) {\r\n            return;\r\n        }\r\n\r\n        if (!this.canFace) {\r\n            return;\r\n        }\r\n\r\n        this.targetNode = targetNode;\r\n        let pos1 = cocosUtil.convertToWorldSpace(this.node);\r\n        let pos2 = cocosUtil.convertToWorldSpace(targetNode);\r\n        // 左右情况\r\n        let scale = this.node.getScale();\r\n        if (!this.weaponUtil || !this.weaponUtil.isFixedPos) {\r\n            if (pos1.x <= pos2.x) {\r\n                this.node.setScale(v3(scale.x, Math.abs(scale.y), scale.z));\r\n            } else {\r\n                this.node.setScale(v3(scale.x, -Math.abs(scale.y), scale.z));\r\n            }\r\n        }\r\n\r\n        // 瞄准最近怪物\r\n        pos2.subtract(pos1);\r\n        this.direction = pos2;\r\n        let angle = utilTools.radianToAngle(Math.atan2(pos2.y, pos2.x));\r\n        if (this.weaponUtil) {\r\n            if (this.weaponUtil.isFixedDirection) {\r\n                if (angle > -90 && angle <= 90) {\r\n                    angle = 0;\r\n                } else {\r\n                    angle = 180;\r\n                }\r\n            }\r\n            if (this.weaponUtil.isFixedPos) {\r\n                angle = 0;\r\n            }\r\n        }\r\n        this.node.angle = angle;\r\n\r\n        if (!this.weaponUtil || !this.weaponUtil.stopTimeCount) {\r\n            this.timeCount += dt;\r\n            if (this.timeCount >= this.row.atkTime) {\r\n                if (this.weaponUtil && cocosUtil.isValid(this.targetNode)) {\r\n                    this.weaponUtil.atk();\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 勇士匕首\r\n@ccclass('Weapon1')\r\nexport class Weapon1 extends Component {\r\n\r\n    weapon: Weapon;\r\n\r\n    weaponId = 10130;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n    }\r\n\r\n    atk() {\r\n        this.weapon.atkByDart();\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 如来神掌\r\n@ccclass('Weapon2')\r\nexport class Weapon2 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10135;\r\n\r\n    bulletId = 7;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        this.weapon.atkByFist(300, 0.1);\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 受击特效\r\n        mapModel.hintSystem.addHint(HintNames.hit1, cocosUtil.convertToWorldSpace(node));\r\n        this.weapon.targetForceMoveBack(node);\r\n\r\n    }\r\n\r\n    moveMaxFar() {\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            // 额外释放如来神掌\r\n            mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.PLAYER_BULLET, cocosUtil.convertToWorldSpace(this.weapon.node), null, this.weapon.node.angle);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 雷霆之拳\r\n@ccclass('Weapon3')\r\nexport class Weapon3 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10140;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        this.weapon.atkByFist(300, 0.1);\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 受击特效\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            mapModel.hintSystem.addHint(HintNames.hit7, cocosUtil.convertToWorldSpace(node));\r\n        } else {\r\n            mapModel.hintSystem.addHint(HintNames.hit3, cocosUtil.convertToWorldSpace(node));\r\n        }\r\n        this.weapon.targetForceMoveBack(node);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 葱\r\n@ccclass('Weapon4')\r\nexport class Weapon4 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10145;\r\n\r\n    // 固定只会瞄准左边或者右边\r\n    isFixedDirection: boolean = true;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        this.weapon.atkByStick(500);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Weapon } from './Weapon';\r\nimport { constants } from '../../../data/constants';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 光剑\r\n@ccclass('Weapon5')\r\nexport class Weapon5 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10150;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        let time = 0.05;\r\n        let atkDis = 300;\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            atkDis = 400;\r\n        }\r\n        let ret = this.weapon.atkByFist(atkDis, time);\r\n        if (!ret) {\r\n            this.scheduleOnce(() => {\r\n                if (this.weapon.row.lv == constants.design.maxLv) {\r\n                    mapModel.hintSystem.addHint(HintNames.hit4, cocosUtil.convertToWorldSpace(this.weapon.node), this.weapon.node.angle);\r\n                } else {\r\n                    mapModel.hintSystem.addHint(HintNames.hit6, cocosUtil.convertToWorldSpace(this.weapon.node), this.weapon.node.angle);\r\n                }\r\n            }, time * 2);\r\n        }\r\n\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 受击特效\r\n        mapModel.hintSystem.addHint(HintNames.hit5, cocosUtil.convertToWorldSpace(node));\r\n        this.weapon.targetForceMoveBack(node);\r\n    }\r\n\r\n}\r\n\r\n","import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { AnimationCtrl } from '../../base/AnimationCtrl';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 锤子\r\n@ccclass('Weapon6')\r\nexport class Weapon6 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10155;\r\n\r\n    // 固定位置，不跟随目标瞄准\r\n    isFixedPos: boolean = true;\r\n\r\n    aniCtrl: AnimationCtrl;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n        this.unscheduleAllCallbacks();\r\n\r\n        // @ts-ignore\r\n        this.aniCtrl = cocosUtil.addComponentOnce(this, AnimationCtrl);\r\n        this.aniCtrl.playAnimation(\"1\", true);\r\n    }\r\n\r\n    atk() {\r\n        if (this.weapon.getDisTargetNode() > 200) {\r\n            return;\r\n        }\r\n\r\n        audioManager.playEffect(this.weapon.row.audio);\r\n\r\n        this.weapon.canFace = false;\r\n        this.aniCtrl.playAnimationOnce(\"2\");\r\n        this.scheduleOnce(() => {\r\n            let pos = this.weapon.getInfoPosition(0, true);\r\n            let extraObj: any = {};\r\n            extraObj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n            mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, pos, null, extraObj);\r\n            if (this.weapon.row.lv == constants.design.maxLv) {\r\n                // 往外扩散\r\n                let direction = this.weapon.direction.clone().normalize();\r\n                let dis = 0;\r\n                let arr = [100, 80, 60, 40];\r\n                for (let i = 0; i < 3; i++) {\r\n                    this.scheduleOnce(() => {\r\n                        dis += arr[i] + arr[i + 1];\r\n                        let target = pos.clone().add(direction.clone().multiplyScalar(dis));\r\n                        let eobj: any = {};\r\n                        eobj.scale = 0.8 - i * 0.2;\r\n                        eobj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n                        mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, target, null, eobj);\r\n                    }, i * 0.2 + 0.2);\r\n                }\r\n            }\r\n        }, 0.1);\r\n        this.scheduleOnce(() => {\r\n            this.weapon.canFace = true;\r\n            this.weapon.timeCount = 0;\r\n        }, 0.32);\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, UITransform, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Bullet } from '../bullet/Bullet';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 激光枪\r\n@ccclass('Weapon7')\r\nexport class Weapon7 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10160;\r\n\r\n    stopTimeCount: boolean;\r\n    // 射程\r\n    atkDis: number = 400;\r\n    // 是否穿透\r\n    isHitPass: boolean = false;\r\n\r\n    bullet: Bullet;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n        this.stopTimeCount = false;\r\n\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            this.isHitPass = true;\r\n            this.atkDis = 1000;\r\n        } else {\r\n            this.isHitPass = false;\r\n            this.atkDis = 400;\r\n        }\r\n\r\n    }\r\n\r\n    atk() {\r\n        // 攻击距离判断\r\n        if (this.weapon.getDisTargetNode() > this.atkDis) {\r\n            return;\r\n        }\r\n\r\n        this.stopTimeCount = true;\r\n        let pos = this.weapon.getInfoPosition(0, true);\r\n        this.bullet = null;\r\n\r\n        let extraObj: any = {};\r\n        extraObj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n        extraObj.invokeClass = (bullet: Bullet) => {\r\n            if (!cocosUtil.isValid(this.node)) {\r\n                this.bullet.recycleSelf();\r\n                return;\r\n            }\r\n            audioManager.playEffect(this.weapon.row.audio);\r\n            this.bullet = bullet;\r\n            this.update();\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, pos, this.weapon.direction, extraObj);\r\n\r\n        this.scheduleOnce(this.atkEnd, this.weapon.row.lv);\r\n    }\r\n\r\n    atkEnd() {\r\n        this.unschedule(this.atkEnd);\r\n        this.weapon.timeCount = 0;\r\n        this.stopTimeCount = false;\r\n        if (cocosUtil.isValid(this.bullet)) {\r\n            this.bullet.recycleSelf();\r\n            this.bullet = null;\r\n        }\r\n    }\r\n\r\n    forceDestroy() {\r\n        this.atkEnd();\r\n    }\r\n\r\n    update() {\r\n        if (!this.bullet) {\r\n            return;\r\n        }\r\n        // 旋转角度\r\n        this.bullet.node.angle = this.node.angle;\r\n\r\n        // 位置\r\n        let pos = this.weapon.getInfoPosition(0, true);\r\n        pos = cocosUtil.convertToNodeSpace(this.bullet.node, pos);\r\n        this.bullet.node.setPosition(pos);\r\n\r\n        if (!this.weapon.targetNode) {\r\n            return;\r\n        }\r\n\r\n        // 长度\r\n        let width = this.weapon.getDisTargetNode();\r\n        if (this.isHitPass) {\r\n            width = this.atkDis;\r\n        }\r\n        this.bullet.bulletUtil.setBodyWidth(width - this.weapon.targetNode.getComponent(UITransform).height * 0.2);\r\n\r\n        if (width > this.atkDis) {\r\n            this.atkEnd();\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Component, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 魔法弩\r\n@ccclass('Weapon8')\r\nexport class Weapon8 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10165;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n    }\r\n\r\n    atk() {\r\n        // 发出子弹\r\n        let pos = this.weapon.getInfoPosition(0, true);\r\n        let num = 1;\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            num = 3;\r\n        }\r\n        let directionArr = cocosUtil.getSectorDirectionArr(this.weapon.direction, 15, num);\r\n        let extraObj: any = {};\r\n        extraObj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n        directionArr.forEach((dir: Vec3) => {\r\n            mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, pos, dir, extraObj);\r\n        });\r\n\r\n        // 枪口发光和后摇动作\r\n        this.weapon.atkByShot();\r\n    }\r\n\r\n}\r\n\r\n","import { Node, Prefab, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { resManager } from '../../manager/resManager';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { Weapon } from '../item/weapon/Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('WeaponSystem')\r\nexport class WeaponSystem extends BaseLayer {\r\n\r\n    weaponArr: any;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.weaponArr = [];\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n    }\r\n\r\n    initData(data: any) {\r\n        // test\r\n        // return;\r\n\r\n        // 初始武器\r\n        this.addWeapon(1, data.weaponId);\r\n    }\r\n\r\n    getSaveData() {\r\n        let weaponData: any = {};\r\n        weaponData.arr = this.weaponArr;\r\n\r\n        return weaponData;\r\n    }\r\n\r\n    loadSaveData(data: any) {\r\n        utilTools.forArr(data.arr, (info: any) => {\r\n            this.addWeapon(0, info.id);\r\n        });\r\n    }\r\n\r\n    loadWeaponPrefab(path: string) {\r\n        return new Promise((resolve, reject) => {\r\n            resManager.loadAsset(constants.bundles.weapon, path, Prefab, null, (err, prefab) => {\r\n                if (err) {\r\n                    reject();\r\n                    return;\r\n                }\r\n                resolve(prefab);\r\n            });\r\n        });\r\n    }\r\n\r\n    getWeaponInfoByType(type: number) {\r\n        for (let i in this.weaponArr) {\r\n            let tmp = this.weaponArr[i];\r\n            let row = designManager.getRowById(constants.tableName.weapon, tmp.id);\r\n            if (row.type == type) {\r\n                return tmp;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 添加武器\r\n     * @param type 武器类型 \r\n     * @param weaponId 可选，强制设置武器id\r\n     */\r\n    async addWeapon(type: number, weaponId: number = 0) {\r\n        if (weaponId > 0) {\r\n            type = designManager.getRowById(constants.tableName.weapon, weaponId).type;\r\n        }\r\n\r\n        let info = null;\r\n        let uiIndex = 0;\r\n        for (let i in this.weaponArr) {\r\n            let tmp = this.weaponArr[i];\r\n            let row = designManager.getRowById(constants.tableName.weapon, tmp.id);\r\n            if (row.type == type) {\r\n                info = tmp;\r\n                uiIndex = parseInt(i);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (info) {\r\n            // 升级\r\n            let row = designManager.getRowById(constants.tableName.weapon, info.id + 1);\r\n            if (!row || row.lv > constants.design.maxLv) {\r\n                // 已满级\r\n                return;\r\n            }\r\n            info.id++;\r\n        } else {\r\n            if (this.weaponArr.length >= constants.design.weaponNum) {\r\n                // 武器槽位已满\r\n                return;\r\n            }\r\n            // 新增\r\n            info = {};\r\n            info.id = designManager.getFirstIdByType(type);\r\n            this.weaponArr.push(info);\r\n            uiIndex = this.weaponArr.length - 1;\r\n        }\r\n\r\n        if (weaponId > 0) {\r\n            info.id = weaponId;\r\n        }\r\n\r\n        let weaponLayer = this.node.children[uiIndex];\r\n        if (!weaponLayer) {\r\n            return;\r\n        }\r\n        utilTools.forArr(weaponLayer.children, (node: Node) => {\r\n            let weaponUtil = node.getComponent(Weapon).weaponUtil;\r\n            if (weaponUtil && weaponUtil.forceDestroy) {\r\n                weaponUtil.forceDestroy();\r\n            }\r\n            node.destroy();\r\n        });\r\n\r\n        info.uiIndex = uiIndex;\r\n        let id = info.id;\r\n        let row = designManager.getRowById(constants.tableName.weapon, id);\r\n        let prefab = await this.loadWeaponPrefab(row.prefab);\r\n        if (id != info.id || !cocosUtil.isValid(this)) {\r\n            return;\r\n        }\r\n        let node = cocosUtil.instantiate(prefab);\r\n        let weapon = node.addComponent(Weapon);\r\n        node.parent = weaponLayer;\r\n        weapon.init(info);\r\n\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        // 武器\r\n        utilTools.forArr(this.node.children, (weaponNode: Node, index: number) => {\r\n            if (!weaponNode.active) {\r\n                return;\r\n            }\r\n            let node = weaponNode.children[0];\r\n            if (!node) {\r\n                return;\r\n            }\r\n            node.getComponent(Weapon).updateLogic(dt);\r\n        });\r\n    }\r\n}\r\n\r\n","//import AD from \"../../../AD/AD\";\r\n\r\nimport { view } from \"cc\";\r\nimport { tyqSDK } from \"../../tyqSDK\";\r\n\r\nconst global = {\r\n\t/**临时处理加的 2020-12-29 */\r\n\tlatticeAdunit: null,\r\n\t/**临时处理加的 2020-12-29 */\r\n\ticonCount: null,\r\n}\r\nclass wechat {\r\n\t////////////////////////////\r\n\t// 类成员\r\n\t///////////////////////////\r\n\tpublic static readonly _instance: wechat = new wechat();\r\n\t/**是否授权登录 */\r\n\tpublic isWxAuthorize: boolean = false;\r\n\t/** 系统信息 */\r\n\tprivate systemInfo: wx.types.SystemInfo = null;\r\n\t/** 登录按钮对象 */\r\n\tprivate userInfoButton: UserInfoButton = null;\r\n\t/** banner广告对象 */\r\n\tprivate bannerAd: BannerAd = null;\r\n\t/** 奖励视频广告对象 */\r\n\tprivate rewardedVideoAd: RewardedVideoAd = null;\r\n\t/** 插屏广告对象 */\r\n\tprivate interstitialAd = null;\r\n\t/**推荐位广告对象 */\r\n\tprivate RiconAD: iconAd = null;\r\n\tprivate LiconAD: iconAd = null;\r\n\t/**格子广告对象 */\r\n\tprivate gridAd: gridAd = null;\r\n\t/**格子广告数量 */\r\n\tprivate gridAdCunt: number = null;\r\n\t/** 游戏画面录制对象 */\r\n\tprivate GameRecorder: GameRecorder = null;\r\n\t/** 录屏开始事件 */\r\n\tprivate startListener: Function = null;\r\n\t/** 监听录屏继续事件 */\r\n\tprivate resumeListener: Function = null;\r\n\t/** 录屏暂停事件 */\r\n\tprivate pauseListener: Function = null;\r\n\t/**  录屏结束事件 */\r\n\tprivate stopListener: Function = null;\r\n\t/**  录屏错误事件 */\r\n\tprivate errorListener: Function = null;\r\n\t/** 录屏取消事件 */\r\n\tprivate abortListener: Function = null;\r\n\t/** 录制时间更新事件。在录制过程中触发该事件 */\r\n\tprivate timeUpdateListener: Function = null;\r\n\t/** 游戏圈对象 */\r\n\tprivate gameClub: GameClubButton = null;\r\n\t/** 意见反馈按钮 */\r\n\tprivate feedbackButton: FeedbackButton = null;\r\n\t/** 切换到前台事件 */\r\n\tprivate showListener: Function = null;\r\n\t/** 切换到后台事件 */\r\n\tprivate hideListener: Function = null;\r\n\t/** banner广告id */\r\n\tpublic _bannerAdUnitId = [];\r\n\tprivate _bannerAdObjList: BannerAd[] = [];\r\n\tprivate _bannerShowIndex = 0;\r\n\tprivate _bannerTimer = -1;\r\n\tprivate _bannerAdRefreshTimeOutId: number = 0;\r\n\t/** 奖励视频广告id */\r\n\tpublic _rewardedVideoAdUnitId = [];\r\n\r\n\tpublic _curRewardVideoAdUnitId = \"\"\r\n\tprivate _shareValue: number = 0\r\n\tprivate _rewardValue: number = 1\r\n\r\n\t/** 插屏广告id */\r\n\tpublic _interstitialAdUnitId = [];\r\n\t/**格子广告ID */\r\n\tprivate _latticeAdUnitId = ''\r\n\r\n\t/**推荐位广告，左右 */\r\n\tprivate _RIconAdunit = ''\r\n\tprivate _LIconAdunit = ''\r\n\r\n\t/** 登录按钮信息 */\r\n\tprivate mainBannerAD = null;\r\n\tprivate _userInfoButtonData = {\r\n\t\twidth: null,\r\n\t\theight: null,\r\n\t\tx: null,\r\n\t\ty: null,\r\n\t\turl: null\r\n\t};\r\n\t/** 反馈页面的按钮信息 */\r\n\tprivate _feedbackButtonData = {\r\n\t\twidth: null,\r\n\t\theight: null,\r\n\t\tx: null,\r\n\t\ty: null,\r\n\t\turl: null\r\n\t};\r\n\t/** banner广告的像素大小 */\r\n\tprivate _bannerSize = {\r\n\t\twidth: 600,\r\n\t\theight: 172\r\n\t};\r\n\r\n\tprivate _gameClubSize = {\r\n\t\ticon: '',\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\twidth: 0,\r\n\t\theight: 0\r\n\t};\r\n\tprivate _closeRewardVideoListener: Function = null;\r\n\t////////////////////////////\r\n\t// get、set访问器\r\n\t///////////////////////////\r\n\tpublic set RIconAduni(adUnitId: string) {\r\n\t\tthis._RIconAdunit = adUnitId;\r\n\t}\r\n\r\n\tpublic set LIconAduni(adUnitId: string) {\r\n\t\tthis._LIconAdunit = adUnitId;\r\n\t}\r\n\r\n\tpublic set bannerAdUnitId(adUnitId: string) {\r\n\t\t// this._bannerAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set rewardedVideoAdUnitId(adUnitId: string) {\r\n\t\t// this._rewardedVideoAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set interstitialAdUnitId(adUnitId: string) {\r\n\t\t// this._interstitialAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set bannerSize(size: any) {\r\n\t\tthis._bannerSize.width = size.width;\r\n\t\tthis._bannerSize.height = size.height;\r\n\t\tconsole.log(\"this._bannerSize = \", this._bannerSize)\r\n\t}\r\n\r\n\tpublic set latticeAdUnitId(adUnitId: string) {\r\n\t\tthis._latticeAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set gameClubSize(size: any) {\r\n\t\tthis._gameClubSize.x = size.x;\r\n\t\tthis._gameClubSize.y = size.y;\r\n\t\tthis._gameClubSize.width = size.width;\r\n\t\tthis._gameClubSize.height = size.height;\r\n\t\tthis._gameClubSize.icon = size.icon;\r\n\t}\r\n\r\n\tpublic set userInfoButtonData(data: any) {\r\n\t\tthis._userInfoButtonData.width = data.width;\r\n\t\tthis._userInfoButtonData.height = data.height;\r\n\t\tthis._userInfoButtonData.x = data.x;\r\n\t\tthis._userInfoButtonData.y = data.y;\r\n\t\tthis._userInfoButtonData.url = data.url;\r\n\t}\r\n\r\n\tpublic set closeRewardVideoListener(cb: Function) {\r\n\t\tthis._closeRewardVideoListener = cb;\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// get、set访问器\r\n\t///////////////////////////\r\n\tpublic constructor() {\r\n\t\tif (window.wx) {\r\n\t\t\t// this.registerRecordScreenEvent();\r\n\t\t\tthis.getSystemInfoSync();\r\n\t\t}\r\n\t}\r\n\t//预加载所有广告\r\n\tpublic preLoadAd() {\r\n\t\tthis.createRewardedVideoAd();\r\n\t\tthis.preLoadBanner();\r\n\t\tthis.createInterstitialAd();\r\n\t}\r\n\t//预加载所有banner广告\r\n\tpublic preLoadBanner() {\r\n\r\n\t\tfor (let i = 0; i < this._bannerAdUnitId.length; i++) {\r\n\t\t\tlet id = this._bannerAdUnitId[i];\r\n\t\t\tlet bannerAd = this.createBanner(id);\r\n\t\t\tthis._bannerAdObjList.push(bannerAd);\r\n\t\t}\r\n\r\n\t}\r\n\tprivate createBanner(id) {\r\n\t\tlet bannerSize = {\r\n\t\t\t// width: this._bannerSize.width / this.systemInfo.pixelRatio,\r\n\t\t\t// height: this._bannerSize.height / this.systemInfo.pixelRatio\r\n\t\t\twidth: this._bannerSize.width * 0.65,\r\n\t\t\theight: this._bannerSize.height * 0.35\r\n\t\t};\r\n\t\t// let id = this._bannerAdUnitId[Math.floor(Math.random() * this._bannerAdUnitId.length)];\r\n\t\tlet bannerObj = wx.createBannerAd({\r\n\t\t\t// 广告单元 id\r\n\t\t\tadUnitId: id,\r\n\t\t\t// 广告自动刷新的间隔时间，单位为秒，参数值必须大于等于30（该参数不传入时 Banner 广告不会自动刷新）\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this.systemInfo.windowWidth / 2 - bannerSize.width / 2,\r\n\t\t\t\ttop: this.systemInfo.windowHeight - bannerSize.height + this.systemInfo.windowHeight * 0.1,\r\n\t\t\t\theight: bannerSize.height,\r\n\t\t\t\twidth: bannerSize.width\r\n\t\t\t}\r\n\t\t});\r\n\t\t// tyqSDK.log('bannerSize: ', bannerSize, ', systemInfo: ', this.systemInfo, ',this.bannerAd.style: ', this.bannerAd.style);\r\n\r\n\t\tbannerObj.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载成功' + id);\r\n\r\n\t\t\t// 移除setTimeout\r\n\t\t\t// if (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\t// \tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t\t// }\r\n\t\t\t// if (isShow) this.bannerAd.show();\r\n\t\t\t// 延时刷新banner\r\n\t\t\t// if (refreshTime > 0) {\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = setTimeout(() => {\r\n\t\t\t// \t\tif (this.bannerAd)\r\n\t\t\t// \t\t\tthis.showBannerAd(refreshTime);\r\n\t\t\t// \t}, refreshTime * 1000);\r\n\t\t\t// }\r\n\t\t\t// next && next(true);\r\n\t\t});\r\n\t\tbannerObj.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载失败：', id, res);\r\n\t\t\t// next && next(false);\r\n\t\t});\r\n\t\tbannerObj.onResize((res: { width: number; height: number }) => {\r\n\t\t\tbannerObj.style.left = this.systemInfo.windowWidth / 2 - res.width / 2 - 0.1;\r\n\t\t\tbannerObj.style.top = this.systemInfo.windowHeight - res.height + 0.1;\r\n\t\t\t//AD.setErrNodeY(-((this.bannerAd.style.top * winSize.height / this.systemInfo.windowHeight) - winSize.height / 2));\r\n\t\t});\r\n\t\treturn bannerObj;\r\n\t}\r\n\t////////////////////////////\r\n\t// 登录模块\r\n\t///////////////////////////\r\n\t/**\r\n\t * 登陆接口\r\n\t * @param cbOK\r\n\t * @param cbFail\r\n\t */\r\n\tpublic wetchatLogin(cbOK, cbFail): void {\r\n\t\tlet data = {\r\n\t\t\twccode: null,\r\n\t\t\twcencrypted: null,\r\n\t\t\twciv: null,\r\n\t\t\t// userInfo: null\r\n\t\t};\r\n\t\t// 获取玩家数据\r\n\t\tlet getLoginData = () => {\r\n\t\t\tthis.login((code: any) => {\r\n\t\t\t\tdata.wccode = code;\r\n\t\t\t\tif (cbOK)\r\n\t\t\t\t\tcbOK(code);\r\n\t\t\t}, (res: any) => {\r\n\t\t\t\tdata.wcencrypted = res.encryptedData;\r\n\t\t\t\tdata.wciv = res.iv;\r\n\t\t\t\tif (cbFail)\r\n\t\t\t\t\tcbFail(data);\r\n\t\t\t});\r\n\t\t};\r\n\t\tgetLoginData();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 获取用户的当前设置。返回值中只会出现小程序已经向用户请求过的权限\r\n\t *\r\n\t * @param cbDone 登陆成功后回调\r\n\t * @param cbFail 登陆失败后回调\r\n\t */\r\n\tpublic getSetting(cbDone, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.getSetting)) {\r\n\t\t\twx.getSetting({\r\n\t\t\t\tsuccess: (res: { authSetting: wx.types.AuthSetting }) => {\r\n\t\t\t\t\t// if (res.authSetting['scope.userInfo']) {\r\n\t\t\t\t\t// \tif (cbDone)\r\n\t\t\t\t\t// \t\tcbDone(res.authSetting['scope.userInfo']);\r\n\t\t\t\t\t// } else\r\n\t\t\t\t\t// \tif (cbFail) cbFail(\"开关无\");\r\n\t\t\t\t\tcbDone(res.authSetting['scope.userInfo']);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (res) => {\r\n\t\t\t\t\tif (cbFail) cbFail(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconsole.error(\"----> 微信版本不支持getSetting API\");\r\n\t\t\tif (cbFail) cbFail(\"----> 微信版本不支持getSetting API\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建用户登录按钮\r\n\t */\r\n\tpublic createUserInfoButton(x = 0, y = 0, width = view.getVisibleSize().width, height = view.getVisibleSize().height): void {\r\n\t\tif (wechat.isSupportedAPI(wx.createUserInfoButton)) {\r\n\t\t\tthis.userInfoButton = wx.createUserInfoButton({\r\n\t\t\t\ttype: 'image',\r\n\t\t\t\t// image: this._userInfoButtonData.url,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\t// left: this.systemInfo.screenWidth * this._userInfoButtonData.x - this._userInfoButtonData.width / 2,\r\n\t\t\t\t\t// top: this.systemInfo.screenHeight * this._userInfoButtonData.y - this._userInfoButtonData.height / 2,\r\n\t\t\t\t\t// width: this._userInfoButtonData.width,\r\n\t\t\t\t\t// height: this._userInfoButtonData.height\r\n\t\t\t\t\tleft: x,\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\twidth: view.getVisibleSize().width,\r\n\t\t\t\t\theight: view.getVisibleSize().height\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用授权按钮，请升级到最新微信版本后重试');\r\n\t\t}\r\n\t}\r\n\r\n\t// /**\r\n\t//  * 根据node的属性，创建一个授权按钮\r\n\t//  * @param btnNode\r\n\t//  * @param cbOk 成功后回调\r\n\t//  * @param cbFail 失败后回调\r\n\t//  */\r\n\t// public createAuthorizeBtnByNode(btnNode: Node, cbOk?: Function, cbFail?: Function): void {\r\n\t// \tif (!wechat.isSupportedAPI(wx.createUserInfoButton)) {\r\n\t// \t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用授权按钮，请升级到最新微信版本后重试');\r\n\t// \t\treturn;\r\n\t// \t}\r\n\t// \tthis.destroyAuthorizeBtn()\r\n\r\n\t// \tlet btnSize = size(btnNode.width + 10, btnNode.height + 10);\r\n\t// \tlet btnPosI = btnNode.convertToWorldSpaceAR(v2(0, 0));\r\n\t// \tlet frameSize = view.getFrameSize();\r\n\t// \tlet winSize = director.getWinSize();\r\n\t// \t//适配不同机型来创建微信授权按钮\r\n\t// \tlet left = (btnPosI.x - btnSize.width * 0.5) / winSize.width * frameSize.width;\r\n\t// \tlet top = (winSize.height - btnPosI.y - btnSize.height * 0.5) / winSize.height * frameSize.height;\r\n\t// \tlet width = btnSize.width / winSize.width * frameSize.width;\r\n\t// \tlet height = btnSize.height / winSize.height * frameSize.height;\r\n\r\n\t// \tthis.userInfoButton = wx.createUserInfoButton({\r\n\t// \t\ttype: 'text',\r\n\t// \t\ttext: '',\r\n\t// \t\t// type: 'image',\r\n\t// \t\t// image: this._userInfoButtonData.url,\r\n\t// \t\tstyle: {\r\n\t// \t\t\tleft: left,\r\n\t// \t\t\ttop: top,\r\n\t// \t\t\twidth: width,\r\n\t// \t\t\theight: height,\r\n\t// \t\t\t// lineHeight: 0,\r\n\t// \t\t\t// backgroundColor: '',\r\n\t// \t\t\t// color: '#ffffff',\r\n\t// \t\t\t// textAlign: 'center',\r\n\t// \t\t\t// fontSize: 16,\r\n\t// \t\t\t// borderRadius: 4\r\n\t// \t\t}\r\n\t// \t})\r\n\r\n\t// \tthis.onTapUserInfoButton(cbOk, cbFail)\r\n\t// }\r\n\r\n\tpublic destroyAuthorizeBtn(): void {\r\n\t\tif (this.userInfoButton) {\r\n\t\t\tthis.userInfoButton.destroy();\r\n\t\t\tthis.userInfoButton = null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * @description 监听用户点击登录按钮的事件\r\n\t */\r\n\tprivate onTapUserInfoButton(cbOK, cbFail): void {\r\n\t\tif (this.userInfoButton) {\r\n\t\t\tthis.userInfoButton.onTap((res: any) => {\r\n\t\t\t\t// 点击登录按钮，用户授权成功\r\n\t\t\t\ttyqSDK.log('onTap', res);\r\n\t\t\t\tif (res.userInfo) {\r\n\t\t\t\t\tthis.destroyAuthorizeBtn();\r\n\t\t\t\t\tif (cbOK)\r\n\t\t\t\t\t\tcbOK(res);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcbFail(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail(null);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @description 登录游戏服务\r\n\t */\r\n\tpublic login(cbOk, cbFail): void {\r\n\t\twx.login({\r\n\t\t\tsuccess: (res: { code: string }) => {\r\n\t\t\t\tcbOk(res.code);\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tcbFail();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 微信登录，获取 code 和 encryptData(未测试)\r\n\t */\r\n\tpublic getWxLoginResult(cb) {\r\n\t\twx.login({\r\n\t\t\tsuccess(loginResult) {\r\n\t\t\t\tconsole.warn(\"-----微信登录--\", loginResult)\r\n\t\t\t\twx.getUserInfo({\r\n\t\t\t\t\twithCredentials: true,\r\n\t\t\t\t\tsuccess(userResult) {\r\n\t\t\t\t\t\tconsole.warn(\"-----获取用户信息结果--\", userResult)\r\n\t\t\t\t\t\tcb(null, {\r\n\t\t\t\t\t\t\tcode: loginResult.code,\r\n\t\t\t\t\t\t\tencryptedData: userResult.encryptedData,\r\n\t\t\t\t\t\t\tiv: userResult.iv,\r\n\t\t\t\t\t\t\tuserInfo: userResult.userInfo\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.error(\"-----获取用户信息失败--\")\r\n\t\t\t\t\t\tcb(new Error('获取微信用户信息失败，请检查网络状态'), null);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfail() {\r\n\t\t\t\tcb(new Error('微信登录失败，请检查网络状态'), null);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\t/** 微信获得设置 */\r\n\tpublic wxGetSetting() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\twx.getSetting({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(\"微信授权信息1\", res);\r\n\t\t\t\t\t\t//是否授权\r\n\t\t\t\t\t\tif (!res.authSetting['scope.userInfo']) {\r\n\t\t\t\t\t\t\tconsole.log(\"未授权----\")\r\n\t\t\t\t\t\t\tlet sysInfo = wx.getSystemInfoSync();\r\n\t\t\t\t\t\t\t// 获取微信界面大小\r\n\t\t\t\t\t\t\tlet screenWidth = sysInfo.screenWidth;\r\n\t\t\t\t\t\t\tlet screenHeight = sysInfo.screenHeight;\r\n\t\t\t\t\t\t\tlet button = wx.createUserInfoButton({\r\n\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\ttext: '',\r\n\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t//   left: screenWidth/2-260/2,\r\n\t\t\t\t\t\t\t\t\t//   top: screenHeight-260,\r\n\t\t\t\t\t\t\t\t\t//   width: 260,\r\n\t\t\t\t\t\t\t\t\t//   height: 60,\r\n\t\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\t\twidth: screenWidth,\r\n\t\t\t\t\t\t\t\t\theight: screenHeight,\r\n\t\t\t\t\t\t\t\t\tlineHeight: 60,\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0)',\r\n\t\t\t\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0)',\r\n\t\t\t\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\t\t\t\tfontSize: 24,\r\n\t\t\t\t\t\t\t\t\tborderRadius: 4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbutton.onTap((res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"授权结果\", res)\r\n\t\t\t\t\t\t\t\tif (res.errMsg == \"getUserInfo:ok\") {\r\n\t\t\t\t\t\t\t\t\tthis.isWxAuthorize = true\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"授权结果1 resolve\", res)\r\n\t\t\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"授权结果2 reject\", res)\r\n\t\t\t\t\t\t\t\t\treject(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbutton.hide()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tconsole.log(\"显示授权按钮\", button)\r\n\t\t\t\t\t\t\tbutton.show();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isWxAuthorize = true\r\n\t\t\t\t\t\t\tconsole.log(\"已经授权了2\")\r\n\t\t\t\t\t\t\t//已经授权了\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(\"微信授权失败处理函数11\");\r\n\t\t\t\t\t\treject(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(\"微信授权异常处理函数11\");\r\n\t\t\t\treject(e);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// wx.getSetting({\r\n\t\t\t// \tsuccess(res) {\r\n\t\t\t// \t\tconsole.log(\"----微信授权\", res)\r\n\t\t\t// \t  if (res.authSetting['scope.userInfo']==false) {\r\n\t\t\t// \t\twx.authorize({\r\n\t\t\t// \t\t  scope: 'scope.userInfo',\r\n\t\t\t// \t\t  success () {\r\n\t\t\t// \t\t\tconsole.log(\"-----成功\")\r\n\t\t\t// \t\t\twx.getUserInfo({\r\n\t\t\t// \t\t\t\tsuccess: (res: any) => {\r\n\t\t\t// \t\t\t\t\tif (resolve)\r\n\t\t\t// \t\t\t\t\t\tresolve(res);\r\n\t\t\t// \t\t\t\t},\r\n\t\t\t// \t\t\t\tfail: (err) => {\r\n\t\t\t// \t\t\t\t\tif (reject)\r\n\t\t\t// \t\t\t\t\t\treject(err);\r\n\t\t\t// \t\t\t\t}\r\n\t\t\t// \t\t\t});\r\n\t\t\t// \t\t  },\r\n\t\t\t// \t\t  fail(){\r\n\t\t\t// \t\t\tconsole.log(\"-----微信授权失败处理函数11\")\r\n\t\t\t// \t\t\treject(res);\r\n\t\t\t// \t\t  }\r\n\t\t\t// \t\t})\r\n\t\t\t// \t  }else{\r\n\t\t\t// \t\tthis.isWxAuthorize = true\r\n\t\t\t// \t\tconsole.log(\"已经授权了2\")\r\n\t\t\t// \t\t//已经授权了\t\t\t\t\t\t\r\n\t\t\t// \t\tresolve(res);\r\n\t\t\t// \t  }\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: (err) => {\r\n\t\t\t// \t\tif (reject)\r\n\t\t\t// \t\t\treject(err);\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\r\n\r\n\r\n\t\t\t// wx.getSetting({\r\n\t\t\t// \tsuccess(res) {\r\n\t\t\t// \t\tresolve(res);\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: (err) => {\r\n\t\t\t// \t\tif (reject)\r\n\t\t\t// \t\t\treject(err);\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 获取用户信息\r\n\t */\r\n\tpublic getUserInfo(resolve?, reject?): void {\r\n\t\tthis.getSetting((res: any) => {\r\n\t\t\twx.getUserInfo({\r\n\t\t\t\tsuccess: (res: any) => {\r\n\t\t\t\t\tif (resolve)\r\n\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tif (reject)\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, (res) => {\r\n\t\t\tif (reject) {\r\n\t\t\t\ttyqSDK.log(res);\r\n\t\t\t\treject(\"getsetting 失败\");\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 分享\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 分享，主动拉起转发，进入选择通讯录界面\r\n\t * @param _title\r\n\t * @param _imageUrl\r\n\t * @param _query\r\n\t */\r\n\tpublic shareAppMessage(_title: string, _imageUrl: string, _query: string): void {\r\n\t\twx.shareAppMessage({\r\n\t\t\ttitle: _title,\r\n\t\t\timageUrl: _imageUrl,\r\n\t\t\tquery: _query\r\n\t\t});\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// banner广告\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 显示banner广告\r\n\t   * @param refreshTime 自动刷新时间，默认30秒，必须>=30秒；\r\n\t */\r\n\tpublic showBannerAd(next?, refreshTime: number = 30) {\r\n\t\tif (!wechat.isSupportedAPI(wx.createBannerAd)) return;\r\n\t\tif (!this.bannerAd) {\r\n\t\t\tthis.createBannerAd(refreshTime, next);\r\n\t\t\tthis.bannerAd.show();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.bannerAd.show();\r\n\t\t\tnext && next(true);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//轮流显示banner\r\n\tpublic showBannerTurns(times: number) {\r\n\t\tif (!wechat.isSupportedAPI(wx.createBannerAd)) return;\r\n\t\tclearInterval(this._bannerTimer);\r\n\t\tthis.showBannerNext();\r\n\r\n\t\tthis._bannerTimer = setInterval(() => {\r\n\t\t\tthis.showBannerNext();\r\n\t\t}, times)\r\n\t}\r\n\r\n\r\n\tprivate showBannerNext() {\r\n\t\tif (this._bannerAdObjList.length <= 0) {\r\n\t\t\tconsole.error('zzzzzzz无banner广告');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._bannerAdObjList.forEach(ad => {\r\n\t\t\tad.hide();\r\n\t\t})\r\n\t\tthis._bannerAdObjList[this._bannerShowIndex].hide();\r\n\t\tthis._bannerShowIndex++;\r\n\t\tif (this._bannerShowIndex >= this._bannerAdObjList.length) {\r\n\t\t\tthis._bannerShowIndex = 0;\r\n\t\t}\r\n\t\tlet bannerAd = this._bannerAdObjList[this._bannerShowIndex];\r\n\r\n\t\tif (bannerAd) {\r\n\t\t\tbannerAd.show().catch(() => {\r\n\t\t\t\tlet id = this._bannerAdUnitId[this._bannerShowIndex];\r\n\t\t\t\tbannerAd = this.createBanner(id);\r\n\t\t\t\tif (bannerAd) {\r\n\t\t\t\t\tbannerAd.show();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet id = this._bannerAdUnitId[this._bannerShowIndex];\r\n\t\t\tbannerAd = this.createBanner(id);\r\n\t\t\tif (bannerAd) {\r\n\t\t\t\tbannerAd.show();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @description 隐藏banner广告\r\n\t */\r\n\tpublic hideBannerAd() {\r\n\t\tif (this.bannerAd) {\r\n\t\t\tthis.bannerAd.hide();\r\n\t\t}\r\n\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t}\r\n\t\tclearInterval(this._bannerTimer);\r\n\t\tthis._bannerAdObjList.forEach(ad => {\r\n\t\t\tad.hide();\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t* @description 销毁banner广告\r\n\t*/\r\n\tpublic destroyBannerAd() {\r\n\t\tif (this.bannerAd) {\r\n\t\t\tthis.bannerAd.destroy();\r\n\t\t\tthis.bannerAd = null;\r\n\t\t}\r\n\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建banner广告\r\n\t */\r\n\tpublic createBannerAd(refreshTime, next?, isShow = true) {\r\n\t\ttyqSDK.log(\"banner width= \", this._bannerSize.width, this._bannerAdUnitId)\r\n\t\tlet bannerSize = {\r\n\t\t\t// width: this._bannerSize.width / this.systemInfo.pixelRatio,\r\n\t\t\t// height: this._bannerSize.height / this.systemInfo.pixelRatio\r\n\t\t\twidth: this._bannerSize.width * 0.65,\r\n\t\t\theight: this._bannerSize.height * 0.35\r\n\t\t};\r\n\t\tlet id = this._bannerAdUnitId[Math.floor(Math.random() * this._bannerAdUnitId.length)];\r\n\t\tthis.bannerAd = wx.createBannerAd({\r\n\t\t\t// 广告单元 id\r\n\t\t\tadUnitId: id,\r\n\t\t\t// 广告自动刷新的间隔时间，单位为秒，参数值必须大于等于30（该参数不传入时 Banner 广告不会自动刷新）\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this.systemInfo.windowWidth / 2 - bannerSize.width / 2,\r\n\t\t\t\ttop: this.systemInfo.windowHeight - bannerSize.height + this.systemInfo.windowHeight * 0.1,\r\n\t\t\t\theight: bannerSize.height,\r\n\t\t\t\twidth: bannerSize.width\r\n\t\t\t}\r\n\t\t});\r\n\t\ttyqSDK.log('bannerSize: ', bannerSize, ', systemInfo: ', this.systemInfo, ',this.bannerAd.style: ', this.bannerAd.style);\r\n\r\n\t\tthis.bannerAd.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载成功');\r\n\t\t\t// 移除setTimeout\r\n\t\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t\t}\r\n\t\t\tif (isShow) this.bannerAd.show();\r\n\t\t\t// 延时刷新banner\r\n\t\t\t// if (refreshTime > 0) {\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = setTimeout(() => {\r\n\t\t\t// \t\tif (this.bannerAd)\r\n\t\t\t// \t\t\tthis.showBannerAd(refreshTime);\r\n\t\t\t// \t}, refreshTime * 1000);\r\n\t\t\t// }\r\n\t\t\tnext && next(true);\r\n\t\t});\r\n\t\tthis.bannerAd.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载失败：', res);\r\n\t\t\tnext && next(false);\r\n\t\t});\r\n\t\tthis.bannerAd.onResize((res: { width: number; height: number }) => {\r\n\t\t\tthis.bannerAd.style.left = this.systemInfo.windowWidth / 2 - res.width / 2 - 0.1;\r\n\t\t\tthis.bannerAd.style.top = this.systemInfo.windowHeight - res.height + 0.1;\r\n\t\t\t//AD.setErrNodeY(-((this.bannerAd.style.top * winSize.height / this.systemInfo.windowHeight) - winSize.height / 2));\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t////////////////////////////\r\n\t// 奖励广告\r\n\t///////////////////////////\r\n\tpublic showRewardVideoAd(successShowCb?: Function) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.createRewardedVideoAd();\r\n\t\t\tif (!this.rewardedVideoAd) {\r\n\t\t\t\ttyqSDK.log('=====> @framework, 奖励视频对象为不存在');\r\n\t\t\t\treject();\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tlet closeListener = (res: { isEnded: boolean }) => {\r\n\t\t\t\tlet isComplete: boolean;\r\n\t\t\t\t// 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n\t\t\t\tif (res && res.isEnded || res === undefined) {\r\n\t\t\t\t\tisComplete = true;\r\n\t\t\t\t\tresolve(isComplete);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tisComplete = false;\r\n\t\t\t\t\tresolve(isComplete);\r\n\t\t\t\t}\r\n\t\t\t\tthis.closeRewardVideo();\r\n\t\t\t\tthis.rewardedVideoAd.offClose(closeListener);\r\n\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\tthis.rewardedVideoAd = null;\r\n\t\t\t\tthis.createRewardedVideoAd();\r\n\t\t\t};\r\n\r\n\t\t\tlet errorListener = (res: { errMsg: string; errCode: number }) => {\r\n\t\t\t\ttyqSDK.log('=====> @framework, 奖励视频发生错误：', res);\r\n\t\t\t\t// 再拉一次视频\r\n\t\t\t\tthis.rewardedVideoAd.load()\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\treturn this.rewardedVideoAd.show();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(errorListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(errorListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tthis.rewardedVideoAd.onClose(closeListener);\r\n\t\t\tthis.rewardedVideoAd.onError(errorListener);\r\n\r\n\t\t\tthis.rewardedVideoAd.load().then(() => {\r\n\t\t\t\tthis.rewardedVideoAd.show().then(() => {\r\n\t\t\t\t\tif (successShowCb) {\r\n\t\t\t\t\t\tsuccessShowCb();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建奖励视频单例（小游戏端是全局单例）\r\n\t */\r\n\tpublic createRewardedVideoAd(): void {\r\n\t\tif (!wx.createRewardedVideoAd) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用奖励视频功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.rewardedVideoAd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet id = Math.floor(Math.random() * this._rewardedVideoAdUnitId.length);\r\n\t\tthis.rewardedVideoAd = wx.createRewardedVideoAd({\r\n\t\t\tadUnitId: this._rewardedVideoAdUnitId[id]\r\n\t\t});\r\n\t\tthis._curRewardVideoAdUnitId = this._rewardedVideoAdUnitId[id]\r\n\t\tthis.rewardedVideoAd.onLoad(this.rewardedVideoAdOnLoadListener.bind(this));\r\n\t\tthis.rewardedVideoAd.onError(this.rewardedVideoAdOnErrorListener);\r\n\t}\r\n\r\n\tprivate rewardedVideoAdOnErrorListener() {\r\n\t\ttyqSDK.log('=====> @framework, 加载视频广告失败');\r\n\t}\r\n\r\n\tprivate rewardedVideoAdOnLoadListener(res) {\r\n\t\ttyqSDK.log('=====> @framework, 加载视频广告成功', res);\r\n\t\tif (res) {\r\n\t\t\tif (res.shareValue) {\r\n\t\t\t\tthis._shareValue = parseInt(res.shareValue)\r\n\t\t\t}\r\n\r\n\t\t\tif (res.rewardValue) {\r\n\t\t\t\tthis._rewardValue = parseInt(res.rewardValue)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic isShareBehavior() {\r\n\t\treturn this._shareValue == 1\r\n\t}\r\n\r\n\tpublic isRewardBehavior() {\r\n\t\treturn this._rewardValue == 1\r\n\t}\r\n\r\n\r\n\tpublic reportShareBehavior(data: any) {\r\n\t\tdata.adunit = this._curRewardVideoAdUnitId\r\n\t\tdata.sceneID = 1\r\n\t\tdata.shareValue = this._shareValue\r\n\t\tdata.rewardValue = this._rewardValue\r\n\r\n\t\tconst result = this.rewardedVideoAd.reportShareBehavior(data)\r\n\t\tif (result) {\r\n\t\t\ttyqSDK.log('=====> @framework, 视频广告行为上报-成功', data);\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework, 视频广告行为上报-失败', data);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate closeRewardVideo(): void {\r\n\t\tif (this._closeRewardVideoListener) {\r\n\t\t\tthis._closeRewardVideoListener();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 插屏广告\r\n\t///////////////////////////\r\n\tpublic showInterstitialAd(closeCb?, successShowCb?: Function): void {\r\n\t\tif (!wx.createInterstitialAd) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用插屏广告功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.createInterstitialAd();\r\n\r\n\t\tlet onErrorListener = (res) => {\r\n\t\t\tthis.interstitialAd.offError(onErrorListener);\r\n\t\t\tthis.interstitialAd.offClose(onCloseListener);\r\n\t\t\tthis.interstitialAd.offLoad(this.interstitialAdOnLoadListener);\r\n\t\t\tthis.interstitialAd = null;\r\n\t\t\ttyqSDK.log('=====> @framework,插屏创建失败: ', res);\r\n\t\t\tcloseCb && closeCb();\r\n\t\t};\r\n\t\tthis.interstitialAd.onError(onErrorListener);\r\n\r\n\t\tlet onCloseListener = (res) => {\r\n\t\t\tthis.interstitialAd.offError(onErrorListener);\r\n\t\t\tthis.interstitialAd.offClose(onCloseListener);\r\n\t\t\tthis.interstitialAd.offLoad(this.interstitialAdOnLoadListener);\r\n\t\t\tthis.interstitialAd = null;\r\n\t\t\ttyqSDK.log('----> 插屏 广告关闭')\r\n\t\t\tcloseCb && closeCb();\r\n\t\t\tthis.createInterstitialAd();\r\n\t\t};\r\n\t\tthis.interstitialAd.onClose(onCloseListener);\r\n\r\n\t\tthis.interstitialAd.show().then(() => {\r\n\t\t\ttyqSDK.log(\"----> 成功显示插屏广告\");\r\n\t\t\tif (successShowCb) {\r\n\t\t\t\tsuccessShowCb();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tpublic createInterstitialAd() {\r\n\t\tif (!this.interstitialAd) {\r\n\t\t\tlet id = this._interstitialAdUnitId[Math.floor(Math.random() * this._interstitialAdUnitId.length)];\r\n\t\t\tthis.interstitialAd = wx.createInterstitialAd({\r\n\t\t\t\tadUnitId: id\r\n\t\t\t});\r\n\t\t\tthis.interstitialAd.onLoad(this.interstitialAdOnLoadListener);\r\n\t\t\t// this.interstitialAd.onError(() => {\r\n\t\t\t// \ttyqSDK.log('=====> @framework,插屏创建失败');\r\n\t\t\t// });\r\n\t\t}\r\n\r\n\t}\r\n\tprivate interstitialAdOnLoadListener() {\r\n\t\ttyqSDK.log('=====> @framework,插屏创建成功');\r\n\t}\r\n\t////////////////////////////\r\n\t// 游戏圈\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 创建微信游戏圈\r\n\t */\r\n\tpublic createGameClubButton(): void {\r\n\t\t// 微信圈是用户必要的功能，不需求弹出提示\r\n\t\tif (!wx.createGameClubButton) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用游戏圈功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.gameClub) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.gameClub = wx.createGameClubButton({\r\n\t\t\ticon: this._gameClubSize.icon,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this._gameClubSize.x / this.systemInfo.pixelRatio,\r\n\t\t\t\ttop: this._gameClubSize.y / this.systemInfo.pixelRatio,\r\n\t\t\t\twidth: this._gameClubSize.width,\r\n\t\t\t\theight: this._gameClubSize.height\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.gameClub.hide();\r\n\t\ttyqSDK.log('gameClub', this.gameClub);\r\n\t}\r\n\r\n\t/**\r\n\t * @description 显示微信游戏圈\r\n\t */\r\n\tpublic showGameClub(): void {\r\n\t\ttyqSDK.log('显示游戏圈：', this.gameClub);\r\n\t\tthis.createGameClubButton();\r\n\t\tif (this.gameClub) {\r\n\t\t\tthis.gameClub.show();\r\n\t\t\ttyqSDK.log('显示游戏圈成功');\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 隐藏微信游戏圈\r\n\t */\r\n\tpublic hideGameClub(): void {\r\n\t\tif (this.gameClub) {\r\n\t\t\tthis.gameClub.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 开放数据域\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 向开放数据域发送消息\r\n\t * @param msg 要发送的消息，message 中及嵌套对象中 key 的 value 只能是 primitive value。即 number、string、boolean、null、undefined\r\n\t */\r\n\tpublic postMessage(msg: any, info?: any): void {\r\n\t\tlet data = {\r\n\t\t\tmessage: '',\r\n\t\t\tvalue: info\r\n\t\t}\r\n\t\tdata.message = msg;\r\n\t\tdata.value = info;\r\n\t\ttyqSDK.log('发送信息: ', data);\r\n\t\twx.getOpenDataContext().postMessage(data);\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 意见反馈\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 创建打开意见反馈页面的按钮, 默认使用图片按钮的形式创建\r\n\t */\r\n\tpublic createFeedbackButton(cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.createFeedbackButton)) {\r\n\t\t\tthis.feedbackButton = wx.createFeedbackButton({\r\n\t\t\t\ttype: 'image', // 按钮的类型.支持text、image\r\n\t\t\t\timage: this._feedbackButtonData.url,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tleft: this._feedbackButtonData.x, // 左上角横坐标\r\n\t\t\t\t\ttop: this._feedbackButtonData.y, // 左上角纵坐标\r\n\t\t\t\t\twidth: this._feedbackButtonData.width, // 宽度\r\n\t\t\t\t\theight: this._feedbackButtonData.height // 高度\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcbOk(this.feedbackButton);\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用反馈按钮，请升级到最新微信版本后重试');\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 监听意见反馈按钮的点击事件(在创建意见反馈按钮后，立即执行该函数，注册点击事件)，只能使用一次\r\n\t */\r\n\tpublic onTapFeedbackButton(cbOk, cbFail): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.onTap(() => {\r\n\t\t\t\tcbOk();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 显示意见反馈按钮\r\n\t */\r\n\tpublic showFeedbackButton(): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.show();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 隐藏意见反馈按钮\r\n\t */\r\n\tpublic hideFeedbackButton(): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 录屏\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 获取全局唯一的游戏画面录制对象\r\n\t */\r\n\tpublic getGameRecorder(cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.getGameRecorder)) {\r\n\t\t\tthis.GameRecorder = wx.getGameRecorder();\r\n\t\t\tcbOk();\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic registerRecordScreenEvent(): void {\r\n\t\tif (!wechat.isSupportedAPI(wx.getGameRecorder)) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前客户端版过低，无法使用录制功能，请升级到最新客户端版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.GameRecorder = wx.getGameRecorder();\r\n\t\t// 监听录屏继续事件\r\n\t\tthis.GameRecorder.on('start', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.resumeListener) {\r\n\t\t\t\tthis.resumeListener();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 监听录屏暂停事件\r\n\t\tthis.GameRecorder.on('pause', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.pauseListener) {\r\n\t\t\t\tthis.pauseListener();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 监听录屏结束事件。可以通过 onStop 接口监听录屏结束事件，获得录屏地址\r\n\t\tthis.GameRecorder.on('stop', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.stopListener) {\r\n\t\t\t\ttyqSDK.log('视频的时长：', res.duration);\r\n\t\t\t\tthis.stopListener(res.duration);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 监听录屏错误事件\r\n\t\tthis.GameRecorder.on('error', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\ttyqSDK.log('=====> @framework,录屏错误：', res.error.message, ',code: ', res.error.code);\r\n\t\t\tif (this.errorListener) {\r\n\t\t\t\tthis.errorListener();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 录制时间更新事件。在录制过程中触发该事件\r\n\t\tthis.GameRecorder.on('timeUpdate', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\ttyqSDK.log('=====> @framework,录屏到第几秒：', res.currentTime);\r\n\t\t\tif (this.timeUpdateListener) {\r\n\t\t\t\tthis.timeUpdateListener();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 录制取消事件\r\n\t\tthis.GameRecorder.on('abort', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.abortListener) {\r\n\t\t\t\tthis.abortListener();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t *  @description 开始录屏\r\n\t * @param callback\r\n\t */\r\n\tpublic startRecordScreen(callback?: Function): void {\r\n\t\treturn\r\n\t\tthis.startListener = callback;\r\n\t\tthis.GameRecorder.start({\r\n\t\t\tfps: 24,\r\n\t\t\tduration: 7200,\r\n\t\t\tbitrate: 1000,\r\n\t\t\tgop: 12\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 暂停录屏\r\n\t */\r\n\tpublic pauseRecordScreen(callback?: Function): void {\r\n\t\tthis.pauseListener = callback;\r\n\t\tthis.GameRecorder.pause();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 恢复录制游戏画面\r\n\t * @param callback\r\n\t */\r\n\tpublic resumeRecordScreen(callback?: Function): void {\r\n\t\tthis.resumeListener = callback;\r\n\t\tthis.GameRecorder.resume();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 结束录制游戏画面。结束录制后可以发起分享\r\n\t * @param callback\r\n\t */\r\n\tpublic stopRecordScreen(callback?: Function): void {\r\n\t\tthis.stopListener = callback;\r\n\t\tthis.GameRecorder.stop();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 放弃录制游戏画面。此时已经录制的内容会被丢弃\r\n\t * @param callback\r\n\t */\r\n\tpublic abortRecordScreen(callback?: Function): void {\r\n\t\tthis.abortListener = callback;\r\n\t\tthis.GameRecorder.abort();\r\n\t}\r\n\r\n\tpublic createGameRecorderShareButton(): void {\r\n\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 其他能力\r\n\t///////////////////////////\r\n\t/**\r\n\t * 监听小游戏回到前台的事件\r\n\t * @param callbak\r\n\t */\r\n\tpublic onShow(callbak): void {\r\n\t\tthis.showListener = callbak;\r\n\t\twx.onShow(this.onShowListener.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * @description 取消监听小游戏回到前台的事件\r\n\t */\r\n\tpublic offShow(): void {\r\n\t\twx.offShow(this.onShowListener);\r\n\t}\r\n\r\n\t/**\r\n\t * @description 监听小游戏隐藏到后台事件。锁屏、按 HOME 键退到桌面、显示在聊天顶部等操作会触发此事件\r\n\t * @param callbak\r\n\t */\r\n\tpublic onHide(callbak): void {\r\n\t\tthis.hideListener = callbak;\r\n\t\twx.onHide(this.onHideListener.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * @description 取消监听小游戏隐藏到后台事件\r\n\t */\r\n\tpublic offHide(): void {\r\n\t\tthis.hideListener = null;\r\n\t\twx.offHide(this.onHideListener);\r\n\t}\r\n\r\n\tpublic onShowListener(res): void {\r\n\t\tif (this.showListener) {\r\n\t\t\tthis.showListener(res);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic onHideListener(): void {\r\n\t\tif (this.hideListener) {\r\n\t\t\tthis.hideListener();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 打开另一个小程序\r\n\t * @param _appId\r\n\t * @param _path\r\n\t */\r\n\tpublic navigateToMiniProgram(_appId: string, _path: string, cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.navigateToMiniProgram)) {\r\n\t\t\twx.navigateToMiniProgram({\r\n\t\t\t\tappId: _appId,\r\n\t\t\t\tpath: _path,\r\n\t\t\t\tenvVersion: 'release',\r\n\t\t\t\tsuccess: () => {\r\n\t\t\t\t\tcbOk();\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tcbFail();\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 震动\r\n\t///////////////////////////\r\n\t/**\r\n\t\t * 使手机发生较长时间的振动。\r\n\t\t */\r\n\t/**\r\n\t * 使手机发生较长时间的振动。\r\n\t * @param cb 回调\r\n\t */\r\n\tpublic vibrateLong(cb?: Function): void {\r\n\t\tif (cb)\r\n\t\t\tconsole.warn(\"----> vibrateLong 微信可能没有cb\");\r\n\t\twx.vibrateLong();\r\n\t};\r\n\t/**\r\n\t * 使手机发生较短时间的振动\r\n\t * @param cb 回调\r\n\t */\r\n\tpublic vibrateShort(cb?: Function): void {\r\n\t\tconsole.warn(\"----> vibrateShort 微信可能没有cb\");\r\n\t\twx.vibrateShort();\r\n\t};\r\n\t////////////////////////////\r\n\t// 通用\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 获取系统信息\r\n\t */\r\n\tpublic getSystemInfoSync(): void {\r\n\t\tthis.systemInfo = wx.getSystemInfoSync();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 是否支持改API\r\n\t * @param api\r\n\t */\r\n\tprivate static isSupportedAPI(api: any): boolean {\r\n\t\tif (api) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\twx.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 退出小程序\r\n\t * @param cb\r\n\t */\r\n\tpublic exitMiniProgram(cb: any): void {\r\n\t\twx.exitMiniProgram(cb);\r\n\t};\r\n\r\n\t/**\r\n\t * 显示灰色背景的消息提示框\r\n\t * @param title 内容\r\n\t * @param duration 提示框停留时间，单位ms\r\n\t * @param callback 成功后回调\r\n\t */\r\n\tpublic showToast(title: string, duration: number = 3000, callback?: Function): void {\r\n\t\twx.showToast({\r\n\t\t\ttitle: title,\r\n\t\t\tduration: duration,\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tif (callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * 获取系统信息\r\n\t * @param callback 成功后回调\r\n\t */\r\n\tpublic getSystemInfo(callback?: Function): void {\r\n\t\twx.getSystemInfo({\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (callback) callback(res);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * 阿拉丁事件\r\n\t * @param str\r\n\t * @param objOrStr {key:string,value:string}\r\n\t */\r\n\tpublic aldSendEvent(str, objOrStr?): void {\r\n\t\ttyqSDK.log('send msg: ', str);\r\n\t\tif (wx.aldSendEvent) {\r\n\t\t\tif (objOrStr)\r\n\t\t\t\twx.aldSendEvent(str);\r\n\t\t\telse\r\n\t\t\t\twx.aldSendEvent(str, objOrStr);\r\n\t\t} else\r\n\t\t\tconsole.error(\"----> 阿拉丁接入失败，请检查game.js\");\r\n\t}\r\n\r\n\t/**\r\n\t * 创建供量主广告实例\r\n\t */\r\n\tpublic createIconAd() {\r\n\r\n\t\tlet styleItemArray = [...Array(global.iconCount + 1).map((_, i) => ({\r\n\t\t\tappNameHidden: false,\r\n\t\t\tcolor: 'white',\r\n\t\t\tsize: 100,\r\n\t\t\tborderWidth: 100,\r\n\t\t\tborderColor: 'white',\r\n\t\t\tleft: 100 * i,\r\n\t\t\ttop: 100,\r\n\t\t}))]\r\n\t\t// 创建推荐位实例，提前初始化\r\n\t\tthis.LiconAD = wx.createGameIcon({\r\n\t\t\tadUnitId: this._LIconAdunit,\r\n\t\t\tcount: global.iconCount,\r\n\t\t\tstyle: styleItemArray\r\n\t\t})\r\n\r\n\t\t// this.RiconAD = wx.createGameIcon({\r\n\t\t// \tadUnitId:this._RIconAdunit,\r\n\t\t// \tcount:global.iconCount,\r\n\t\t// \tstyle:styleItemArray\r\n\t\t// })\r\n\t\tthis.LiconAD.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, 小游戏推荐左边icon加载失败：', res);\r\n\t\t\t//next && next(false);\r\n\t\t});\r\n\t\tthis.LiconAD.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, 小游戏推荐左边icon加载成功');\r\n\t\t})\r\n\t\t// this.RiconAD.onError((res)=>{\r\n\t\t// \ttyqSDK.log('=====> @framework, 小游戏推荐右边icon加载失败：',res);\r\n\t\t// \t//next && next(false);\r\n\t\t// });\r\n\t\t// this.RiconAD.onLoad(()=>{\r\n\t\t// \ttyqSDK.log('=====> @framework, 小游戏推荐右边icon加载成功');\r\n\t\t// })\r\n\t\tthis.LiconAD.onResize(size => {\r\n\t\t\t//偶数  自适应排位置\r\n\t\t\tvar starTop = 0;\r\n\t\t\tif (global.iconCount % 2 === 0) {\r\n\t\t\t\tstarTop = this.systemInfo.windowHeight / 2 - global.iconCount / 2 * size[0].height;\r\n\t\t\t} else {\r\n\t\t\t\tstarTop = this.systemInfo.windowHeight / 2 - global.iconCount / 2 * size[0].height + size[0].height / 2;\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < size.length; i++) {\r\n\t\t\t\tsize[i].left = 10\r\n\t\t\t\tsize[i].top = starTop + (72 * i);\r\n\t\t\t}\r\n\t\t})\r\n\t\t//同一时间只能展示一个，放弃右边的\r\n\t\t// this.RiconAD.onResize(size =>{\r\n\t\t// \t//偶数  自适应排位置\r\n\t\t// \tvar starTop = 0;\r\n\t\t// \tif(global.iconCount%2 === 0){\r\n\t\t// \t\tstarTop = this.systemInfo.windowHeight/2 - global.iconCount/2*size[0].height;\r\n\t\t// \t}else{\r\n\t\t// \t\tstarTop = this.systemInfo.windowHeight/2 - global.iconCount/2*size[0].height+size[0].height/2;\r\n\t\t// \t}\r\n\t\t// \tfor (let i = 0; i < size.length; i++) {\r\n\t\t// \t\tsize[i].left = this.systemInfo.windowWidth-10\r\n\t\t// \t\tsize[i].top = starTop + (72*i);\r\n\t\t// \t}\r\n\t\t// })\r\n\t}\r\n\r\n\t/**\r\n\t * 显示小游戏推荐广告\r\n\t */\r\n\tpublic showIconAd(dir: string) {\r\n\t\tif (dir == 'R') {\r\n\t\t\tif (this.RiconAD) {\r\n\t\t\t\tthis.RiconAD.load().then(() => {\r\n\t\t\t\t\tthis.RiconAD.show()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(this.createIconAd, 1000)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.LiconAD) {\r\n\t\t\t\tthis.LiconAD.load().then(() => {\r\n\t\t\t\t\tthis.LiconAD.show()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(this.createIconAd, 1000)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**创建格子广告 */\r\n\tpublic createGridAd(count: number) {\r\n\t\tthis.gridAd = wx.createGridAd({\r\n\t\t\tadUnitId: global.latticeAdunit,\r\n\t\t\tadTheme: 'white',\r\n\t\t\tgridCount: count,\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: this.systemInfo.windowHeight / 2 - 350,\r\n\t\t\t\twidth: 500,\r\n\t\t\t\topacity: 0.8\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.gridAd.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, 格子广告加载成功');\r\n\t\t\tthis.gridAdCunt = count;\r\n\t\t});\r\n\t\tthis.gridAd.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, 格子广告加载失败：', res);\r\n\t\t});\r\n\t}\r\n\r\n\t/**显示格子广告 */\r\n\tpublic showGridAd(count: number) {\r\n\t\t//数量不一样的时候重新创建格子\r\n\t\tif (count != this.gridAdCunt) {\r\n\t\t\tif (this.gridAd) {\r\n\t\t\t\tthis.gridAd.destroy();\r\n\t\t\t}\r\n\t\t\tthis.createGridAd(count);\r\n\t\t}\r\n\t\tthis.gridAd.show();\r\n\t}\r\n\r\n\t/**隐藏格子广告 */\r\n\tpublic hideGridAd() {\r\n\t\tthis.gridAd.hide();\r\n\t}\r\n\r\n\t/**\r\n\t * 显示转发和分享到朋友圈\r\n\t * @param bool 是否使用带 shareTicket 的转发详情\r\n\t */\r\n\tpublic showShareMenu(bool: boolean = false) {\r\n\t\tif (window.wx) {\r\n\t\t\twx.showShareMenu({\r\n\t\t\t\twithShareTicket: bool,\r\n\t\t\t\tmenus: ['shareAppMessage', 'shareTimeline']\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const Wechat = wechat._instance;\r\n","\r\nimport { NetworkMgr } from \"./weNetworkMgr\";\r\n\r\nclass http {\r\n\t////////////////////////////\r\n\t// 类成员\r\n\t///////////////////////////\r\n\tpublic static readonly _instance = new http();\r\n\tprivate _timeOut = 10 * 1000;\r\n\tprivate _httpUrl = \"\";\r\n\tprivate _apiKey = \"\";\r\n\t////////////////////////////\r\n\t// get、set构造器\r\n\t///////////////////////////\r\n\tpublic set timeOut(time: number) {\r\n\t\tthis._timeOut = time;\r\n\t}\r\n\r\n\tpublic set httpUrl(url: string) {\r\n\t\tthis._httpUrl = url;\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 构造函数\r\n\t///////////////////////////\r\n\tpublic constructor() {\r\n\t}\r\n\r\n\tpublic init(httpUrl: string, apiKey: string) {\r\n\t\tthis._httpUrl = httpUrl;\r\n\t\tthis._apiKey = apiKey;\r\n\t}\r\n\r\n\t/**\r\n\t * 发送请求\r\n\t * @param route 注册事件，通过消息机制返回服务端回调的信息\r\n\t * @param msg 请求数据\r\n\t * @param mid \r\n\t */\r\n\tpublic post(route: string, msg: Object, mid?: number) {\r\n\t\t//计算请求时间//////\r\n\t\t// let time = new Date().getTime();\r\n\t\t////////////\r\n\t\tvar dataStr = \"\";\r\n\t\tif (msg) {\r\n\t\t\tdataStr = this.createSign(msg);\r\n\t\t}\r\n\t\tlet xhr = new XMLHttpRequest();//cc.loader.getXMLHttpRequest();\r\n\t\t// 超时时间1s，单位是毫秒\r\n\t\txhr.timeout = this._timeOut;\r\n\t\txhr.open('POST', this._httpUrl + route, true);\r\n\t\t// 服务端也需要设置\r\n\t\txhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\");\r\n\t\t//DES3加密\r\n\t\t// dataStr = this.strToDES3(dataStr);\r\n\t\txhr.send(dataStr);\r\n\t\txhr.onreadystatechange = function onreadystatechange() {\r\n\t\t\t//////////\r\n\t\t\t// let time2 = new Date().getTime();\r\n\t\t\t// const dis = time2 - time;\r\n\t\t\t///////////\r\n\t\t\t// 请求完成。在此进行处理。\r\n\t\t\tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t\t\tlet respone: any = xhr.responseText;\r\n\t\t\t\tif (!respone) {\r\n\t\t\t\t\t// console.error('http request respone is null');\r\n\t\t\t\t\tNetworkMgr.onHttpError(mid, null, 'http request respone is null');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tNetworkMgr.checkRespone(route, respone, mid);\r\n\t\t\t}\r\n\t\t}.bind(this);\r\n\r\n\t\t// XMLHttpRequest 超时\r\n\t\txhr.ontimeout = function ontimeout(error) {\r\n\t\t\tconsole.error('http request timeout: ', error);\r\n\t\t\tNetworkMgr.onHttpError(mid, null, 'http request timeout: ');\r\n\t\t\t// NetworkMgr.onHttpError(mid, res, 'http request timeout: ');\r\n\t\t}.bind(this);\r\n\r\n\t\t// XMLHttpRequest 错误\r\n\t\txhr.onerror = function onerror(error) {\r\n\t\t\t// console.error('http request error: ', error);\r\n\t\t\tNetworkMgr.onHttpError(mid, error, 'http request error: ');\r\n\t\t\t// alert('网络通信失败，请刷新重试。');\r\n\t\t}.bind(this);\r\n\t}\r\n\r\n\t/**\r\n\t * GET 请求\r\n\t * @param route \r\n\t * @param msg \r\n\t * @param mid \r\n\t */\r\n\tpublic post2(route: string, msg: Object, mid?: number) {\r\n\t\tconst str = this.MsgToString(msg)\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\t// 超时时间1s，单位是毫秒\r\n\t\txhr.timeout = this._timeOut;\r\n\t\txhr.open('GET', this._httpUrl + route + \"?\" + str, true);\r\n\t\t// 服务端也需要设置\r\n\t\txhr.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\r\n\t\txhr.send(JSON.stringify(msg));\r\n\t\txhr.onreadystatechange = function onreadystatechange() {\r\n\t\t\t// 请求完成。在此进行处理。\r\n\t\t\tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t\t\tlet respone: any = xhr.responseText;\r\n\t\t\t\tif (!respone) {\r\n\t\t\t\t\t// console.error('http request respone is null');\r\n\t\t\t\t\tNetworkMgr.onHttpError(mid, null, 'http request respone is null');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tNetworkMgr.checkRespone(route, respone, mid);\r\n\t\t\t}\r\n\t\t}.bind(this);\r\n\r\n\t\t// XMLHttpRequest 超时\r\n\t\txhr.ontimeout = function ontimeout(error) {\r\n\t\t\tconsole.error('http request timeout: ', error);\r\n\t\t\t// NetworkMgr.onHttpError(mid, res, 'http request timeout: ');\r\n\t\t}.bind(this);\r\n\r\n\t\t// XMLHttpRequest 错误\r\n\t\txhr.onerror = function onerror(error) {\r\n\t\t\tNetworkMgr.onHttpError(mid, error, 'http request error: ');\r\n\t\t}.bind(this);\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t/**\r\n\t * Get请求，将json转换成字符串数据\r\n\t */\r\n\tMsgToString(msg: any): string {\r\n\t\tlet arr = Object.keys(msg);\r\n\t\tlet str = \"\";\r\n\t\tfor (let value of arr) {\r\n\t\t\tstr += value + \"=\" + '\"' + msg[value] + '\"' + \"&\"\r\n\t\t}\r\n\t\treturn str;\r\n\t}\r\n\r\n\t/**\r\n\t * 数据加密\r\n\t */\r\n\tstrToDES3(data): any {\r\n\t\t// let des3Data: string = window.DES3.encrypt(global.DES3_KEY, data);\r\n\t\t// let newData = des3Data.replace(/\\+/g, \"%2B\");\r\n\t\t// return newData;\r\n\t}\r\n\r\n\t/**生成sign加密 */\r\n\tprivate createSign(obj: Object) {\r\n\t\tvar arr = new Array();\r\n\t\tvar num = 0;\r\n\t\tfor (var i in obj) {\r\n\t\t\tarr[num] = i;\r\n\t\t\tnum++;\r\n\t\t}\r\n\t\tvar sortArr = arr.sort();//参数名ASCII字典序排序\r\n\t\tvar str = \"\"\r\n\t\tfor (var i in sortArr) {\r\n\t\t\tif (!obj[sortArr[i]] && typeof (obj[sortArr[i]]) != \"number\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tstr += sortArr[i] + \"=\" + obj[sortArr[i]] + \"&&\";\r\n\t\t}\r\n\t\tvar signstr = str;\r\n\t\tsignstr += \"api_key=\" + this._apiKey;\r\n\t\tstr += \"sign=\" + this.MD5(decodeURIComponent(signstr));\r\n\t\treturn str;\r\n\t}\r\n\r\n\t/**md5加密*/\r\n\tprivate md5encode(str: string) {\r\n\t\tvar hexcase = 0;\r\n\t\tvar b64pad = \"\";\r\n\t\tvar chrsz = 8;\r\n\t\tlet hex_md5 = (s) => {\r\n\t\t\treturn binl2hex(core_md5(str2binl(s), s.length * chrsz));\r\n\t\t}\r\n\t\tlet b64_md5 = (s) => {\r\n\t\t\treturn binl2b64(core_md5(str2binl(s), s.length * chrsz));\r\n\t\t}\r\n\t\tlet str_md5 = (s) => {\r\n\t\t\treturn binl2str(core_md5(str2binl(s), s.length * chrsz));\r\n\t\t}\r\n\t\tlet hex_hmac_md5 = (key, data) => {\r\n\t\t\treturn binl2hex(core_hmac_md5(key, data));\r\n\t\t}\r\n\t\tlet b64_hmac_md5 = (key, data) => {\r\n\t\t\treturn binl2b64(core_hmac_md5(key, data));\r\n\t\t}\r\n\t\tlet str_hmac_md5 = (key, data) => {\r\n\t\t\treturn binl2str(core_hmac_md5(key, data));\r\n\t\t}\r\n\t\tlet md5_vm_test = () => {\r\n\t\t\treturn hex_md5(\"abc\") == \"900150983cd24fb0d6963f7d28e17f72\";\r\n\t\t}\r\n\t\tlet core_md5 = (x, len) => {\r\n\t\t\tx[len >> 5] |= 0x80 << ((len) % 32);\r\n\t\t\tx[(((len + 64) >>> 9) << 4) + 14] = len;\r\n\t\t\tvar a = 1732584193;\r\n\t\t\tvar b = -271733879;\r\n\t\t\tvar c = -1732584194;\r\n\t\t\tvar d = 271733878;\r\n\t\t\tfor (var i = 0; i < x.length; i += 16) {\r\n\t\t\t\tvar olda = a;\r\n\t\t\t\tvar oldb = b;\r\n\t\t\t\tvar oldc = c;\r\n\t\t\t\tvar oldd = d;\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 0], 7, -680876936);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 0], 20, -373897302);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 0], 11, -358537222);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 0], 6, -198630844);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n\t\t\t\ta = safe_add(a, olda);\r\n\t\t\t\tb = safe_add(b, oldb);\r\n\t\t\t\tc = safe_add(c, oldc);\r\n\t\t\t\td = safe_add(d, oldd);\r\n\t\t\t}\r\n\t\t\treturn Array(a, b, c, d);\r\n\t\t}\r\n\t\tlet md5_cmn = (q, a, b, x, s, t) => {\r\n\t\t\treturn safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\r\n\t\t}\r\n\t\tlet md5_ff = (a, b, c, d, x, s, t) => {\r\n\t\t\treturn md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n\t\t}\r\n\t\tlet md5_gg = (a, b, c, d, x, s, t) => {\r\n\t\t\treturn md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n\t\t}\r\n\t\tlet md5_hh = (a, b, c, d, x, s, t) => {\r\n\t\t\treturn md5_cmn(b ^ c ^ d, a, b, x, s, t);\r\n\t\t}\r\n\t\tlet md5_ii = (a, b, c, d, x, s, t) => {\r\n\t\t\treturn md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n\t\t}\r\n\t\tlet core_hmac_md5 = (key, data) => {\r\n\t\t\tvar bkey = str2binl(key);\r\n\t\t\tif (bkey.length > 16) bkey = core_md5(bkey, key.length * chrsz);\r\n\t\t\tvar ipad = Array(16),\r\n\t\t\t\topad = Array(16);\r\n\t\t\tfor (var i = 0; i < 16; i++) {\r\n\t\t\t\tipad[i] = bkey[i] ^ 0x36363636;\r\n\t\t\t\topad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n\t\t\t}\r\n\t\t\tvar hash = core_md5(ipad.concat(str2binl(data)), 512 + data.length * chrsz);\r\n\t\t\treturn core_md5(opad.concat(hash), 512 + 128);\r\n\t\t}\r\n\t\tlet safe_add = (x, y) => {\r\n\t\t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n\t\t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n\t\t\treturn (msw << 16) | (lsw & 0xFFFF);\r\n\t\t}\r\n\t\tlet bit_rol = (num, cnt) => {\r\n\t\t\treturn (num << cnt) | (num >>> (32 - cnt));\r\n\t\t}\r\n\t\tlet str2binl = (str) => {\r\n\t\t\tvar bin = Array();\r\n\t\t\tvar mask = (1 << chrsz) - 1;\r\n\t\t\tfor (var i = 0; i < str.length * chrsz; i += chrsz)\r\n\t\t\t\tbin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << (i % 32);\r\n\t\t\treturn bin;\r\n\t\t}\r\n\t\tlet binl2str = (bin) => {\r\n\t\t\tvar str = \"\";\r\n\t\t\tvar mask = (1 << chrsz) - 1;\r\n\t\t\tfor (var i = 0; i < bin.length * 32; i += chrsz)\r\n\t\t\t\tstr += String.fromCharCode((bin[i >> 5] >>> (i % 32)) & mask);\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\tlet binl2hex = (binarray) => {\r\n\t\t\tvar hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\r\n\t\t\tvar str = \"\";\r\n\t\t\tfor (var i = 0; i < binarray.length * 4; i++) {\r\n\t\t\t\tstr += hex_tab.charAt((binarray[i >> 2] >> ((i % 4) * 8 + 4)) & 0xF) +\r\n\t\t\t\t\thex_tab.charAt((binarray[i >> 2] >> ((i % 4) * 8)) & 0xF);\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\tlet binl2b64 = (binarray) => {\r\n\t\t\tvar tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\t\t\tvar str = \"\";\r\n\t\t\tfor (var i = 0; i < binarray.length * 4; i += 3) {\r\n\t\t\t\tvar triplet = (((binarray[i >> 2] >> 8 * (i % 4)) & 0xFF) << 16) |\r\n\t\t\t\t\t(((binarray[i + 1 >> 2] >> 8 * ((i + 1) % 4)) & 0xFF) << 8) |\r\n\t\t\t\t\t((binarray[i + 2 >> 2] >> 8 * ((i + 2) % 4)) & 0xFF);\r\n\t\t\t\tfor (var j = 0; j < 4; j++) {\r\n\t\t\t\t\tif (i * 8 + j * 6 > binarray.length * 32) str += b64pad;\r\n\t\t\t\t\telse str += tab.charAt((triplet >> 6 * (3 - j)) & 0x3F);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\treturn hex_md5(str);\r\n\t}\r\n\r\n\tprivate MD5(instring) {\r\n\t\tvar hexcase = 0;   /* hex output format. 0 - lowercase; 1 - uppercase        */\r\n\t\tvar b64pad = \"\";  /* base-64 pad character. \"=\" for strict RFC compliance   */\r\n\r\n\t\t/*\r\n\t\t * These are the functions you'll usually want to call\r\n\t\t * They take string arguments and return either hex or base-64 encoded strings\r\n\t\t */\r\n\t\tfunction hex_md5(s) { return rstr2hex(rstr_md5(str2rstr_utf8(s))); }\r\n\t\tfunction b64_md5(s) { return rstr2b64(rstr_md5(str2rstr_utf8(s))); }\r\n\t\tfunction any_md5(s, e) { return rstr2any(rstr_md5(str2rstr_utf8(s)), e); }\r\n\t\tfunction hex_hmac_md5(k, d) { return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))); }\r\n\t\tfunction b64_hmac_md5(k, d) { return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d))); }\r\n\t\tfunction any_hmac_md5(k, d, e) { return rstr2any(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)), e); }\r\n\r\n\t\t/*\r\n\t\t * Perform a simple self-test to see if the VM is working\r\n\t\t */\r\n\t\tfunction md5_vm_test() {\r\n\t\t\treturn hex_md5(\"abc\").toLowerCase() == \"900150983cd24fb0d6963f7d28e17f72\";\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Calculate the MD5 of a raw string\r\n\t\t */\r\n\t\tfunction rstr_md5(s) {\r\n\t\t\treturn binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Calculate the HMAC-MD5, of a key and some data (raw strings)\r\n\t\t */\r\n\t\tfunction rstr_hmac_md5(key, data) {\r\n\t\t\tvar bkey = rstr2binl(key);\r\n\t\t\tif (bkey.length > 16) bkey = binl_md5(bkey, key.length * 8);\r\n\r\n\t\t\tvar ipad = Array(16), opad = Array(16);\r\n\t\t\tfor (var i = 0; i < 16; i++) {\r\n\t\t\t\tipad[i] = bkey[i] ^ 0x36363636;\r\n\t\t\t\topad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n\t\t\t}\r\n\r\n\t\t\tvar hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\r\n\t\t\treturn binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert a raw string to a hex string\r\n\t\t */\r\n\t\tfunction rstr2hex(input) {\r\n\t\t\ttry { hexcase } catch (e) { hexcase = 0; }\r\n\t\t\tvar hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar x;\r\n\t\t\tfor (var i = 0; i < input.length; i++) {\r\n\t\t\t\tx = input.charCodeAt(i);\r\n\t\t\t\toutput += hex_tab.charAt((x >>> 4) & 0x0F)\r\n\t\t\t\t\t+ hex_tab.charAt(x & 0x0F);\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert a raw string to a base-64 string\r\n\t\t */\r\n\t\tfunction rstr2b64(input) {\r\n\t\t\ttry { b64pad } catch (e) { b64pad = ''; }\r\n\t\t\tvar tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar len = input.length;\r\n\t\t\tfor (var i = 0; i < len; i += 3) {\r\n\t\t\t\tvar triplet = (input.charCodeAt(i) << 16)\r\n\t\t\t\t\t| (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0)\r\n\t\t\t\t\t| (i + 2 < len ? input.charCodeAt(i + 2) : 0);\r\n\t\t\t\tfor (var j = 0; j < 4; j++) {\r\n\t\t\t\t\tif (i * 8 + j * 6 > input.length * 8) output += b64pad;\r\n\t\t\t\t\telse output += tab.charAt((triplet >>> 6 * (3 - j)) & 0x3F);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert a raw string to an arbitrary string encoding\r\n\t\t */\r\n\t\tfunction rstr2any(input, encoding) {\r\n\t\t\tvar divisor = encoding.length;\r\n\t\t\tvar i, j, q, x, quotient;\r\n\r\n\t\t\t/* Convert to an array of 16-bit big-endian values, forming the dividend */\r\n\t\t\tvar dividend = Array(Math.ceil(input.length / 2));\r\n\t\t\tfor (i = 0; i < dividend.length; i++) {\r\n\t\t\t\tdividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Repeatedly perform a long division. The binary array forms the dividend,\r\n\t\t\t * the length of the encoding is the divisor. Once computed, the quotient\r\n\t\t\t * forms the dividend for the next step. All remainders are stored for later\r\n\t\t\t * use.\r\n\t\t\t */\r\n\t\t\tvar full_length = Math.ceil(input.length * 8 /\r\n\t\t\t\t(Math.log(encoding.length) / Math.log(2)));\r\n\t\t\tvar remainders = Array(full_length);\r\n\t\t\tfor (j = 0; j < full_length; j++) {\r\n\t\t\t\tquotient = Array();\r\n\t\t\t\tx = 0;\r\n\t\t\t\tfor (i = 0; i < dividend.length; i++) {\r\n\t\t\t\t\tx = (x << 16) + dividend[i];\r\n\t\t\t\t\tq = Math.floor(x / divisor);\r\n\t\t\t\t\tx -= q * divisor;\r\n\t\t\t\t\tif (quotient.length > 0 || q > 0)\r\n\t\t\t\t\t\tquotient[quotient.length] = q;\r\n\t\t\t\t}\r\n\t\t\t\tremainders[j] = x;\r\n\t\t\t\tdividend = quotient;\r\n\t\t\t}\r\n\r\n\t\t\t/* Convert the remainders to the output string */\r\n\t\t\tvar output = \"\";\r\n\t\t\tfor (i = remainders.length - 1; i >= 0; i--)\r\n\t\t\t\toutput += encoding.charAt(remainders[i]);\r\n\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Encode a string as utf-8.\r\n\t\t * For efficiency, this assumes the input is valid utf-16.\r\n\t\t */\r\n\t\tfunction str2rstr_utf8(input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tvar i = -1;\r\n\t\t\tvar x, y;\r\n\r\n\t\t\twhile (++i < input.length) {\r\n\t\t\t\t/* Decode utf-16 surrogate pairs */\r\n\t\t\t\tx = input.charCodeAt(i);\r\n\t\t\t\ty = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;\r\n\t\t\t\tif (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {\r\n\t\t\t\t\tx = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* Encode output as utf-8 */\r\n\t\t\t\tif (x <= 0x7F)\r\n\t\t\t\t\toutput += String.fromCharCode(x);\r\n\t\t\t\telse if (x <= 0x7FF)\r\n\t\t\t\t\toutput += String.fromCharCode(0xC0 | ((x >>> 6) & 0x1F),\r\n\t\t\t\t\t\t0x80 | (x & 0x3F));\r\n\t\t\t\telse if (x <= 0xFFFF)\r\n\t\t\t\t\toutput += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),\r\n\t\t\t\t\t\t0x80 | ((x >>> 6) & 0x3F),\r\n\t\t\t\t\t\t0x80 | (x & 0x3F));\r\n\t\t\t\telse if (x <= 0x1FFFFF)\r\n\t\t\t\t\toutput += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),\r\n\t\t\t\t\t\t0x80 | ((x >>> 12) & 0x3F),\r\n\t\t\t\t\t\t0x80 | ((x >>> 6) & 0x3F),\r\n\t\t\t\t\t\t0x80 | (x & 0x3F));\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Encode a string as utf-16\r\n\t\t */\r\n\t\tfunction str2rstr_utf16le(input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tfor (var i = 0; i < input.length; i++)\r\n\t\t\t\toutput += String.fromCharCode(input.charCodeAt(i) & 0xFF,\r\n\t\t\t\t\t(input.charCodeAt(i) >>> 8) & 0xFF);\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\tfunction str2rstr_utf16be(input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tfor (var i = 0; i < input.length; i++)\r\n\t\t\t\toutput += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,\r\n\t\t\t\t\tinput.charCodeAt(i) & 0xFF);\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert a raw string to an array of little-endian words\r\n\t\t * Characters >255 have their high-byte silently ignored.\r\n\t\t */\r\n\t\tfunction rstr2binl(input) {\r\n\t\t\tvar output = Array(input.length >> 2);\r\n\t\t\tfor (var i = 0; i < output.length; i++)\r\n\t\t\t\toutput[i] = 0;\r\n\t\t\tfor (var i = 0; i < input.length * 8; i += 8)\r\n\t\t\t\toutput[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Convert an array of little-endian words to a string\r\n\t\t */\r\n\t\tfunction binl2rstr(input) {\r\n\t\t\tvar output = \"\";\r\n\t\t\tfor (var i = 0; i < input.length * 32; i += 8)\r\n\t\t\t\toutput += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Calculate the MD5 of an array of little-endian words, and a bit length.\r\n\t\t */\r\n\t\tfunction binl_md5(x, len) {\r\n\t\t\t/* append padding */\r\n\t\t\tx[len >> 5] |= 0x80 << ((len) % 32);\r\n\t\t\tx[(((len + 64) >>> 9) << 4) + 14] = len;\r\n\r\n\t\t\tvar a = 1732584193;\r\n\t\t\tvar b = -271733879;\r\n\t\t\tvar c = -1732584194;\r\n\t\t\tvar d = 271733878;\r\n\r\n\t\t\tfor (var i = 0; i < x.length; i += 16) {\r\n\t\t\t\tvar olda = a;\r\n\t\t\t\tvar oldb = b;\r\n\t\t\t\tvar oldc = c;\r\n\t\t\t\tvar oldd = d;\r\n\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 0], 7, -680876936);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n\t\t\t\ta = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n\t\t\t\td = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n\t\t\t\tc = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n\t\t\t\tb = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 0], 20, -373897302);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n\t\t\t\ta = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n\t\t\t\td = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n\t\t\t\tc = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n\t\t\t\tb = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 0], 11, -358537222);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n\t\t\t\ta = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n\t\t\t\td = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n\t\t\t\tc = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n\t\t\t\tb = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 0], 6, -198630844);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n\t\t\t\ta = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n\t\t\t\td = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n\t\t\t\tc = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n\t\t\t\tb = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n\r\n\t\t\t\ta = safe_add(a, olda);\r\n\t\t\t\tb = safe_add(b, oldb);\r\n\t\t\t\tc = safe_add(c, oldc);\r\n\t\t\t\td = safe_add(d, oldd);\r\n\t\t\t}\r\n\t\t\treturn Array(a, b, c, d);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * These functions implement the four basic operations the algorithm uses.\r\n\t\t */\r\n\t\tfunction md5_cmn(q, a, b, x, s, t) {\r\n\t\t\treturn safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\r\n\t\t}\r\n\t\tfunction md5_ff(a, b, c, d, x, s, t) {\r\n\t\t\treturn md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n\t\t}\r\n\t\tfunction md5_gg(a, b, c, d, x, s, t) {\r\n\t\t\treturn md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n\t\t}\r\n\t\tfunction md5_hh(a, b, c, d, x, s, t) {\r\n\t\t\treturn md5_cmn(b ^ c ^ d, a, b, x, s, t);\r\n\t\t}\r\n\t\tfunction md5_ii(a, b, c, d, x, s, t) {\r\n\t\t\treturn md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Add integers, wrapping at 2^32. This uses 16-bit operations internally\r\n\t\t * to work around bugs in some JS interpreters.\r\n\t\t */\r\n\t\tfunction safe_add(x, y) {\r\n\t\t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n\t\t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n\t\t\treturn (msw << 16) | (lsw & 0xFFFF);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Bitwise rotate a 32-bit number to the left.\r\n\t\t */\r\n\t\tfunction bit_rol(num, cnt) {\r\n\t\t\treturn (num << cnt) | (num >>> (32 - cnt));\r\n\t\t}\r\n\r\n\t\treturn hex_md5(instring);\r\n\t}\r\n\r\n\tpublic get(path: string, data: any, handler: any, extraUrl?: string): XMLHttpRequest {\r\n\t\t// var xhr = cc.loader.getXMLHttpRequest();\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.timeout = 5000;\r\n\t\tvar str = \"?\";\r\n\t\tfor (let k in data) {\r\n\t\t\tif (str != \"?\") {\r\n\t\t\t\tstr += \"&\";\r\n\t\t\t}\r\n\t\t\tstr += `${k}=${data[k]}`;\r\n\t\t}\r\n\t\tif (extraUrl == null) extraUrl = GHttpClient.url;\r\n\t\tvar requestURL = extraUrl + path + str;\r\n\t\txhr.open('GET', requestURL, true);\r\n\t\t// if (cc.sys.isNative){\r\n\t\t//     xhr.setRequestHeader(\"Accept-Encoding\",\"gzip,deflate\");\r\n\t\t//     xhr.setRequestHeader(\"CONTENT-TYPE\", \"text/html;charset=UTF-8\");\r\n\t\t// }\r\n\t\txhr.onreadystatechange = () => {\r\n\t\t\tif (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar ret = JSON.parse(xhr.responseText);\r\n\t\t\t\t\tif (handler !== null) {\r\n\t\t\t\t\t\thandler(null, ret);\r\n\t\t\t\t\t}                        /* code */\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (handler !== null) {\r\n\t\t\t\t\t\thandler(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfinally {\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\txhr.send();\r\n\t\treturn xhr;\r\n\t}\r\n}\r\n\r\nexport const Http = http._instance;\r\n","// import { Notifications } from '../notifications';\r\n\r\nimport { Http } from \"./weHttp\";\r\n\r\nclass networkMgr {\r\n\t////////////////////////////\r\n\t// 类成员\r\n\t///////////////////////////\r\n\tpublic static readonly _instance = new networkMgr();\r\n\t/** 消息ID */\r\n\tprivate mid = 0;\r\n\t/** 消息队列 */\r\n\tprivate messageList: any = {};\r\n\t/** 每条消息最多的发送次数 */\r\n\tprivate limitMessageNum = 5;\r\n\t/** 时间 */\r\n\tprivate timer: number | null = null;\r\n\t/** token */\r\n\tprivate token = '';\r\n\t/** 消息锁: false, 可以正常发送消息，已上锁 */\r\n\tprivate isLock = false;\r\n\tprivate _dealHeadListener: Function | null = null;\r\n\t/** 加密规则 */\r\n\tprivate _encryptRule = ['mid:', 'uid:', 'key:', 'data:'];\r\n\t/** 加密code, 服务端客户端要统一 */\r\n\tprivate _encryptCode = 'zqkg';\r\n\t/** 计时时间: 1s */\r\n\tprivate _intervalTime = 3000;\r\n\t/** 服务器报错 */\r\n\tprivate _errorServerCode = 500;\r\n\t/** 成功回包code */\r\n\tprivate _successCode = 0;\r\n\t/** 重起游戏的错误码 */\r\n\tprivate _errorRestartGameCode = [102];\r\n\t/** 错误码列表 */\r\n\tprivate _errorNetCode: any = {};\r\n\t/** 超过时间 */\r\n\tprivate _overTime = 5000;\r\n\t/** uid */\r\n\tprivate _uid = 0;\r\n\r\n\tprivate lastMessage = null;\r\n\t////////////////////////////\r\n\t// get、set构造器\r\n\t///////////////////////////\r\n\tpublic set errorNetCode(codes: Object) {\r\n\t\tthis._errorNetCode = codes;\r\n\t}\r\n\r\n\tpublic set encryptCode(str: string) {\r\n\t\tthis._encryptCode = str;\r\n\t}\r\n\r\n\tpublic set errorRestartGameCode(array: Array<number>) {\r\n\t\tthis._errorRestartGameCode = array;\r\n\t}\r\n\r\n\tpublic set successCode(code: number) {\r\n\t\tthis._successCode = code;\r\n\t}\r\n\r\n\tpublic set errorServerCode(code: number) {\r\n\t\tthis._errorServerCode = code;\r\n\t}\r\n\r\n\tpublic set encryptRule(array: Array<string>) {\r\n\t\tthis._encryptRule = array;\r\n\t}\r\n\r\n\tpublic set intervalTime(time: number) {\r\n\t\tthis._intervalTime = time;\r\n\t}\r\n\r\n\tpublic set overTime(time: number) {\r\n\t\tthis._overTime = time;\r\n\t}\r\n\r\n\tpublic set dealHeadListener(cb: Function) {\r\n\t\tthis._dealHeadListener = cb;\r\n\t}\r\n\r\n\tpublic set uid(uid: number) {\r\n\t\tthis._uid = uid;\r\n\t}\r\n\t////////////////////////////\r\n\t// 接口\r\n\t///////////////////////////\r\n\tpublic constructor() {\r\n\t\tthis.mid = 0;\r\n\t\tthis.messageList = {};\r\n\t\tthis.timer = null;\r\n\t}\r\n\t/**\r\n\t * @description 发送xhr消息\r\n\t * @param {string} _route\r\n\t * @param {Object} data\r\n\t * @param {Function} cb\r\n\t * @param isRepeat 是否重复发送事件\r\n\t * @param fail 失败回调\r\n\t */\r\n\tpublic xhrPost(_route: string, data: Object, cb?: Function, fail?: Function, isRepeat = false) {\r\n\t\tthis.mid += 1;\r\n\t\t// 包\r\n\t\tlet msg = {\r\n\t\t\thead: {\r\n\t\t\t\troute: _route,\r\n\t\t\t\tmid: this.mid.toString(),\r\n\t\t\t\tuid: this._uid\r\n\t\t\t},\r\n\t\t\tbody: data\r\n\t\t};\r\n\t\t// 消息队列的数据结构\r\n\t\tlet netPackage = new NetworkPackage();\r\n\t\tnetPackage.route = _route;\r\n\t\tnetPackage.mid = this.mid;\r\n\t\tnetPackage.data = msg;\r\n\t\tif (cb) {\r\n\t\t\tnetPackage.callback = cb;\r\n\t\t}\r\n\t\tnetPackage.isRepeat = isRepeat;\r\n\t\tif (fail) {\r\n\t\t\tnetPackage.failCallBack = fail;\r\n\t\t}\r\n\t\tthis.messageList[this.mid] = netPackage;\r\n\t\t// 开始计时\r\n\t\tthis.startTimer();\r\n\t\tif (!this.isLock) {\r\n\t\t\tthis.sendMessage(this.mid);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 检查回包\r\n\t * @param _respone\r\n\t */\r\n\tpublic checkRespone(route: any, _respone: any, mid: any) {\r\n\t\t// 解密\r\n\t\tlet respone: any = this.jsdecrypt(_respone);\r\n\t\tlet data = respone;\r\n\t\t// if (respone.result) {\r\n\t\t// \tdata = this.jsdecrypt(respone.result);\r\n\t\t// }\r\n\t\t// respone = this.jsdecrypt(respone);\r\n\t\t// let head: any = respone.head;\r\n\t\t// let body: any = respone.body;\r\n\t\t// let code = head.code || 0;\r\n\t\t// let mid = 0;\r\n\t\t// 刷新token\r\n\t\t// this.token = head.token;\r\n\t\tlet message = this.messageList[mid];\r\n\t\t// 头部回包处理\r\n\t\t// this.succeedResponeHead(head);\r\n\t\t// 服务端回包，返回需要的数据\r\n\t\t// if (code === this._successCode) {\r\n\t\tthis.succeedResponeBody(message, data, mid);\r\n\t\t// 服务端回包中出现错误码\r\n\t\t// } else {\r\n\t\t// this.checkErrorCode(code, mid);\r\n\t\t// }\r\n\t}\r\n\r\n\tprivate succeedResponeHead(head: any) {\r\n\t\tif (this._dealHeadListener)\r\n\t\t\tthis._dealHeadListener(head);\r\n\t}\r\n\t////////////////////////////\r\n\t// 业务逻辑\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 没有错误信息，把服务端数据发送到业务逻辑层\r\n\t * @param message\r\n\t * @param body\r\n\t * @param mid\r\n\t */\r\n\tprivate succeedResponeBody(message: any, body: any, mid: number) {\r\n\t\tthis.isLock = false;\r\n\t\tthis.clearTimer();\r\n\t\tthis.deleteMessageListItem(mid, false);\r\n\t\tthis.checkNextMessage();\r\n\t\tif (message && message.callback) {\r\n\t\t\tmessage.callback(body);\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * @description 网络消息code检查\r\n\t * @param code 错误码；需要和服务端协定\r\n\t * @param mid\r\n\t */\r\n\tprivate checkErrorCode(code: number, mid: number) {\r\n\t\t// 收到消息500 则继续重发直到发送次数限制.\r\n\t\tif (code !== this._errorServerCode) {\r\n\t\t\tthis.deleteMessageListItem(mid, true);\r\n\t\t}\r\n\t\t// 重启游戏\r\n\t\tfor (let index = 0; index < this._errorRestartGameCode.length; index++) {\r\n\t\t\tlet errorCode = this._errorRestartGameCode[index];\r\n\t\t\tif (code === errorCode) {\r\n\t\t\t\tthis.restartGame();\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet resultStr = this.getErrorCodeMeaning(code);\r\n\t\tconsole.error(\"----> 返回错误, code:\", code, resultStr);\r\n\t\t// TODO: 把错误码信息返回给业务逻辑\r\n\t\t// Notifications.emit('sys_http_error', { code: code, mid: mid });\r\n\t}\r\n\r\n\tprivate checkNextMessage() {\r\n\t\tfor (let key in this.messageList) {\r\n\t\t\tlet message = this.messageList[key];\r\n\t\t\tif (message.sendNum === 0) {\r\n\t\t\t\tthis.sendMessage(message.mid);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 删除消息队列中的元素\r\n\t * @param mid\r\n\t * @param fail 是否是失败\r\n\t */\r\n\tprivate deleteMessageListItem(mid: number, fail: boolean) {\r\n\t\tif (this.messageList && this.messageList[mid]) {\r\n\t\t\tif (this.messageList[mid].failCallBack && fail) {\r\n\t\t\t\tthis.messageList[mid].failCallBack();\r\n\t\t\t}\r\n\t\t\tdelete this.messageList[mid];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 数据加密（需要和服务端约定）\r\n\t * @param data\r\n\t//  */\r\n\t// private jsencrypt(data: any) {\r\n\t// \t// let head = data.head;\r\n\t// \t// let body = JSON.stringify(data.body);\r\n\t// \t// let encryptData = `${this._encryptRule[0]}${head.mid}&${this._encryptRule[1]}${head.uid}&${this._encryptRule[2]}${this._encryptCode}&${this._encryptRule[3]}${body}`;\r\n\t// \t// data.head.mi = Sha1.hex_hmac_sha1(this._encryptCode, encryptData).slice(5);\r\n\t// \treturn data;\r\n\t// }\r\n\r\n\t/**\r\n\t * @description 解密\r\n\t * @param _data\r\n\t */\r\n\tprivate jsdecrypt(_data: any) {\r\n\t\tlet obj = null;\r\n\t\tif (typeof _data == 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tobj = JSON.parse(_data);\r\n\t\t\t} catch (e) {\r\n\t\t\t}\r\n\t\t}\r\n\t\t// if (obj.result && obj) {\r\n\t\t// \tobj.result = window.DES3.decrypt(global.DES3_KEY, obj.result);\r\n\t\t// }\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t/**\r\n\t * @description 发送消息队列\r\n\t * @param {number} mid\r\n\t * @param {number} isCheck 是否检查包的发送次数是否超过上限\r\n\t */\r\n\tprivate sendMessage(mid: number, isCheck: boolean = true) {\r\n\t\t// 消息队列为空\r\n\t\tif (Object.keys(this.messageList).length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet message = this.messageList[mid];\r\n\t\t// 一条消息的发送次数大于限制次数，建议重启游戏\r\n\t\tif (isCheck && message.sendNum >= this.limitMessageNum\r\n\t\t\t|| !isCheck && message.errorNum >= this.limitMessageNum) {\r\n\t\t\tconsole.error(message.data.head.route, 'message send too much times');\r\n\t\t\tthis.deleteMessageListItem(mid, false);\r\n\t\t\t// Notifications.emit('sys_http_try_too_many_time');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tmessage.sendNum += 1;\r\n\t\tlet data = message.data;\r\n\t\tlet route = data.head.route;\r\n\t\tdata.head.token = this.token;\r\n\t\t// 加密\r\n\t\tthis.lastMessage = message;\r\n\t\tHttp.post(route, data.body, mid);\r\n\t}\r\n\r\n\t/**\r\n\t * @description 获取错误码对应的意思\r\n\t * @param code\r\n\t */\r\n\tprivate getErrorCodeMeaning(code: number) {\r\n\t\tlet errStr = this._errorNetCode[code];\r\n\t\tlet resultStr = errStr;\r\n\t\tif (!errStr) {\r\n\t\t\tresultStr = `服务器错误码： ${code}`;\r\n\t\t}\r\n\t\treturn resultStr;\r\n\t}\r\n\r\n\t/**\r\n\t * @description 重起游戏\r\n\t */\r\n\tprivate restartGame() {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @description 开始定时器\r\n\t */\r\n\tprivate startTimer() {\r\n\t\tif (!this.timer) {\r\n\t\t\tthis.timer = setInterval(this.checkPackage.bind(this), this._intervalTime);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 检查发包\r\n\t */\r\n\tprivate checkPackage() {\r\n\t\tif (Object.keys(this.messageList).length !== 0) {\r\n\t\t\tfor (let key in this.messageList) {\r\n\t\t\t\tlet message = this.messageList[key];\r\n\t\t\t\tlet time = Date.now();\r\n\t\t\t\tif (time - message.time > this._overTime && message.isRepeat) {\r\n\t\t\t\t\tlet mid = message.mid;\r\n\t\t\t\t\tthis.sendMessage(mid);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.deleteMessageListItem(message.mid, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.clearTimer();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 清理定时器\r\n\t */\r\n\tprivate clearTimer() {\r\n\t\tif (this.timer) {\r\n\t\t\tclearInterval(this.timer);\r\n\t\t\tthis.timer = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * http请求err处理\r\n\t * @param mid 消息id\r\n\t * @param error 错误内容\r\n\t * @param tip 错误提示文本\r\n\t */\r\n\tpublic onHttpError(mid: any, error?: any, tip?: string): void {\r\n\t\tif (tip)\r\n\t\t\tconsole.error(\"----> onHttpError\", tip, error);\r\n\t\telse\r\n\t\t\tconsole.error(\"----> onHttpError\", error);\r\n\r\n\t\tlet pack: NetworkPackage = this.messageList[mid];\r\n\t\tif (pack) {\r\n\t\t\t//如果需要重复\r\n\t\t\tif (pack.isRepeat) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tpack.errorNum++\r\n\t\t\t\t\tthis.sendMessage(mid, false);\r\n\t\t\t\t}, 3000);\r\n\t\t\t} else {\r\n\t\t\t\tthis.deleteMessageListItem(mid, true);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport const NetworkMgr = networkMgr._instance;\r\n\r\n/**\r\n * NetworkPackage\r\n * 网络包\r\n */\r\n\r\n// main\r\nexport default class NetworkPackage {\r\n\tpublic route: string = '';\r\n\tpublic lock: boolean = false;\r\n\tpublic mid: number = 0;\r\n\tpublic data: any = null;\r\n\t/**接口成功回调 */\r\n\tpublic callback: Function | null = null;\r\n\t/**接口失败回调 */\r\n\tpublic failCallBack: Function | null = null;\r\n\r\n\tpublic time: number = 0;\r\n\tpublic sendNum: number = 0;\r\n\tpublic errorNum: number = 0;\r\n\t/**是否重复调用 */\r\n\tpublic isRepeat: boolean = false;\r\n\r\n\tpublic constructor(msg?: any) {\r\n\t\tthis.time = Date.now();\r\n\r\n\t\tfor (let key in msg) {\r\n\t\t\tlet that = this as any\r\n\t\t\tthat[key] = msg[key];\r\n\t\t}\r\n\t}\r\n};\r\n","import { director, _decorator } from 'cc';\r\nimport { NATIVE } from 'cc/env';\r\nimport { tyqSDK } from '../tyqSDK';\r\nimport { GLoginState, GNetCmd } from './conf';\r\nimport ServerCtr from './ServerCtr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('WmSocket')\r\nexport class WmSocket {\r\n\teventHandlers: any = [];\r\n\r\n\tpublic lastHeartbeatTime: number = 0;\r\n\tpublic isWsConnect: boolean = false;\r\n\tws: WebSocket = null!;\r\n\twxws: any = null;\r\n\r\n\tmsgBuff: any = {}; //key为stickId, val为stick数组\r\n\t// Stick_Id = \"stick_id\"\r\n\t// Stick_Len = \"stick_len\"\r\n\t// Stick_No = \"stick_no\" //服务端不处理，只判断字符总长度，前端自己用是否发送结束\r\n\t// Stick_Body = \"stick_val\"\r\n\t/**\r\n\t * 单例\r\n\t */\r\n\tprivate static _instance: WmSocket;\r\n\tpublic static getInstance(): WmSocket {\r\n\t\tif (!this._instance) {\r\n\t\t\tthis._instance = new WmSocket();\r\n\t\t}\r\n\t\treturn this._instance;\r\n\t}\r\n\r\n\tprivate isFirst = true;\r\n\r\n\tconstructor() {\r\n\t\tthis.addListener();\r\n\t}\r\n\r\n\taddListener() {\r\n\t\tdirector.on(\"ws_reconnect\", this.onReconnect, this);\r\n\t\tdirector.on(\"ws_close\", this.onClose, this);\r\n\t\tdirector.on(GNetCmd.StickPack, this.respStickPack, this)\r\n\t}\r\n\r\n\trespStickPack(data: any) {\r\n\t\t// cc.log(\"粘包接受情况--\", data)\r\n\t\tif (data[\"isEnd\"] == false) {\r\n\t\t\tthis.sendStickPack(data[\"stick_id\"], data[\"idx\"] + 1)\r\n\t\t} else {\r\n\t\t\tdelete this.msgBuff[data[\"stick_id\"]] //清空本地缓存\r\n\t\t}\r\n\t}\r\n\r\n\tgetGuid() {\r\n\t\tlet d = new Date().getTime();\r\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n\t\t\tlet r = (d + Math.random() * 16) % 16 | 0;\r\n\t\t\td = Math.floor(d / 16);\r\n\t\t\treturn (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n\t\t});\r\n\t}\r\n\r\n\tgetTotalLen(arr: any[]) {\r\n\t\tlet len = 0;\r\n\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\tlen += arr[i].length;\r\n\t\t}\r\n\t\treturn len;\r\n\t}\r\n\r\n\tsendStickPack(uuid: string, i: number) {\r\n\t\tlet data = {\r\n\t\t\t\"cmd\": GNetCmd.StickPack,\r\n\t\t\t\"stick_id\": uuid,\r\n\t\t\t\"stick_len\": this.getTotalLen(this.msgBuff[uuid]),\r\n\t\t\t\"stick_val\": this.msgBuff[uuid][i],\r\n\t\t\t\"isEnd\": i == this.msgBuff[uuid].length - 1,\r\n\t\t\t\"isStart\": i == 0,\r\n\t\t\t\"idx\": i\r\n\t\t}\r\n\t\t// cc.log(\"分段存储\", data)\r\n\t\tWmSocket.getInstance().sendSP(JSON.stringify(data));\r\n\t}\r\n\r\n\tonReconnect() {\r\n\t\t// 重连..\r\n\t\tif (this.isFirst) {\r\n\t\t\tthis.isFirst = false;\r\n\t\t\tthis.connect();\r\n\t\t\tconsole.log(\"发起第一次连-------\")\r\n\t\t} else {\r\n\t\t\tif (!this.isConnected()) {\r\n\t\t\t\tthis.connect();\r\n\t\t\t\tconsole.log(\"发起重连-------\")\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonClose() {\r\n\t\t// 断开连接..\r\n\t\tif (!this.isConnected()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!WmSocket.getInstance().isWsConnect) {\r\n\t\t\tthis.ws.close();\r\n\t\t} else {\r\n\t\t\tthis.wxws.close();\r\n\t\t}\r\n\t}\r\n\r\n\tconnect() {\r\n\t\tthis.ws_connect();\r\n\t}\r\n\r\n\tws_connect() {\r\n\t\tconsole.log(\"ws_connect...........................\")\r\n\t\ttry {\r\n\t\t\t// let cerUrl = cc.url.raw('resources/ssl/fishing.cer');\r\n\t\t\t// if (cc.loader.md5Pipe) {\r\n\t\t\t// \tcerUrl = cc.loader.md5Pipe.transformURL(cerUrl);\r\n\t\t\t// }\r\n\t\t\t// this._socket = new WebSocket(this._url, [], cerUrl);\r\n\r\n\t\t\t// let pemUrl = cc.url.raw(\"resources/ssl/5556166_obeliskgames.cn.cer\");\r\n\t\t\t// cc.log(pemUrl)\r\n\t\t\t// pemUrl = cc.loader.md5Pipe.transformURL(pemUrl)\r\n\t\t\t// cc.log(pemUrl)\r\n\t\t\t// this.ws = new WebSocket(gl.ws_url,  pemUrl);\r\n\r\n\t\t\tif (NATIVE) {\r\n\t\t\t\t// let pemUrl = ;\r\n\t\t\t\t// pemUrl = loader.md5Pipe.transformURL(pemUrl)\r\n\r\n\t\t\t\t// let cerUrl = url.raw(\"resources/ssl/Digicert-OV-DV-root.cer\");\r\n\t\t\t\t// if (loader.md5Pipe) {\r\n\t\t\t\t// \tcerUrl = loader.md5Pipe.transformURL(cerUrl);\r\n\t\t\t\t// }\r\n\t\t\t\t// this.ws = new WebSocket(gl.ws_url, null, cerUrl);\r\n\r\n\t\t\t\tthis.ws = new WebSocket(tyqSDK.getUrl().wsUrl); // GNetConf.mrtgd_WsUrl\r\n\r\n\t\t\t\t// assetManager.getBundle('resources').load(\"ssl/www.obeliskgames.cn.cer\", Asset, (err,res)=>{\r\n\t\t\t\t// \t// let pemUrl = url.raw(\"resources/5556166_obeliskgames.cn.cer\");\r\n\t\t\t\t// \t// pemUrl = loader.md5Pipe.transformURL(pemUrl)\r\n\t\t\t\t// \tthis.ws = new WebSocket(gl.ws_url,  res.nativeUrl);\r\n\t\t\t\t// });\r\n\t\t\t} else {\r\n\t\t\t\tthis.ws = new WebSocket(tyqSDK.getUrl().wsUrl);\r\n\t\t\t}\r\n\r\n\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"网络连接异常 --- exception---------------- \", e);\r\n\t\t}\r\n\r\n\t\tthis.ws.onopen = (event) => {\r\n\t\t\tthis.isWsConnect = true;\r\n\t\t\tconsole.log(\"Send Text WS was opened.\");\r\n\t\t\tServerCtr.GetInstance().wxLoginBegin();\r\n\t\t\t// console.log(\"onopen this.ws.readyState:\",this.ws.readyState);\r\n\t\t\t// Notifications.emit(\"ws_connect\",{type:'connect'});\r\n\t\t};\r\n\t\tthis.ws.onmessage = (event) => {\r\n\t\t\t// console.log(\"response text msg: \" + event.data, event.data.toString());\r\n\t\t\t// console.log(\"onmessage this.ws.readyState:\",this.ws.readyState);\r\n\t\t\tthis.onMessage(event.data);\r\n\t\t};\r\n\t\tthis.ws.onerror = (event) => {\r\n\t\t\tconsole.error(\"Send Text fired an error\", event);\r\n\t\t\tServerCtr.GetInstance().loginState = GLoginState.loginWithoutAccount;\r\n\t\t\t// console.log(\"onerror this.ws.readyState:\",this.ws.readyState);\r\n\t\t\t// Notifications.emit(\"ws_connect\",{type:'disconnect'});\r\n\t\t};\r\n\t\tthis.ws.onclose = (event) => {\r\n\t\t\tthis.isWsConnect = false;\r\n\t\t\tconsole.log(\"WebSocket instance closed.\");\r\n\t\t\tServerCtr.GetInstance().loginState = GLoginState.loginWithoutAccount;\r\n\t\t\t// console.log(\"onclose this.ws.readyState:\",this.ws.readyState);\r\n\t\t\t// Notifications.emit(\"ws_connect\",{type:'disconnect'});\r\n\t\t};\r\n\t}\r\n\r\n\r\n\tonMessage(resp: string) {\r\n\t\tlet respJson = JSON.parse(resp)\r\n\t\t// log(\"onMessage resp base64解开后JSON对象:\", respJson)\r\n\t\t// console.log(\"onMessage resp:\", respJson.cmd, respJson)\r\n\t\tdirector.emit(respJson.cmd + \"\", respJson)\r\n\t}\r\n\r\n\tisConnected() {\r\n\t\treturn this.isWsConnect;\r\n\t}\r\n\tsendSP(jsonData: string) {\r\n\t\tif (!this.isConnected()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.ws.send(jsonData)//NetMgr.getInstance ().jsencrypt()\r\n\t}\r\n\r\n\tsend(netdata: any) {\r\n\t\t// log(\"###isConnected :\",this.isConnected())\r\n\t\tif (!this.isConnected()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//以下是粘包处理\r\n\t\tlet jsonData = JSON.stringify(netdata.data);\r\n\t\tlet ontTimeLimit = 109586 / 5  //这里差不错20k 109586/5，必须小于80k\r\n\t\t// log(\"-------粘包-------\", jsonData.length, ontTimeLimit, jsonData.length/ontTimeLimit+1)\r\n\t\tif (jsonData.length > ontTimeLimit) {\r\n\t\t\tlet str = jsonData\r\n\t\t\tlet strArr = [];\r\n\t\t\tlet n = jsonData.length / ontTimeLimit + 1;\r\n\t\t\tfor (let i = 0, l = str.length; i < n; i++) {\r\n\t\t\t\tlet a = str.slice(ontTimeLimit * i, ontTimeLimit * (i + 1));\r\n\t\t\t\t// let a = str.substr(i*ontTimeLimit,ontTimeLimit)\r\n\t\t\t\t// log(\"分段存储1111\", a)\r\n\t\t\t\tstrArr.push(a);\r\n\t\t\t}\r\n\t\t\tlet uuid = this.getGuid()\r\n\t\t\tthis.msgBuff[uuid] = strArr\r\n\t\t\tthis.sendStickPack(uuid, 0);\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// let data = JSON.stringify(netdata.data)\r\n\t\t// log(\"### client send data base64处理:\", data)\r\n\t\tthis.ws.send(jsonData) //NetMgr.getInstance ().jsencrypt()\r\n\r\n\t}\r\n\r\n}\r\n\r\n","import { tyqSDK } from \"../../tyqSDK\";\r\n\r\nexport interface IPos {\r\n    left?: number;\r\n    right?: number;\r\n    top?: number;\r\n    bottom?: number;\r\n    centerX?: number;\r\n    centerY?: number;\r\n}\r\n\r\nexport enum EType {\r\n    // * @param type 1矩阵；2横向；3竖向；4单格子\r\n    rect = 1,\r\n    horizontal,\r\n    vertical,\r\n    grid,\r\n}\r\nexport class WXCustomAd {\r\n\r\n    /**原生模板广告矩阵样式id\t */\r\n    public static _customc_rect_adunit = [];\r\n\r\n    /**原生模板广告横向样式id\t */\r\n    public static _customc_h_adunit = [];\r\n\r\n    /**原生模板广告竖向样式id\t */\r\n    public static _customc_v_adunit = [];\r\n\r\n    /**原生模板广告单个样式id\t */\r\n    private static _customc_one_adunit = [];\r\n\r\n    /**广告缓存 */\r\n    private static _ads = {};\r\n\r\n    /** */\r\n    private static _waits = [];\r\n\r\n    private static sysInfo = null;\r\n\r\n    private cb: any;\r\n    static cb: Function;\r\n    /**\r\n     * 设置广告id\r\n     * @param rectid 矩阵样式id\r\n     * @param hid 横向样式id\r\n     * @param vid 竖向样式id\r\n     * @param oneid 单格子样式id\r\n     */\r\n    static setadunit(rectid, hid, vid, oneid) {\r\n        this._customc_rect_adunit = rectid;\r\n        this._customc_h_adunit = hid;\r\n        this._customc_v_adunit = vid;\r\n        this._customc_one_adunit = oneid;\r\n    }\r\n\r\n    /**\r\n     * 创建一个原生广告对象\r\n     * @param flag 创建来源标识（用标识来控制显示和隐藏）\r\n     * @param type 1矩阵；2横向；3竖向；4单格子\r\n     * @param pos 位置(对象可包含left、right、top、bottom、centerX、centerY字段)。分别表示距离左右上下和中心点的距离\r\n     * @param adSize 广告尺寸\r\n     * @param extraId 指定广告id参数\r\n     * @param failcb:当未拉取到广告（目前仅限报1004错误，如拉取其他错误需自行更改回调）之后，可执行回调。 \r\n     * @returns \r\n     */\r\n    static createCustomAd(flag, type: EType, pos: IPos, adSize: { width: number, height: number }, extraId?: any, failcb?: Function) {\r\n        if (!window.wx) return;\r\n        if (!this.sysInfo) {\r\n            this.sysInfo = wx.getSystemInfoSync();\r\n        }\r\n        let version = this.sysInfo.SDKVersion;\r\n        let ad = null;\r\n        let id = \"\";\r\n        let self = this;\r\n\r\n        if (failcb) {\r\n            this.cb = failcb;\r\n        }\r\n\r\n        if (type == 1) {\r\n            id = this._customc_rect_adunit[this.rand(0, this._customc_rect_adunit.length - 1)];\r\n        } else if (type == 2) {\r\n            id = this._customc_h_adunit[this.rand(0, this._customc_h_adunit.length - 1)];\r\n        } else if (type == 3) {\r\n            id = this._customc_v_adunit[this.rand(0, this._customc_v_adunit.length - 1)];\r\n        }\r\n        else if (type == 4) {\r\n            id = this._customc_one_adunit[this.rand(0, this._customc_one_adunit.length - 1)];\r\n        }\r\n        if (extraId && extraId !== \"\") {\r\n            if (typeof extraId == \"string\") {\r\n                id = extraId;\r\n            } else if (extraId instanceof Array) {\r\n                id = extraId[this.rand(0, extraId.length - 1)];\r\n            }\r\n        }\r\n\r\n        //id不存在\r\n        if (id == \"\") return;\r\n\r\n        tyqSDK.log(\"显示原生模板广告\", flag, this._ads, this._waits);\r\n        //缓存有\r\n        if (this._ads[flag]) {\r\n            ad = this._ads[flag];\r\n            tyqSDK.log(\"缓存有\");\r\n            if (!ad.isShow()) ad.show();\r\n        }\r\n        else if (this.compareVersion(version, '2.11.1') >= 0) {\r\n            tyqSDK.log(\"创建原生模板广告\" + flag, \"id:\" + id, \"pos:\", pos);\r\n            let p = self.getPos(adSize, pos);\r\n            ad = wx.createCustomAd({\r\n                adUnitId: id,\r\n                adIntervals: 30,\r\n                style: {\r\n                    top: p.top,\r\n                    left: p.left,\r\n                    width: adSize.width, // 用于设置组件宽度，只有部分模板才支持，如矩阵格子模板\r\n                    fixed: false // fixed 只适用于小程序环境\r\n                }\r\n            })\r\n\r\n            ad.onLoad(() => {\r\n                self._ads[flag] = ad;\r\n                let index = self._waits.indexOf(flag);\r\n                tyqSDK.log(\"原生模板广告加载完成：\" + flag, self._waits, index);\r\n                if (index == -1)\r\n                    ad.show();\r\n                else {\r\n                    self._waits = self._waits.filter(x => x != flag);\r\n                    // self._waits.splice(index, 1);\r\n                    ad.hide().then(() => {\r\n\r\n                    }).catch(() => {\r\n                        // self.hideCustomAd(flag);\r\n                        tyqSDK.log(\"第二次hide\");\r\n                        ad.hide().catch(() => {\r\n                            tyqSDK.log(\"第三次hide\");\r\n                        });\r\n                    });\r\n                }\r\n\r\n            });\r\n            ad.onError((res) => {\r\n                tyqSDK.log('原生模板广告加载失败:', res.errCode, ' ', res.errMsg);\r\n                if (parseInt(res.errCode) === 1004 && this.cb) {\r\n                    tyqSDK.log(\"拉取失败\");\r\n                    this.cb();\r\n                }\r\n            });\r\n            ad.onClose(() => {\r\n                tyqSDK.log(\"原生模板广告关闭\");\r\n            });\r\n        } else {\r\n            // 如果希望用户在最新版本的客户端上体验您的小程序，可以这样子提示\r\n            // wx.showModal({\r\n            //     title: '提示',\r\n            //     content: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'\r\n            // })\r\n        }\r\n    }\r\n\r\n    public static rand(min, max) {\r\n        return min + Math.floor(Math.random() * (max - min + 1));\r\n    }\r\n    \r\n    /**\r\n     * 隐藏原生模板广告\r\n     * @param flag \r\n     */\r\n    public static hideCustomAd(flag) {\r\n        let ad = null;\r\n\r\n        tyqSDK.log(\"隐藏原生模板广告\", flag, this._ads, this._waits);\r\n        if (this._ads[flag]) {\r\n            ad = this._ads[flag];\r\n            if (ad.isShow())\r\n                ad.hide().then(() => {\r\n\r\n                }).catch(() => {\r\n                    // self.hideCustomAd(flag);\r\n                    tyqSDK.log(\"第二次hide\");\r\n                    ad.hide().catch(() => {\r\n                        tyqSDK.log(\"第三次hide\");\r\n                    });\r\n                });\r\n        } else {\r\n            if (this._waits.indexOf(flag) == -1) {\r\n                this._waits.push(flag);\r\n            }\r\n\r\n        }\r\n    }\r\n    public static destroyCustomAd(flag) {\r\n        if (this._ads[flag]) {\r\n            this._ads[flag].destroy();\r\n            this._ads[flag] = null;\r\n        }\r\n    }\r\n\r\n    private static compareVersion(v1, v2) {\r\n        v1 = v1.split('.')\r\n        v2 = v2.split('.')\r\n        const len = Math.max(v1.length, v2.length)\r\n\r\n        while (v1.length < len) {\r\n            v1.push('0')\r\n        }\r\n        while (v2.length < len) {\r\n            v2.push('0')\r\n        }\r\n\r\n        for (let i = 0; i < len; i++) {\r\n            const num1 = parseInt(v1[i])\r\n            const num2 = parseInt(v2[i])\r\n\r\n            if (num1 > num2) {\r\n                return 1\r\n            } else if (num1 < num2) {\r\n                return -1\r\n            }\r\n        }\r\n\r\n        return 0\r\n    }\r\n\r\n    /**\r\n     * 获取实际的位置\r\n     * @param adSize 广告尺寸\r\n     * @param pos 游戏中的相对位置\r\n     * @returns \r\n     */\r\n    private static getPos(adSize: any, pos: IPos) {\r\n        if (!this.sysInfo) {\r\n            this.sysInfo = wx.getSystemInfoSync();\r\n        }\r\n        let sysInfo = this.sysInfo;\r\n        let w = adSize.width;\r\n        let h = adSize.height;\r\n\r\n        let sc_w = sysInfo.windowWidth / cc.winSize.width;\r\n        let sc_h = sysInfo.windowHeight / cc.winSize.height;\r\n\r\n        let l = (sysInfo.windowWidth - w) / 2;\r\n        let t = (sysInfo.windowHeight - h) / 2;\r\n        if (pos && pos.left != undefined) l = pos.left * sc_w;\r\n        if (pos && pos.top != undefined) t = pos.top * sc_h;\r\n        if (pos && pos.right != undefined) l = sysInfo.windowWidth - w - pos.right * sc_w;\r\n        if (pos && pos.bottom != undefined) t = sysInfo.windowHeight - h - pos.bottom * sc_h;\r\n        if (pos && pos.centerX != undefined) l = (sysInfo.windowWidth - w) / 2 + pos.centerX * sc_w;\r\n        if (pos && pos.centerY != undefined) t = (sysInfo.windowHeight - h) / 2 + pos.centerY * sc_h;\r\n\r\n        return {\r\n            left: l,\r\n            top: t\r\n        }\r\n    }\r\n    public static hideAllAd() {\r\n        for (const key in this._ads) {\r\n            this.hideCustomAd(key);\r\n        }\r\n    }\r\n}"]}